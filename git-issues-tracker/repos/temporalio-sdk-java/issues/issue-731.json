{
  "assignees": [],
  "author": {
    "id": "MDQ6VXNlcjUzMjEwOA==",
    "is_bot": false,
    "login": "Spikhalskiy",
    "name": "Dmitry Spikhalsky"
  },
  "body": "## Expected Behavior\r\n\r\nIf Activity \r\n- never noticed and interrupted flag or\r\n-  caught an interrupted exception, restored the interrupted flag, and continued to run or returned a result\r\nshould be reported as Completed with its returned value.\r\n\r\n## Actual Behavior\r\n\r\nAccording to https://github.com/temporalio/sdk-java/pull/722#discussion_r707879325\r\nif activity returns with an interrupted flag turned on, subsequent gRPC calls fail and the Activity result never gets reported.\r\n\r\n## Proposed solution\r\n\r\n- We should write a stable reproducible test close to a test that was changed in https://github.com/temporalio/sdk-java/pull/722\r\n- When Activity returns with interrupted flag = \"true\", we should hide the flag, report the result of Activity execution to the server, and return the flag back after that allowing the thread pool to stop.",
  "closedAt": null,
  "comments": [],
  "createdAt": "2021-09-16T19:03:01Z",
  "labels": [
    {
      "id": "MDU6TGFiZWwxNjIyNzE5ODQx",
      "name": "bug",
      "description": "Something isn't working",
      "color": "d73a4a"
    },
    {
      "id": "LA_kwDODN12PM8AAAABTCzm8g",
      "name": "good first issue",
      "description": "",
      "color": "37F0F1"
    }
  ],
  "milestone": null,
  "number": 731,
  "reactionGroups": [],
  "state": "OPEN",
  "title": "Activities that return with interrupted flag should be successfully reported as Completed",
  "updatedAt": "2024-12-17T21:27:14Z",
  "url": "https://github.com/temporalio/sdk-java/issues/731"
}
