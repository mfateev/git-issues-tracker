{
  "assignees": [],
  "author": {
    "id": "MDQ6VXNlcjUzMjEwOA==",
    "is_bot": false,
    "login": "Spikhalskiy",
    "name": "Dmitry Spikhalsky"
  },
  "body": "**Is your feature request related to a problem? Please describe.**\r\nThe current Context propagator interface doesn't have an access to a reference to an entity it propagates to. For example a workflow or an activity instance. This doesn't allow the Context Propagator to get access to setters in the class.\r\nContextPropagator also is not aware if it propagates into a workflow or an activity at all, which makes it impossible to decide it `WorkflowThreadLocal` (`WorkflowLocal`) or a regular `ThreadLocal` should be used. \r\nSee \r\nIf `ThreadLocal` is used, ContextPropagator should have a lifecycle method to be able to clean the `ThreadLocal`. For example, a method that will be triggered at the end of an activity method.\r\n\r\n**Describe the solution you'd like**\r\n`ContextPropagator` should be reimplemented as Interceptors from scratch and its design should be reimplemented taking into account the points mentioned above.\r\nSee #525 for a proposed alternative to having `ContextPropagator` form a separate context that is accessible from Workflow and Activity code.\r\n\r\n**Additional context**\r\nThe right approach would be a creation of a completely new `ContextPropagator` interface while leaving the old `ContextPropagator` in place, and deprecating it.",
  "closedAt": null,
  "comments": [],
  "createdAt": "2023-02-08T16:23:26Z",
  "labels": [
    {
      "id": "MDU6TGFiZWwxNjIyNzE5ODQ0",
      "name": "enhancement",
      "description": "User experience",
      "color": "a2eeef"
    }
  ],
  "milestone": null,
  "number": 1644,
  "reactionGroups": [],
  "state": "OPEN",
  "title": "ContextPropagator redesign",
  "updatedAt": "2025-05-13T16:51:59Z",
  "url": "https://github.com/temporalio/sdk-java/issues/1644"
}
