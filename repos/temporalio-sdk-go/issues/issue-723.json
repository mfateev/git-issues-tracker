{"assignees":[],"author":{"id":"MDQ6VXNlcjc3NTQxMjA=","is_bot":false,"login":"yycptt","name":"Yichao Yang"},"body":"## Expected Behavior\r\nWhen reseting a workflow with no pending child execution. (Reset with pending child currently is not supported.)\r\nAfter reset, parent workflow should continue execution without any error\r\n\r\n## Actual Behavior\r\nAfter reset, parent workflow will encounter a non-deterministic error during replay. The error happens when processing the child workflow init event and can't find the corresponding child workflow command/state machine.\r\n\r\nThe root cause is we use child workflow ID to find the corresponding command. However if child workflowID is not specified in child option, SDK will automatically generate one based on the workflow's runID. After reset, the workflow's runID changes but in workflow history the child workflow ID is still based on the original runID. Hence the not found and non-deterministic error.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Run a workflow with a child workflow. Do NOT specify the childworkflow ID in child option.\r\n  2. Reset the workflow to an event_id after the child workflow completed event. Any workflow task close event (completed/failed/timeout) will work.\r\n  3. Check the new workflow's history, the workflow task will fail due to non-deterministic error.\r\n\r\n## Specifications\r\n\r\n  - Version:\r\n  - Platform:\r\n","closedAt":"2025-04-23T15:51:15Z","comments":[{"id":"IC_kwDODN1w6849tZB9","author":{"login":"yycptt"},"authorAssociation":"MEMBER","body":"Server stores a workflow's original runID (in workflow start event) which won't change during reset. So one potential solution is generate child workflow ID based on this original runID. \r\n\r\nBut this solution may conflict with some future work related to reset. \r\n@yiminc Would you mind provide some insights here? Thanks.","createdAt":"2022-02-10T18:35:01Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/723#issuecomment-1035309181","viewerDidAuthor":false},{"id":"IC_kwDODN1w685zcCOm","author":{"login":"askreet"},"authorAssociation":"NONE","body":"I hit this in #1385. I'm curious if there's any risk in using the OriginalRunId by default in the meantime.","createdAt":"2024-02-09T23:18:40Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/723#issuecomment-1936728998","viewerDidAuthor":false},{"id":"IC_kwDODN1w686oXohU","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"https://github.com/temporalio/sdk-go/pull/1803","createdAt":"2025-04-23T15:51:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/723#issuecomment-2824767572","viewerDidAuthor":false}],"createdAt":"2022-02-10T18:31:50Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":723,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":3}}],"state":"CLOSED","title":"Unable to reset workflow with completed childworkflow whose child workflowID is generated by SDK","updatedAt":"2025-04-23T15:51:16Z","url":"https://github.com/temporalio/sdk-go/issues/723"}
