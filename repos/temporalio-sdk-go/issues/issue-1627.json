{"assignees":[],"author":{"id":"MDQ6VXNlcjE0NjU3ODU=","is_bot":false,"login":"aaomidi","name":"Amir Omidi"},"body":"We use this method for managing tools: https://marcofranssen.nl/manage-go-tools-via-go-modules\r\n\r\nWe've updated that go.mod to 1.23.0, and now when we run `workflowcheck` it has no findings. This is pretty easy to replicate, you can update the `go.mod` file in https://github.com/temporalio/sdk-go/blob/master/contrib/tools/workflowcheck/go.mod and see that workflowcheck isn't able to do proper analysis.\r\n\r\nThis code works properly up until 1.22.7.\r\n","closedAt":"2024-09-24T14:57:28Z","comments":[{"id":"IC_kwDODN1w686LcNuy","author":{"login":"aaomidi"},"authorAssociation":"NONE","body":"I think this also shows a potential need for more test cases for the workflowcheck code, as updating the go sdk does not recognize that the analyzer itself actually stops working.","createdAt":"2024-09-10T01:25:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1627#issuecomment-2339429298","viewerDidAuthor":false},{"id":"IC_kwDODN1w686LyboN","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"I tried updating the `workflowcheck` to `1.23.0` and see no test failure. Can you provided an example of something that was detected as none deterministic before but is no longer being properly detected?\r\n\r\nNote the `workflowcheck` has no dependency on the Go SDK so an upgrade to the SDK would not impact `workflowcheck`","createdAt":"2024-09-12T04:35:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1627#issuecomment-2345253389","viewerDidAuthor":false},{"id":"IC_kwDODN1w686MBfZ0","author":{"login":"aaomidi"},"authorAssociation":"NONE","body":"```\r\npackage workflows\r\n\r\nimport (\r\n\t\"time\"\r\n\r\n\t\"go.temporal.io/sdk/workflow\"\r\n)\r\n\r\ntype SomeInterestingWorkInput struct{}\r\n\r\ntype SomeInterestingWorkOutput struct {\r\n\tHappenedAt int64\r\n}\r\n\r\nfunc SomeInterestingWork(ctx workflow.Context, input SomeInterestingWorkInput) (SomeInterestingWorkOutput, error) {\r\n\t// Do some interesting work here\r\n\treturn SomeInterestingWorkOutput{\r\n\t\tHappenedAt: time.Now().Unix(),\r\n\t}, nil\r\n}\r\n```\r\n\r\nIf I install workflowcheck using `go install go.temporal.io/sdk/contrib/tools/workflowcheck@latest`, which I believe respects the go.mod file that workflowcheck has, it finds the time.Now() issue. If I clone the repo myself, change the go version, and do a `go install .` on it, then it stops being able to find them.","createdAt":"2024-09-13T15:17:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1627#issuecomment-2349201012","viewerDidAuthor":false},{"id":"IC_kwDODN1w686NW42G","author":{"login":"aaomidi"},"authorAssociation":"NONE","body":"Thank you for finding this. Seems like quite a breaking change from Go! \r\n\r\nLink to the PR: https://github.com/temporalio/sdk-go/pull/1642","createdAt":"2024-09-24T15:10:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1627#issuecomment-2371587462","viewerDidAuthor":false}],"createdAt":"2024-09-09T23:27:07Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":1627,"reactionGroups":[],"state":"CLOSED","title":"workflowcheck built on 1.23 does not find any findings","updatedAt":"2024-09-24T15:10:02Z","url":"https://github.com/temporalio/sdk-go/issues/1627"}
