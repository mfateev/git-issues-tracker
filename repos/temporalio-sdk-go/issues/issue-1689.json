{"assignees":[],"author":{"id":"MDQ6VXNlcjY2MjgyNA==","is_bot":false,"login":"askreet","name":"Kyle Smith"},"body":"The below is based on an assumption I have that Run IDs are expected to always be UUIDs provided by the Temporal engine. We've recently been storing records in our database using the Run ID of workflows and our RDBMS's native UUID column type.\r\n\r\nNote that I poked around and couldn't find an easy way to override this value in my test case, but if I've missed it please let me know!\r\n\r\n## Expected Behavior\r\n\r\nThe Workflow object obtainable from within an Activity via `activity.GetInfo(ctx)` should return values that reasonably simulate a production Temporal system.\r\n\r\n## Actual Behavior\r\n\r\nThe `info.WorkflowExecution.RunID` field is set to `default-test-run-id`, a non-UUID string.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Create a workflow with one activity, importing the `github.com/google/uuid` package, defined as:\r\n\r\n```go\r\nfunc (a *Activities) MyActivity(ctx context.Context) error {\r\n\tinfo := activity.GetInfo(ctx)\r\n\r\n\t_, err := uuid.Parse(info.WorkflowExecution.RunID)\r\n\tif err != nil {\r\n\t\treturn err\r\n\t}\r\n\r\n\treturn nil\r\n}\r\n```\r\n\r\n  2. Execute the workflow in a TestWorkflowEnvironment.\r\n  3. Observe that the workflow times out as the activity above retries forever with an error about not being able to parse a UUID.\r\n\r\n## Specifications\r\n\r\n  - Version: SDK v1.25.1\r\n  - Platform: Go v1.22.6 darwin/arm64\r\n","closedAt":"2024-10-30T16:55:41Z","comments":[{"id":"IC_kwDODN1w686Rbu5Q","author":{"login":"askreet"},"authorAssociation":"NONE","body":"If I can get some validation of this bug, I'd be willing to contribute one or both of the following fixes:\r\n\r\n1. Set this default value to a valid UUID, such as `00000000-0000-0000-0000-000000000000`.\r\n2. Expose a function `SetExecutionRunID` that mutates the workflowInfo similar to [SetContinuedExecutionRunID](https://github.com/temporalio/sdk-go/blob/master/internal/workflow_testsuite.go#L337-L339) ([impl](https://github.com/temporalio/sdk-go/blob/master/internal/internal_workflow_testsuite.go#L384-L386)).","createdAt":"2024-10-27T10:56:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1689#issuecomment-2439966288","viewerDidAuthor":false},{"id":"IC_kwDODN1w686Rh9bv","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"I am not sure there is a \"standard\" run ID and I'm not sure it's safe to assume the format of the run ID set by the server (that they happen to use a UUID is an implementation detail, not guaranteed). Having said that, we could consider the ability to customize it, but I don't think it's safe to have your activity assume it's a UUID even though the server happens to use that format today.","createdAt":"2024-10-28T13:30:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1689#issuecomment-2441598703","viewerDidAuthor":false},{"id":"IC_kwDODN1w686R4z_q","author":{"login":"askreet"},"authorAssociation":"NONE","body":"I'm more than happy to consider this a bug in my application that I'm storing this as a UUID at all, if that's the consensus.","createdAt":"2024-10-30T15:42:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1689#issuecomment-2447589354","viewerDidAuthor":false},{"id":"IC_kwDODN1w686R5dM0","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Yes, we do not guarantee the format of a run ID","createdAt":"2024-10-30T16:39:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1689#issuecomment-2447758132","viewerDidAuthor":false}],"createdAt":"2024-10-27T10:53:07Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":1689,"reactionGroups":[],"state":"CLOSED","title":"TestWorkflowEnvironment has non-standard RunID \"default-test-run-id\"","updatedAt":"2024-10-30T16:55:41Z","url":"https://github.com/temporalio/sdk-go/issues/1689"}
