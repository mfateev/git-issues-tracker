{"assignees":[],"author":{"id":"MDQ6VXNlcjI0NTEwNDQz","is_bot":false,"login":"modernplumbing","name":""},"body":"In a test like the following\r\n\r\n```\r\ntype UnitTestSuite struct {\r\n\tsuite.Suite # From github.com/stretchr/testify/suite | v1.7.0\r\n\ttestsuite.WorkflowTestSuite # From go.temporal.io/sdk/testsuite | v1.12.0\r\n\tworkflowEnvironment *testsuite.TestWorkflowEnvironment \r\n}\r\n\r\nfunc (s *UnitTestSuite) Test_MyWorkflow() {\r\n\ts.workflowEnvironment.ExecuteWorkflow(MyWorkflow(), \"test_success\")\r\n\ts.NoError(s.workflowEnvironment.GetWorkflowError())\r\n}\r\n```\r\n\r\nI would get output like the following: \r\n```\r\n--- FAIL: TestUnitTestSuite (0.01s)\r\n    --- FAIL: TestUnitTestSuite/Test_MyWorkflow (0.00s)\r\n        myTestFile_test.go:84:  \r\n        Error Trace:    myTestFile_test.go:84\r\n        Error:          Received unexpected error:\r\n                   workflow execution error (type: MyWorkflowType, workflowID: default-test-workflow-id, runID: default-test-run-id): runtime error: invalid memory address or nil pointer dereference\r\n```\r\nThe way to print the stack trace is by doing the following `s.workflowEnvironment.GetWorkflowError().(*temporal.WorkflowExecutionError).Unwrap().(*temporal.PanicError).StackTrace()` which is undocumented and took a lot of searching the repo for potential solutions.\r\n\r\n**Describe the solution you'd like**\r\nSomething like \r\n```\r\nfunc (e *PanicError) StackTrace() string\r\n```\r\nbut for Workflow errors instead of just Activity errors would be great. `s.workflowEnvironment.GetWorkflowError().(*temporal.WorkflowExecutionError).Unwrap().(*temporal.PanicError).StackTrace()` is not great UX.\r\n","closedAt":"2023-02-24T13:43:42Z","comments":[{"id":"IC_kwDODN1w68472haU","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Can you use `errors.As` instead, e.g.:\r\n\r\n```\r\nvar panicErr *temporal.PanicError\r\nif errors.As(err, &panicErr) {\r\n  fmt.Printf(\"Got panic error, trace: %v\", panicErr.StackTrace())\r\n}\r\n```","createdAt":"2022-01-03T14:58:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/679#issuecomment-1004148372","viewerDidAuthor":false},{"id":"IC_kwDODN1w685V_YB-","author":{"login":"BruceShenC"},"authorAssociation":"NONE","body":"> > Can you use `errors.As` instead, e.g.:\r\n\r\n> \r\n> ```\r\n> var panicErr *temporal.PanicError\r\n> if errors.As(err, &panicErr) {\r\n>   fmt.Printf(\"Got panic error, trace: %v\", panicErr.StackTrace())\r\n> }\r\n> ```\r\nFor me , it works. Thanks a lot!\r\n\r\n```\r\nvar panicErr *temporal.PanicError\r\nif errors.As(s.env.GetWorkflowError(), &panicErr) {\r\n        fmt.Printf(\"Got panic error, trace: %v\", panicErr.StackTrace())\r\n}\r\n```\r\n\r\n","createdAt":"2023-02-24T01:43:41Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":3}}],"url":"https://github.com/temporalio/sdk-go/issues/679#issuecomment-1442676862","viewerDidAuthor":false}],"createdAt":"2021-12-27T21:31:02Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":679,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"state":"CLOSED","title":"GetWorkflowError() does not yield stack trace for a panic","updatedAt":"2023-02-24T13:43:42Z","url":"https://github.com/temporalio/sdk-go/issues/679"}
