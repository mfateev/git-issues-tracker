{"assignees":[],"author":{"id":"MDQ6VXNlcjYwOTIyMw==","is_bot":false,"login":"Drahflow","name":"Jens-Wolfhard Schicke-Uffmann"},"body":"We have a workflow which derives various child workflow execution IDs by appending subtask names (`\"-start-session\"` in the example below) to the current workflow execution ID. Upon replaying those histories during CI to check for non-determinism problems, we see (re-wrapped for your convenience):\r\n```\r\n2023/01/04 13:33:12 ERROR Workflow panic\r\n    WorkflowType Main\r\n    WorkflowID ReplayId\r\n    RunID 2bc48c60-ee48-4b19-99fb-0656c4d30a99\r\n    Attempt 1 Error unknown command\r\n    CommandType: ChildWorkflow, ID: merchant-consumer-workflow/ed472a6d-b793-501c-af06-a501158487b6-start-session,\r\n    possible causes are nondeterministic workflow definition code or incompatible change in the workflow definition\r\n    StackTrace process event for Merchant [panic]:\r\ngo.temporal.io/sdk/internal.panicIllegalState(...)\r\n        /home/drahflow/go/pkg/mod/go.temporal.io/sdk@v1.19.0/internal/internal_command_state_machine.go:532\r\n...\r\n```\r\nas the re-derived child workflow IDs will now (i.e. during replay) be based upon the `ReplayId` string used as the workflow execution ID here:\r\nhttps://github.com/temporalio/sdk-go/blob/06e474c93e936b71dc4afcec973460b22c13986d/internal/internal_worker.go#L1235\r\n\r\nIn reality however, there is nothing non-deterministic about such a derivation, as the workflow execution ID is fixed for a given execution.\r\n\r\nA possible solution would be to allow providing a custom execution ID (in practice derived from the recorded history filename) when replaying a history.\r\n\r\n----\r\n\r\nA workaround is relatively straightforward via recording the own execution ID in a side-effect, but that seems extremely unnecessary.","closedAt":"2023-01-05T18:02:43Z","comments":[{"id":"IC_kwDODN1w685Rt1Jd","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Yeah workflow ID, unlike run ID, cannot currently be derived from history. Unlike our other SDKs, the Go SDK does not offer a way to set the workflow ID on the replayer. I have altered the title of this issue.","createdAt":"2023-01-04T14:04:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/994#issuecomment-1370968669","viewerDidAuthor":false}],"createdAt":"2023-01-04T12:48:46Z","labels":[],"milestone":null,"number":994,"reactionGroups":[],"state":"CLOSED","title":"Cannot set workflow ID for replayer","updatedAt":"2023-01-05T18:02:43Z","url":"https://github.com/temporalio/sdk-go/issues/994"}
