{"assignees":[],"author":{"id":"MDQ6VXNlcjI1MzI2ODc=","is_bot":false,"login":"tomahawk28","name":"Jihyuk Bok"},"body":"Is it possible to use API keys in Temporal Cloud to use in Go SDK client? https://docs.temporal.io/cloud/api-keys\r\n\r\nCurrently, you are only supporting mTLS connection from Go SDK client. \r\n\r\n> When you connect to [Temporal Cloud](https://docs.temporal.io/cloud), you need to provide additional connection and client options that include the following:\r\n> - The [Temporal Cloud Namespace Id](https://docs.temporal.io/cloud/namespaces#temporal-cloud-namespace-id).\r\n> - The [Namespace's gRPC endpoint](https://docs.temporal.io/cloud/namespaces#temporal-cloud-grpc-endpoint). An endpoint listing is available at the [Temporal Cloud Website](https://cloud.temporal.io/namespaces) on each Namespace detail page. The endpoint contains the Namespace Id and port.\r\n> - mTLS CA certificate.\r\n> - mTLS private key.\r\n\r\nhttps://docs.temporal.io/develop/go/temporal-clients#connect-to-temporal-cloud\r\n","closedAt":"2024-07-29T03:52:52Z","comments":[{"id":"IC_kwDODN1w686GZuc5","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"API keys are supported by the Go SDK [NewAPIKeyStaticCredentials](https://pkg.go.dev/go.temporal.io/sdk@v1.28.1/internal#NewAPIKeyStaticCredentials) can be passed to `Credentials` in [ClientOptions](https://pkg.go.dev/go.temporal.io/sdk@v1.28.1/internal#ClientOptions)","createdAt":"2024-07-29T03:52:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1570#issuecomment-2254890809","viewerDidAuthor":false},{"id":"IC_kwDODN1w686GZvnc","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"For cloud API keys your connection options would be something like this.\r\n```\r\nclientOptions := client.Options{\r\n\t\tHostPort:  <endpoint>,\r\n\t\tNamespace: <namespace.accountid>,\r\n\t\tCredentials: client.NewAPIKeyStaticCredentials(<APIKey>),\r\n\t\tConnectionOptions: client.ConnectionOptions{\r\n\t\t\tDialOptions: []grpc.DialOption{\r\n\t\t\t\tgrpc.WithUnaryInterceptor(\r\n\t\t\t\t\tfunc(ctx context.Context, method string, req any, reply any, cc *grpc.ClientConn, invoker grpc.UnaryInvoker, opts ...grpc.CallOption) error {\r\n\t\t\t\t\t\treturn invoker(\r\n\t\t\t\t\t\t\tmetadata.AppendToOutgoingContext(ctx, \"temporal-namespace\", <namespace.accountid>),\r\n\t\t\t\t\t\t\tmethod,\r\n\t\t\t\t\t\t\treq,\r\n\t\t\t\t\t\t\treply,\r\n\t\t\t\t\t\t\tcc,\r\n\t\t\t\t\t\t\topts...,\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t},\r\n\t\t\t\t),\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n\r\n\tc, err := client.Dial(clientOptions)\r\n```","createdAt":"2024-07-29T03:59:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/1570#issuecomment-2254895580","viewerDidAuthor":false},{"id":"IC_kwDODN1w686Gb5yP","author":{"login":"tomahawk28"},"authorAssociation":"NONE","body":"Thanks, I tried your suggestion with the temporal namespace `https://cloud.temporal.io/namespaces/molen-dev.l2c4n/workflows`. \r\nHowever, I still get this message. \r\n```\r\n2024/07/29 17:35:55 Unable to create client failed reaching server: last connection error: connection error: desc = \"error reading server preface: read tcp 172.20.10.2:62658->52.14.206.101:7233: read: connection reset by peer\"\r\n```\r\n\r\nPerhaps I need to change the auth type for this namespace? \r\n\r\n```\r\n tcld n am get -n molen-dev.l2c4n                                                                                                                                [17:36:54]\r\nmtls\r\n```\r\n\r\nIf I need to ask temporal cloud directly, please let me know!","createdAt":"2024-07-29T09:37:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1570#issuecomment-2255461519","viewerDidAuthor":false},{"id":"IC_kwDODN1w686GeWyr","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"API keys are still experimental for cloud and most cloud namespaces still use mTLS based authentication. If you want to enable API key support for your cloud account, please open a cloud ticket.","createdAt":"2024-07-29T14:30:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1570#issuecomment-2256104619","viewerDidAuthor":false}],"createdAt":"2024-07-29T03:49:30Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1570,"reactionGroups":[],"state":"CLOSED","title":"Suppor Temporal Cloud API Keys in Go SDK client","updatedAt":"2024-07-29T14:30:49Z","url":"https://github.com/temporalio/sdk-go/issues/1570"}
