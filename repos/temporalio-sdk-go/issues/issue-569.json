{"assignees":[],"author":{"id":"MDQ6VXNlcjMyMTEwMzE3","is_bot":false,"login":"pattersp","name":"Pascale Patterson"},"body":"**Is your feature request related to a problem? Please describe.**\r\nNot related to problem, just a feature that would be nice to have. Currently, it is possible to set MaxConcurrentActivityExecutionSize when starting a worker. It would nice to be able to dynamically adjust this value without restarting the worker.\r\n\r\n**Describe the solution you'd like**\r\nWithout restarting a worker, I would like to be able to adjust the value of MaxConcurrentActivityExecutionSize.\r\n\r\nIf the value is decreased and the worker is subsequently executing a number of activities that exceeds the threshold, that is fine -- it can be more of an \"eventual\" threshold.\r\n\r\n**Describe alternatives you've considered**\r\nAs a workaround solution, we could restart the worker to reset MaxConcurrentActivityExecutionSize, but that's a lot of overhead.\r\n\r\n**Additional context**\r\nSee https://community.temporal.io/t/dynamically-adjusting-the-number-of-concurrent-activities-on-a-given-worker/3052\r\n","closedAt":"2024-11-19T18:55:06Z","comments":[{"id":"IC_kwDODN1w6845_moZ","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"At this time, dynamically adjusting such a value is incredibly difficult on the internals due to how pool-transfer would have to work. I'm afraid the current best way to increase the size is to start a new worker.\r\n\r\nI am leaving this issue opened to potentially solve in our next iteration of the SDK where the internals may be replaced by a different core and make such a task easier.","createdAt":"2021-11-18T15:31:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/569#issuecomment-972974617","viewerDidAuthor":false},{"id":"IC_kwDODN1w685eOHix","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Rethinking this a bit, we could basically expose `pollerRequestCh`, but we also have to allow control over task completion and get a slot count for metrics. I think we could have this interface:\r\n\r\n```go\r\ntype SlotLimiter interface {\r\n    AcquireSlot()\r\n    ReleaseSlot()\r\n    AvailableSlots() int\r\n}\r\n```\r\n\r\nThen have a default slot limiter that uses today's approach (fixed max concurrent), and have advanced worker options for `ActivityTaskSlotLimiter SlotLimiter` and `WorkflowTaskSlotLimiter SlotLimiter`.","createdAt":"2023-06-07T12:54:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/569#issuecomment-1580759217","viewerDidAuthor":false},{"id":"IC_kwDODN1w686UNP-N","author":{"login":"Sushisource"},"authorAssociation":"MEMBER","body":"This was done as of https://github.com/temporalio/sdk-go/pull/1546 with the new `WorkerTuner` and `SlotSupplier` interfaces","createdAt":"2024-11-19T18:55:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/569#issuecomment-2486501261","viewerDidAuthor":false}],"createdAt":"2021-10-01T18:21:39Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"},{"id":"LA_kwDODN1w687ZhaAH","name":"next-gen","description":"Something that can't happen until the next generation of the SDK","color":"fef2c0"}],"milestone":null,"number":569,"reactionGroups":[],"state":"CLOSED","title":"Dynamically adjusting MaxConcurrentActivityExecutionSize without restarting a worker","updatedAt":"2024-11-19T18:55:06Z","url":"https://github.com/temporalio/sdk-go/issues/569"}
