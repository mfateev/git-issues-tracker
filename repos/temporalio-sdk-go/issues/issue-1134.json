{"assignees":[],"author":{"id":"MDQ6VXNlcjI2MDI5MjYz","is_bot":false,"login":"jvonfricken","name":"Joshua VonFricken"},"body":"## Expected Behavior\r\nI would expect that OnSignalExternalWorkflow would be triggered by calling `workflow.SignalExternalWorkflow` with matching params.\r\n\r\n## Actual Behavior\r\nHowever, whenever the target of `workflow.SignalExternalWorkflow` is a child workflow started with `env.OnWorkflow`, it is now considered a running workflow, and mock calls will not be triggered, but rather it will attempt to signal this workflow. This will fail to signal and also not register the call to the mocked `env.OnSignalExternalWorkflow`.\r\n\r\nEssentially, it's impossible to correctly assert that `SignalExternalWorkflow` was called if the target workflow was first mocked with env.OnWorkflow.\r\n\r\nThis may be considered a feature request, but this behavior doesn't seem like it's the intended way things should be working?\r\n\r\n","closedAt":"2023-07-18T22:32:40Z","comments":[{"id":"IC_kwDODN1w685egLHl","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"From our docs on [OnSignalExternalWorkflow ](https://pkg.go.dev/go.temporal.io/sdk/internal#TestWorkflowEnvironment.OnSignalExternalWorkflow)\r\n\r\n```\r\nTestWorkflowEnvironment handles sending signals between the workflows that are started from the root workflow. For example, sending signals between parent and child workflows. Or sending signals between 2 child workflows. However, it does not know what to do if your tested workflow code is sending signal to external unknown workflows. In that case, you will need to setup mock for those signal calls. Some examples of how to setup mock:\r\n```\r\n\r\nSo  it is intended that signaling a child workflow does not trigger `OnSignalExternalWorkflow `.I don't think it is correct to call the mock on `OnSignalExternalWorkflow` . If the test environment is aware of the workflow being signaled then the test environment knows what will happen on the signal request, so there is no need to mock it. Mocking it just opens up potential ways users can write inconsistent test code\r\n","createdAt":"2023-06-10T05:22:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1134#issuecomment-1585492453","viewerDidAuthor":false},{"id":"IC_kwDODN1w685h0NSW","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Closing since this is the intended behavior ","createdAt":"2023-07-18T22:32:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1134#issuecomment-1641075862","viewerDidAuthor":false}],"createdAt":"2023-06-07T19:39:46Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":1134,"reactionGroups":[],"state":"CLOSED","title":"OnSignalExternalWorkflow doesn't function when signaling child workflow","updatedAt":"2023-07-18T22:32:40Z","url":"https://github.com/temporalio/sdk-go/issues/1134"}
