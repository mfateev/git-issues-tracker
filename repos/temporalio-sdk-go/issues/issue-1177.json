{"assignees":[],"author":{"id":"MDQ6VXNlcjI2NTg0NDc4","is_bot":false,"login":"albertteoh","name":"Albert"},"body":"**Is your feature request related to a problem? Please describe.**\r\nThe Temporal go SDK uses the archived https://github.com/facebookarchive/clock.\r\n\r\nReference: https://github.com/temporalio/sdk-go/blob/master/go.mod#L6\r\n\r\n**Describe the solution you'd like**\r\nSwitch to an actively maintained clock. E.g. github.com/jonboulle/clockwork\r\n\r\n**Describe alternatives you've considered**\r\nI've often used https://github.com/benbjohnson/clock in the past, but\r\nthat appears to be archived as well.","closedAt":null,"comments":[{"id":"IC_kwDODN1w685i_ych","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Being archived is not a strong reason to migrate off of by itself","createdAt":"2023-08-01T18:45:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1177#issuecomment-1660888865","viewerDidAuthor":false},{"id":"IC_kwDODN1w685jFCIi","author":{"login":"albertteoh"},"authorAssociation":"NONE","body":"> Being archived is not a strong reason to migrate off of by itself\r\n\r\nI appreciate the response @Quinn-With-Two-Ns and yes, I agree, it's not a strong reason to migrate off by itself.\r\n\r\nFor context, the primary reason is usability.\r\n\r\nMocking `time.Now()` with https://github.com/facebookarchive/clock requires a bit more effort. An [example in this codebase](https://github.com/temporalio/sdk-go/blob/930cc2b106ffce2f8659b65a66fac03cd5b1fc3d/internal/internal_workflow_testsuite.go#L340) is:\r\n\r\n```go\r\nenv.mockClock.Add(startTime.Sub(env.mockClock.Now()))\r\n```\r\n\r\nWith github.com/jonboulle/clockwork, it feels a bit more intuitive and readable:\r\n```go\r\nenv.mockClock = clockwork.NewFakeClockAt(startTime)\r\n```\r\n\r\nOn top of that, I see that `\"github.com/facebookgo/clock\"` is only imported in [a single test file](https://github.com/temporalio/sdk-go/blob/930cc2b106ffce2f8659b65a66fac03cd5b1fc3d/internal/internal_workflow_testsuite.go#L36), so migrating over should be fairly trivial.\r\n\r\nIt may even be a reason for mocking out other unit tests that are sleeping on a real clock.\r\n\r\nFinally, the reason for reaching out was because we are using the temporalio/sdk-go which has an indirect dependency on github.com/facebookarchive/clock but, due to the usability issue mentioned above and it being archived, we decided to go for another clock implementation for our unit tests. So it's a bit of a shame that we can't just have the one clock dependency.\r\n\r\nAgain, not a pressing matter, just thought to discuss this to see if there's interest in the Temporal community, and happy to contribute a change too. I can also close this issue if there's no interest/appetite. ðŸ˜„ ","createdAt":"2023-08-02T13:58:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1177#issuecomment-1662263842","viewerDidAuthor":false},{"id":"IC_kwDODN1w685jSDl3","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":">So it's a bit of a shame that we can't just have the one clock dependency.\r\n\r\nwhile I understand, moving to different clock dependency could cause the same issue for other users currently using https://github.com/facebookarchive/clock\r\n\r\nGiven the simplicity of these mocks, I'd rather just get rid of the dependency and write some code in the SDK to replace it .","createdAt":"2023-08-04T14:13:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/1177#issuecomment-1665677687","viewerDidAuthor":false}],"createdAt":"2023-07-27T07:41:40Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1177,"reactionGroups":[],"state":"OPEN","title":"Switch to a new clock library","updatedAt":"2023-08-04T14:13:34Z","url":"https://github.com/temporalio/sdk-go/issues/1177"}
