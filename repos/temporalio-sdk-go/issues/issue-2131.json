{"assignees":[],"author":{"id":"MDQ6VXNlcjg2NTEyODU=","is_bot":false,"login":"ganlvtech","name":"Ganlv"},"body":"**Is your feature request related to a problem? Please describe.**\n\nMy activity has a 300s timeout. The activity worker sends a heartbeat every 5s, and I can wait up to 30s for each heartbeat RPC to complete. Even if a heartbeat fails, I can retry up to 10 times before hitting the 300s timeout.\n\nI set `MaxHeartbeatThrottleInterval = time.Duration(1)` to prevent heartbeat throttling, but this forces every heartbeat RPC to complete within 1s.\n\nRelated issues and PRs https://github.com/temporalio/sdk-go/pull/660 https://github.com/temporalio/sdk-go/issues/859 https://github.com/temporalio/sdk-go/pull/863\n\nhttps://github.com/temporalio/sdk-go/blob/13ff29d79d5345c30f3e4109c0f94b737a19ad7a/internal/worker.go#L278-L283\n\n> no pending heartbeat will wait longer than this amount of time to send\n\nhttps://github.com/temporalio/sdk-go/blob/13ff29d79d5345c30f3e4109c0f94b737a19ad7a/internal/internal_task_handlers.go#L2154-L2162\n\nAnd `Error: context deadline exceeded` will cause `isActivityCanceled = true` and cancel the activity's context. I cannot retry heartbeat manually.\n\nhttps://github.com/temporalio/sdk-go/blob/13ff29d79d5345c30f3e4109c0f94b737a19ad7a/internal/internal_task_handlers.go#L2180-L2201\n\n**Describe the solution you'd like**\nConfigurable `minRPCTimeout` for activity worker. Allow retry heartbeat on network error.\n\n**Describe alternatives you've considered**\nI have try to set `MaxHeartbeatThrottleInterval` to longer than my network ping. Yes, it works. But not expected.","closedAt":null,"comments":[{"id":"IC_kwDODN1w687a58aU","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Can you clarify the situation more? Why are you trying to disable heartbeat throttling? That would not be a recommended approach as it will make your workers more sensitive to network latency.","createdAt":"2025-12-18T23:01:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/2131#issuecomment-3672622740","viewerDidAuthor":false},{"id":"IC_kwDODN1w687a8G5N","author":{"login":"ganlvtech"},"authorAssociation":"NONE","body":"I want to stop this activity as soon as possible, because `ctx.Done()` in an activity func is triggered when `activity.RecordHeartbeat(ctx, nil)` is called and knows the server has already canceled this workflow.","createdAt":"2025-12-19T02:18:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/2131#issuecomment-3673189965","viewerDidAuthor":false}],"createdAt":"2025-12-08T10:41:26Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":2131,"reactionGroups":[],"state":"OPEN","title":"Configurable minRPCTimeout for activity worker instead of using MaxHeartbeatThrottleInterval for RPC timeout. And allow retry manually when network error..","updatedAt":"2025-12-19T02:18:32Z","url":"https://github.com/temporalio/sdk-go/issues/2131"}
