{"assignees":[],"author":{"id":"MDQ6VXNlcjM4MjU3MTY=","is_bot":false,"login":"mindaugasrukas","name":"Mind.R."},"body":"`workflowcheck` fails to detect the argument type when referenced as an empty interface type (I.e., `any`).\r\n\r\n## Expected Behavior\r\nIt detects the type correctly.\r\n\r\n## Actual Behavior\r\nHaving this code snippet:\r\n```\r\nfor name, workflowFunc := range map[string]any{\r\n    \"my-workflow\"-1: Workflow1,\r\n    \"my-workflow-2\": Workflow2,\r\n} {\r\n    w.RegisterWorkflowWithOptions(workflowFunc, workflow.RegisterOptions{Name: name})\r\n}\r\n```\r\n\r\nRunning a check, it fails with:\r\n```\r\n% workflowcheck -show-pos ./...\r\n/workflows/sandbox/workflow.go:18:33: unrecognized function reference format\r\n```\r\n\r\n## Specifications\r\n\r\n  - Version:\r\n```\r\n% go version\r\ngo version go1.19.2 darwin/arm64\r\n```","closedAt":"2023-10-12T17:22:27Z","comments":[{"id":"IC_kwDODN1w685Otuz7","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"The Go static analyzer is not going to be able to know the runtime types of your map values. It's the same reason the map's value is `any`. That's the type and it's concrete type is only detectable at runtime.\r\n\r\nHowever, we should probably make a way for you to ignore this error. In the meantime, you should probably try not to lose the compile-time type before the register call by converting it to `any` in another statement. Maybe we can make some other way for you to mark a function subject to workflow static analysis. Open to ideas here.","createdAt":"2022-11-18T22:41:58Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/962#issuecomment-1320611067","viewerDidAuthor":false},{"id":"IC_kwDODN1w685PnKcr","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"@cretz This is basically a feature request not a bug correct?","createdAt":"2022-12-02T18:38:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/962#issuecomment-1335666475","viewerDidAuthor":false},{"id":"IC_kwDODN1w685PnyXV","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Yes. We should let people ignore the workflowcheck registration-time analysis if the registration code is too dynamic for static analysis to discover.","createdAt":"2022-12-02T20:48:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/962#issuecomment-1335829973","viewerDidAuthor":false}],"createdAt":"2022-11-18T22:12:36Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":962,"reactionGroups":[],"state":"CLOSED","title":"\"workflowcheck\" fails to detect argument type","updatedAt":"2023-10-12T17:22:27Z","url":"https://github.com/temporalio/sdk-go/issues/962"}
