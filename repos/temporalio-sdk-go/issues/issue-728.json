{"assignees":[],"author":{"id":"MDQ6VXNlcjE0NjM2MjI=","is_bot":false,"login":"mfateev","name":"Maxim Fateev"},"body":"**Is your feature request related to a problem? Please describe.**\r\nworkflow.Await and AwaitWithTimeout are very convenient as they allow waiting on practically any condition. Selector supports only waiting on Future and Channel. This leads to situations when unexperienced users mix Await with Selector in the same function which leads to suttle bugs. For example this was reported by a user over Slack:\r\n\r\n> Hello, is there a small logic error in the Go subscription template/example?\r\n> [This ](https://github.com/temporalio/subscription-workflow-project-template-go/blob/93ce85b52b8c610c21a96f3397bef5b419047e11/workflow.go#L115-L122)AwaitWithTimeout[ will exit early](https://github.com/temporalio/subscription-workflow-project-template-go/blob/93ce85b52b8c610c21a96f3397bef5b419047e11/workflow.go#L115-L122) if the subscription is cancelled, but the cancelSelector.Select(ctx) is not run [until after](https://github.com/temporalio/subscription-workflow-project-template-go/blob/93ce85b52b8c610c21a96f3397bef5b419047e11/workflow.go#L121) the timeout is complete.\r\n> Mostly just asking because I think I introduced this bug in my own code when copying from this example.\r\n\r\n**Describe the solution you'd like**\r\nI propose adding the following API:\r\n\r\n```go\r\nSelector {\r\n...\r\n  AddAwait(condition func() bool, f func())\r\n}\r\n```\r\nWhen `Selector.Select` is called, `f` will be called if `condition` returns true.\r\n\r\n","closedAt":null,"comments":[],"createdAt":"2022-02-14T18:16:40Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":728,"reactionGroups":[],"state":"OPEN","title":"Add Await branch to Selector","updatedAt":"2022-03-15T21:50:02Z","url":"https://github.com/temporalio/sdk-go/issues/728"}
