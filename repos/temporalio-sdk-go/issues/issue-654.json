{"assignees":[],"author":{"id":"MDQ6VXNlcjgxNzQ0MDUz","is_bot":false,"login":"dorsec","name":"Dor Fire"},"body":"**Is your feature request related to a problem? Please describe.**\nIn our tests, we need to jump through hoops and provide a custom Context Propagator, because the mock version\nof `ExecuteWorkflow` doesn't take in a context.Context param.\nThe regular (production) version of `ExecuteWorkflow` DOES accept such a parameter.\n\n**Describe the solution you'd like**\nAdd a ctx param to the mock variant of `ExecuteWorkflow` and propagate it.\n\n","closedAt":"2025-09-26T21:55:58Z","comments":[{"id":"IC_kwDODN1w6846hlh0","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"@dorsec - I am assuming you're talking about `testsuite.TestWorkflowEnvironment.ExecuteWorkflow` and not `mocks.Client.ExecuteWorkflow`, correct?\r\n\r\nCan you provide more information on how you are using the context to `Client.ExecuteWorkflow`? The context is for client calls only (and there is no client for the testsuite) and doesn't really affect the running of the workflow.\r\n\r\nAlso, in the master branch and soon to be released, if it helps you, there are now `Interceptors` on the worker options which support intercepting both outbound (i.e. client call) and inbound (i.e. workflow invocation request) `ExecuteWorkflow` calls. They can perform similar functions to context propagators though, so likely unrelated to the root of this problem.","createdAt":"2021-11-29T18:06:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/654#issuecomment-981882996","viewerDidAuthor":false},{"id":"IC_kwDODN1w6846yWNM","author":{"login":"dorsec"},"authorAssociation":"NONE","body":"The code in my workflows/activities may rely on context information (e.g. user ID).\r\nSo, in tests, it needs to be passed from somewhere - and `testsuite.TestWorkflowEnvironment.ExecuteWorkflow` doesn't allow for it :)","createdAt":"2021-12-05T18:19:13Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/654#issuecomment-986276684","viewerDidAuthor":false},{"id":"IC_kwDODN1w68460XKN","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> The code in my workflows/activities may rely on context information (e.g. user ID).\r\n\r\nBut you can't inject user values into the context that is given to your workflow (unless you're using interceptors or context propagators). The internal system creates the `workflow.Context`. Same for activities and `context.Context`. If you have multiple workers, sometimes the workers/activities run on completely different machines than where they were executed.\r\n\r\nCan you give me an example of what you're doing without the test environment and maybe I can show how you can do it with the test environment?","createdAt":"2021-12-06T14:03:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/654#issuecomment-986804877","viewerDidAuthor":false},{"id":"IC_kwDODN1w687HHfWH","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Closing due to lack of concrete use case, if a use case does come up we can consider reopening this issue.  ","createdAt":"2025-09-26T21:55:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/654#issuecomment-3340629383","viewerDidAuthor":false}],"createdAt":"2021-11-29T09:34:10Z","labels":[{"id":"LA_kwDODN1w687UGgkJ","name":"external dependency","description":"Waiting on something externally","color":"c5def5"}],"milestone":null,"number":654,"reactionGroups":[],"state":"CLOSED","title":"Mocked version of `ExecuteWorkflow` doesn't accept a custom Context","updatedAt":"2025-09-26T21:55:58Z","url":"https://github.com/temporalio/sdk-go/issues/654"}
