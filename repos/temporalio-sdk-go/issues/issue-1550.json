{"assignees":[],"author":{"id":"MDQ6VXNlcjExOTYwOTY3","is_bot":false,"login":"donchev7","name":"Bobby Donchev"},"body":"## Expected Behavior\r\nBe able to connect to temporal server\r\n\r\n## Actual Behavior\r\n2024/07/17 14:00:20 Unable to create client failed reaching server: context deadline exceeded\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. temporal server start-dev\r\n  1. Run this main.go file with go run main.go\r\n```go\r\npackage main\r\n\r\nimport (\r\n\t\"context\"\r\n\t\"fmt\"\r\n\t\"log\"\r\n\t\"time\"\r\n\r\n\t\"github.com/pborman/uuid\"\r\n\t\"go.temporal.io/sdk/client\"\r\n\t\"go.temporal.io/sdk/workflow\"\r\n)\r\n\r\ntype Activities struct {\r\n\tName     string\r\n\tGreeting string\r\n}\r\n\r\n// GetGreeting Activity.\r\nfunc (a *Activities) GetGreeting() (string, error) {\r\n\treturn a.Greeting, nil\r\n}\r\n\r\n// @@@SNIPEND\r\n\r\n// GetName Activity.\r\nfunc (a *Activities) GetName() (string, error) {\r\n\treturn a.Name, nil\r\n}\r\n\r\nfunc GreetingSample(ctx workflow.Context) (string, error) {\r\n\tlogger := workflow.GetLogger(ctx)\r\n\r\n\tao := workflow.ActivityOptions{\r\n\t\tStartToCloseTimeout: 10 * time.Second,\r\n\t}\r\n\tctx = workflow.WithActivityOptions(ctx, ao)\r\n\r\n\t// @@@SNIPSTART samples-go-dependency-sharing-workflow\r\n\tvar a *Activities // use a nil struct pointer to call activities that are part of a structure\r\n\r\n\tvar greetResult string\r\n\terr := workflow.ExecuteActivity(ctx, a.GetGreeting).Get(ctx, &greetResult)\r\n\tif err != nil {\r\n\t\tlogger.Error(\"Get greeting failed.\", \"Error\", err)\r\n\t\treturn \"\", err\r\n\t}\r\n\t// @@@SNIPEND\r\n\r\n\t// Get Name.\r\n\tvar nameResult string\r\n\terr = workflow.ExecuteActivity(ctx, a.GetName).Get(ctx, &nameResult)\r\n\tif err != nil {\r\n\t\tlogger.Error(\"Get name failed.\", \"Error\", err)\r\n\t\treturn \"\", err\r\n\t}\r\n\r\n\t// Say Greeting.\r\n\tvar sayResult string\r\n\terr = workflow.ExecuteActivity(ctx, a.SayGreeting, greetResult, nameResult).Get(ctx, &sayResult)\r\n\tif err != nil {\r\n\t\tlogger.Error(\"Marshalling failed with error.\", \"Error\", err)\r\n\t\treturn \"\", err\r\n\t}\r\n\r\n\tlogger.Info(\"GreetingSample completed.\", \"Result\", sayResult)\r\n\treturn sayResult, nil\r\n}\r\n\r\n// SayGreeting Activity.\r\nfunc (a *Activities) SayGreeting(greeting string, name string) (string, error) {\r\n\tresult := fmt.Sprintf(\"Greeting: %s %s!\\n\", greeting, name)\r\n\treturn result, nil\r\n}\r\n\r\nfunc main() {\r\n\t// The client is a heavyweight object that should be created once per process.\r\n\tc, err := client.Dial(client.Options{\r\n\t\tHostPort: client.DefaultHostPort,\r\n\t})\r\n\tif err != nil {\r\n\t\tlog.Fatalln(\"Unable to create client\", err)\r\n\t}\r\n\tdefer c.Close()\r\n\r\n\tworkflowOptions := client.StartWorkflowOptions{\r\n\t\tID:        \"greetings_\" + uuid.New(),\r\n\t\tTaskQueue: \"greetings\",\r\n\t}\r\n\r\n\twe, err := c.ExecuteWorkflow(context.Background(), workflowOptions, GreetingSample)\r\n\tif err != nil {\r\n\t\tlog.Fatalln(\"Unable to execute workflow\", err)\r\n\t}\r\n\tlog.Println(\"Started workflow\", \"WorkflowID\", we.GetID(), \"RunID\", we.GetRunID())\r\n\r\n\t// Synchronously wait for the workflow completion.\r\n\tvar result string\r\n\terr = we.Get(context.Background(), &result)\r\n\tif err != nil {\r\n\t\tlog.Fatalln(\"Unable get workflow result\", err)\r\n\t}\r\n\tlog.Println(\"Workflow result:\", result)\r\n}\r\n```\r\n\r\n  1. go run main.go\r\n2024/07/17 14:02:06 INFO  No logger configured for temporal client. Created default one.\r\n2024/07/17 14:02:11 Unable to create client failed reaching server: context deadline exceeded\r\nexit status 1\r\n\r\n\r\nIf I change in go.mod the sdk version from:\r\n\tgo.temporal.io/sdk v1.27.0\r\n\r\nto\r\n\r\n\tgo.temporal.io/sdk v1.26.1\r\n\r\neverything works:\r\n```\r\nâžœ go run main.go\r\n2024/07/17 14:04:16 INFO  No logger configured for temporal client. Created default one.\r\n2024/07/17 14:04:16 Started workflow WorkflowID greetings_dcf4cf08-cb31-4460-ac0d-cddb7e2f164d RunID 2f4a0e00-7fa9-4bb2-bd64-5f12473cc5c8\r\n```\r\n\r\n## Specifications\r\n\r\n  - Version: goSDK: 1.27.0 go version go1.22.5 darwin/arm64\r\n  - Platform: Mac\r\n","closedAt":"2024-07-19T18:56:14Z","comments":[{"id":"IC_kwDODN1w686FIdYn","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"On Mac with the same Go Version I am not able to reproduce this at least with\r\n```\r\ntemporal --version\r\ntemporal version 0.13.2 (server 1.24.1) (ui 2.28.0)\r\n```\r\n\r\nMy only idea would be something interfering with resolving `localhost`. Could try using the IP of your server or try `passthrough:///localhost:7233`?","createdAt":"2024-07-17T15:22:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1550#issuecomment-2233587239","viewerDidAuthor":false},{"id":"IC_kwDODN1w686FJnUo","author":{"login":"donchev7"},"authorAssociation":"NONE","body":"do you mind trying with:\r\n```\r\ntemporal --version\r\ntemporal version 0.13.1 (server 1.24.1) (ui 2.27.3)\r\n```","createdAt":"2024-07-17T17:55:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1550#issuecomment-2233890088","viewerDidAuthor":false},{"id":"IC_kwDODN1w686FK8u6","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"No issue with `temporal version 0.13.1 `","createdAt":"2024-07-17T20:39:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1550#issuecomment-2234239930","viewerDidAuthor":false},{"id":"IC_kwDODN1w686FgoOR","author":{"login":"donchev7"},"authorAssociation":"NONE","body":"You were right. Now at my hotel I can't reproduce the issue. It must have been a networking issue at the client. Closing for now.\r\n\r\nThank you.","createdAt":"2024-07-19T18:56:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1550#issuecomment-2239923089","viewerDidAuthor":false}],"createdAt":"2024-07-17T10:04:49Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"},{"id":"LA_kwDODN1w687UGgkJ","name":"external dependency","description":"Waiting on something externally","color":"c5def5"}],"milestone":null,"number":1550,"reactionGroups":[],"state":"CLOSED","title":"After upgrading to 1.27.0 we get a context deadline exceeded","updatedAt":"2024-07-23T21:22:09Z","url":"https://github.com/temporalio/sdk-go/issues/1550"}
