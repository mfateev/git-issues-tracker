{"assignees":[],"author":{"id":"MDQ6VXNlcjYwNjQ1OQ==","is_bot":false,"login":"sevein","name":"Jesús García Crespo"},"body":"## Expected Behavior\r\n\r\nWhen `MaxConcurrentActivityExecutionSize` is set to `1`, session workers used to process activity executions in a session without delays, maintaining timely execution.\r\n\r\n## Actual Behavior\r\n\r\nAfter the introduction of worker tuners, session workers no longer process activities within a session promptly when `MaxConcurrentActivityExecutionSize` is set to `1`. Activities experience significant delays (~120 seconds) before execution begins. Increasing `MaxConcurrentActivityExecutionSize` to 3, or configuring a fixed-size tuner with `3` slots for activity tasks, resolves the issue.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Use SDK v1.29.0 or newer, specifically including commit a1d05a6f990da31143a702806e5915ef5a860e59 (https://github.com/temporalio/sdk-go/pull/1546), \r\n  2. Configure the worker with `EnableSessionWorker: true` and `MaxConcurrentActivityExecutionSize: 1`,\r\n  3. Build a workflow with a series of small activities, all executed within a session.\r\n  4. Observe the behavior:\r\n      - Every other activity in the session takes ~120 seconds to complete.\r\n      - The Temporal UI shows the `Activity Task Scheduled` event and `PENDING_ACTIVITY_STATE_SCHEDULED`.\r\n      - After the delay, the `Activity Task Started` and `Activity Task Completed` events appear. Despite the worker completing the activity quickly (under a second), it delays starting execution.\r\n\r\n## Specifications\r\n\r\n  - Version: SDK v1.29.0 or newer\r\n  - Platform: Linux\r\n","closedAt":"2024-12-02T22:23:31Z","comments":[],"createdAt":"2024-11-29T05:14:51Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":1732,"reactionGroups":[],"state":"CLOSED","title":"Session worker delays with single activity limit after Tuner introduction","updatedAt":"2024-12-02T22:23:31Z","url":"https://github.com/temporalio/sdk-go/issues/1732"}
