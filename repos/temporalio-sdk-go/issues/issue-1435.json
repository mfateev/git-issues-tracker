{"assignees":[],"author":{"id":"MDQ6VXNlcjE0NjM2MjI=","is_bot":false,"login":"mfateev","name":"Maxim Fateev"},"body":"## Expected Behavior\r\nA child workflow continues as new, and the parent waits for the child to complete.\r\n\r\n## Actual Behavior\r\nThe parent receives ChildWorkflowExecutionError with ContinueAsNewError wrapped error.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Add the following test to [child-workflow-continue-as-new](https://github.com/temporalio/samples-go/tree/main/child-workflow-continue-as-new) sample.\r\n\r\n```\r\npackage child_workflow_continue_as_new\r\n\r\nimport (\r\n\t\"testing\"\r\n\r\n\t\"github.com/stretchr/testify/suite\"\r\n\t\"go.temporal.io/sdk/testsuite\"\r\n)\r\n\r\ntype UnitTestSuite struct {\r\n\tsuite.Suite\r\n\ttestsuite.WorkflowTestSuite\r\n}\r\n\r\nfunc TestUnitTestSuite(t *testing.T) {\r\n\tsuite.Run(t, new(UnitTestSuite))\r\n}\r\n\r\nfunc (s *UnitTestSuite) Test_ExclusiveChoiceWorkflow() {\r\n\tenv := s.NewTestWorkflowEnvironment()\r\n\r\n\tenv.RegisterWorkflow(SampleChildWorkflow)\r\n\tenv.ExecuteWorkflow(SampleParentWorkflow)\r\n\r\n\ts.True(env.IsWorkflowCompleted())\r\n\ts.NoError(env.GetWorkflowError())\r\n}\r\n```\r\nTest fails with \r\n```\r\n2024/04/05 17:52:02 ERROR Parent execution received child execution failure. Error child workflow execution error (type: SampleChildWorkflow, workflowID: child_workflow:default-test-run-id, runID: child_workflow:default-test-run-id_RunID, initiatedEventID: 0, startedEventID: 0): continue as new\r\n    workflow_test.go:26: \r\n        \tError Trace:\t/Users/maxim/temporal/samples-go/child-workflow-continue-as-new/workflow_test.go:26\r\n        \tError:      \tReceived unexpected error:\r\n        \t            \tworkflow execution error (type: SampleParentWorkflow, workflowID: default-test-workflow-id, runID: default-test-run-id): child workflow execution error (type: SampleChildWorkflow, workflowID: child_workflow:default-test-run-id, runID: child_workflow:default-test-run-id_RunID, initiatedEventID: 0, startedEventID: 0): continue as new\r\n        \tTest:       \tTestUnitTestSuite/Test_ExclusiveChoiceWorkflow\r\n--- FAIL: TestUnitTestSuite (0.00s)\r\n    --- FAIL: TestUnitTestSuite/Test_ExclusiveChoiceWorkflow (0.00s)\r\n\r\n```","closedAt":"2024-04-09T18:55:19Z","comments":[],"createdAt":"2024-04-06T00:58:41Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":1435,"reactionGroups":[],"state":"CLOSED","title":"It is not possible to unit test a child workflow that calls continue as new.","updatedAt":"2024-04-09T18:55:19Z","url":"https://github.com/temporalio/sdk-go/issues/1435"}
