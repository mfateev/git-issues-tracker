{"assignees":[{"id":"MDQ6VXNlcjIwNjM5Ng==","login":"cretz","name":"Chad Retz","databaseId":0}],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"## Expected Behavior\r\n\r\nRunning a completed workflow through the replayer with a workflow with the activities in a different order should fail as nondeterministic due to command/event mismatch.\r\n\r\n## Actual Behavior\r\n\r\nThis is not occurring because of the `!w.isWorkflowCompleted` conditional at https://github.com/temporalio/sdk-go/blob/38b2b69f18bdc3bcaf1b4e48f940d1c60b5f9253/internal/internal_task_handlers.go#L946\r\n\r\nWill investigate how to make sure we re-enable determinism checks on completed workflows without: 1) causing any issues with what that conditional was trying to protect against (which I believe is premature workflow completion due to panic error), and 2) causing any issues with people's running code today.","closedAt":"2023-05-24T08:40:10Z","comments":[{"id":"IC_kwDODN1w685OsuHV","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"This also surfaces when a history doesn't necessarily have completion events but there are no steps after the last replay before `return` from the workflow.","createdAt":"2022-11-18T17:53:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/876#issuecomment-1320346069","viewerDidAuthor":false}],"createdAt":"2022-08-03T13:14:52Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":876,"reactionGroups":[],"state":"CLOSED","title":"Completed workflow not properly checking command/event mismatch for non-determinism","updatedAt":"2023-05-24T08:40:10Z","url":"https://github.com/temporalio/sdk-go/issues/876"}
