{"assignees":[],"author":{"id":"MDQ6VXNlcjQ1MjM5NTU=","is_bot":false,"login":"longquanzheng","name":"Quanzheng Long"},"body":"## Expected Behavior\r\nReturn the integer type\r\n\r\n## Actual Behavior\r\nReturn the float64 type\r\n\r\n## Steps to Reproduce the Problem\r\nsee https://github.com/temporalio/samples-go/pull/228\r\n\r\n## Specifications\r\n\r\n  - Version:  go.temporal.io/sdk v1.17.0\r\n  - Platform: MacOS\r\n","closedAt":"2022-12-02T20:44:59Z","comments":[{"id":"IC_kwDODN1w685NadMB","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"This is because you are choosing to use `interface{}` and `converter.GetDefaultDataConverter().FromPayload` which uses default Go JSON semantics which _never_ assumes integer for `interface{}`. From https://pkg.go.dev/encoding/json#Unmarshal:\r\n\r\n> float64, for JSON numbers\r\n\r\nIf this is an issue, you can either: 1) pass in the type you want JSON to unmarshal to, or 2) you can create your own converter that leverages https://pkg.go.dev/encoding/json#Decoder.UseNumber and changes to int if needed.","createdAt":"2022-11-01T16:19:26Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/942#issuecomment-1298780929","viewerDidAuthor":false},{"id":"IC_kwDODN1w685NaeQ6","author":{"login":"longquanzheng"},"authorAssociation":"CONTRIBUTOR","body":"interesting...\r\nBut it will be tedious to pass in the type because my code have to know it in advance. \r\nI think Temporal should have all the information to convert it correctly, isn't it? If so I would still consider it as a bug in Temporal.\r\n\r\n(But anyway, I am going to use UseNumber for my code for now. Thanks for the explanation)","createdAt":"2022-11-01T16:22:18Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/942#issuecomment-1298785338","viewerDidAuthor":false},{"id":"IC_kwDODN1w685NafN_","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":">  But it will be tedious to pass in the type because my code have to know it in advance.\r\n\r\nNot necessarily. You can either have a custom converter or confirm that float64 will work for your needs.\r\n\r\n> I think Temporal should have all the information to convert it correctly, isn't it? If so I would still consider it as a bug in Temporal.\r\n\r\nIt could if we treated search attributes as different than any other integer in the system, but we do not. Same thing with memo. If you call `converter.GetDefaultDataConverter().FromPayload(value, &object)` like your example, and `value` is a numeric payload, you will be subject to default conversion rules. This goes for all of our payloads and is not unique to search attributes.","createdAt":"2022-11-01T16:24:24Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/942#issuecomment-1298789247","viewerDidAuthor":false},{"id":"IC_kwDODN1w685PnOHe","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"@cretz can we close this? This seems like the intended behavior","createdAt":"2022-12-02T18:57:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/942#issuecomment-1335681502","viewerDidAuthor":false},{"id":"IC_kwDODN1w685Pnxzg","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Correct, closing.","createdAt":"2022-12-02T20:44:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/942#issuecomment-1335827680","viewerDidAuthor":false}],"createdAt":"2022-11-01T16:15:24Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":942,"reactionGroups":[],"state":"CLOSED","title":"SearchAttribute from DescribeWorkflowExecution return wrong type for Integer ","updatedAt":"2022-12-02T20:45:00Z","url":"https://github.com/temporalio/sdk-go/issues/942"}
