{"assignees":[{"id":"MDQ6VXNlcjIwNjM5Ng==","login":"cretz","name":"Chad Retz","databaseId":0}],"author":{"id":"MDQ6VXNlcjg0NDExMDE0","is_bot":false,"login":"yiminc","name":"Yimin Chen"},"body":"Currently, there is no way to start worker for activity only. We need a flag in worker.Options to explicitly disable workflow worker.","closedAt":"2022-01-18T19:42:36Z","comments":[{"id":"IC_kwDODN1w684545-z","author":{"login":"mfateev"},"authorAssociation":"MEMBER","body":"I don't think we need a flag. In Java SDK we don't start a workflow worker if no workflow is registered and don't start an activity worker if no activity is registered.","createdAt":"2021-11-17T06:05:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/temporalio/sdk-go/issues/636#issuecomment-971218867","viewerDidAuthor":true},{"id":"IC_kwDODN1w68456Z9P","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"In Go SDK, we always start the workflow worker and we allow you to register workflows after the worker has started. Should we change this or should we accept an option that doesn't start the workflow worker and doesn't allow registering of workflows?","createdAt":"2021-11-17T14:03:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/636#issuecomment-971611983","viewerDidAuthor":false},{"id":"IC_kwDODN1w6846FszK","author":{"login":"mfateev"},"authorAssociation":"MEMBER","body":"What is the use case for starting workers and registering activities/workflows after the start? IMHO it adds a lot of unnecessary complexity.","createdAt":"2021-11-20T01:52:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/636#issuecomment-974572746","viewerDidAuthor":true},{"id":"IC_kwDODN1w6846FtVf","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"We want the ability to start worker without workflow task poller (so it only poll for activity tasks). Currently, this is not possible because workflow worker is always started. There are 2 options we can achieve this:\r\n1) Add an option to explicitly disable workflow worker.\r\n2) Do not start workflow worker if there is no workflow type registered.\r\nWith option 2 combined with we allow workflow type registration after worker.Start() call, it would be very confusing.\r\n\r\nThe use case is for integration test where worker was setup by Setup() method before any workflow type is registered. With option 2, workflow worker won't be started. Then in the actual test method, workflow type is registered successfully. But since there is no workflow worker, test won't make any progress. \r\n","createdAt":"2021-11-20T02:06:22Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/636#issuecomment-974574943","viewerDidAuthor":false},{"id":"IC_kwDODN1w6846JbXe","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"After off-issue discussion and assuming there are no caveats to doing so, we won't start the workflow worker until after the worker is started _and_ the first workflow is registered.","createdAt":"2021-11-22T13:55:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":2}}],"url":"https://github.com/temporalio/sdk-go/issues/636#issuecomment-975549918","viewerDidAuthor":false},{"id":"IC_kwDODN1w6846PKUx","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Thinking about the need to change the `Worker` and `Registry` interfaces to return an `error` from `RegisterX` if those calls are expected to be able to start internal workers. Will update with decision.","createdAt":"2021-11-23T19:23:09Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/636#issuecomment-977052977","viewerDidAuthor":false},{"id":"IC_kwDODN1w6847YM7z","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"@yiminc and @mfateev - Can y'all weigh in here? If we are wanting to lazily start the workflow worker until after `RegisterWorkflow` is called the first time, what do I do with the `error` if the worker fails to start? Or is there some other approach we should take?","createdAt":"2021-12-16T21:16:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/636#issuecomment-996200179","viewerDidAuthor":false},{"id":"IC_kwDODN1w68479eNY","author":{"login":"mfateev"},"authorAssociation":"MEMBER","body":"Inability to return an error on start looks really bad to me. I don't like that we can register new types after the worker has started. Maybe we should rethink the integration testing approach?","createdAt":"2022-01-05T18:22:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/636#issuecomment-1005970264","viewerDidAuthor":true},{"id":"IC_kwDODN1w68479fer","author":{"login":"mfateev"},"authorAssociation":"MEMBER","body":"After an offline discussion, it looks like the original proposal with the options flag is the best compromise which is backward compatible.","createdAt":"2022-01-05T18:29:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/636#issuecomment-1005975467","viewerDidAuthor":true}],"createdAt":"2021-11-17T02:38:50Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":636,"reactionGroups":[],"state":"CLOSED","title":"Add WorkerOption to disable workflow worker","updatedAt":"2022-01-18T19:42:36Z","url":"https://github.com/temporalio/sdk-go/issues/636"}
