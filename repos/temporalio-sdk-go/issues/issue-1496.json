{"assignees":[],"author":{"id":"MDQ6VXNlcjUyMzA0","is_bot":false,"login":"bergundy","name":"Roey Berman"},"body":"When running a workflow that starts a child and cancels it:\n\n```go\nwf := func(ctx workflow.Context) error {\n\tchildCtx, cancel := workflow.WithCancel(ctx)\n\tdefer cancel()\n\tfut := workflow.ExecuteChildWorkflow(childCtx, waitForCancelWorkflow)\n\tif err := fut.GetChildWorkflowExecution().Get(ctx, nil); err != nil {\n\t\treturn err\n\t}\n\tcancel()\n\treturn fut.Get(ctx, nil)\n}\n\nfunc waitForCancelWorkflow(ctx workflow.Context) error {\n\treturn workflow.Await(ctx, func() bool { return false })\n}\n```\n\nI'm getting inconsistent outcomes:\n\nWith server:\n\n```\nworkflow execution error (type: func1, workflowID: 1eb1f045-b804-429f-b99e-57e45023a6e8, runID: 4821bd7c-b9f6-4684-92be-ab7354eefc36): canceled\n```\n\nWith test env:\n\n```\nworkflow execution error (type: func1, workflowID: default-test-workflow-id, runID: default-test-run-id): child workflow execution error (type: waitForCancelWorkflow, workflowID: default-test-run-id_1, runID: default-test-run-id_1_RunID, initiatedEventID: 0, startedEventID: 0): canceled\n```\n\nThe test env is consistent with the behavior of other SDKs, but it's likely too late to change the cancelation behavior with the real server for consistency. I propose we change the test env to be consistent with the \"real\" env.\n\n","closedAt":null,"comments":[],"createdAt":"2024-05-30T20:47:35Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":1496,"reactionGroups":[],"state":"OPEN","title":"Workflow outcome is inconsistent between test env and real server","updatedAt":"2025-02-04T18:23:13Z","url":"https://github.com/temporalio/sdk-go/issues/1496"}
