{"assignees":[],"author":{"id":"MDQ6VXNlcjI1MTI4OA==","is_bot":false,"login":"lorensr","name":"Loren ☺️"},"body":"## Expected Behavior\r\n\r\nExit code 0\r\n\r\n## Actual Behavior\r\n\r\nExit code 2, ending with this output:\r\n\r\n<details>\r\n\r\n```\r\n$ make test\r\n...\r\n=== RUN   Test_MockResetWorkflowExecution\r\n    mock_test.go:116: PASS:     ResetWorkflowExecution(string,string)\r\n--- PASS: Test_MockResetWorkflowExecution (0.00s)\r\nPASS\r\ncoverage: 25.6% of statements\r\nok      go.temporal.io/sdk/mocks        0.365s  coverage: 25.6% of statements\r\n=== RUN   TestAsyncBindingsTestSuite\r\nobjc[18411]: Attempt to use unknown class 0x7ff859ace260.\r\nSIGABRT: abort\r\nPC=0x7ff818286dfe m=5 sigcode=0\r\n\r\ngoroutine 0 [idle]:\r\nruntime: unknown pc 0x7ff818286dfe\r\nstack: frame={sp:0x7000060b3e58, fp:0x0} stack=[0x700006035338,0x7000060b4f38)\r\n0x00007000060b3d58:  0x0000000000000002  0x0000000000000002 \r\n0x00007000060b3d68:  0x00000000034ea000  0x00000000034ea400 \r\n0x00007000060b3d78:  0x000000000000000c  0x00007000060b3de0 \r\n0x00007000060b3d88:  0x00007ff8180bc619  0x0000000000000000 \r\n0x00007000060b3d98:  0xf6890000c000100c  0x000000000000ffff \r\n0x00007000060b3da8:  0x0000000000000030  0x0000000000000000 \r\n0x00007000060b3db8:  0x000000000000002d  0x000000000000002d \r\n0x00007000060b3dc8:  0x0000000000000000  0x00000000034ea000 \r\n0x00007000060b3dd8:  0x00007ff859ae2000  0x00007000060b3e10 \r\n0x00007000060b3de8:  0x00007ff8180bc546  0x00007ff8180bc50e \r\n0x00007000060b3df8:  0x000000000000002d  0x0000000000000001 \r\n0x00007000060b3e08:  0x00007ff859ae2000  0x00007000060b3e50 \r\n0x00007000060b3e18:  0x00007ff8180d8ad6  0x000000000000002c \r\n0x00007000060b3e28:  0x000000000000002d  0x0000600003300000 \r\n0x00007000060b3e38:  0x0000000000000003  0x0000600002c00000 \r\n0x00007000060b3e48:  0x0000000000000000  0x00007000060b3e80 \r\n0x00007000060b3e58: <0x00007ff818288893  0x0000000000000000 \r\n0x00007000060b3e68:  0x00000020060b3ec0  0x0000600002c00000 \r\n0x00007000060b3e78:  0x00007000060b3ec0  0x0000600003300000 \r\n0x00007000060b3e88:  0x0000000000000003  0x0000000000000080 \r\n0x00007000060b3e98:  0x0000000000000001  0x00007000060b3eb0 \r\n0x00007000060b3ea8:  0x00007ff818288843  0x00007000060b3ef0 \r\n0x00007000060b3eb8:  0x00007ff818154bce  0x0000600002c00080 \r\n0x00007000060b3ec8:  0x0000000000000000  0x0000600002c00000 \r\n0x00007000060b3ed8:  0x00007ffffffffff8  0x00007ff859ace260 \r\n0x00007000060b3ee8:  0x0000000080080001  0x00007000060b3fd0 \r\n0x00007000060b3ef8:  0x00007ff818154b5c  0x0000003000000010 \r\n0x00007000060b3f08:  0x00007000060b3fe0  0x00007000060b3f20 \r\n0x00007000060b3f18:  0x0000000000000000  0x0000000000000000 \r\n0x00007000060b3f28:  0x00007ff859ace260  0x00007ff859ace260 \r\n0x00007000060b3f38:  0x0000000000000001  0x00000000ffffffff \r\n0x00007000060b3f48:  0x0000000000000000  0x0000000000000000 \r\nruntime: unknown pc 0x7ff818286dfe\r\nstack: frame={sp:0x7000060b3e58, fp:0x0} stack=[0x700006035338,0x7000060b4f38)\r\n0x00007000060b3d58:  0x0000000000000002  0x0000000000000002 \r\n0x00007000060b3d68:  0x00000000034ea000  0x00000000034ea400 \r\n0x00007000060b3d78:  0x000000000000000c  0x00007000060b3de0 \r\n0x00007000060b3d88:  0x00007ff8180bc619  0x0000000000000000 \r\n0x00007000060b3d98:  0xf6890000c000100c  0x000000000000ffff \r\n0x00007000060b3da8:  0x0000000000000030  0x0000000000000000 \r\n0x00007000060b3db8:  0x000000000000002d  0x000000000000002d \r\n0x00007000060b3dc8:  0x0000000000000000  0x00000000034ea000 \r\n0x00007000060b3dd8:  0x00007ff859ae2000  0x00007000060b3e10 \r\n0x00007000060b3de8:  0x00007ff8180bc546  0x00007ff8180bc50e \r\n0x00007000060b3df8:  0x000000000000002d  0x0000000000000001 \r\n0x00007000060b3e08:  0x00007ff859ae2000  0x00007000060b3e50 \r\n0x00007000060b3e18:  0x00007ff8180d8ad6  0x000000000000002c \r\n0x00007000060b3e28:  0x000000000000002d  0x0000600003300000 \r\n0x00007000060b3e38:  0x0000000000000003  0x0000600002c00000 \r\n0x00007000060b3e48:  0x0000000000000000  0x00007000060b3e80 \r\n0x00007000060b3e58: <0x00007ff818288893  0x0000000000000000 \r\n0x00007000060b3e68:  0x00000020060b3ec0  0x0000600002c00000 \r\n0x00007000060b3e78:  0x00007000060b3ec0  0x0000600003300000 \r\n0x00007000060b3e88:  0x0000000000000003  0x0000000000000080 \r\n0x00007000060b3e98:  0x0000000000000001  0x00007000060b3eb0 \r\n0x00007000060b3ea8:  0x00007ff818288843  0x00007000060b3ef0 \r\n0x00007000060b3eb8:  0x00007ff818154bce  0x0000600002c00080 \r\n0x00007000060b3ec8:  0x0000000000000000  0x0000600002c00000 \r\n0x00007000060b3ed8:  0x00007ffffffffff8  0x00007ff859ace260 \r\n0x00007000060b3ee8:  0x0000000080080001  0x00007000060b3fd0 \r\n0x00007000060b3ef8:  0x00007ff818154b5c  0x0000003000000010 \r\n0x00007000060b3f08:  0x00007000060b3fe0  0x00007000060b3f20 \r\n0x00007000060b3f18:  0x0000000000000000  0x0000000000000000 \r\n0x00007000060b3f28:  0x00007ff859ace260  0x00007ff859ace260 \r\n0x00007000060b3f38:  0x0000000000000001  0x00000000ffffffff \r\n0x00007000060b3f48:  0x0000000000000000  0x0000000000000000 \r\n\r\ngoroutine 6 [syscall]:\r\nruntime.cgocall(0x1001140, 0xc000087ca0)\r\n        /usr/local/opt/go/libexec/src/runtime/cgocall.go:156 +0x6e fp=0xc000087c78 sp=0xc000087c40 pc=0x1044b8e\r\nnet._C2func_getaddrinfo(0xc000038186, 0x0, 0xc0000a6120, 0xc000010020)\r\n        _cgo_gotypes.go:97 +0x8b fp=0xc000087ca0 sp=0xc000087c78 pc=0x159ffeb\r\nnet.cgoLookupIPCNAME.func1({0xc000038186, 0xa, 0xc0001b2f0f}, 0x10af825, 0x28448e0)\r\n        /usr/local/opt/go/libexec/src/net/cgo_unix.go:163 +0xb2 fp=0xc000087d10 sp=0xc000087ca0 pc=0x15a2cb2\r\nnet.cgoLookupIPCNAME({0x1fa0d8a, 0x3}, {0xc0001b2f0f, 0x1})\r\n        /usr/local/opt/go/libexec/src/net/cgo_unix.go:163 +0x26e fp=0xc000087f10 sp=0xc000087d10 pc=0x15a21ae\r\nnet.cgoIPLookup(0x28448f0, {0x1fa0d8a, 0x3}, {0xc0001b2f0f, 0x9})\r\n        /usr/local/opt/go/libexec/src/net/cgo_unix.go:220 +0x67 fp=0xc000087f80 sp=0xc000087f10 pc=0x15a2dc7\r\nnet.cgoLookupIP·dwrap·22()\r\n        /usr/local/opt/go/libexec/src/net/cgo_unix.go:230 +0x72 fp=0xc000087fe0 sp=0xc000087f80 pc=0x15a3472\r\nruntime.goexit()\r\n        /usr/local/opt/go/libexec/src/runtime/asm_amd64.s:1581 +0x1 fp=0xc000087fe8 sp=0xc000087fe0 pc=0x10acb01\r\ncreated by net.cgoLookupIP\r\n        /usr/local/opt/go/libexec/src/net/cgo_unix.go:230 +0x1ba\r\n\r\ngoroutine 1 [chan receive]:\r\ntesting.(*T).Run(0xc000254b60, {0x1fb648b, 0x1a}, 0x1ff34f8)\r\n        /usr/local/opt/go/libexec/src/testing/testing.go:1307 +0x752\r\ntesting.runTests.func1(0x0)\r\n        /usr/local/opt/go/libexec/src/testing/testing.go:1598 +0x9a\r\ntesting.tRunner(0xc000254b60, 0xc0003dfbc0)\r\n        /usr/local/opt/go/libexec/src/testing/testing.go:1259 +0x230\r\ntesting.runTests(0xc000294680, {0x282f380, 0x2, 0x2}, {0x0, 0xc000213880, 0x28482a0})\r\n        /usr/local/opt/go/libexec/src/testing/testing.go:1596 +0x7cb\r\ntesting.(*M).Run(0xc000294680)\r\n        /usr/local/opt/go/libexec/src/testing/testing.go:1504 +0x9d2\r\nmain.main()\r\n        _testmain.go:95 +0x32c\r\n\r\ngoroutine 19 [select]:\r\ngoogle.golang.org/grpc.(*pickerWrapper).pick(0xc000530390, {0x2135a20, 0xc0005307e0}, 0x1, {{0x1fb850d, 0x0}, {0x2135a20, 0xc0005307e0}})\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/picker_wrapper.go:103 +0x1f6\r\ngoogle.golang.org/grpc.(*ClientConn).getTransport(0xc00040c500, {0x2135a20, 0xc0005307e0}, 0x78, {0x1fb850d, 0x1c})\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/clientconn.go:955 +0x9b\r\ngoogle.golang.org/grpc.(*clientStream).newAttemptLocked(0xc00040a300, 0x0)\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/stream.go:408 +0xf3c\r\ngoogle.golang.org/grpc.newClientStreamWithParams({0x21359e8, 0xc000524840}, 0x2844880, 0xc00040c500, {0x1fb850d, 0x1fb850d}, {0x0, 0x0, 0x0, 0x0, ...}, ...)\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/stream.go:298 +0x118b\r\ngoogle.golang.org/grpc.newClientStream.func2({0x21359e8, 0xc000524840}, 0xc000524840)\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/stream.go:184 +0x19a\r\ngoogle.golang.org/grpc.newClientStream({0x21359e8, 0xc000524840}, 0x2844880, 0xc00040c500, {0x1fb850d, 0x2}, {0xc00020ffc0, 0x2, 0x2})\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/stream.go:212 +0x714\r\ngoogle.golang.org/grpc.invoke({0x21359e8, 0xc000524840}, {0x1fb850d, 0x1c}, {0x1ef3c80, 0xc0004c6600}, {0x1ef3d40, 0xc0005305d0}, 0x4, {0xc00020ffc0, ...})\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/call.go:66 +0xd3\r\ngo.temporal.io/sdk/internal/common/metrics.NewGRPCInterceptor.func1({0x21359e8, 0xc000524840}, {0x1fb850d, 0xc0004c6680}, {0x1ef3c80, 0xc0004c6600}, {0x1ef3d40, 0xc0005305d0}, 0x10af825, 0x1ff3640, ...)\r\n        /Users/me/gh/sdk-go/internal/common/metrics/grpc.go:67 +0x315\r\ngoogle.golang.org/grpc.getChainUnaryInvoker.func1({0x21359e8, 0xc000524840}, {0x1fb850d, 0x1c}, {0x1ef3c80, 0xc0004c6600}, {0x1ef3d40, 0xc0005305d0}, 0x3710a68, {0xc00020ffc0, ...})\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/clientconn.go:356 +0x1ac\r\ngithub.com/grpc-ecosystem/go-grpc-middleware/retry.UnaryClientInterceptor.func1({0x21359e8, 0xc000524840}, {0x1fb850d, 0x1c}, {0x1ef3c80, 0xc0004c6600}, {0x1ef3d40, 0xc0005305d0}, 0x1b3e001, 0xc0005306c0, ...)\r\n        /Users/me/go/pkg/mod/github.com/grpc-ecosystem/go-grpc-middleware@v1.3.0/retry/retry.go:36 +0x16b\r\ngoogle.golang.org/grpc.getChainUnaryInvoker.func1({0x21359e8, 0xc000524840}, {0x1fb850d, 0x1c}, {0x1ef3c80, 0xc0004c6600}, {0x1ef3d40, 0xc0005305d0}, 0x8, {0xc0004c6640, ...})\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/clientconn.go:356 +0x1ac\r\ngo.temporal.io/sdk/internal/common/retry.NewRetryOptionsInterceptor.func1({0x21359e8, 0xc000524840}, {0x1fb850d, 0x1c}, {0x1ef3c80, 0xc0004c6600}, {0x1ef3d40, 0xc0005305d0}, 0x1facb3b, 0xc000530690, ...)\r\n        /Users/me/gh/sdk-go/internal/common/retry/interceptor.go:157 +0xa77\r\ngoogle.golang.org/grpc.getChainUnaryInvoker.func1({0x21359e8, 0xc000524840}, {0x1fb850d, 0x1c}, {0x1ef3c80, 0xc0004c6600}, {0x1ef3d40, 0xc0005305d0}, 0x30, {0xc00020fd80, ...})\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/clientconn.go:356 +0x1ac\r\ngo.temporal.io/sdk/internal/common/metrics.NewGRPCInterceptor.func1({0x21359e8, 0xc000524840}, {0x1fb850d, 0x10}, {0x1ef3c80, 0xc0004c6600}, {0x1ef3d40, 0xc0005305d0}, 0x0, 0xc000530630, ...)\r\n        /Users/me/gh/sdk-go/internal/common/metrics/grpc.go:67 +0x315\r\ngoogle.golang.org/grpc.getChainUnaryInvoker.func1({0x21359e8, 0xc000524840}, {0x1fb850d, 0x1c}, {0x1ef3c80, 0xc0004c6600}, {0x1ef3d40, 0xc0005305d0}, 0xc000524850, {0xc00020fd80, ...})\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/clientconn.go:356 +0x1ac\r\ngo.temporal.io/sdk/internal.errorInterceptor({0x21359e8, 0xc000524840}, {0x1fb850d, 0x1c}, {0x1ef3c80, 0xc0004c6600}, {0x1ef3d40, 0xc0005305d0}, 0x203000, 0xc000530600, ...)\r\n        /Users/me/gh/sdk-go/internal/grpc_dialer.go:180 +0xe6\r\ngoogle.golang.org/grpc.chainUnaryClientInterceptors.func1({0x21359e8, 0xc000524840}, {0x1fb850d, 0x1c}, {0x1ef3c80, 0xc0004c6600}, {0x1ef3d40, 0xc0005305d0}, 0x2848a80, 0x1ff3640, ...)\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/clientconn.go:344 +0x167\r\ngoogle.golang.org/grpc.(*ClientConn).Invoke(0xc00040c500, {0x21359e8, 0xc000524840}, {0x1fb850d, 0x1c}, {0x1ef3c80, 0xc0004c6600}, {0x1ef3d40, 0xc0005305d0}, {0x0, ...})\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/call.go:35 +0x26c\r\ngoogle.golang.org/grpc/health/grpc_health_v1.(*healthClient).Check(0xc0004def80, {0x21359e8, 0xc000524840}, 0xda80e388, {0x0, 0x0, 0x0})\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/health/grpc_health_v1/health_grpc.pb.go:56 +0xfd\r\ngo.temporal.io/sdk/internal.checkHealth.func1()\r\n        /Users/me/gh/sdk-go/internal/client.go:811 +0xec\r\ngo.temporal.io/sdk/internal/common/backoff.Retry({0x21359e8, 0xc0005247e0}, 0xc00021b5d0, {0x212b808, 0xc0001a0d20}, 0x0)\r\n        /Users/me/gh/sdk-go/internal/common/backoff/retry.go:107 +0x124\r\ngo.temporal.io/sdk/internal.checkHealth({0x212bb00, 0xc00040c500}, {0x0, {0x0, 0x0}, 0x0, 0x0, 0x0, 0x0, 0x0, ...})\r\n        /Users/me/gh/sdk-go/internal/client.go:808 +0x2c5\r\ngo.temporal.io/sdk/internal.NewClient({{0x1faac09, 0xe}, {0x1fb6a21, 0x1a}, {0x2136dd0, 0xc0001b0fd8}, {0x2137460, 0x2878678}, {0x0, 0x0}, ...})\r\n        /Users/me/gh/sdk-go/internal/client.go:653 +0x6c5\r\ngo.temporal.io/sdk/client.NewClient(...)\r\n        /Users/me/gh/sdk-go/client/client.go:436\r\ngo.temporal.io/sdk/test_test.(*AsyncBindingsTestSuite).SetupSuite(0xc000294700)\r\n        /Users/me/gh/sdk-go/test/bindings_test.go:68 +0x405\r\ngithub.com/stretchr/testify/suite.Run(0xc000254d00, {0x212b880, 0xc000294700})\r\n        /Users/me/go/pkg/mod/github.com/stretchr/testify@v1.7.0/suite/suite.go:118 +0x5b8\r\ngo.temporal.io/sdk/test_test.TestAsyncBindingsTestSuite(0x0)\r\n        /Users/me/gh/sdk-go/test/bindings_test.go:61 +0x45\r\ntesting.tRunner(0xc000254d00, 0x1ff34f8)\r\n        /usr/local/opt/go/libexec/src/testing/testing.go:1259 +0x230\r\ncreated by testing.(*T).Run\r\n        /usr/local/opt/go/libexec/src/testing/testing.go:1306 +0x727\r\n\r\ngoroutine 20 [select]:\r\ngoogle.golang.org/grpc.(*ccBalancerWrapper).watcher(0xc0005224b0)\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/balancer_conn_wrappers.go:77 +0x15c\r\ncreated by google.golang.org/grpc.newCCBalancerWrapper\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/balancer_conn_wrappers.go:67 +0x4d9\r\n\r\ngoroutine 21 [select]:\r\nnet.(*Resolver).lookupIPAddr(0x28448e0, {0x21359e8, 0xc0000a0120}, {0x1fa0d8a, 0x3}, {0xc0001b2f0f, 0x9})\r\n        /usr/local/opt/go/libexec/src/net/lookup.go:302 +0x81c\r\nnet.(*Resolver).internetAddrList(0x21359e8, {0x21359e8, 0xc0000a0120}, {0x1fa0d8a, 0x3}, {0xc0001b2f0f, 0xe})\r\n        /usr/local/opt/go/libexec/src/net/ipsock.go:288 +0x7c6\r\nnet.(*Resolver).resolveAddrList(0x2878678, {0x21359e8, 0xc0000a0120}, {0x1fa134d, 0x4}, {0x1fa0d8a, 0x3}, {0xc0001b2f0f, 0xe}, {0x0, ...})\r\n        /usr/local/opt/go/libexec/src/net/dial.go:221 +0x556\r\nnet.(*Dialer).DialContext(0xc000216a28, {0x21359e8, 0xc0000a0120}, {0x1fa0d8a, 0x10484ad}, {0xc0001b2f0f, 0x1e528e0})\r\n        /usr/local/opt/go/libexec/src/net/dial.go:406 +0x6e5\r\ngoogle.golang.org/grpc/internal/transport.proxyDial({0x21359e8, 0xc0000a0120}, {0xc0001b2f0f, 0x0}, {0x1faab53, 0xe})\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/internal/transport/proxy.go:125 +0x11f\r\ngoogle.golang.org/grpc/internal/transport.dial({0x21359e8, 0xc0000a0120}, 0x0, {{0xc0001b2f0f, 0xe}, {0xc0001b2f0f, 0xe}, 0x0, 0x0, 0x0, ...}, ...)\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/internal/transport/http2_client.go:171 +0x3bc\r\ngoogle.golang.org/grpc/internal/transport.newHTTP2Client({_, _}, {_, _}, {{0xc0001b2f0f, 0xe}, {0xc0001b2f0f, 0xe}, 0x0, 0x0, ...}, ...)\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/internal/transport/http2_client.go:204 +0x191\r\ngoogle.golang.org/grpc/internal/transport.NewClientTransport(...)\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/internal/transport/transport.go:576\r\ngoogle.golang.org/grpc.(*addrConn).createTransport(_, {{0xc0001b2f0f, 0xe}, {0xc0001b2f0f, 0xe}, 0x0, 0x0, 0x0, {0x0, 0x0}}, ...)\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/clientconn.go:1312 +0x8ab\r\ngoogle.golang.org/grpc.(*addrConn).tryAllAddrs(0xc00055a000, {0xc000522500, 0x1, 0x0}, {0x10be125, 0xc00040c8e8, 0x28482a0})\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/clientconn.go:1249 +0x518\r\ngoogle.golang.org/grpc.(*addrConn).resetTransport(0xc00055a000)\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/clientconn.go:1184 +0x20b\r\ngoogle.golang.org/grpc.(*addrConn).connect(0xc00055a000)\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/clientconn.go:845 +0xbc\r\ncreated by google.golang.org/grpc.(*acBalancerWrapper).Connect\r\n        /Users/me/go/pkg/mod/google.golang.org/grpc@v1.42.0/balancer_conn_wrappers.go:285 +0x125\r\n\r\ngoroutine 5 [select]:\r\nnet.cgoLookupIP({0x2135978, 0xc00009e140}, {0x1fa0d8a, 0x9}, {0xc0001b2f0f, 0x0})\r\n        /usr/local/opt/go/libexec/src/net/cgo_unix.go:231 +0x289\r\nnet.(*Resolver).lookupIP(0x28448e0, {0x2135978, 0xc00009e140}, {0x1fa0d8a, 0x3}, {0xc0001b2f0f, 0x9})\r\n        /usr/local/opt/go/libexec/src/net/lookup_unix.go:97 +0x113\r\nnet.glob..func1({0x2135978, 0xc00009e140}, 0xc000088150, {0x1fa0d8a, 0x3}, {0xc0001b2f0f, 0x9})\r\n        /usr/local/opt/go/libexec/src/net/hook.go:23 +0x89\r\nnet.(*Resolver).lookupIPAddr.func1()\r\n        /usr/local/opt/go/libexec/src/net/lookup.go:296 +0x133\r\ninternal/singleflight.(*Group).doCall(0x28448f0, 0xc0000320a0, {0xc000038173, 0xd}, 0xc00009e180)\r\n        /usr/local/opt/go/libexec/src/internal/singleflight/singleflight.go:95 +0x68\r\ncreated by internal/singleflight.(*Group).DoChan\r\n        /usr/local/opt/go/libexec/src/internal/singleflight/singleflight.go:88 +0x59b\r\n\r\nrax    0x2000209\r\nrbx    0x80\r\nrcx    0x7000060b3e58\r\nrdx    0x0\r\nrdi    0x8\r\nrsi    0x1\r\nrbp    0x7000060b3ea0\r\nrsp    0x7000060b3e58\r\nr8     0x600002c00000\r\nr9     0x80\r\nr10    0x0\r\nr11    0x246\r\nr12    0x0\r\nr13    0x0\r\nr14    0x1\r\nr15    0x8\r\nrip    0x7ff818286dfe\r\nrflags 0x246\r\ncs     0x7\r\nfs     0x0\r\ngs     0x0\r\nFAIL    go.temporal.io/sdk/test 0.435s\r\nFAIL\r\nmake: *** [integration-test-zero-cache] Error 1\r\n```\r\n\r\n</details>\r\n\r\n`make check` and `make unit-test` succeed, as does:\r\n\r\n```\r\n$ cd test && go test -run ^TestAsyncBindingsTestSuite$ .\r\nok      go.temporal.io/sdk/test 1.726s\r\n```\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. `make test`\r\n\r\n## Specifications\r\n\r\n  - Version: master\r\n  - Platform: Mac 12.1\r\n","closedAt":"2022-01-06T21:52:50Z","comments":[{"id":"IC_kwDODN1w6848AFu0","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"I cannot replicate this. From the `Makefile`, `make test` is the equivalent of `make unit-test`, `make integration-test-zero-cache`, and `make integration-test-normal-cache`.\r\n\r\nYour error seems to be a mac-specific known issue when using race detector on mac. Can you look at https://github.com/golang/go/issues/49138 and see if anything in that issue helps? It looks like Go 1.18 will fix this per https://github.com/golang/go/commit/5f6552018d1ec920c3ca3d459691528f48363c3c, but in the meantime you can mimic what https://github.com/Shopify/toxiproxy/commit/40f632786e8362cb969cc82f33c3d313a6413e88 did (specifically add `MallocNanoZone=0` before running `go test`).\r\n\r\nI'm undecided on whether we should alter the makefile for this bug, but if it's a big enough issue we can.","createdAt":"2022-01-06T14:58:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/687#issuecomment-1006656436","viewerDidAuthor":false},{"id":"IC_kwDODN1w6848BQKu","author":{"login":"lorensr"},"authorAssociation":"CONTRIBUTOR","body":"Thanks, that worked! Here's a patch file for anyone else with this issue:\r\n\r\n```\r\ndiff --git a/Makefile b/Makefile\r\nindex 6b523e6..3845bc0 100644\r\n--- a/Makefile\r\n+++ b/Makefile\r\n@@ -46,13 +46,13 @@ unit-test: $(BUILD)/dummy\r\n integration-test-zero-cache: $(BUILD)/dummy\r\n \t@mkdir -p $(COVER_ROOT)\r\n \t@for dir in $(INTEG_TEST_DIRS); do \\\r\n-\t\t(cd \"$$dir\" &&WORKFLOW_CACHE_SIZE=0 go test $(TEST_ARG) . -coverprofile=$(INTEG_ZERO_CACHE_COVER_FILE) -coverpkg=./...) || exit 1; \\\r\n+\t\t(cd \"$$dir\" &&WORKFLOW_CACHE_SIZE=0 MallocNanoZone=0 go test $(TEST_ARG) . -coverprofile=$(INTEG_ZERO_CACHE_COVER_FILE) -coverpkg=./...) || exit 1; \\\r\n \tdone;\r\n \r\n integration-test-normal-cache: $(BUILD)/dummy\r\n \t@mkdir -p $(COVER_ROOT)\r\n \t@for dir in $(INTEG_TEST_DIRS); do \\\r\n-\t\t(cd \"$$dir\" && go test $(TEST_ARG) . -coverprofile=$(INTEG_NORMAL_CACHE_COVER_FILE) -coverpkg=./...) || exit 1; \\\r\n+\t\t(cd \"$$dir\" && MallocNanoZone=0 go test $(TEST_ARG) . -coverprofile=$(INTEG_NORMAL_CACHE_COVER_FILE) -coverpkg=./...) || exit 1; \\\r\n \tdone;\r\n \r\n test: unit-test integration-test-zero-cache integration-test-normal-cache\r\n```\r\n\r\n`git apply patch`","createdAt":"2022-01-06T21:52:50Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/687#issuecomment-1006961326","viewerDidAuthor":false}],"createdAt":"2022-01-06T04:59:14Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":687,"reactionGroups":[],"state":"CLOSED","title":"`make test` fails","updatedAt":"2022-01-06T21:53:13Z","url":"https://github.com/temporalio/sdk-go/issues/687"}
