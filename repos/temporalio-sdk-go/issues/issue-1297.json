{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNTA0MDQ5","is_bot":false,"login":"Quinn-With-Two-Ns","name":"Quinn Klassen"},"body":" Update handle needs to be invoked immediately when registered with pending updates. If we do not it is possible a workflow function may return before the update handle is called, preventing the workflow from properly handling the update.\r\n\r\n\r\nFor example:\r\n```Go\r\ninFlightUpdates := 0\r\nSetUpdateHandlerWithOptions(\r\n\tctx,\r\n\tupdateName,\r\n\tfunc() (T, error) {\r\n                 inFlightUpdates = inFlightUpdates + 1\r\n\t\t// << change Workflow state >>\r\n\r\n\t\treturn <result>, nil\r\n\t},\r\n)\r\n\r\nAwait(inFlightUpdates == 0) // until Workflow is done\r\nreturn\r\n```\r\nhere the update handle won't be invoked until after the return so the `Await` won't work as intended","closedAt":"2023-12-04T21:26:59Z","comments":[],"createdAt":"2023-11-21T18:19:12Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":1297,"reactionGroups":[],"state":"CLOSED","title":"Update handle needs to be invoked immediately when registered with pending updates","updatedAt":"2023-12-04T21:27:00Z","url":"https://github.com/temporalio/sdk-go/issues/1297"}
