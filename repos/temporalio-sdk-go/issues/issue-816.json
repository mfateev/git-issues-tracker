{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nSome child workflows use `WorkflowInfo.ParentExecution` info to do an external signal to parent. This may not be working in unit tests and we may not provide a way to set parent execution if users want to just test single workflows.\r\n\r\n**Describe the solution you'd like**\r\n\r\nDo investigation and if easy to support parent workflow signalling, do so. Otherwise make it possible to set parent execution info.","closedAt":"2022-05-31T22:15:57Z","comments":[{"id":"IC_kwDODN1w685EFSVp","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"I am struggling to replicate this. Here is a test case showing parent signalling from child:\r\n\r\n```go\r\npackage main_test\r\n\r\nimport (\r\n\t\"testing\"\r\n\r\n\t\"github.com/stretchr/testify/require\"\r\n\t\"go.temporal.io/sdk/testsuite\"\r\n\t\"go.temporal.io/sdk/workflow\"\r\n)\r\n\r\nfunc TestChildSignalParent(t *testing.T) {\r\n\tchildWorkflowFn := func(ctx workflow.Context) error {\r\n\t\treturn workflow.SignalExternalWorkflow(ctx,\r\n\t\t\tworkflow.GetInfo(ctx).ParentWorkflowExecution.ID, \"\", \"some-signal\", \"val1\").Get(ctx, nil)\r\n\t}\r\n\tparentWorkflowFn := func(ctx workflow.Context) (string, error) {\r\n\t\tchildFut := workflow.ExecuteChildWorkflow(ctx, childWorkflowFn)\r\n\t\tif err := childFut.GetChildWorkflowExecution().Get(ctx, nil); err != nil {\r\n\t\t\treturn \"\", err\r\n\t\t}\r\n\t\tvar signalArg string\r\n\t\tworkflow.GetSignalChannel(ctx, \"some-signal\").Receive(ctx, &signalArg)\r\n\t\treturn signalArg, childFut.Get(ctx, nil)\r\n\t}\r\n\tvar suite testsuite.WorkflowTestSuite\r\n\tenv := suite.NewTestWorkflowEnvironment()\r\n\tenv.RegisterWorkflow(childWorkflowFn)\r\n\tenv.RegisterWorkflow(parentWorkflowFn)\r\n\tenv.ExecuteWorkflow(parentWorkflowFn)\r\n\trequire.True(t, env.IsWorkflowCompleted())\r\n\trequire.NoError(t, env.GetWorkflowError())\r\n\tvar resStr string\r\n\trequire.NoError(t, env.GetWorkflowResult(&resStr))\r\n\trequire.Equal(t, \"val1\", resStr)\r\n}\r\n```","createdAt":"2022-05-31T14:48:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/816#issuecomment-1142236521","viewerDidAuthor":false},{"id":"IC_kwDODN1w685EHBBm","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Confirmed with user this is was an unrelated issue with their code","createdAt":"2022-05-31T22:15:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/816#issuecomment-1142689894","viewerDidAuthor":false}],"createdAt":"2022-05-26T18:06:02Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":816,"reactionGroups":[],"state":"CLOSED","title":"Investigate how to unit test child workflows signalling a parent","updatedAt":"2022-05-31T22:15:57Z","url":"https://github.com/temporalio/sdk-go/issues/816"}
