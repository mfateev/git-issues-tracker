{"assignees":[{"id":"MDQ6VXNlcjUxNzY4Mw==","login":"Sushisource","name":"Spencer Judge","databaseId":0}],"author":{"id":"MDQ6VXNlcjIwMTI1Nw==","is_bot":false,"login":"ghstahl","name":"Herb Stahl"},"body":"## Expected Behavior\r\nActivities executed should not behave differently when executed using either ***ExecuteActivity*** or ***ExecuteLocalActivity***  \r\n\r\n## Actual Behavior\r\n***ExecuteLocalActivity***  results in the struct pointer to the activities being nil.   \r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  [reproduced project](https://github.com/fluffy-bunny/temporal-go-localexecute-issue)   \r\n\r\nWhen registering activites using a struct as such;\r\n\r\n## Activities  \r\n```go\r\ntype BeautifulActivities struct {\r\n}\r\n\r\nvar MyBeautifulActivities *BeautifulActivities\r\n\r\nfunc NewBeautifulActivities() *BeautifulActivities {\r\n\treturn &BeautifulActivities{}\r\n}\r\nfunc (a *BeautifulActivities) ComposeGreeting(name string) (string, error) {\r\n\tif a == nil {\r\n\t\t// This happens when ExecuteLocalActivity\r\n\t\tfmt.Println(\"Ermaghd me pointer is nil!\")\r\n\t\tpanic(\"Ermaghd me pointer is nil!\")\r\n\t} else {\r\n\t\tfmt.Println(\"Nothing to see here, everything is A-OK!\")\r\n\t}\r\n\tgreeting := fmt.Sprintf(\"Hello %s!\", name)\r\n\treturn greeting, nil\r\n}\r\n```\r\n## Registering Activities  \r\n```go\r\nact := app.NewBeautifulActivities()\r\nw.RegisterActivity(act)\r\n``` \r\nResults in the pointer to **\\*BeautifulActivities** being nil if the activity is executed locally.  \r\n```go \r\nfunc (a *BeautifulActivities) ComposeGreeting(name string) (string, error) {\r\n// a is nil - panic\r\n}\r\n```  \r\n\r\n```go\r\nlocalOptions := workflow.LocalActivityOptions{\r\n\t\tStartToCloseTimeout: time.Second * 5,\r\n}\r\nctx = workflow.WithLocalActivityOptions(ctx, localOptions)\r\nerr = workflow.ExecuteLocalActivity(ctx, MyBeautifulActivities.ComposeGreeting, name).Get(ctx, &result)\r\n```\r\n\r\nThis does not happen when the activity is executed normally.  \r\n```go\r\noptions := workflow.ActivityOptions{\r\n\t\tStartToCloseTimeout: time.Second * 5,\r\n}\r\nctx = workflow.WithActivityOptions(ctx, options)\r\nvar result string\r\nerr := workflow.ExecuteActivity(ctx, MyBeautifulActivities.ComposeGreeting, name).Get(ctx, &result)\r\n```\r\n## Specifications\r\n\r\n  - Version:\r\n  - Platform:\r\n```yaml\r\nversion: \"3.5\"\r\nservices:\r\n  cassandra:\r\n    container_name: temporal-cassandra\r\n    image: cassandra:3.11.9\r\n    networks:\r\n      - temporal-network\r\n    ports:\r\n      - 9042:9042\r\n  temporal:\r\n    container_name: temporal\r\n    depends_on:\r\n      - cassandra\r\n    environment:\r\n      - CASSANDRA_SEEDS=cassandra\r\n      - DYNAMIC_CONFIG_FILE_PATH=config/dynamicconfig/development.yaml\r\n    image: temporalio/auto-setup:1.8.1\r\n    networks:\r\n      - temporal-network\r\n    ports:\r\n      - 7233:7233\r\n    volumes:\r\n      - ./dynamicconfig:/etc/temporal/config/dynamicconfig\r\n  temporal-admin-tools:\r\n    container_name: temporal-admin-tools\r\n    depends_on:\r\n      - temporal\r\n    environment:\r\n      - TEMPORAL_CLI_ADDRESS=temporal:7233\r\n    image: temporalio/admin-tools:1.8.1\r\n    networks:\r\n      - temporal-network\r\n    stdin_open: true\r\n    tty: true\r\n  temporal-web:\r\n    container_name: temporal-web\r\n    depends_on:\r\n      - temporal\r\n    environment:\r\n      - TEMPORAL_GRPC_ENDPOINT=temporal:7233\r\n      - TEMPORAL_PERMIT_WRITE_API=true\r\n    image: temporalio/web:1.8.1\r\n    networks:\r\n      - temporal-network\r\n    ports:\r\n      - 8088:8088\r\nnetworks:\r\n  temporal-network:\r\n    driver: bridge\r\n    name: temporal-network\r\n\r\n```","closedAt":"2023-05-24T08:03:41Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg0MDAxNDM4Mw==","author":{"login":"Sushisource"},"authorAssociation":"MEMBER","body":"@ghstahl This should be fixed by #436 - give it a shot and let us know","createdAt":"2021-05-12T18:43:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/405#issuecomment-840014383","viewerDidAuthor":false},{"id":"IC_kwDODN1w685dBXbX","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"closing as this is fixed by https://github.com/temporalio/sdk-go/pull/426","createdAt":"2023-05-24T08:03:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/405#issuecomment-1560639191","viewerDidAuthor":false}],"createdAt":"2021-04-13T18:44:43Z","labels":[],"milestone":null,"number":405,"reactionGroups":[],"state":"CLOSED","title":"Struct pointer to Activities is nil when executed using ExecuteLocalActivity ","updatedAt":"2023-05-24T08:03:42Z","url":"https://github.com/temporalio/sdk-go/issues/405"}
