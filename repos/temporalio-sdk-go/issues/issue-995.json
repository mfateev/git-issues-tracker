{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"## Expected Behavior\r\n\r\nWhen server gets > 4MB message, it returns `ResourceExhausted` error with something like:\r\n\r\n> grpc: received message larger than max (10248653 vs. 4194304)\r\n\r\nWhich is retried by our gRPC interceptor as are all other `ResourceExhausted`. We need to stop retrying this one in particular but still retry others. If we can prevent it from going over the wire without pre-calculating the size that would be best, but otherwise we may need to hack something to change the error type for this particular error before it gets to the retry interceptor. Yes that may mean a message string check which is admittedly gross.\r\n\r\nAlso, add an integration test with a workflow whose activity payload will trigger this and confirm that it's a workflow task failure (can be in sdk-features).\r\n","closedAt":"2025-08-26T16:08:46Z","comments":[{"id":"IC_kwDODN1w685R0Kd4","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Before developing, please see #466 for some context of a similar discussion in the past. It seems there was discussion around similar concerns and the max client size was changed to _prevent_ this error on the client side, but it still may occur on the server.\r\n\r\nThe goal here is to make sure grpc-message-too-large errors of, say, a 6MB workflow task completion cause a workflow task failure instead of implicit retry of resource exhausted.","createdAt":"2023-01-05T19:16:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/995#issuecomment-1372628856","viewerDidAuthor":false},{"id":"IC_kwDODN1w686rsYAs","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Features issue made at https://github.com/temporalio/features/issues/624. Please refer to that for ideal behavior.","createdAt":"2025-05-14T14:49:43Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/995#issuecomment-2880536620","viewerDidAuthor":false}],"createdAt":"2023-01-05T13:07:57Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":995,"reactionGroups":[],"state":"CLOSED","title":"Do not auto-retry gRPC-message-size-too-large errors","updatedAt":"2025-08-26T16:08:46Z","url":"https://github.com/temporalio/sdk-go/issues/995"}
