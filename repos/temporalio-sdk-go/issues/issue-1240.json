{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNTA0MDQ5","is_bot":false,"login":"Quinn-With-Two-Ns","name":"Quinn Klassen"},"body":"Data race observed in `VersionLoopWorkflow`, after the deadlock detector fired. `VersionLoopWorkflow` has no defer's or cancellation that are known issues. Likely suspect is this [PR](https://github.com/temporalio/sdk-go/commit/a059d880141b183ccf18c081caea66748747c296)\r\n\r\nhttps://github.com/temporalio/sdk-go/actions/runs/6227934624/job/16903653066\r\n\r\n```\r\n2023/09/18 21:09:04 ERROR Workflow panic Namespace integration-test-namespace TaskQueue tq-62779e48-2585-42cd-b9d3-6945da2ebf53-TestIntegrationSuite/TestVersionLoopWorkflow WorkerID 16605@fv-az437-13@ WorkflowType VersionLoopWorkflow WorkflowID test-version-loop-workflow RunID 676d31fa-41ab-4afa-8533-46a73d2b28e6 Attempt 1 Error Potential deadlock detected: workflow goroutine \"root\" didn't yield for over a second StackTrace process event for tq-62779e48-2585-42cd-b9d3-6945da2ebf53-TestIntegrationSuite/TestVersionLoopWorkflow [panic]:\r\ngo.temporal.io/sdk/internal.(*coroutineState).call(0xc00064e870, 0x3b9aca00)\r\n\t/home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1011 +0x2cb\r\ngo.temporal.io/sdk/internal.(*dispatcherImpl).ExecuteUntilAllBlocked(0xc00012c780, 0x1645f00?)\r\n\t/home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1108 +0x2d7\r\ngo.temporal.io/sdk/internal.executeDispatcher({0x19c9dc0, 0xc00012c840}, {0x19cb8c0, 0xc00012c780}, 0xc000250f90?)\r\n\t/home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:622 +0xc8\r\ngo.temporal.io/sdk/internal.(*syncWorkflowDefinition).OnWorkflowTaskStarted(0xc00014a240, 0x179?)\r\n\t/home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:592 +0x89\r\ngo.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).ProcessEvent(0xc000012840, 0xc0004b9700, 0x0, 0x1)\r\n\t/home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1063 +0x603\r\ngo.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask(0xc000520bd0, 0xc0004c0930)\r\n\t/home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1028 +0x1fca\r\ngo.temporal.io/sdk/internal.(*workflowTaskHandlerImpl).ProcessWorkflowTask(0xc0007ccea0, 0xc0004c0930, 0xc000520bd0, 0xc0002513e0)\r\n\t/home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:836 +0x69c\r\ngo.temporal.io/sdk/internal.(*workflowTaskPoller).processWorkflowTask(0xc0005c26c0, 0xc0004c0930)\r\n\t/home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:354 +0x756\r\ngo.temporal.io/sdk/internal.(*workflowTaskPoller).ProcessTask(0xc0005c26c0, {0x161d060?, 0xc0004c0930?})\r\n\t/home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:318 +0xcb\r\ngo.temporal.io/sdk/internal.(*baseWorker).processTask(0xc0003beb00, {0x161cba0, 0xc000cca6c0})\r\n\t/home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:505 +0x256\r\ngo.temporal.io/sdk/internal.(*baseWorker).processTaskAsync.func1()\r\n\t/home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:356 +0x8c\r\ncreated by go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync\r\n\t/home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:352 +0x13a\r\n2023/09/18 21:09:04 WARN  Serialized size of TemporalChangeVersion search attribute update would exceed the maximum value size. Skipping this upsert. Be aware that your visibility records will not include the following patch: changeID_2:0-1 Namespace integration-test-namespace TaskQueue tq-62779e48-2585-42cd-b9d3-6945da2ebf53-TestIntegrationSuite/TestVersionLoopWorkflow WorkerID 16605@fv-az437-13@ WorkflowType VersionLoopWorkflow WorkflowID test-version-loop-workflow RunID 676d31fa-41ab-4afa-8533-46a73d2b28e6 Attempt 1\r\n==================\r\nWARNING: DATA RACE\r\nRead at 0x00c000250fc0 by goroutine 6063:\r\n  runtime.mapaccess2()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/runtime/map.go:456 +0x0\r\n  go.temporal.io/sdk/internal.(*commandsHelper).addCommand()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:929 +0xb6\r\n  go.temporal.io/sdk/internal.(*commandsHelper).recordVersionMarker()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:1073 +0x512\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentImpl).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:799 +0x734\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).GetVersion()\r\n      <autogenerated>:1 +0x78\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:1681 +0x6f\r\n  go.temporal.io/sdk/internal.(*WorkflowOutboundInterceptorBase).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/interceptor_base.go:336 +0x9a\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowOutboundInterceptor).GetVersion()\r\n      <autogenerated>:1 +0x29\r\n  go.temporal.io/sdk/internal.GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:1677 +0xb7\r\n  go.temporal.io/sdk/workflow.GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/workflow/workflow.go:384 +0x19e\r\n  go.temporal.io/sdk/test_test.(*Workflows).VersionLoopWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/test/workflow_test.go:2319 +0x113\r\n  go.temporal.io/sdk/test_test.(*Workflows).VersionLoopWorkflow-fm()\r\n      <autogenerated>:1 +0x92\r\n  runtime.call64()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/runtime/asm_amd64.s:730 +0x48\r\n  reflect.Value.Call()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/reflect/value.go:370 +0xc7\r\n  go.temporal.io/sdk/internal.executeFunction()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker.go:[1806](https://github.com/temporalio/sdk-go/actions/runs/6227934624/job/16903653066#step:7:1807) +0x5b0\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:530 +0x23e\r\n  go.temporal.io/sdk/internal.(*WorkflowInboundInterceptorBase).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/internal/interceptor_base.go:154 +0x76\r\n  go.temporal.io/sdk/test_test.(*signalWorkflowInboundInterceptor).ExecuteWorkflow()\r\n      <autogenerated>:1 +0x29\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowInboundInterceptor).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/test/integration_test.go:4136 +0x18e\r\n  go.temporal.io/sdk/internal.(*workflowExecutor).Execute()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker.go:805 +0x41a\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).Execute.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:512 +0x189\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1057 +0x165\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine.func2()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1058 +0x47\r\n\r\nPrevious write at 0x00c000250fc0 by goroutine 6062:\r\n  runtime.mapdelete()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/runtime/map.go:695 +0x0\r\n  go.temporal.io/sdk/internal.(*commandStateMachineBase).moveState()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:430 +0x646\r\n  go.temporal.io/sdk/internal.(*markerCommandStateMachine).handleCommandSent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:836 +0xab\r\n  go.temporal.io/sdk/internal.(*commandsHelper).getCommands()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:1417 +0x276\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).CompleteWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1244 +0x81b\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).applyWorkflowPanicPolicy()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1142 +0x1064\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1088 +0x1676\r\n  go.temporal.io/sdk/internal.executeDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:622 +0xc7\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).OnWorkflowTaskStarted()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:592 +0x88\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).ProcessEvent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1063 +0x602\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1028 +0x1fc9\r\n  go.temporal.io/sdk/internal.(*workflowTaskHandlerImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:836 +0x69b\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).processWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:354 +0x755\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).ProcessTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:318 +0xca\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:505 +0x255\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:356 +0x8b\r\n\r\nGoroutine 6063 (running) created at:\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1048 +0x66e\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).Go()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:308 +0x86\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowOutboundInterceptor).Go()\r\n      /home/runner/work/sdk-go/sdk-go/test/integration_test.go:4093 +0x201\r\n  go.temporal.io/sdk/internal.newDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:614 +0x27e\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).Execute()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:499 +0x1c4\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).handleWorkflowExecutionStarted()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1269 +0x36b\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).ProcessEvent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1044 +0x20e\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1028 +0x1fc9\r\n  go.temporal.io/sdk/internal.(*workflowTaskHandlerImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:836 +0x69b\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).processWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:354 +0x755\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).ProcessTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:318 +0xca\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:505 +0x255\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:356 +0x8b\r\n\r\nGoroutine 6062 (running) created at:\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:352 +0x139\r\n  go.temporal.io/sdk/internal.(*baseWorker).runTaskDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:382 +0x116\r\n  go.temporal.io/sdk/internal.(*baseWorker).Start.func3()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:284 +0x39\r\n==================\r\n==================\r\nWARNING: DATA RACE\r\nRead at 0x00c000250f90 by goroutine 6063:\r\n  container/list.(*List).lazyInit()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/container/list/list.go:86 +0x131\r\n  container/list.(*List).PushBack()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/container/list/list.go:151 +0x12c\r\n  go.temporal.io/sdk/internal.(*commandsHelper).addCommand()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:933 +0xd2\r\n  go.temporal.io/sdk/internal.(*commandsHelper).recordVersionMarker()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:1073 +0x512\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentImpl).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:799 +0x734\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).GetVersion()\r\n      <autogenerated>:1 +0x78\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:1681 +0x6f\r\n  go.temporal.io/sdk/internal.(*WorkflowOutboundInterceptorBase).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/interceptor_base.go:336 +0x9a\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowOutboundInterceptor).GetVersion()\r\n      <autogenerated>:1 +0x29\r\n  go.temporal.io/sdk/internal.GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:1677 +0xb7\r\n  go.temporal.io/sdk/workflow.GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/workflow/workflow.go:384 +0x19e\r\n  go.temporal.io/sdk/test_test.(*Workflows).VersionLoopWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/test/workflow_test.go:2319 +0x113\r\n  go.temporal.io/sdk/test_test.(*Workflows).VersionLoopWorkflow-fm()\r\n      <autogenerated>:1 +0x92\r\n  runtime.call64()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/runtime/asm_amd64.s:730 +0x48\r\n  reflect.Value.Call()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/reflect/value.go:370 +0xc7\r\n  go.temporal.io/sdk/internal.executeFunction()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker.go:1806 +0x5b0\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:530 +0x23e\r\n  go.temporal.io/sdk/internal.(*WorkflowInboundInterceptorBase).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/internal/interceptor_base.go:154 +0x76\r\n  go.temporal.io/sdk/test_test.(*signalWorkflowInboundInterceptor).ExecuteWorkflow()\r\n      <autogenerated>:1 +0x29\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowInboundInterceptor).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/test/integration_test.go:4136 +0x18e\r\n  go.temporal.io/sdk/internal.(*workflowExecutor).Execute()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker.go:805 +0x41a\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).Execute.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:512 +0x189\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1057 +0x165\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine.func2()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1058 +0x47\r\n\r\nPrevious write at 0x00c000250f90 by goroutine 6062:\r\n  container/list.(*List).remove()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/container/list/list.go:109 +0x445\r\n  container/list.(*List).Remove()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/container/list/list.go:138 +0x40a\r\n  go.temporal.io/sdk/internal.(*commandStateMachineBase).moveState()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:429 +0x395\r\n  go.temporal.io/sdk/internal.(*markerCommandStateMachine).handleCommandSent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:836 +0xab\r\n  go.temporal.io/sdk/internal.(*commandsHelper).getCommands()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:1417 +0x276\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).CompleteWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1244 +0x81b\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).applyWorkflowPanicPolicy()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1142 +0x1064\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1088 +0x1676\r\n  go.temporal.io/sdk/internal.executeDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:622 +0xc7\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).OnWorkflowTaskStarted()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:592 +0x88\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).ProcessEvent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1063 +0x602\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1028 +0x1fc9\r\n  go.temporal.io/sdk/internal.(*workflowTaskHandlerImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:836 +0x69b\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).processWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:354 +0x755\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).ProcessTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:318 +0xca\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:505 +0x255\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:356 +0x8b\r\n\r\nGoroutine 6063 (running) created at:\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1048 +0x66e\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).Go()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:308 +0x86\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowOutboundInterceptor).Go()\r\n      /home/runner/work/sdk-go/sdk-go/test/integration_test.go:4093 +0x201\r\n  go.temporal.io/sdk/internal.newDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:614 +0x27e\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).Execute()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:499 +0x1c4\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).handleWorkflowExecutionStarted()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1269 +0x36b\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).ProcessEvent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1044 +0x20e\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1028 +0x1fc9\r\n  go.temporal.io/sdk/internal.(*workflowTaskHandlerImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:836 +0x69b\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).processWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:354 +0x755\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).ProcessTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:318 +0xca\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:505 +0x255\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:356 +0x8b\r\n\r\nGoroutine 6062 (running) created at:\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:352 +0x139\r\n  go.temporal.io/sdk/internal.(*baseWorker).runTaskDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:382 +0x116\r\n  go.temporal.io/sdk/internal.(*baseWorker).Start.func3()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:284 +0x39\r\n==================\r\n==================\r\nWARNING: DATA RACE\r\nRead at 0x00c000250f98 by goroutine 6063:\r\n  container/list.(*List).PushBack()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/container/list/list.go:152 +0x1c4\r\n  go.temporal.io/sdk/internal.(*commandsHelper).addCommand()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:933 +0xd2\r\n  go.temporal.io/sdk/internal.(*commandsHelper).recordVersionMarker()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:1073 +0x512\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentImpl).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:799 +0x734\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).GetVersion()\r\n      <autogenerated>:1 +0x78\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:1681 +0x6f\r\n  go.temporal.io/sdk/internal.(*WorkflowOutboundInterceptorBase).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/interceptor_base.go:336 +0x9a\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowOutboundInterceptor).GetVersion()\r\n      <autogenerated>:1 +0x29\r\n  go.temporal.io/sdk/internal.GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:1677 +0xb7\r\n  go.temporal.io/sdk/workflow.GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/workflow/workflow.go:384 +0x19e\r\n  go.temporal.io/sdk/test_test.(*Workflows).VersionLoopWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/test/workflow_test.go:2319 +0x113\r\n  go.temporal.io/sdk/test_test.(*Workflows).VersionLoopWorkflow-fm()\r\n      <autogenerated>:1 +0x92\r\n  runtime.call64()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/runtime/asm_amd64.s:730 +0x48\r\n  reflect.Value.Call()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/reflect/value.go:370 +0xc7\r\n  go.temporal.io/sdk/internal.executeFunction()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker.go:1806 +0x5b0\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:530 +0x23e\r\n  go.temporal.io/sdk/internal.(*WorkflowInboundInterceptorBase).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/internal/interceptor_base.go:154 +0x76\r\n  go.temporal.io/sdk/test_test.(*signalWorkflowInboundInterceptor).ExecuteWorkflow()\r\n      <autogenerated>:1 +0x29\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowInboundInterceptor).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/test/integration_test.go:4136 +0x18e\r\n  go.temporal.io/sdk/internal.(*workflowExecutor).Execute()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker.go:805 +0x41a\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).Execute.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:512 +0x189\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1057 +0x165\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine.func2()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1058 +0x47\r\n\r\nPrevious write at 0x00c000250f98 by goroutine 6062:\r\n  container/list.(*List).remove()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/container/list/list.go:110 +0x4ac\r\n  container/list.(*List).Remove()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/container/list/list.go:138 +0x40a\r\n  go.temporal.io/sdk/internal.(*commandStateMachineBase).moveState()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:429 +0x395\r\n  go.temporal.io/sdk/internal.(*markerCommandStateMachine).handleCommandSent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:836 +0xab\r\n  go.temporal.io/sdk/internal.(*commandsHelper).getCommands()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:1417 +0x276\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).CompleteWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1244 +0x81b\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).applyWorkflowPanicPolicy()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1142 +0x1064\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1088 +0x1676\r\n  go.temporal.io/sdk/internal.executeDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:622 +0xc7\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).OnWorkflowTaskStarted()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:592 +0x88\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).ProcessEvent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1063 +0x602\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1028 +0x1fc9\r\n  go.temporal.io/sdk/internal.(*workflowTaskHandlerImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:836 +0x69b\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).processWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:354 +0x755\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).ProcessTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:318 +0xca\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:505 +0x255\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:356 +0x8b\r\n\r\nGoroutine 6063 (running) created at:\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1048 +0x66e\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).Go()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:308 +0x86\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowOutboundInterceptor).Go()\r\n      /home/runner/work/sdk-go/sdk-go/test/integration_test.go:4093 +0x201\r\n  go.temporal.io/sdk/internal.newDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:614 +0x27e\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).Execute()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:499 +0x1c4\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).handleWorkflowExecutionStarted()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1269 +0x36b\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).ProcessEvent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1044 +0x20e\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1028 +0x1fc9\r\n  go.temporal.io/sdk/internal.(*workflowTaskHandlerImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:836 +0x69b\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).processWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:354 +0x755\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).ProcessTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:318 +0xca\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:505 +0x255\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:356 +0x8b\r\n\r\nGoroutine 6062 (running) created at:\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:352 +0x139\r\n  go.temporal.io/sdk/internal.(*baseWorker).runTaskDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:382 +0x116\r\n  go.temporal.io/sdk/internal.(*baseWorker).Start.func3()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:284 +0x39\r\n==================\r\n==================\r\nWARNING: DATA RACE\r\nRead at 0x00c000250fb8 by goroutine 6063:\r\n  container/list.(*List).insert()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/container/list/list.go:98 +0x3f8\r\n  container/list.(*List).insertValue()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/container/list/list.go:104 +0x1d3\r\n  container/list.(*List).PushBack()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/container/list/list.go:152 +0x1b8\r\n  go.temporal.io/sdk/internal.(*commandsHelper).addCommand()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:933 +0xd2\r\n  go.temporal.io/sdk/internal.(*commandsHelper).recordVersionMarker()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:1073 +0x512\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentImpl).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:799 +0x734\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).GetVersion()\r\n      <autogenerated>:1 +0x78\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:1681 +0x6f\r\n  go.temporal.io/sdk/internal.(*WorkflowOutboundInterceptorBase).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/interceptor_base.go:336 +0x9a\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowOutboundInterceptor).GetVersion()\r\n      <autogenerated>:1 +0x29\r\n  go.temporal.io/sdk/internal.GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:1677 +0xb7\r\n  go.temporal.io/sdk/workflow.GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/workflow/workflow.go:384 +0x19e\r\n  go.temporal.io/sdk/test_test.(*Workflows).VersionLoopWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/test/workflow_test.go:2319 +0x113\r\n  go.temporal.io/sdk/test_test.(*Workflows).VersionLoopWorkflow-fm()\r\n      <autogenerated>:1 +0x92\r\n  runtime.call64()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/runtime/asm_amd64.s:730 +0x48\r\n  reflect.Value.Call()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/reflect/value.go:370 +0xc7\r\n  go.temporal.io/sdk/internal.executeFunction()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker.go:1806 +0x5b0\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:530 +0x23e\r\n  go.temporal.io/sdk/internal.(*WorkflowInboundInterceptorBase).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/internal/interceptor_base.go:154 +0x76\r\n  go.temporal.io/sdk/test_test.(*signalWorkflowInboundInterceptor).ExecuteWorkflow()\r\n      <autogenerated>:1 +0x29\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowInboundInterceptor).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/test/integration_test.go:4136 +0x18e\r\n  go.temporal.io/sdk/internal.(*workflowExecutor).Execute()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker.go:805 +0x41a\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).Execute.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:512 +0x189\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1057 +0x165\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine.func2()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1058 +0x47\r\n\r\nPrevious write at 0x00c000250fb8 by goroutine 6062:\r\n  container/list.(*List).remove()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/container/list/list.go:114 +0x59c\r\n  container/list.(*List).Remove()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/container/list/list.go:138 +0x40a\r\n  go.temporal.io/sdk/internal.(*commandStateMachineBase).moveState()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:429 +0x395\r\n  go.temporal.io/sdk/internal.(*markerCommandStateMachine).handleCommandSent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:836 +0xab\r\n  go.temporal.io/sdk/internal.(*commandsHelper).getCommands()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:1417 +0x276\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).CompleteWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1244 +0x81b\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).applyWorkflowPanicPolicy()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1142 +0x1064\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1088 +0x1676\r\n  go.temporal.io/sdk/internal.executeDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:622 +0xc7\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).OnWorkflowTaskStarted()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:592 +0x88\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).ProcessEvent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1063 +0x602\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1028 +0x1fc9\r\n  go.temporal.io/sdk/internal.(*workflowTaskHandlerImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:836 +0x69b\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).processWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:354 +0x755\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).ProcessTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:318 +0xca\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:505 +0x255\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:356 +0x8b\r\n\r\nGoroutine 6063 (running) created at:\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1048 +0x66e\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).Go()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:308 +0x86\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowOutboundInterceptor).Go()\r\n      /home/runner/work/sdk-go/sdk-go/test/integration_test.go:4093 +0x201\r\n  go.temporal.io/sdk/internal.newDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:614 +0x27e\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).Execute()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:499 +0x1c4\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).handleWorkflowExecutionStarted()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1269 +0x36b\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).ProcessEvent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1044 +0x20e\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1028 +0x1fc9\r\n  go.temporal.io/sdk/internal.(*workflowTaskHandlerImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:836 +0x69b\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).processWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:354 +0x755\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).ProcessTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:318 +0xca\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:505 +0x255\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:356 +0x8b\r\n\r\nGoroutine 6062 (running) created at:\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:352 +0x139\r\n  go.temporal.io/sdk/internal.(*baseWorker).runTaskDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:382 +0x116\r\n  go.temporal.io/sdk/internal.(*baseWorker).Start.func3()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:284 +0x39\r\n==================\r\n==================\r\nWARNING: DATA RACE\r\nWrite at 0x00c000055ef8 by goroutine 6063:\r\n  go.temporal.io/sdk/internal.(*commandsHelper).addCommand()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:934 +0x48a\r\n  go.temporal.io/sdk/internal.(*commandsHelper).recordVersionMarker()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:1073 +0x512\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentImpl).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:799 +0x734\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).GetVersion()\r\n      <autogenerated>:1 +0x78\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:1681 +0x6f\r\n  go.temporal.io/sdk/internal.(*WorkflowOutboundInterceptorBase).GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/interceptor_base.go:336 +0x9a\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowOutboundInterceptor).GetVersion()\r\n      <autogenerated>:1 +0x29\r\n  go.temporal.io/sdk/internal.GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:1677 +0xb7\r\n  go.temporal.io/sdk/workflow.GetVersion()\r\n      /home/runner/work/sdk-go/sdk-go/workflow/workflow.go:384 +0x19e\r\n  go.temporal.io/sdk/test_test.(*Workflows).VersionLoopWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/test/workflow_test.go:2319 +0x113\r\n  go.temporal.io/sdk/test_test.(*Workflows).VersionLoopWorkflow-fm()\r\n      <autogenerated>:1 +0x92\r\n  runtime.call64()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/runtime/asm_amd64.s:730 +0x48\r\n  reflect.Value.Call()\r\n      /opt/hostedtoolcache/go/1.20.8/x64/src/reflect/value.go:370 +0xc7\r\n  go.temporal.io/sdk/internal.executeFunction()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker.go:1806 +0x5b0\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/internal/workflow.go:530 +0x23e\r\n  go.temporal.io/sdk/internal.(*WorkflowInboundInterceptorBase).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/internal/interceptor_base.go:154 +0x76\r\n  go.temporal.io/sdk/test_test.(*signalWorkflowInboundInterceptor).ExecuteWorkflow()\r\n      <autogenerated>:1 +0x29\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowInboundInterceptor).ExecuteWorkflow()\r\n      /home/runner/work/sdk-go/sdk-go/test/integration_test.go:4136 +0x18e\r\n  go.temporal.io/sdk/internal.(*workflowExecutor).Execute()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker.go:805 +0x41a\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).Execute.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:512 +0x189\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1057 +0x165\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine.func2()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1058 +0x47\r\n\r\nPrevious read at 0x00c000055ef8 by goroutine 6062:\r\n  go.temporal.io/sdk/internal.(*commandStateMachineBase).moveState()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:428 +0x377\r\n  go.temporal.io/sdk/internal.(*markerCommandStateMachine).handleCommandSent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:836 +0xab\r\n  go.temporal.io/sdk/internal.(*commandsHelper).getCommands()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_command_state_machine.go:1417 +0x276\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).CompleteWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1244 +0x81b\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).applyWorkflowPanicPolicy()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1142 +0x1064\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1088 +0x1676\r\n  go.temporal.io/sdk/internal.executeDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:622 +0xc7\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).OnWorkflowTaskStarted()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:592 +0x88\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).ProcessEvent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1063 +0x602\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1028 +0x1fc9\r\n  go.temporal.io/sdk/internal.(*workflowTaskHandlerImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:836 +0x69b\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).processWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:354 +0x755\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).ProcessTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:318 +0xca\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:505 +0x255\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:356 +0x8b\r\n\r\nGoroutine 6063 (running) created at:\r\n  go.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:1048 +0x66e\r\n  go.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).Go()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:308 +0x86\r\n  go.temporal.io/sdk/test_test.(*tracingWorkflowOutboundInterceptor).Go()\r\n      /home/runner/work/sdk-go/sdk-go/test/integration_test.go:4093 +0x201\r\n  go.temporal.io/sdk/internal.newDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:614 +0x27e\r\n  go.temporal.io/sdk/internal.(*syncWorkflowDefinition).Execute()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_workflow.go:499 +0x1c4\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).handleWorkflowExecutionStarted()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1269 +0x36b\r\n  go.temporal.io/sdk/internal.(*workflowExecutionEventHandlerImpl).ProcessEvent()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_event_handlers.go:1044 +0x20e\r\n  go.temporal.io/sdk/internal.(*workflowExecutionContextImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:1028 +0x1fc9\r\n  go.temporal.io/sdk/internal.(*workflowTaskHandlerImpl).ProcessWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_handlers.go:836 +0x69b\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).processWorkflowTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:354 +0x755\r\n  go.temporal.io/sdk/internal.(*workflowTaskPoller).ProcessTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_task_pollers.go:318 +0xca\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTask()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:505 +0x255\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync.func1()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:356 +0x8b\r\n\r\nGoroutine 6062 (running) created at:\r\n  go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:352 +0x139\r\n  go.temporal.io/sdk/internal.(*baseWorker).runTaskDispatcher()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:382 +0x116\r\n  go.temporal.io/sdk/internal.(*baseWorker).Start.func3()\r\n      /home/runner/work/sdk-go/sdk-go/internal/internal_worker_base.go:284 +0x39\r\n==================\r\n[2023](https://github.com/temporalio/sdk-go/actions/runs/6227934624/job/16903653066#step:7:2024)/09/18 21:09:05 WARN  Serialized size of TemporalChangeVersion search attribute update would exceed the maximum value size. Skipping this upsert. Be aware that your visibility records will not include the following patch: changeID_2:1-1 Namespace integration-test-namespace T\r\n``","closedAt":null,"comments":[],"createdAt":"2023-09-18T21:42:54Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":1240,"reactionGroups":[],"state":"OPEN","title":"Data race after deadlock detector fired","updatedAt":"2023-09-18T21:42:54Z","url":"https://github.com/temporalio/sdk-go/issues/1240"}
