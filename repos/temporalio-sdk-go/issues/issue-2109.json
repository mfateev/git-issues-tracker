{"assignees":[],"author":{"id":"MDQ6VXNlcjUyMDQxMDk1","is_bot":false,"login":"no-life","name":""},"body":"In this line cmp is ignored\nhttps://github.com/temporalio/sdk-go/blob/master/internal/internal_workflow_testsuite.go#L2875\n\n## Expected Behavior\nIn test framework MutableSideEffect with cmp `func(a, b any) bool { return true }` should not update value, even if value is different by any means.\n\n## Actual Behavior\nIn test framework MutableSideEffect with cmp `func(a, b any) bool { return true }` updates value\n\n## Steps to Reproduce the Problem\n\nrun\n```\nfunc WF(ctx workflow.Context) error {\n\tvar out1 bool\n\terr := workflow.MutableSideEffect(ctx, \"key\",\n\t\tfunc(workflow.Context) any { return true }, \n\t\tnil,\n\t).Get(&out1)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\tvar out2 bool\n\terr = workflow.MutableSideEffect(ctx, \"key\",\n\t\tfunc(workflow.Context) any { return false },\n\t\tfunc(a, b any) bool { return true },\n\t).Get(&out2)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t\n\tif out1 != out2 {\n\t\treturn fmt.Errorf(\"side effect values are inconsistent: %v vs %v\", out1, out2)\n\t}\n\n\treturn nil\n}\n```\nin test framework, error happens\n\n## Specifications\n\n  - Version: 1.26.0\n\nupd: fixed typo \"you are putting the result into out1, which I believe should be out2\"","closedAt":null,"comments":[{"id":"IC_kwDODN1w687SYIkX","author":{"login":"yuandrew"},"authorAssociation":"MEMBER","body":"Thanks for the bug report, this is indeed something that wasn't implemented properly in the workflow testsuite. \n\nA small note, from your second call to `MutableSideEffect`, you are putting the result into `out1`, which I believe should be`out2`. Guesing it's a copy-paste error. ","createdAt":"2025-11-13T20:12:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/2109#issuecomment-3529541911","viewerDidAuthor":false}],"createdAt":"2025-11-13T17:35:49Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDg2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":2109,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"state":"OPEN","title":"MutableSideEffect in test framework ignores cmp function","updatedAt":"2025-11-13T20:20:54Z","url":"https://github.com/temporalio/sdk-go/issues/2109"}
