{"assignees":[],"author":{"id":"MDQ6VXNlcjM3NzA0Nzg=","is_bot":false,"login":"yux0","name":"Yu Xia"},"body":"## Expected Behavior\r\nIgnore the second stop\r\n\r\n## Actual Behavior\r\npanic: close of closed channel\r\n\r\nhttps://github.com/temporalio/sdk-go/blob/master/internal/internal_worker.go#L1051\r\nCan it check if the channel is closed using assertNotStopped()?\r\n\r\n## Steps to Reproduce the Problem\r\nCall worker.stop twice\r\n\r\n","closedAt":"2022-08-09T14:29:14Z","comments":[{"id":"IC_kwDODN1w685GrWQg","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> Ignore the second stop\r\n\r\nI am not sure this is expected behavior anymore than a file can be closed/deleted twice.\r\n\r\nDo we expect `Start` to be able to be called twice too? `Run` as well?\r\n\r\n> Can it check if the channel is closed using assertNotStopped()?\r\n\r\nThat is not atomic though, so technically you could still get this panic.\r\n\r\nWe _could_ call this, but then it changes the behavior. I am not convinced we need to allow worker functions to be safe for multiple calls. If a user's code cannot know whether they have called stop, they can maintain such a state.","createdAt":"2022-07-15T17:50:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/855#issuecomment-1185768480","viewerDidAuthor":false},{"id":"IC_kwDODN1w685IFto_","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Closing after 3 weeks with no response. I will document that `Stop` cannot be called twice.","createdAt":"2022-08-09T14:29:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/855#issuecomment-1209457215","viewerDidAuthor":false}],"createdAt":"2022-07-15T17:04:48Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":855,"reactionGroups":[],"state":"CLOSED","title":"Panic with double stop on worker","updatedAt":"2022-08-09T14:29:14Z","url":"https://github.com/temporalio/sdk-go/issues/855"}
