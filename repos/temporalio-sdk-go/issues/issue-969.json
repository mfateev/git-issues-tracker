{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nRight now when we hit deadlock detector in Go, we panic w/ the stack where we timed out but we don't show the stack of blocked coroutines in the workflow\r\n\r\n**Describe the solution you'd like**\r\n\r\nGo does not have a \"show stack of specific goroutine\". In fact, Go doesn't even allow you to technically identify/address goroutines. But internally they do maintain a Go ID. I have seen projects take it via ugly stack parsing and via ugly internal reflection. So we could track these IDs when `workflow.Go` is called (we don't have to worry about users using real goroutines), then parse `runtime.Stack()` to filter out only the stack trace for known running coroutines of that workflow. If this is expensive to get that ID, we can make it opt-in (we don't care about how expensive it is as deadlock time though).\r\n\r\nSo, here's the goal:\r\n\r\n* Allow users to see a stack of all running coroutines of a workflow\r\n\r\nHere's the allowed compromise:\r\n\r\n* If it's too expensive to create the identifier of the coroutine for tracking when deadlock detection hits, we could make it opt in.\r\n\r\nSee if there are any known projects that have done these things we could take inspiration from\r\n\r\n","closedAt":"2024-01-20T06:06:43Z","comments":[{"id":"IC_kwDODN1w685PXP7_","author":{"login":"mfateev"},"authorAssociation":"MEMBER","body":"We don't really need stack of all workflow blocked coroutines as we need the stack only of the one that was executing while detector timeout happened.","createdAt":"2022-11-30T00:31:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/969#issuecomment-1331494655","viewerDidAuthor":true},{"id":"IC_kwDODN1w685PZuuY","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Yes, sorry, duh, there can only be one \"running coroutine\" of a workflow at any time.","createdAt":"2022-11-30T13:20:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/969#issuecomment-1332145048","viewerDidAuthor":false}],"createdAt":"2022-11-29T23:47:02Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":969,"reactionGroups":[],"state":"CLOSED","title":"Ability to dump stack of deadlocking coroutine","updatedAt":"2024-01-20T06:06:43Z","url":"https://github.com/temporalio/sdk-go/issues/969"}
