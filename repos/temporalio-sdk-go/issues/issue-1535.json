{"assignees":[],"author":{"id":"MDQ6VXNlcjExODczMjQ2","is_bot":false,"login":"mcbadger88","name":""},"body":"**Is your feature request related to a problem? Please describe.**\r\nWhen writing our own custom interceptor, we would like to be able to load/extract Opentelemetry data into the temporal headers using a common function that the temporal interceptor uses. This way we are guaranteed to get trace context propagation even if some components are using temporal's own interceptor vs some are using our custom interceptor.\r\n\r\n**Describe the solution you'd like**\r\n- Add a \"Carrier\" implementation that parses/loads into the temporal headers (e.g. [PR](https://github.com/temporalio/sdk-go/pull/1534))\r\n- Export it for other libraries to use\r\n- Use it in the temporal interceptors ([here](https://github.com/temporalio/sdk-go/blob/master/contrib/opentelemetry/tracing_interceptor.go#L146.)) From what I can tell this will require some small refactoring of the parent function too ([relevant comment](https://github.com/temporalio/sdk-go/pull/1534#discussion_r1663437892))\r\n\r\n\r\n**Describe alternatives you've considered**\r\n- Define the carrier locally to our private enterprise product. (we currently do this)\r\n- Add to the opentelemetry contrib repo (they advise against this as the code has temporal dependency and is more reliably maintained close to its relevant repository)\r\n- Make my own opensource library (do not have resources to maintain, also my company are not allowed to use personal or untrusted libraries)\r\n\r\n**Additional context**\r\nTagging some of the authors who may have context or pointers, if I have the wrong people please let me know how best to tag the temporal opentelemetry experts. Appreciate your thoughts! @cretz @jvonfricken \r\n\r\nThis is an issue raised off the back of some discussions in this PR https://github.com/temporalio/sdk-go/pull/1534, apologies that I did not see the comment to raise an issue first until I had already raised it.\r\n","closedAt":"2024-09-06T04:26:28Z","comments":[{"id":"IC_kwDODN1w686DfabM","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"I see @Quinn-With-Two-Ns is already looking at the PR, will defer to him. In general while Temporal has an interceptor that that uses propagation to populate a single internal header, we encourage users to write their own interceptors to do what they need if they need something beyond that. We can discuss options on the OTel interceptor if it needs to have something configured.","createdAt":"2024-07-03T13:13:33Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/1535#issuecomment-2206049996","viewerDidAuthor":false},{"id":"IC_kwDODN1w686LEfQC","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Marking as closed based on the discussion in the PR","createdAt":"2024-09-06T04:26:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1535#issuecomment-2333209602","viewerDidAuthor":false}],"createdAt":"2024-07-03T03:55:59Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1535,"reactionGroups":[],"state":"CLOSED","title":"Temporal Opentelemetry interceptor to use (and export) new temporal header Carrier interface","updatedAt":"2024-09-06T04:26:28Z","url":"https://github.com/temporalio/sdk-go/issues/1535"}
