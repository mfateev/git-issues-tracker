{"assignees":[],"author":{"id":"MDQ6VXNlcjQzNTE3","is_bot":false,"login":"skandragon","name":"Michael Graff"},"body":"## Expected Behavior\r\nIt to just work :)\r\n\r\n## Actual Behavior\r\n\r\nAfter a `go get -u ./...` to update dependencies, \r\n\r\n```\r\n# go.temporal.io/sdk/internal/protocol\r\n../../../../../go/pkg/mod/go.temporal.io/sdk@v1.25.1/internal/protocol/util.go:39:40: cannot use msg.Body (variable of type *anypb.Any) as *types.Any value in argument to types.AnyMessageName\r\n# go.temporal.io/sdk/internal/common/metrics\r\n../../../../../go/pkg/mod/go.temporal.io/sdk@v1.25.1/internal/common/metrics/grpc.go:120:44: cannot use s (variable of type *\"github.com/gogo/status\".Status) as *\"google.golang.org/grpc/internal/status\".Status value in argument to serviceerror.FromStatus\r\n```\r\n\r\n## Steps to Reproduce the Problem\r\n\r\nApparently, updating from temporal SDK 1.26.0 to 1.26.1.  Minimal change:\r\n\r\n```\r\n% go get -u go.temporal.io/api <--- becomes 1.26.1\r\n```\r\n\r\nThis also changes this dependency:\r\n\r\n```\r\n-       go.temporal.io/api v1.26.0 // indirect\r\n+       go.temporal.io/api v1.26.1 // indirect\r\n-       github.com/grpc-ecosystem/grpc-gateway v1.16.0 // indirect\r\n+       github.com/grpc-ecosystem/grpc-gateway/v2 v2.18.1 // indirect\r\n```\r\n\r\n## Details\r\n\r\ngo.mod:\r\n\r\n```\r\nrequire (\r\n\tgithub.com/Khan/genqlient v0.6.0\r\n\tgithub.com/aws/aws-sdk-go-v2 v1.23.4\r\n\tgithub.com/aws/aws-sdk-go-v2/config v1.25.10\r\n\tgithub.com/aws/aws-sdk-go-v2/feature/s3/manager v1.15.3\r\n\tgithub.com/aws/aws-sdk-go-v2/service/s3 v1.47.1\r\n\tgithub.com/aws/smithy-go v1.18.1\r\n\tgithub.com/google/go-containerregistry v0.17.0\r\n\tgithub.com/google/uuid v1.4.0\r\n\tgithub.com/oklog/ulid/v2 v2.1.0\r\n\tgithub.com/pborman/uuid v1.2.1\r\n\tgithub.com/redis/go-redis/v9 v9.3.0\r\n\tgithub.com/spf13/cobra v1.8.0\r\n\tgithub.com/spf13/viper v1.17.0\r\n\tgo.temporal.io/sdk v1.25.1\r\n)\r\n\r\nrequire (\r\n\tgithub.com/agnivade/levenshtein v1.1.1 // indirect\r\n\tgithub.com/alexflint/go-arg v1.4.3 // indirect\r\n\tgithub.com/alexflint/go-scalar v1.2.0 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/aws/protocol/eventstream v1.5.3 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/credentials v1.16.8 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/feature/ec2/imds v1.14.8 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/internal/configsources v1.2.7 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/internal/endpoints/v2 v2.5.7 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/internal/ini v1.7.1 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/internal/v4a v1.2.7 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/service/internal/accept-encoding v1.10.3 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/service/internal/checksum v1.2.7 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/service/internal/presigned-url v1.10.7 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/service/internal/s3shared v1.16.7 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/service/sso v1.18.1 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/service/ssooidc v1.21.1 // indirect\r\n\tgithub.com/aws/aws-sdk-go-v2/service/sts v1.26.1 // indirect\r\n\tgithub.com/cespare/xxhash/v2 v2.2.0 // indirect\r\n\tgithub.com/containerd/stargz-snapshotter/estargz v0.15.1 // indirect\r\n\tgithub.com/davecgh/go-spew v1.1.2-0.20180830191138-d8f796af33cc // indirect\r\n\tgithub.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f // indirect\r\n\tgithub.com/docker/cli v24.0.7+incompatible // indirect\r\n\tgithub.com/docker/distribution v2.8.3+incompatible // indirect\r\n\tgithub.com/docker/docker v24.0.7+incompatible // indirect\r\n\tgithub.com/docker/docker-credential-helpers v0.8.0 // indirect\r\n\tgithub.com/facebookgo/clock v0.0.0-20150410010913-600d898af40a // indirect\r\n\tgithub.com/fsnotify/fsnotify v1.7.0 // indirect\r\n\tgithub.com/gogo/googleapis v1.4.1 // indirect\r\n\tgithub.com/gogo/protobuf v1.3.2 // indirect\r\n\tgithub.com/gogo/status v1.1.1 // indirect\r\n\tgithub.com/golang/mock v1.6.0 // indirect\r\n\tgithub.com/golang/protobuf v1.5.3 // indirect\r\n\tgithub.com/grpc-ecosystem/go-grpc-middleware v1.4.0 // indirect\r\n\tgithub.com/grpc-ecosystem/grpc-gateway/v2 v2.18.1 // indirect\r\n\tgithub.com/hashicorp/hcl v1.0.0 // indirect\r\n\tgithub.com/inconshreveable/mousetrap v1.1.0 // indirect\r\n\tgithub.com/jmespath/go-jmespath v0.4.0 // indirect\r\n\tgithub.com/klauspost/compress v1.17.3 // indirect\r\n\tgithub.com/magiconair/properties v1.8.7 // indirect\r\n\tgithub.com/mitchellh/go-homedir v1.1.0 // indirect\r\n\tgithub.com/mitchellh/mapstructure v1.5.0 // indirect\r\n\tgithub.com/opencontainers/go-digest v1.0.0 // indirect\r\n\tgithub.com/opencontainers/image-spec v1.1.0-rc5 // indirect\r\n\tgithub.com/pelletier/go-toml/v2 v2.1.0 // indirect\r\n\tgithub.com/pkg/errors v0.9.1 // indirect\r\n\tgithub.com/pmezard/go-difflib v1.0.1-0.20181226105442-5d4384ee4fb2 // indirect\r\n\tgithub.com/robfig/cron v1.2.0 // indirect\r\n\tgithub.com/sagikazarmark/locafero v0.4.0 // indirect\r\n\tgithub.com/sagikazarmark/slog-shim v0.1.0 // indirect\r\n\tgithub.com/sirupsen/logrus v1.9.3 // indirect\r\n\tgithub.com/sourcegraph/conc v0.3.0 // indirect\r\n\tgithub.com/spf13/afero v1.11.0 // indirect\r\n\tgithub.com/spf13/cast v1.6.0 // indirect\r\n\tgithub.com/spf13/pflag v1.0.5 // indirect\r\n\tgithub.com/stretchr/objx v0.5.1 // indirect\r\n\tgithub.com/stretchr/testify v1.8.4 // indirect\r\n\tgithub.com/subosito/gotenv v1.6.0 // indirect\r\n\tgithub.com/vbatts/tar-split v0.11.5 // indirect\r\n\tgithub.com/vektah/gqlparser/v2 v2.5.10 // indirect\r\n\tgo.temporal.io/api v1.26.1 // indirect\r\n\tgo.uber.org/atomic v1.11.0 // indirect\r\n\tgo.uber.org/multierr v1.11.0 // indirect\r\n\tgolang.org/x/exp v0.0.0-20231127185646-65229373498e // indirect\r\n\tgolang.org/x/mod v0.14.0 // indirect\r\n\tgolang.org/x/net v0.19.0 // indirect\r\n\tgolang.org/x/sync v0.5.0 // indirect\r\n\tgolang.org/x/sys v0.15.0 // indirect\r\n\tgolang.org/x/text v0.14.0 // indirect\r\n\tgolang.org/x/time v0.5.0 // indirect\r\n\tgolang.org/x/tools v0.16.0 // indirect\r\n\tgoogle.golang.org/genproto v0.0.0-20231127180814-3a041ad873d4 // indirect\r\n\tgoogle.golang.org/genproto/googleapis/api v0.0.0-20231127180814-3a041ad873d4 // indirect\r\n\tgoogle.golang.org/genproto/googleapis/rpc v0.0.0-20231127180814-3a041ad873d4 // indirect\r\n\tgoogle.golang.org/grpc v1.59.0 // indirect\r\n\tgoogle.golang.org/protobuf v1.31.0 // indirect\r\n\tgopkg.in/ini.v1 v1.67.0 // indirect\r\n\tgopkg.in/yaml.v2 v2.4.0 // indirect\r\n\tgopkg.in/yaml.v3 v3.0.1 // indirect\r\n)\r\n\r\n```\r\n\r\n## Specifications\r\n\r\n  - Version: sdk 1.26.1\r\n  - Platform: go 1.21\r\n\r\n","closedAt":"2023-12-01T15:44:55Z","comments":[{"id":"IC_kwDODN1w685tVTYD","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Due to work to deprecate `gogoproto` `go.temporal.io/api v1.26.1 ` is not compatible with `go.temporal.io/sdk v1.25.1`. The SDK only is compatible with the version in its go.mod","createdAt":"2023-11-30T18:09:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1310#issuecomment-1834300931","viewerDidAuthor":false},{"id":"IC_kwDODN1w685tdDV3","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"`go.temporal.io/api 1.26.1` has been retracted\r\n\r\nhttps://github.com/temporalio/api-go/commit/b175d7eddedb89516a569ac6c5e2e837b02d0f9c","createdAt":"2023-12-01T15:44:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/1310#issuecomment-1836332407","viewerDidAuthor":false},{"id":"IC_kwDODN1w685y7D_i","author":{"login":"chriscerk"},"authorAssociation":"NONE","body":"**Problem**\r\n\r\n>  The SDK only is compatible with the version in its go.mod\r\n\r\n⭐ For orgs using dependabot, this presents a problem based on the way that temporal is releasing their versions.\r\n\r\nReasoning being that we are running into compile issues from the following step of events:\r\n\r\n1.  Using `go.temporal.io/sdk@v1.25.1`\r\n2. `go.temporal.io/api@v1.27.0` released \r\n3. Dependabot opens a PR for `go.temporal.io/api@v1.27.0` released, **_without_** a dependabot PR for `go.temporal.io/sdk@1.26.0-rc2` since it is a release candidate\r\n4. Builds fail due to compile issues.\r\n \r\n**Proposal**\r\n\r\n>  The SDK only is compatible with the version in its go.mod\r\n\r\n⭐ @Quinn-With-Two-Ns if that is true - should `go.temporal.io/api@v1.27.0` been a pre-release / release-candidate?\r\n\r\nA release candidate would ensure that dependabots would occur at the appropriate time to avoid incompatibility issues.\r\n\r\nThoughts?","createdAt":"2024-02-05T21:00:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/1310#issuecomment-1928085474","viewerDidAuthor":false},{"id":"IC_kwDODN1w685y7SZR","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":">should go.temporal.io/api@v1.27.0 been a pre-release / release-candidate?\r\n\r\nNo, The Go SDK is not the only consumer of `go.temporal.io/api` and their releases are not coupled in general.\r\n\r\nI don't really see the problem with dependabot, the build failed as it should as you should not be updating the `api` by updating the `go-sdk`","createdAt":"2024-02-05T21:41:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-go/issues/1310#issuecomment-1928144465","viewerDidAuthor":false}],"createdAt":"2023-11-30T17:49:20Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":1310,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"Unable to compile using v1.26.1","updatedAt":"2024-02-05T21:41:17Z","url":"https://github.com/temporalio/sdk-go/issues/1310"}
