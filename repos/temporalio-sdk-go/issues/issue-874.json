{"assignees":[],"author":{"id":"MDQ6VXNlcjc2MjA1ODYy","is_bot":false,"login":"alfa-alex","name":""},"body":"**Is your feature request related to a problem? Please describe.**\r\nThe `worker.Run()` function accepts a `<- chan interface{}` parameter. This makes it impossible to directly pass, e.g., `ctx.Done()` (which seems to me is the most common use case besides `internal.InterruptCh()`).\r\n\r\n**Describe the solution you'd like**\r\nIt'd be great if the `worker.Run()` function accepted a `<- chan struct{}` instead. The `internal.InterruptCh` should then also return a `<- chan struct{}`.\r\n\r\n**Describe alternatives you've considered**\r\nSince this would be a breaking change, a viable alternative would be to add a `RunCtx(context.Context)` function to the `worker` interface that you directly pass a context. Would also be idiomatic.\r\n\r\n**Additional context**\r\n- Since it's irrelevant what you pass to the channel, a `<- chan struct{}` might also more clearly express that this channel is just used for signalling *that* some event happened.\r\n- If you decided to change the signature of `internal.InterruptCh`, that func could then be implemented as a two-liner by utilizing `signal.NotifyCtx(...)`.","closedAt":"2022-08-02T14:22:53Z","comments":[{"id":"IC_kwDODN1w685Hq_o1","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"I am afraid we cannot make a breaking change here.","createdAt":"2022-08-02T12:42:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/874#issuecomment-1202453045","viewerDidAuthor":false},{"id":"IC_kwDODN1w685Hrd5l","author":{"login":"alfa-alex"},"authorAssociation":"NONE","body":"It's a pity, but understandable. So the provided alternative is also not an option, I suppose?\r\n\r\nThen maybe something to keep in mind for `v2` of the SDK. :wink: ","createdAt":"2022-08-02T13:35:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/874#issuecomment-1202576997","viewerDidAuthor":false},{"id":"IC_kwDODN1w685Hr3tY","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> So the provided alternative is also not an option, I suppose?\r\n\r\nUnfortunately adding helpers/shortcuts on the worker interface is probably not the best thing. But they could be added top level. For instance, anyone could do (untested, just typed here in GH):\r\n\r\n```go\r\nfunc RunWorker(ctx context.Context, worker worker.Worker) error {\r\n  doneCh := make(chan interface{})\r\n  errCh := make(chan error, 1)\r\n  go func() { errCh <- worker.Run(doneCh) }()\r\n  select {\r\n    case <-ctx.Done():\r\n      close(doneCh)\r\n    case err := <-errCh:\r\n      return err\r\n  }\r\n  return <-errCh\r\n}\r\n```\r\n\r\nOr you could use `Start()` + `Stop()` for more fine-grained control.\r\n\r\n> Then maybe something to keep in mind for v2 of the SDK.\r\n\r\nFor sure","createdAt":"2022-08-02T14:22:53Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/874#issuecomment-1202682712","viewerDidAuthor":false}],"createdAt":"2022-08-02T09:35:44Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":874,"reactionGroups":[],"state":"CLOSED","title":"Accept <- chan struct{} in Worker.Run","updatedAt":"2022-08-02T14:24:02Z","url":"https://github.com/temporalio/sdk-go/issues/874"}
