{"assignees":[{"id":"MDQ6VXNlcjIwNjM5Ng==","login":"cretz","name":"Chad Retz","databaseId":0}],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"Features required:\r\n\r\n* Wraps an existing converter\r\n* Customizable algorithm (even if we only support one at first)...pending sensible default\r\n* Ability to set a min size at which, if the data is under that size, the compression will not occur (0 meaning always compress)...pending sensible default\r\n* Must be able to just pass through data that was not compressed previously by the converter","closedAt":"2021-10-26T16:57:31Z","comments":[{"id":"IC_kwDODN1w6844jX-B","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Should this compress the entire `Payloads` object or just a single `Payload`?\r\nIn the future we'll want to use custom data converters in places where we only accept a single `Payload`, a feature that's missing from the go SDK.\r\nLet's take this into account.\r\n\r\n@robholland can you please provide more information here, I know you've given this some thought.","createdAt":"2021-10-21T16:50:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/596#issuecomment-948797313","viewerDidAuthor":false},{"id":"IC_kwDODN1w6844jYhR","author":{"login":"robholland"},"authorAssociation":"MEMBER","body":"We can't easily use `Payloads` right now because we currently have no metadata for them, so we can't mark that it is compressed. For now it's best to use `Payload`. I'll be writing up my proposal for changes to these APIs soon.","createdAt":"2021-10-21T16:53:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/596#issuecomment-948799569","viewerDidAuthor":false},{"id":"IC_kwDODN1w6844j5-g","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"We could compress all of the separate `Payload`s into a single `Payload` and do the reverse when we decompress.","createdAt":"2021-10-21T19:31:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/596#issuecomment-948936608","viewerDidAuthor":false},{"id":"IC_kwDODN1w6844j9tz","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"We could do this (many to one, then one to many) if desired...I can even make that configurable, the question is whether there are commonly multiple payloads at once and whether that harms debugging since now the stored payload count won't match expected.\r\n\r\nAlso, this can be implemented generically/separately so that anyone can do the many-to-one/one-to-many wrapping.\r\n\r\nJust let me know.","createdAt":"2021-10-21T19:49:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/596#issuecomment-948951923","viewerDidAuthor":false},{"id":"IC_kwDODN1w6844mr5I","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Sure there are tradeoffs with either approach.\r\nWith the many to one approach we _might_ get better compression rates, depending on the payload data.","createdAt":"2021-10-22T14:07:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/596#issuecomment-949665352","viewerDidAuthor":false}],"createdAt":"2021-10-21T16:45:33Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":596,"reactionGroups":[],"state":"CLOSED","title":"Compression data converter","updatedAt":"2021-10-26T17:17:09Z","url":"https://github.com/temporalio/sdk-go/issues/596"}
