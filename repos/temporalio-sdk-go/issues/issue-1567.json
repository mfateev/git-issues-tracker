{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNTA0MDQ5","is_bot":false,"login":"Quinn-With-Two-Ns","name":"Quinn Klassen"},"body":"## Expected Behavior\r\n\r\nSDK detects this is a legacy query task and shouldn't have any history and resets the cached exeuciton\r\n\r\n## Actual Behavior\r\n\r\nSDK panics\r\n\r\n```\r\n2024-07-25T10:50:16.216-0700    ERROR   internal/internal_worker_base.go:519    Unhandled panic.        {\"Namespace\": \"default\", \"TaskQueue\": \"fuzzer:zvsrg654\", \"WorkerID\": \"785534\r\n@ShtinUbuntu2@\", \"WorkerType\": \"WorkflowWorker\", \"PanicError\": \"runtime error: index out of range [0] with length 0\", \"PanicStack\": \"base worker for WorkflowWorker [panic]:\\ngo.tem\r\nporal.io/sdk/internal.(*workflowTaskHandlerImpl).GetOrCreateWorkflowContext(0xc0002be410, 0xc0006dfa00, {0xf775a0, 0xc00029bb20})\\n\\t/home/shtin/go/pkg/mod/go.temporal.io/sdk@v1.28\r\n.1/internal/internal_task_handlers.go:772 +0xafe\\ngo.temporal.io/sdk/internal.(*workflowTaskPoller).processWorkflowTask(0xc000228b40, 0xc000cd4a50)\\n\\t/home/shtin/go/pkg/mod/go.tem\r\nporal.io/sdk@v1.28.1/internal/internal_task_pollers.go:344 +0x19b\\ngo.temporal.io/sdk/internal.(*workflowTaskPoller).ProcessTask(0xc000228b40, {0xc496e0, 0xc000cd4a50})\\n\\t/home/sh\r\ntin/go/pkg/mod/go.temporal.io/sdk@v1.28.1/internal/internal_task_pollers.go:321 +0x78\\ngo.temporal.io/sdk/internal.(*baseWorker).processTask(0xc00034c420, {0xc4a320, 0xc001335330})\r\n\\n\\t/home/shtin/go/pkg/mod/go.temporal.io/sdk@v1.28.1/internal/internal_worker_base.go:528 +0x153\\ngo.temporal.io/sdk/internal.(*baseWorker).processTaskAsync.func1()\\n\\t/home/shtin\r\n/go/pkg/mod/go.temporal.io/sdk@v1.28.1/internal/internal_worker_base.go:379 +0x45\\ncreated by go.temporal.io/sdk/internal.(*baseWorker).processTaskAsync in goroutine 26\\n\\t/home/sh\r\ntin/go/pkg/mod/go.temporal.io/sdk@v1.28.1/internal/internal_worker_base.go:375 +0xa5\"}\r\n```\r\n","closedAt":"2024-07-29T17:22:17Z","comments":[],"createdAt":"2024-07-29T00:59:08Z","labels":[{"id":"MDU6TGFiZWwyMDUzODEzNTY0","name":"potential-bug","description":"","color":"90c109"}],"milestone":null,"number":1567,"reactionGroups":[],"state":"CLOSED","title":"Worker can panic if it receives a legacy query task with no history and the SDK has a destroyed execution in cache","updatedAt":"2024-07-29T17:22:17Z","url":"https://github.com/temporalio/sdk-go/issues/1567"}
