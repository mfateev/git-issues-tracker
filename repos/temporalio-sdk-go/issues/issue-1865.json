{"assignees":[],"author":{"id":"MDQ6VXNlcjI1MTg3MTAz","is_bot":false,"login":"yuandrew","name":"Andrew Yuan"},"body":"## Expected Behavior\nVisitor should visit this `repeated temporal.api.common.v1.Payload` https://github.com/temporalio/api/blob/9156239c8272003b6f228951602ca2b130a55876/temporal/api/workflowservice/v1/request_response.proto#L938\n\nThis test should pass\n```\nfunc TestVisitPayloads_AggregationGroup(t *testing.T) {\n\t// Due to us not visiting protos inside Any, this test used to fail\n\troot := &workflowservice.CountWorkflowExecutionsResponse_AggregationGroup{GroupValues: []*common.Payload{{Data: []byte(\"orig-val\")}}}\n\n\tvar count int\n\t// Visit with any recursion enabled and only change orig-val\n\terr := VisitPayloads(context.Background(), root, VisitPayloadsOptions{\n\t\tVisitor: func(ctx *VisitPayloadsContext, p []*common.Payload) ([]*common.Payload, error) {\n\t\t\tcount += 1\n\t\t\t// Only mutate if the payloads has orig-val\n\t\t\tif len(p) == 1 && string(p[0].Data) == \"orig-val\" {\n\t\t\t\treturn []*common.Payload{{Data: []byte(\"new-val\")}}, nil\n\t\t\t}\n\t\t\treturn p, nil\n\t\t},\n\t})\n\trequire.NoError(t, err)\n\trequire.Equal(t, 1, count)\n}\n```\n\n\n## Actual Behavior\nTest is failing due to Payload not being visited.\n\n\n## Steps to Reproduce the Problem\n\n  1.\n  1.\n  1.\n\n## Specifications\n\n  - Version:\n  - Platform:\n","closedAt":"2025-04-09T16:26:47Z","comments":[{"id":"IC_kwDODN1w686mUKyD","author":{"login":"yuandrew"},"authorAssociation":"MEMBER","body":"closed by https://github.com/temporalio/api-go/pull/216","createdAt":"2025-04-09T16:26:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/1865#issuecomment-2790304899","viewerDidAuthor":false}],"createdAt":"2025-03-12T21:00:19Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDg2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1865,"reactionGroups":[],"state":"CLOSED","title":"[api-go] Repeated Payload not being visited","updatedAt":"2025-04-09T16:26:48Z","url":"https://github.com/temporalio/sdk-go/issues/1865"}
