{"assignees":[{"id":"MDQ6VXNlcjIwNjM5Ng==","login":"cretz","name":"Chad Retz","databaseId":0}],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"**Is your feature request related to a problem? Please describe.**\n\nWe are seeing some differences in client request latency and server request latency. This is to investigate ways to track that and find out why.\n\n**Describe the solution you'd like**\n\nWe may want to try two things:\n\n* Seeing if we can have the server have a gRPC interceptor that puts a start-to-end duration in gRPC metadata and have a number/percent at which a difference between that and the client duration are large enough to at least trigger a warning\n* See if there is a gRPC metric that is low-level enough to apply to HTTP2 messages specifically so that we can see if there is a difference between our interceptor-based ones (that surround serialization and other operations) and the low-level ones\n\n","closedAt":null,"comments":[{"id":"IC_kwDODN1w6845HFE3","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"It appears that https://pkg.go.dev/google.golang.org/grpc/stats is available to provide lower-level stats, I will confirm how it is implemented in gRPC itself and then look to expose that info.","createdAt":"2021-11-02T20:52:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/616#issuecomment-958157111","viewerDidAuthor":false},{"id":"IC_kwDODN1w6845K50t","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"gRPC stats do happen after interceptors. I have made an example of using gRPC stats at https://github.com/temporalio/samples-go/compare/master...cretz:grpc-stats that require dial options exposed in https://github.com/temporalio/sdk-go/compare/master...cretz:grpc-options.\r\n\r\nWill wait for feedback/updates on how to proceed.","createdAt":"2021-11-03T14:04:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/616#issuecomment-959159597","viewerDidAuthor":false}],"createdAt":"2021-11-02T20:39:32Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"},{"id":"LA_kwDODN1w687UGgkJ","name":"external dependency","description":"Waiting on something externally","color":"c5def5"}],"milestone":null,"number":616,"reactionGroups":[],"state":"OPEN","title":"Investigate options around latency reporting and comparison with server","updatedAt":"2024-03-15T04:59:53Z","url":"https://github.com/temporalio/sdk-go/issues/616"}
