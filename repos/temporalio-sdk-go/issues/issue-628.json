{"assignees":[],"author":{"id":"MDQ6VXNlcjI3NzM2MTIy","is_bot":false,"login":"rylandg","name":"Ryland Goldstein"},"body":"When writing infinitely running Workflows, handling ContinueAsNew becomes an immediate requirement in the design. For applications that have multiple infinitely running Workflow types, managing the correct ContinueAsNew timing/behavior becomes tedious and frustrating. \r\n\r\nTo solve this problem, I personally resorted to wrapping the Workflow API in a struct. This essentially functions as an unofficial interceptor and maintains a counter of \"actions\" (transitions basically) by incrementing the count each time a stateful API is called (ExecuteActivity, SignalWorkflow etc). Then each infinitely running Workflow is required to regularly check the counter and see if its exceeded the safe threshold. If it has, we then ContinueAsNew.\r\n\r\nIt would be ideal if this was provided out of the box. Ideally on the Client it would be possible to specify the safe limits for a given Workflow type such that the API can be dynamically configured for each specific case. At minimum it would be great to know the number of events and history size for a Workflow. \r\n\r\n","closedAt":"2023-08-19T17:16:00Z","comments":[{"id":"IC_kwDODN1w6845njmq","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"This was already requested for TS https://github.com/temporalio/sdk-typescript/issues/357.\r\nOnce we implement it there we'll port to the other SDKs.","createdAt":"2021-11-11T22:28:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/628#issuecomment-966670762","viewerDidAuthor":false},{"id":"IC_kwDODN1w6849F_nK","author":{"login":"robholland"},"authorAssociation":"MEMBER","body":"The history size is now available in WorkflowInfo protobuf so this should be easy to add.","createdAt":"2022-01-29T20:32:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-go/issues/628#issuecomment-1024981450","viewerDidAuthor":false}],"createdAt":"2021-11-11T21:11:32Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzA3NDky","name":"enhancement","description":"New feature or request","color":"a2eeef"},{"id":"LA_kwDODN1w687UGgkJ","name":"external dependency","description":"Waiting on something externally","color":"c5def5"}],"milestone":null,"number":628,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"Workflow API to check if ContinueAsNew is required","updatedAt":"2023-08-19T17:16:00Z","url":"https://github.com/temporalio/sdk-go/issues/628"}
