{
  "summary": "The workflow_completed and workflow_continue_as_new metric counters are incremented when a workflow method completes, including during replays and rejected completions, instead of only after the server confirms successful acceptance of the completion report.",
  "category": "bug",
  "subcategory": "metrics",
  "apis": [],
  "components": [
    "metrics",
    "worker",
    "completion-reporting"
  ],
  "concepts": [
    "metrics-accuracy",
    "server-confirmation",
    "workflow-completion",
    "replay",
    "counter-reporting"
  ],
  "severity": "medium",
  "userImpact": "Users receive inaccurate metric counts that overcount workflow completions, making it difficult to understand actual completion rates and system behavior.",
  "rootCause": "Metrics are logged when workflow method code execution completes rather than after server confirmation of the completion report.",
  "proposedFix": "Move metric logging to occur only after successful completion report acknowledgment from the server.",
  "workaround": null,
  "resolution": null,
  "resolutionDetails": null,
  "related": [
    2111,
    1590,
    1084
  ],
  "keyQuote": "A worker should log these metrics only after reporting the completion of the workflow task to the server and getting a confirmation from the server that the completion was not rejected.",
  "number": 222,
  "repo": "temporalio-features",
  "generatedAt": "2026-01-11T04:53:13.132Z"
}