{"assignees":[],"author":{"id":"MDQ6VXNlcjQzMjE4NjI3","is_bot":false,"login":"marcoriopel","name":""},"body":"### What are you really trying to do?\nAdd some logs to query functions\n\n### Describe the bug\nWhen adding logs to a query function using the provided replay safe logger, it doesn't log anything.\n\nThe log below will always be dropped:\n```\nfrom temporalio import workflow\n\n@workflow.defn\nclass TestWorkflow:\n    @workflow.run\n    async def run(self) -> bool:\n       return True\n    \n    @workflow.query\n    def get_test(self) -> str:\n        workflow.logger.info(\"Query received\")\n        return \"Test\"\n\n```\n\nIt seems like `workflow.unsafe.is_replaying()` always returns True when in the context of a query. This is used by the replay safe logger to determine if to drop logs or not so I assume this is why we have this behaviour.\n","closedAt":null,"comments":[{"id":"IC_kwDOGflYbs7fRKYC","author":{"login":"tconley1428"},"authorAssociation":"MEMBER","body":"It's intentional that `is_replaying` is true, but the side effect of not emitting logs isn't. We'll take a look at options.","createdAt":"2026-01-09T18:20:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/718#issuecomment-3745818114","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs7fRKkv","author":{"login":"Sushisource"},"authorAssociation":"MEMBER","body":"Transferred this b/c it'll need to apply to all the Core languages","createdAt":"2026-01-13T18:40:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/718#issuecomment-3745818927","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs7fROoV","author":{"login":"tconley1428"},"authorAssociation":"MEMBER","body":"For now, you can use a normal logger rather than the replay safe one inside query handlers.\n`logger = logging.getLogger(...)`","createdAt":"2026-01-13T18:44:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/718#issuecomment-3745835541","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs7foLKO","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"This has been implemented in:\n- Python: https://github.com/temporalio/sdk-python/pull/1274\n- .NET: https://github.com/temporalio/sdk-dotnet/pull/594\n- Ruby: https://github.com/temporalio/sdk-ruby/pull/378\n\nTypeScript issue opened: https://github.com/temporalio/sdk-typescript/issues/1887","createdAt":"2026-01-14T21:43:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/718#issuecomment-3751850638","viewerDidAuthor":false}],"createdAt":"2026-01-08T15:16:55Z","labels":[{"id":"LA_kwDOGflYbs7XtLc0","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":718,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"state":"OPEN","title":"[Bug] Logs not emitted during workflow queries","updatedAt":"2026-01-14T21:43:46Z","url":"https://github.com/temporalio/features/issues/718"}
