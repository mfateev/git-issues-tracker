{"assignees":[],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"Align the behavior of activity heartbeat throttling on all SDKs.\r\n\r\nInternal Temporal design doc: https://www.notion.so/temporalio/Activity-heartbeats-inconsistent-behavior-between-SDKs-32d81da0748044a8932481d2c9864791\r\nExported:\r\n[Activity_heartbeats_inconsistent_behavior_between_SDKs.pdf](https://github.com/temporalio/sdk-features/files/9059308/Activity_heartbeats_inconsistent_behavior_between_SDKs.pdf)\r\n\r\n## Design\r\n\r\nAdd 2 new `WorkerOption`s:\r\n\r\n- `maxHeartbeatThrottleInterval` - default 60s\r\n- `defaultHeartbeatThrottleInterval` - default 30s\r\n\r\n`throttleInterval` = `min`(`heartbeat_timeout * 0.8` if `heartbeat_timeout` is provided, else `defaultHeartbeatThrottleInterval`, `maxHeartbeatThrottleInterval`)\r\n\r\n## Rationale\r\n\r\n- Make the behavior explicit and configurable\r\n- Keep the behavior backwards compatible\r\n    - Java currently has an implicit maximum (30s) and default (0)\r\n    - Go has an implicit default (10m) and no maximum\r\n    - Core is not yet stable, from user feedback the behavior is confusing\r\n- Not heartbeating means no cancellations, need a default value\r\n- Consistency between the SDKs \r\n\r\n## Tasks\r\n\r\nhttps://github.com/temporalio/sdk-go/issues/656\r\nhttps://github.com/temporalio/sdk-java/issues/906\r\n","closedAt":null,"comments":[{"id":"IC_kwDOGflYbs5G1-s-","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"This was already implemented in all SDKs.\r\nLeaving it open to add a feature in this repo.","createdAt":"2022-07-19T03:32:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/67#issuecomment-1188555582","viewerDidAuthor":false}],"createdAt":"2022-07-07T00:05:47Z","labels":[{"id":"LA_kwDOGflYbs7XtLc6","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":67,"reactionGroups":[],"state":"OPEN","title":"âœ… Activity Heartbeat Throttling","updatedAt":"2024-07-13T01:08:15Z","url":"https://github.com/temporalio/features/issues/67"}
