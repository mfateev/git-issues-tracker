{"assignees":[],"author":{"id":"MDQ6VXNlcjExOTQyMg==","is_bot":false,"login":"tsurdilo","name":"Tihomir Surdilovic"},"body":"Currently workflow_endtoend_latency SDK metric uses WorkflowExecutionStarted event time:\r\nhttps://github.com/temporalio/sdk-go/blob/master/internal/internal_task_handlers.go#L1580\r\nhttps://github.com/temporalio/sdk-java/blob/master/temporal-sdk/src/main/java/io/temporal/internal/replay/ReplayWorkflowExecutor.java#L114\r\n\r\nfor calculation of the exec\"start time\". \r\nFor cron workflows this can lead to very large endtoend latencies as the first workflow task is not added to tq until firstWorkflowTaskBackoff timer fires.\r\n\r\nRequest here is to either subtract the firstWorkflowTaskBackoff duration from reported workflow_endtoend_latency metric if that is indeed its intention (to measure actual time worker processes workflow exec).\r\nIf not, then to add a new metric maybe that denotes this, for example workflow_firsttask_to_close_latency or something similar.\r\nOther ideas:\r\ndistinguish via:\r\nworkflow_starttoclose_latency (would be as current workflow_endtoend_latency)\r\nworkflow_scheduletoclose_latency (would be workflow_endtoend_latency - firstWorkflowTaskBackoff)\r\n\r\nor workflow_cron_execution_latency\r\n\r\n\r\n","closedAt":null,"comments":[],"createdAt":"2022-11-30T18:26:52Z","labels":[{"id":"LA_kwDOGflYbs7XtLc6","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":175,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":3}}],"state":"OPEN","title":"[Feature Request] Endtoend latency metric for cron executions","updatedAt":"2024-07-13T01:07:29Z","url":"https://github.com/temporalio/features/issues/175"}
