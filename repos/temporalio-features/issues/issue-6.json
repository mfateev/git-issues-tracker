{"assignees":[],"author":{"id":"MDQ6VXNlcjUyMzA0","is_bot":false,"login":"bergundy","name":"Roey Berman"},"body":"There was some work done for `Internal` and `Unavailable` errors differentiation on the server. Previously server returned only `Internal` and SDKs always retried it. Also SDKs always retry `Unavailable` but it wasn't returned by server until few month ago. Now, server returns both codes and uses `Internal` for non-retryable (something really bad happened on the server) and `Unavailable` for retryable.\r\n\r\nTo complete this work stream SDKs need to stop retry on `Internal`. In order to distinguish between the server versions that properly report `Internal` and `Unavailable` errors SDKs should use the [capabilities](https://github.com/temporalio/api/blob/b2b8ae6592a8730dd5be6d90569d1aea84e1712f/temporal/api/workflowservice/v1/request_response.proto#L751) reported in the `getSystemInfo` API call.\r\n\r\n- [x] Go SDK (should automatically be supported in PHP SDK, verify with Anton)\r\n- [x] Core SDK\r\n- [x] TS SDK (client)\r\n- [x] https://github.com/temporalio/sdk-java/issues/1315\r\n- [x] PHP SDK https://github.com/temporalio/sdk-php/issues/221","closedAt":"2023-09-11T23:19:37Z","comments":[{"id":"IC_kwDOGflYbs5mM2dW","author":{"login":"josh-berry"},"authorAssociation":"NONE","body":"@bergundy Can this be closed? Looks like it's done in all the SDKs.","createdAt":"2023-09-11T22:01:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/6#issuecomment-1714644822","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs5mNK_X","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"This can be closed.\r\nNote that there's still work to be done to unify the retry behavior across SDKs: https://github.com/temporalio/features/issues/27","createdAt":"2023-09-11T23:19:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/6#issuecomment-1714728919","viewerDidAuthor":false}],"createdAt":"2021-12-29T23:22:54Z","labels":[],"milestone":null,"number":6,"reactionGroups":[],"state":"CLOSED","title":"SDKs should stop retrying on \"Internal\" server error","updatedAt":"2023-09-11T23:19:38Z","url":"https://github.com/temporalio/features/issues/6"}
