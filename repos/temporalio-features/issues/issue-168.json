{"assignees":[],"author":{"id":"MDQ6VXNlcjUyMzA0","is_bot":false,"login":"bergundy","name":"Roey Berman"},"body":"In sdk-core, when a local activity completes, it will not flush progress and issue a workflow task heartbeat until it has successfully activated the workflow notifying it of the completion.\r\n\r\nIn some edge cases, like this scenario:\r\nWFT timeout is 3 seconds, local activity takes 2 seconds, responding to last activation takes 1.1 seconds.\r\n\r\nHere, the workflow task will timeout losing the local activity progress.\r\nIf these timing are consistent enough, the workflow will be stuck and not be able to progress.","closedAt":null,"comments":[{"id":"IC_kwDOGflYbs5O8QjC","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"We'd need to see what Go and Java do in this case.","createdAt":"2022-11-23T01:00:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/168#issuecomment-1324419266","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs5O8RME","author":{"login":"Sushisource"},"authorAssociation":"MEMBER","body":"This could paper over real problems where the lang SDK is routinely slow, so it's not obvious to me we'd want to do this at all.","createdAt":"2022-11-23T01:04:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/168#issuecomment-1324421892","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs5PE6Vv","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"I don’t see an issue with this, it’s a matter of timing. Can you elaborate why you are concerned with this?","createdAt":"2022-11-24T17:02:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/168#issuecomment-1326687599","viewerDidAuthor":false}],"createdAt":"2022-11-23T00:59:55Z","labels":[{"id":"LA_kwDOGflYbs7XtLc6","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":168,"reactionGroups":[],"state":"OPEN","title":"[Feature Request] Always flush completed local work when nearing the workflow task timeout","updatedAt":"2024-07-13T01:07:32Z","url":"https://github.com/temporalio/features/issues/168"}
