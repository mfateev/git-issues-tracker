{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"### Describe the solution you'd like\nWe need to let users choose what fails the workflow vs what just fails the task today. Go and Java already have some form of this. To do:\n\n* Go - https://github.com/temporalio/sdk-go/issues/1387\n  * [x] Worker task failure - `WorkflowPanicPolicy` exists (panics are the only task failures today)\n  * [ ] Workflow task failure - Need `workflow.RegisterOptions.WorkflowPanicPolicy` (or do we?)\n* Java - https://github.com/temporalio/sdk-java/issues/1987\n  * [ ] Worker task failure - Need `WorkerOptions.Builder.setFailWorkflowExceptionTypes​(...Throwable)` (or do we?)\n  * [x] Workflow task failure - `WorkflowImplementationOptions.Builder.setFailWorkflowExceptionTypes​(...Throwable)` exists\n* Core - https://github.com/temporalio/sdk-core/issues/656\n  * [x] Worker task failure - Need `WorkerConfig.workflow_failure_errors: HashSet<WorkflowTaskFailureType>` (only value for `WorkflowTaskFailureType` today is `Nondeterminism`)\n  * [x] Workflow task failure - Need `WorkerConfig.workflow_failure_errors_by_workflow_type: HashMap<String, HashSet<WorkflowTaskFailureType>>`\n* TS - https://github.com/temporalio/sdk-typescript/issues/1358\n  * [ ] Worker/workflow task failure - Need `WorkerOptions.workflowFailureErrorTypes: Record<string|'*', Array<Error>>`\n    * Note, if type set contains `DeterminismViolationError` then core side should be set\n* Python - https://github.com/temporalio/sdk-python/issues/446\n  * [x] Worker task failure - Need `workflow_failure_exception_types: Set[Type[Exception]]` on `Worker` constructor\n  * [x] Workflow task failure - Need `failure_exception_types: Set[Type[Exception]]` on `@workflow.defn` decorator\n    * Note, if type set contains `NondeterminismError` then core side should be set\n* .NET - https://github.com/temporalio/sdk-dotnet/issues/166\n  * [x] Worker task failure - Need `IReadOnlyCollection<Type> WorkflowFailureExceptionTypes` on `TemporalWorkerOptions`\n  * [x] Workflow task failure - Need `Type[] FailureExceptionTypes` on `WorkflowAttribute` and `IReadOnlyCollection<Type> FailureExceptionTypes` on `WorkflowDefinition`\n    * Note, if type set contains `InvalidWorkflowOperationException` then core side should be set\n\nThis can change at implementation time, this is just a guide.\n\n","closedAt":null,"comments":[{"id":"IC_kwDOGflYbs52ZTzg","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Discussion is occurring on potentially changing default from task fail to workflow fail, so we probably need to make that option a simple on/off bool _in addition_ to the configurable exception types (instead of just using `Exception` type as the way to opt-in to all).\r\n\r\nAlso, we may need to make sure that deadlocks aren't allowed to fail workflows and therefore aren't subject to this. May need more discussion.","createdAt":"2024-03-08T20:05:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/322#issuecomment-1986346208","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs52-Boa","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Note for implementers on core-based SDKs, it may be reasonable to have a non-determinism exception that's only used in the replayer, but that is the \"marker\" type for telling core that you want non-determinism failures as wf failures instead of task failures.","createdAt":"2024-03-13T22:07:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/322#issuecomment-1995971098","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs54CAQN","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Also more note for SDK implementers:\r\n\r\n* We want to mark this as experimental at first until it's in all SDKs and we're happy with it.\r\n* For update handlers, they should apply the failure types to fail an update except (even though it's called \"workflow failure exception types\"):\r\n  * Non-determinism should still apply at a workflow level\r\n  * Read-only violation of handler is still a task failure","createdAt":"2024-03-21T21:27:31Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/322#issuecomment-2013791245","viewerDidAuthor":false}],"createdAt":"2023-08-11T12:52:42Z","labels":[{"id":"LA_kwDOGflYbs7XtLc6","name":"enhancement","description":"New feature or request","color":"a2eeef"},{"id":"LA_kwDOGflYbs8AAAAB65z0zQ","name":"cdutrkgkteivjjuckjjvehvtledkdhdigcbk","description":"","color":"aaaaaa"}],"milestone":null,"number":322,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"state":"OPEN","title":"[Feature Request] Configurable workflow failure exception types","updatedAt":"2025-05-15T20:47:13Z","url":"https://github.com/temporalio/features/issues/322"}
