{"assignees":[],"author":{"id":"MDQ6VXNlcjI1MjMwMDcz","is_bot":false,"login":"freisenhauer","name":""},"body":"**Is your feature request related to a problem? Please describe.**\r\nI'd like to have the possibility to include workflow specific information like decisions or pivotal events inside history and/or timeline. I tried to Signal the same workflow without actually doing anything with the signal, but that's not permitted as described inside [this issue](https://github.com/temporalio/temporal/issues/682). Currently, as a workaround, we expose those information inside queries, but nothing indicates someone (trying to find an error) that there is a query that can be used and these information would likely be booleans in most cases and therefore the queries actually don't seem to be handy for this demand. \r\n\r\n**Describe the solution you'd like**\r\nA way to record custom `MarkerRecorded` Events that are opaque for the server would be a suitable solution.\r\n\r\n**Describe alternatives you've considered**\r\nAs mentioned before: Signaling (and ignoring) the own workflow which doesn't work either\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n","closedAt":null,"comments":[{"id":"IC_kwDOGflYbs5wWeyw","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Moving to features since this is not a Go SDK specific issue.\r\n\r\nCan you give some more detail on what kind of information these \"markers\" contain? I wonder if you have tried [UpsertMemo](https://pkg.go.dev/go.temporal.io/sdk/workflow#UpsertMemo)?","createdAt":"2024-01-10T14:21:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/399#issuecomment-1884941488","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs5wWu67","author":{"login":"freisenhauer"},"authorAssociation":"NONE","body":"Lets consider a workflow like \r\n\r\n```\r\n[...]\r\nif shouldDoSomething() {\r\n  recordShouldDoSomething()\r\n  doSomething()\r\n}\r\n[...]\r\n```\r\n\r\nthen `recordShouldDoSomething()` should add information that is (easily) noticable inside Temporal UI. Ideally, directly inside history/timeline. \r\n\r\nI just tried to store some information inside memo, but I can't find where it's displayed in UI. Through network console i can see that my test memo information are stored and returned by API but it's not displayed anywhere. Only event in history i've noticed is `WorkflowPropertiesModified` but it's payload is `undefined` and it's not showing inside timeline.\r\n\r\nOne can state that `doSomething()` will likely do something that leaves events inside history, but what if we turn this arround ? \r\n\r\n```\r\n[...]\r\nif shouldDoSomething() {\r\n  doSomething()\r\n}\r\nrecordDidNotDoThing()\r\n[...]\r\n```\r\n\r\nThat shows more clearly that one can be interested in why something was not done.","createdAt":"2024-01-10T14:57:28Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/399#issuecomment-1885007547","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs5wWwSv","author":{"login":"freisenhauer"},"authorAssociation":"NONE","body":"Just to be sure: The `MarkerRecorded` i've mentioned is the one that is documented in [Temporal Events reference](https://docs.temporal.io/references/events#markerrecorded) and hence should be already available (thats why i opened the issue inside go sdk).","createdAt":"2024-01-10T15:00:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/399#issuecomment-1885013167","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs5wWwvC","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"This seems like a reasonable ask to me. This is like #141 but a whole new event instead of just metadata on an existing command/event. We have resisted log shipping of course, but someone wanting to add a \"user-defined event\" just for viewing purposes I think seems reasonable. I have ideas about implementation, but yes it should probably be in history as a marker.","createdAt":"2024-01-10T15:01:33Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/temporalio/features/issues/399#issuecomment-1885014978","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs5wW9Ai","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Yeah if we want timeline support memo is no appropriate it would need to be some custom marker that the UI is also aware of.\r\n\r\n>Just to be sure: The MarkerRecorded i've mentioned is the one that is documented in [Temporal Events reference](https://docs.temporal.io/references/events#markerrecorded) and hence should be already available (thats why i opened the issue inside go sdk).\r\n\r\nNo SDK provides an API to directly write custom markers. They are meant to be used internally by the SDKs to implement certain features  like SideEffects and Local Activities and this may be another one. ","createdAt":"2024-01-10T15:27:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":3}}],"url":"https://github.com/temporalio/features/issues/399#issuecomment-1885065250","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs5wb7ez","author":{"login":"freisenhauer"},"authorAssociation":"NONE","body":"Okay, understandable. \r\n\r\nSounds like in general the idea meets with approval, but needs amendments through to a greater part of the stack, right ?\r\n\r\n> They are meant to be used internally by the SDKs to implement certain features like SideEffects and Local Activities and this may be another one.\r\n\r\nThis leaves me hopeful, we at least don't have to do something to the temporal server.\r\n\r\nWithout knowing your exact contribution guidelines or the code I could at least _offer_ support in this concern (to whatever extend) ðŸ˜† ","createdAt":"2024-01-11T06:21:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/399#issuecomment-1886369715","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs52ASZV","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"After some internal discussion on this feature, it was decided we are not doing it with markers at least not at this time. The problem with \"note markers\" is that it encourages extreme history growth. Alternative approaches such as metadata on task completion, or metadata on specific commands (e.g. #141), or capturing this info as a state to be provided upon query (i.e. returns a set of \"notes\" and the event IDs they are sequenced within) is safer from a history perspective than recording entire events.","createdAt":"2024-03-05T23:03:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/399#issuecomment-1979786837","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs6E0DLL","author":{"login":"freisenhauer"},"authorAssociation":"NONE","body":"Could you explain why you think this is unsafer than e.g. introducing a basically noop Activity that gets a payload with description and is only used to be viewed in history ? What is stopping one from doing this and why should this decision be made by the product and not the developer using it ? \r\n\r\nDoing things in (endless) loop is also something that can lead to history growth and yet it is even documented, how to handle this in practice. This does not really seem to be consistent with previous decisions and/or documented use cases.","createdAt":"2024-07-15T11:03:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/399#issuecomment-2228237003","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs6E0zVL","author":{"login":"mfateev"},"authorAssociation":"MEMBER","body":"We don't want to encourage behavior that would lead to performance issues. Most users don't think about the cost of these features and then get surprised that recovery takes longer. \r\n\r\nAt the same time we absolutely need to solve the use case of waiting for workflow reaching a certain state. The current workaround is to use an update for this. ","createdAt":"2024-07-15T12:52:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/399#issuecomment-2228434251","viewerDidAuthor":true},{"id":"IC_kwDOGflYbs6E2-3P","author":{"login":"freisenhauer"},"authorAssociation":"NONE","body":"Okay, I can understand that this does not have highest prio at the moment. Could you explain what you mean by \"use an update for this\" ? ","createdAt":"2024-07-15T17:15:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/399#issuecomment-2229005775","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs6E3Dxu","author":{"login":"mfateev"},"authorAssociation":"MEMBER","body":"i meant waiting for workflow to reach a specific state.","createdAt":"2024-07-15T17:27:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/399#issuecomment-2229025902","viewerDidAuthor":true},{"id":"IC_kwDOGflYbs6E3Fg9","author":{"login":"freisenhauer"},"authorAssociation":"NONE","body":"ah okay, I understand.","createdAt":"2024-07-15T17:31:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/399#issuecomment-2229033021","viewerDidAuthor":false}],"createdAt":"2024-01-10T14:08:09Z","labels":[{"id":"LA_kwDOGflYbs7XtLc6","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":399,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":15}}],"state":"OPEN","title":"Custom Markers for Workflow History/Timeline","updatedAt":"2024-07-15T17:31:36Z","url":"https://github.com/temporalio/features/issues/399"}
