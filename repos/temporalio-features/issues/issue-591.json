{"assignees":[],"author":{"id":"MDQ6VXNlcjY0MTIxNjk=","is_bot":false,"login":"mjameswh","name":"James Watkins-Harvey"},"body":"### Describe the solution you'd like\n\n**In short**\n\n- Support the `patched(patchId, memoized): boolean` and `deprecatePatch(patchId, memoized): boolean` APIs in all SDKs\n\n- Keep backward compatibility on existing APIs in each SDK, but deprecate those APIs\n  - The objective is to encourage users to move to the uniformized, simpler and less confusing APIs.\n  - Documentation on deprecated APIs should clearly indicate how existing calls may safely get converted.\n\n- In Core-based SDKs, delegate handling of the `patched` logic to Core\n\n\n**Some details**\n\n- The `memoized` flag needs to be stored in the Marker command, as part of the Workflow history.\n\n- Inconsistent usage of the `memoized` flag should result in a Non-Determinism Error.\n\n- Core SDK will implement this first, using the TS SDK as reference for the non-memoized bahavior, and Python/.Net for the memoized behavior. Java and Go will then mirror Core's implementation.\n\n\n### Existing APIs\n\nAll SDKs already provide some form of Workflow command to record versioning markers into Workflow history, but those APIs are inconsistent across the board:\n\n- Go, Java and PHP have `GetVersion`, which associates a textual identifier and a numeric value, leaving to the user the responsibility of using these appropriately. `GetVersion` checks are _memoized_, meaning that calling `GetVersion` with a same textual identifier multiple time in the lifetime of a single Workflow Execution will always return the same numeric value as was first returned.\n\n- Python, .NET and Ruby have the `patched()` and `deprecate_patch()` functions, which only takes a textual identifier, and return boolean value indicating either the new code should be executed or not. The return value is memoized.\n\n- TypeScript also have `patched()` and `deprecatePatch()` functions, but those are non-memoized.\n\n\n### Per-SDK Tickets\n\n- [ ] Go - temporalio/sdk-go#1796\n- [ ] Java - temporalio/sdk-java#2393\n- [ ] Core - temporalio/sdk-core#869\n- [ ] TypeScript - temporalio/sdk-typescript#1616\n- [ ] Python - temporalio/sdk-python#754\n- [ ] .NET - temporalio/sdk-dotnet#398\n- [ ] Ruby - temporalio/sdk-ruby#209\n- [ ] PHP - temporalio/sdk-php#558\n- [ ] Temporal CLI - N/A\n","closedAt":null,"comments":[],"createdAt":"2025-01-29T23:28:53Z","labels":[{"id":"LA_kwDOGflYbs7XtLc6","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":591,"reactionGroups":[],"state":"OPEN","title":"Uniformize `patched()` API in all SDKs","updatedAt":"2025-01-29T23:57:10Z","url":"https://github.com/temporalio/features/issues/591"}
