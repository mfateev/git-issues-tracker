{"assignees":[],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"## Expected Behavior\n`workflow_completed` metric counter is expected to count newly completed executions, accepted by the server.\nA worker should log these metrics only after reporting the completion of the workflow task to the server and getting a confirmation from the server that the completion was not rejected.\n\n## Actual Behavior\n`workflow_completed` counter counts completion of workflow method code instead. Including replays and the ones that are followed by an `UNHANDLED_COMMAND` response from the Server for example.\n\n## Additional Context\nThe same problem is present for `workflow_continue_as_new` counter.\n\n## Tasks\n* [ ] Go - https://github.com/temporalio/sdk-go/issues/2111\n* [ ] Java - https://github.com/temporalio/sdk-java/issues/1590\n* [ ] Core - https://github.com/temporalio/sdk-core/issues/1084\n\n","closedAt":null,"comments":[],"createdAt":"2023-01-29T21:49:48Z","labels":[{"id":"LA_kwDOGflYbs7XtLc0","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":222,"reactionGroups":[],"state":"OPEN","title":"workflow_completed and workflow_continue_as_new counters should be logged after a successful reporting to the server","updatedAt":"2025-12-18T16:33:15Z","url":"https://github.com/temporalio/features/issues/222"}
