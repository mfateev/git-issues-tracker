{"assignees":[],"author":{"id":"MDQ6VXNlcjI1MTI4OA==","is_bot":false,"login":"lorensr","name":"Loren ☺️"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\n<!-- A clear and concise description of what the problem is. Ex. I'm always frustrated when [...] -->\r\n\r\nCan't do:\r\n\r\n`tctl workflow list --query='TemporalChangeVersion=\"<change_id>-<version_id>\"'`\r\n\r\nWhich our docs say you should be able to do when using patch API.\r\n\r\n<img width=\"1109\" alt=\"image\" src=\"https://user-images.githubusercontent.com/251288/177626500-6ef94ed0-7a67-4217-b03a-c4321941aa8c.png\">\r\n\r\nhttps://docs.temporal.io/concepts/what-is-a-search-attribute\r\n\r\n### Describe the solution you'd like\r\n\r\n<!-- A clear and concise description of what you want to happen. SCREENSHOTS OR CODE SAMPLES ARE VERY HELPFUL -->\r\n\r\nAdd an `UpsertSearchAttributes` with `TemporalChangeVersion: <change_id>-<version_id>` with each patch command. Apparently Go SDK does this, but Java doesn't.\r\n\r\n### SDKs\r\n\r\n- [x] Go\r\n- [ ] Java https://github.com/temporalio/sdk-java/issues/587\r\n- [ ] TS https://github.com/temporalio/sdk-typescript/issues/817\r\n- [ ] Python\r\n- [ ] PHP\r\n\r\n### Additional context\r\n\r\nInternal slack link","closedAt":"2025-07-08T18:06:29Z","comments":[{"id":"IC_kwDOGflYbs5IfGBB","author":{"login":"rupalivohra"},"authorAssociation":"NONE","body":"This also appears to not work for the TS SDK, but I'm guessing solving it in the Core will address that as well?","createdAt":"2022-08-09T20:36:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/117#issuecomment-1216110657","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs5IfGBC","author":{"login":"lorensr"},"authorAssociation":"CONTRIBUTOR","body":"Yes.\r\n\r\n@Sushisource I was envisioning this done only in Core, but that would mean `workflowInfo().searchAttributes` wouldn't have `TemporalChangeVersion`?","createdAt":"2022-08-09T20:59:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/117#issuecomment-1216110658","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs5IfGBD","author":{"login":"Sushisource"},"authorAssociation":"MEMBER","body":"@lorensr It should be able to have it just fine - maybe not in the same workflow task that you do the upsert, but that's correct in some sense anyway.","createdAt":"2022-08-09T21:05:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/117#issuecomment-1216110659","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs5IfGBG","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"We could add the search attribute when a patch is applied in the TS workflow runtime so it's available when processing the \"current\" workflow task.","createdAt":"2022-08-10T16:07:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/117#issuecomment-1216110662","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs5IfGBJ","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"I think we decided to close this and implement in lang, it's much much simpler","createdAt":"2022-08-16T03:37:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/features/issues/117#issuecomment-1216110665","viewerDidAuthor":false}],"createdAt":"2022-07-06T19:20:51Z","labels":[{"id":"LA_kwDOGflYbs7XtLc6","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":117,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":4}}],"state":"CLOSED","title":"[Feature Request] Upsert TemporalChangeVersion on patch","updatedAt":"2025-07-08T18:06:29Z","url":"https://github.com/temporalio/features/issues/117"}
