{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"### Describe the solution you'd like\n\nEvery gRPC request that contains a namespace should have a `Temporal-Namespace` header (i.e. gRPC metadata) set on the request with the namespace value. This can/should be done with interceptors and needs to be future proof. This means if at all possible the namespace should be extracted out of the request without having to know about specific requests.\n\nWe have ensured that every namespace-specific gRPC request has a `string namespace` field and new RPCs will too.\n\nIn Go the extraction can be done with a simple interface assertion containing `GetNamespace() string`.\n\nIn Java and Core this may be a bit more difficult. Not sure if we want to use Java reflection or core macros or what. Or it can be done hardcoded with a the set of requests objects in big switch/match, but there must be a test to confirm nothing is missed when a new RPC is introduced. This could be done by starting a no-op/unavailable-response-only gRPC server that confirms via server-side interceptor that every call has a `Temporal-Namespace` header. Then simply make a client call for every RPC available, set a namespace on it (reflectively or whatever), and confirm set. But all this doesn't have to be done if there are other ways to make sure new RPCs break the build if not accounted for.\n\n### Per-SDK Tickets\n\n- [x] Go - https://github.com/temporalio/sdk-go/issues/1458\n- [x] Java - https://github.com/temporalio/sdk-java/issues/2058\n- [x] Core - https://github.com/temporalio/sdk-core/issues/736\n- [x] TypeScript - Requires Core upgrade, and https://github.com/temporalio/sdk-typescript/issues/1697 for pure JS side\n- [x] Python - Requires Core upgrade\n- [x] .NET - Requires Core upgrade\n- [ ] PHP - Requires Go SDK upgrade\n- [x] Temporal CLI - Requires Go SDK upgrade\n","closedAt":"2025-10-27T17:02:02Z","comments":[{"id":"IC_kwDOGflYbs59hrZk","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Does `GetSystemInfo` also need to have this header set?","createdAt":"2024-05-11T18:15:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/475#issuecomment-2105980516","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs59n7DP","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"@Quinn-With-Two-Ns - no I don't believe so. It is a cross-namespace call. I will confirm internally.","createdAt":"2024-05-13T13:43:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/475#issuecomment-2107617487","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs6Gil6t","author":{"login":"Sushisource"},"authorAssociation":"MEMBER","body":"Note, HTTP2 requires headers to be lowercase: https://www.rfc-editor.org/rfc/rfc7540#section-8.1.2\r\n\r\nWe should be using `temporal-namespace` and cloud should be aware of that","createdAt":"2024-07-30T00:00:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/475#issuecomment-2257215149","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs7Nxyh_","author":{"login":"matlegit"},"authorAssociation":"NONE","body":"Hi there, has this been implemented in the Python SDK yet? The description says \"Requires Core upgrade\" but https://github.com/temporalio/sdk-core/issues/736 is completed already. Thanks","createdAt":"2025-10-27T16:59:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/475#issuecomment-3452381311","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs7Nx1Fx","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Yes, this is in all SDKs at this time, we just had not closed this issue. Closing now.\n\nNote, this may not be for _every_ gRPC call for Python (and other Core SDKs), just high-level ones. Direct gRPC calls still may require setting this header (i.e. \"rpc metadata\") yourself.","createdAt":"2025-10-27T17:02:02Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/475#issuecomment-3452391793","viewerDidAuthor":false},{"id":"IC_kwDOGflYbs7NyKFL","author":{"login":"matlegit"},"authorAssociation":"NONE","body":"@cretz Great to hear, thank you!","createdAt":"2025-10-27T17:22:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/features/issues/475#issuecomment-3452477771","viewerDidAuthor":false}],"createdAt":"2024-05-09T13:04:36Z","labels":[{"id":"LA_kwDOGflYbs7XtLc6","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":475,"reactionGroups":[],"state":"CLOSED","title":"Set Temporal-Namespace header on every gRPC request","updatedAt":"2025-10-27T17:22:55Z","url":"https://github.com/temporalio/features/issues/475"}
