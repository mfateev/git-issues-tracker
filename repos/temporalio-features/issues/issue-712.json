{"assignees":[],"author":{"id":"MDQ6VXNlcjE1MzE1NDEz","is_bot":false,"login":"THardy98","name":"Thomas Hardy"},"body":"The Typescript SDK has transitioned from `npm` to `pnpm` for build scripts (see: https://github.com/temporalio/sdk-typescript/pull/1793)\n\nWhen building the TS worker from source (i.e. when `version` is a path), we use `npm`:\n```\n\t\t// Have to build the local repo\n\t\tif st, err := os.Stat(filepath.Join(options.Version, \"node_modules\")); err != nil || !st.IsDir() {\n\t\t\t// Only install dependencies, avoid triggerring any post install build scripts\n\t\t\tcmd := exec.CommandContext(ctx, \"npm\", \"ci\", \"--ignore-scripts\")\n\t\t\t...\n\n\t\t\t// Build the SDK, ignore the unused `create` package as a mostly insignificant micro optimisation.\n\t\t\tcmd = exec.CommandContext(ctx, \"npm\", \"run\", \"build\", \"--\", \"--ignore\", \"@temporalio/create\")\n\t\t\t...\n\t\t}\n```\n`npm ci` fails because it expects `package-lock.json` but now that we use `pnpm`, we have `pnpm-lock.yaml`\n\nWe should fix this to use `pnpm` instead of `npm`","closedAt":null,"comments":[],"createdAt":"2025-12-18T07:29:14Z","labels":[],"milestone":null,"number":712,"reactionGroups":[],"state":"OPEN","title":"[Bug] Use `pnpm` when building TS worker from source","updatedAt":"2025-12-18T07:31:52Z","url":"https://github.com/temporalio/features/issues/712"}
