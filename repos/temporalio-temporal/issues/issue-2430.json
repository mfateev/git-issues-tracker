{"assignees":[],"author":{"id":"MDQ6VXNlcjIyMDk4MjQ2","is_bot":false,"login":"andrey-dubnik","name":"cloudwiz"},"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nCurrently the cluster metric feed does not include the Temporal cluster name label which is not very convenient when managing multiple clusters as each cluster should be explicitly labeled OR metric feed transformed.\r\n\r\n**Describe the solution you'd like**\r\n\r\nInclude temporal_cluster label into the exported metric\r\n\r\n**Describe alternatives you've considered**\r\n\r\nLabeling the service deployment with a cluster name\r\n","closedAt":"2022-01-28T23:10:57Z","comments":[{"id":"IC_kwDODNqesM49DN-s","author":{"login":"underrun"},"authorAssociation":"CONTRIBUTOR","body":"At least in kubernetes with prometheus it's easy to add a label for cluster - what is the advantage to including this in temporal itself?","createdAt":"2022-01-28T14:04:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2430#issuecomment-1024253868","viewerDidAuthor":false},{"id":"IC_kwDODNqesM49D7I6","author":{"login":"andrey-dubnik"},"authorAssociation":"NONE","body":"The advantage is in consistency I guess. If the label is integrated into the exporter it would not matter if I run on k8s or VM as prom scraper would work irrespectively and consistently. \n\nIt also clearly identifies the cluster based on the configuration value cluster was started with rather than the label assigned. ","createdAt":"2022-01-28T17:21:17Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2430#issuecomment-1024438842","viewerDidAuthor":false},{"id":"IC_kwDODNqesM49EGN1","author":{"login":"Ardagan"},"authorAssociation":"CONTRIBUTOR","body":"You can also add label into temporal server config. This label will be injected into all the metrics reported by server.\r\n```\r\nglobal:\r\n  metrics:\r\n    tags:\r\n      <tagname>:<tagvalue>\r\n```","createdAt":"2022-01-28T18:11:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2430#issuecomment-1024484213","viewerDidAuthor":false},{"id":"IC_kwDODNqesM49EIbx","author":{"login":"andrey-dubnik"},"authorAssociation":"NONE","body":"This is good enough, thanks for the pointer. In this case we only need to modify the config template to have both the tag and the current cluster following the same pattern.\n\nHaving the metrics labeled with a cluster by default would still be worth it as such label is an essential filtering attribute when the multi-tenant observability is in play. ","createdAt":"2022-01-28T18:24:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2430#issuecomment-1024493297","viewerDidAuthor":false}],"createdAt":"2022-01-28T12:45:11Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":2430,"reactionGroups":[],"state":"CLOSED","title":"Add a temporal cluster label into the exported metric","updatedAt":"2022-01-28T23:10:57Z","url":"https://github.com/temporalio/temporal/issues/2430"}
