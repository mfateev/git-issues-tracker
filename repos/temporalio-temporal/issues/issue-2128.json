{"assignees":[{"id":"MDQ6VXNlcjg3NjI4OTM=","login":"wxing1292","name":"Wenquan Xing","databaseId":0}],"author":{"id":"MDQ6VXNlcjIyMzI1MjQ=","is_bot":false,"login":"alexshtin","name":"Alex Shtin"},"body":"## Expected Behavior\r\n`ErrShardClosed` is converted to `serviceerrors.ShardOwnershipLost` and retried by frontend on the different history node.\r\n\r\n## Actual Behavior\r\n[ErrShardClosed](https://github.com/temporalio/temporal/blob/744f26d282c5891204d66aac0d77c93cdf1c1291/service/history/shard/context_impl.go#L92) is returned to the client if request reached history node when node is shutting down (during deployment, for instance). Client sees this error as `serviceerror.Unknown` and don't know what to do with it.\r\n\r\n## Steps to Reproduce the Problem\r\nRestart history node under consistent load.\r\n","closedAt":"2021-11-05T07:10:13Z","comments":[],"createdAt":"2021-11-03T23:08:22Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":2128,"reactionGroups":[],"state":"CLOSED","title":"ErrShardClosed is returned to the client","updatedAt":"2021-11-05T07:10:13Z","url":"https://github.com/temporalio/temporal/issues/2128"}
