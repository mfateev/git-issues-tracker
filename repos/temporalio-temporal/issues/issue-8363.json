{"assignees":[],"author":{"id":"MDQ6VXNlcjExOTQyMg==","is_bot":false,"login":"tsurdilo","name":"Tihomir Surdilovic"},"body":"Matching task_queue_validator under some conditions fails validation of root task queue partition on poll requests with \n\"task queue name cannot start with reserved prefix /_sys/\" and returns InvalidArgument to worker on poll request.\n\nThis is typically a non-issue as worker retries this operation and it seems to succeed\nbut its still something that users see in logs and looks a bit \"scary\".\nOpening issue to start investigation on why this is happening. We have seen this happen both on OSS and Cloud, just fyi.","closedAt":"2025-10-14T14:14:07Z","comments":[{"id":"IC_kwDODNqesM7KM3ZR","author":{"login":"enzo-sureify"},"authorAssociation":"NONE","body":"We are getting this error too on our logs. \nthis is what we see:\n\n1. We start getting the following warnings:\n```\nWARN temporal_client::retry: gRPC call poll_workflow_task_queue retried 10 times error=Status { code: Unavailable, message: \"Not enough hosts to serve the request\", metadata: MetadataMap { headers: {\"content-type\": \"application/grpc\"} }, source: None }\n```\n```\nWARN temporal_client::retry: gRPC call poll_activity_task_queue retried 8 times error=Status { code: Unavailable, message: \"Not enough hosts to serve the request\", metadata: MetadataMap { headers: {\"content-type\": \"application/grpc\"} }, source: None }\n```\n\n2. After some number of retries we get the following:\n```\nWARN temporal_sdk_core::worker::workflow::wft_poller: Error while polling for workflow tasks error=Status { code: InvalidArgument, message: \"task queue name cannot start with reserved prefix /_sys/\", metadata: MetadataMap { headers: {\"content-type\": \"application/grpc\"} }, source: None }\n```\n```\nERROR temporal_sdk_core::worker::workflow::workflow_stream: Workflow processing encountered fatal error and must shut down TonicError(Status { code: InvalidArgument, message: \"task queue name cannot start with reserved prefix /_sys/\", metadata: MetadataMap { headers: {\"content-type\": \"application/grpc\"} }, source: None })\n```\n3. Once this error happens, the worker is goes into the Failed state and stop processing activities/workflows.\n\nTemporal Server version: 1.27.2\nTemporal Typescript SDK version: 1.13.0 / 1.11.2 (depending on the environment)\n","createdAt":"2025-10-10T21:35:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/8363#issuecomment-3392370257","viewerDidAuthor":false},{"id":"IC_kwDODNqesM7Kx-0d","author":{"login":"dnr"},"authorAssociation":"MEMBER","body":"This should be fixed in server version 1.28.0. Please re-open if you see it again after upgrading to 1.28.0 or later.","createdAt":"2025-10-14T14:14:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/8363#issuecomment-3402099997","viewerDidAuthor":false}],"createdAt":"2025-09-23T14:26:42Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":8363,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":6}}],"state":"CLOSED","title":"Task queue validator on occasions fails task queue name validation","updatedAt":"2025-10-14T14:14:07Z","url":"https://github.com/temporalio/temporal/issues/8363"}
