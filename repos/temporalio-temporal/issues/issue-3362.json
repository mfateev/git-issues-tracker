{"assignees":[],"author":{"id":"MDQ6VXNlcjExOTQyMg==","is_bot":false,"login":"tsurdilo","name":"Tihomir Surdilovic"},"body":"Currently auth interceptor requires tls or authorization header present: https://github.com/temporalio/temporal/blob/master/common/authorization/interceptor.go#L91\r\n\r\nUsers would like to be able to define custom headers where this info is present instead.","closedAt":"2023-10-05T22:32:47Z","comments":[{"id":"IC_kwDODNqesM5KJo5I","author":{"login":"belokrylov"},"authorAssociation":"NONE","body":"This feature would be great because it will allow to use custom security headers defined by a company instead of hardcoded \"authorization\" and \"authorization-extras\" that is forced today by the code. I would love to configure my custom security header and trigger authorization based on it with or without \"authorization\" header.","createdAt":"2022-09-12T17:11:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3362#issuecomment-1244040776","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5nlnZk","author":{"login":"steveandroulakis"},"authorAssociation":"MEMBER","body":"Any update on this one? Thank you!","createdAt":"2023-09-27T18:49:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3362#issuecomment-1737913956","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5nsWDU","author":{"login":"belokrylov"},"authorAssociation":"NONE","body":"I can provide more details on this if needed.\r\n\r\nOn Wed, Sep 27, 2023, 11:49 AM Steve Androulakis ***@***.***>\r\nwrote:\r\n\r\n> Any update on this one? Thank you!\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/temporalio/temporal/issues/3362#issuecomment-1737913956>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ACZFG6EIESETAXXR2QOGI7DX4RYNNANCNFSM6AAAAAAQJERWSU>\r\n> .\r\n> You are receiving this because you commented.Message ID:\r\n> ***@***.***>\r\n>\r\n","createdAt":"2023-09-28T16:43:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3362#issuecomment-1739677908","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5oDQ4f","author":{"login":"dnr"},"authorAssociation":"MEMBER","body":"Hi @belokrylov, would it be acceptable to allow overriding those two header names (in static config), or do you want the ability to examine an arbitrary number of headers? The latter would require changing the interface which is a little more involved.","createdAt":"2023-10-03T20:36:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3362#issuecomment-1745686047","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5oJBt1","author":{"login":"belokrylov"},"authorAssociation":"NONE","body":"Yes, that would be fine.\r\n\r\nOn Tue, Oct 3, 2023, 1:36 PM David Reiss ***@***.***> wrote:\r\n\r\n> Hi @belokrylov <https://github.com/belokrylov>, would it be acceptable to\r\n> allow overriding those two header names (in static config), or do you want\r\n> the ability to examine an arbitrary number of headers? The latter would\r\n> require changing the interface which is a little more involved.\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/temporalio/temporal/issues/3362#issuecomment-1745686047>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ACZFG6HDGKDRFBKHPQPXZZLX5RZMDAVCNFSM6AAAAAAQJERWSWVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMYTONBVGY4DMMBUG4>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>\r\n","createdAt":"2023-10-04T15:54:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3362#issuecomment-1747196789","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5oJD3o","author":{"login":"belokrylov"},"authorAssociation":"NONE","body":"Please check for second header as well. First or second should be checked.\r\n\r\nOn Wed, Oct 4, 2023, 8:54 AM Alexandre Belokrylov ***@***.***>\r\nwrote:\r\n\r\n> Yes, that would be fine.\r\n>\r\n> On Tue, Oct 3, 2023, 1:36 PM David Reiss ***@***.***> wrote:\r\n>\r\n>> Hi @belokrylov <https://github.com/belokrylov>, would it be acceptable\r\n>> to allow overriding those two header names (in static config), or do you\r\n>> want the ability to examine an arbitrary number of headers? The latter\r\n>> would require changing the interface which is a little more involved.\r\n>>\r\n>> —\r\n>> Reply to this email directly, view it on GitHub\r\n>> <https://github.com/temporalio/temporal/issues/3362#issuecomment-1745686047>,\r\n>> or unsubscribe\r\n>> <https://github.com/notifications/unsubscribe-auth/ACZFG6HDGKDRFBKHPQPXZZLX5RZMDAVCNFSM6AAAAAAQJERWSWVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMYTONBVGY4DMMBUG4>\r\n>> .\r\n>> You are receiving this because you were mentioned.Message ID:\r\n>> ***@***.***>\r\n>>\r\n>\r\n","createdAt":"2023-10-04T15:59:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3362#issuecomment-1747205608","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5oJotu","author":{"login":"dnr"},"authorAssociation":"MEMBER","body":"Could you check if PR #4935 works for you? This lets you add a `authHeaderName` and `authExtraHeaderName` in your static config to change the header names to look up.","createdAt":"2023-10-04T17:37:50Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3362#issuecomment-1747356526","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5oRMji","author":{"login":"belokrylov"},"authorAssociation":"NONE","body":"My developers did review the change.\r\nWould it be possible to add into if statement on line 102 code  \"||\r\nlen(authExtraHeaders) >0\"\r\n\r\nWe use authheaders or authextraheaders or both together.\r\nExample use case:\r\nOne is for jwt. Second for client certificate that is passed as a custom\r\nheader.\r\n\r\nOn Wed, Oct 4, 2023, 10:38 AM David Reiss ***@***.***> wrote:\r\n\r\n> Could you check if PR #4935\r\n> <https://github.com/temporalio/temporal/pull/4935> works for you?\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/temporalio/temporal/issues/3362#issuecomment-1747356526>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ACZFG6DYCV3TYQ7C775BK6DX5WNHXAVCNFSM6AAAAAAQJERWSWVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMYTONBXGM2TMNJSGY>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>\r\n","createdAt":"2023-10-05T17:16:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3362#issuecomment-1749338338","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5oRP0l","author":{"login":"dnr"},"authorAssociation":"MEMBER","body":"Would you be able to use this feature?\r\nhttps://github.com/temporalio/temporal/blob/4be14dd3308031219db02945a12a2cf7d29614b3/common/authorization/claim_mapper.go#L60-L65\r\nYou can implement `AuthInfoRequired` and return `false` and the ClaimMapper will be called in all cases.\r\n\r\n(I know it's a little awkward, but I'm trying to avoid making drastic changes to the interface or semantics to avoid breaking existing custom ClaimMappers.)","createdAt":"2023-10-05T17:26:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3362#issuecomment-1749351717","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5oSPdr","author":{"login":"belokrylov"},"authorAssociation":"NONE","body":"Yes. That will work for us!\r\nThank you for bringing this to our attention.\r\nWe are good with the PR.\r\n\r\nThank you so much for working on it and checking in with us!\r\n\r\n\r\nOn Thu, Oct 5, 2023, 10:26 AM David Reiss ***@***.***> wrote:\r\n\r\n> Would you be able to use this feature?\r\n>\r\n> https://github.com/temporalio/temporal/blob/4be14dd3308031219db02945a12a2cf7d29614b3/common/authorization/claim_mapper.go#L60-L65\r\n> You can implement AuthInfoRequired and return false and the ClaimMapper\r\n> will be called in all cases.\r\n>\r\n> (I know it's a little awkward, but I'm trying to avoid making drastic\r\n> changes to the interface or semantics to avoid breaking existing custom\r\n> ClaimMappers.)\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/temporalio/temporal/issues/3362#issuecomment-1749351717>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ACZFG6AA7KAFHFW5FK7FBXDX53UVDAVCNFSM6AAAAAAQJERWSWVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMYTONBZGM2TCNZRG4>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>\r\n","createdAt":"2023-10-05T20:42:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3362#issuecomment-1749612395","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5oaYOX","author":{"login":"belokrylov"},"authorAssociation":"NONE","body":"Thank you so much!\r\n\r\nOn Thu, Oct 5, 2023, 3:33 PM David Reiss ***@***.***> wrote:\r\n\r\n> Closed #3362 <https://github.com/temporalio/temporal/issues/3362> as\r\n> completed via #4935 <https://github.com/temporalio/temporal/pull/4935>.\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/temporalio/temporal/issues/3362#event-10569164575>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ACZFG6C74MH7F52KYXTQUNDX54YRXAVCNFSM6AAAAAAQJERWSWVHI2DSMVQWIX3LMV45UABCJFZXG5LFIV3GK3TUJZXXI2LGNFRWC5DJN5XDWMJQGU3DSMJWGQ2TONI>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>\r\n","createdAt":"2023-10-07T16:00:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3362#issuecomment-1751745431","viewerDidAuthor":false}],"createdAt":"2022-09-10T02:55:14Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":3362,"reactionGroups":[],"state":"CLOSED","title":"Auth interceptor - add ability to pull auth info from custom headers","updatedAt":"2023-10-07T16:00:45Z","url":"https://github.com/temporalio/temporal/issues/3362"}
