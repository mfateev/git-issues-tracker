{"assignees":[],"author":{"id":"MDQ6VXNlcjQ1OTUwNDM0","is_bot":false,"login":"sjmtan","name":"Shannon Tan"},"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nIn our system, we use Redis as a counting semaphore. We want to restrict a certain code path to only have 10 requests in flight for example. This situation is somewhat related to:\r\n\r\n- https://community.temporal.io/t/rate-limiting-based-on-metadata/385\r\n- https://github.com/temporalio/temporal/issues/1507\r\n\r\nOur current solution is to retry in a timeframe based on the timeout period of this semaphore with configurable jitter.\r\n\r\n**Describe the solution you'd like**\r\nAdd a \"RetryIn\" field to the retryable errors. Just like whether a retryable or nonretryable error can be returned, this can be used to set when this would be retried. A corresponding change on the SDK side would have to be made as well.\r\n\r\n**Describe alternatives you've considered**\r\nN/A\r\n\r\n**Additional context**\r\nI think this feature is a nice-to-have, but not a must have. We could always configure our retry policy to be of a certain timeframe without the jitter, and it'd mostly be fine. I'm not that worried about stampeding herd in our system, but I would imagine that jitter would be helpful here too (maybe support for that would be good enough?).\r\n","closedAt":"2024-03-16T01:11:57Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg3MzY2MTEyMw==","author":{"login":"samarabbas"},"authorAssociation":"MEMBER","body":"@mfateev any thoughts on this issue?  \r\n\r\nAnother potential solution is to use rate limit TaskQueues.  The only problem is currently we rate limit based on rps, as oppose to total outstanding requests which is needed by this use case.","createdAt":"2021-07-04T20:57:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1515#issuecomment-873661123","viewerDidAuthor":false},{"id":"IC_kwDODNqesM53Q6oU","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"https://github.com/temporalio/temporal/pull/5182","createdAt":"2024-03-16T01:11:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1515#issuecomment-2000923156","viewerDidAuthor":false}],"createdAt":"2021-05-03T16:58:11Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwyMDE5NzgzNzUw","name":"API","description":"Issues/features involving the API","color":"3d910f"},{"id":"MDU6TGFiZWwyMDE5OTIzNjU1","name":"devexp","description":"","color":"9350b7"}],"milestone":null,"number":1515,"reactionGroups":[],"state":"CLOSED","title":"Add Configurable Retry In Timeframe for Error","updatedAt":"2024-03-16T01:11:57Z","url":"https://github.com/temporalio/temporal/issues/1515"}
