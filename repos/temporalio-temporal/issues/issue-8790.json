{"assignees":[],"author":{"id":"U_kgDOCJUwfQ","is_bot":false,"login":"xtyinbiao","name":"尹彪"},"body":"temporal version: 2.22.3\ndb: mysql\n\nset Retention Period 3 days:\n<img width=\"3184\" height=\"916\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/158a83b3-0853-489c-8b4b-93da7f6d242f\" />\n\n\nI see workflows total count is :\n<img width=\"3500\" height=\"1360\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/fbcb1eb5-8f9c-4ee6-be5a-8d4e4459072e\" />\n\nand before 3 days just  7274， I think retention works.\n<img width=\"3488\" height=\"1284\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/6ec9b286-626f-4270-8f90-651319a79462\" />\n\nbut , history_node table keep growing, now has 19402165 count","closedAt":null,"comments":[{"id":"IC_kwDODNqesM7eYGbo","author":{"login":"yycptt"},"authorAssociation":"MEMBER","body":"Hello @xtyinbiao, can you check if `worker.historyScannerEnabled` flag is enabled on the cluster? It should be enabled by defualt.\n\nIf it's enabled, can you use `temporal -n temporal-system workflow list -q 'WorkflowType = \"temporal-sys-history-scanner-workflow\"'` to see those internal scanner workflows are running properly?\n\nIn some failure cases, the first event batch of a workflow will be left in DB until the history scanner cleans them up. You can also try reducing `worker.historyScannerDataMinAge` (default is 60days) and let history scanner kick in sooner.\n\nIt looks like you are also using a quite old temporal version 1.22.4. This latest is 1.29.","createdAt":"2026-01-09T22:58:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/8790#issuecomment-3730859752","viewerDidAuthor":false}],"createdAt":"2025-12-10T10:43:07Z","labels":[],"milestone":null,"number":8790,"reactionGroups":[{"content":"EYES","users":{"totalCount":1}}],"state":"OPEN","title":"history_node table keeps growing","updatedAt":"2026-01-09T22:58:22Z","url":"https://github.com/temporalio/temporal/issues/8790"}
