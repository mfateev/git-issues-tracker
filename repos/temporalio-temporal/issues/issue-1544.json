{"assignees":[{"id":"MDQ6VXNlcjIyMzI1MjQ=","login":"alexshtin","name":"Alex Shtin","databaseId":0}],"author":{"id":"MDQ6VXNlcjE1ODE3MjY=","is_bot":false,"login":"ajbeach2","name":"kanto-bot"},"body":"https://github.com/temporalio/temporal/blob/3fd1fd800d04649a5c7a4119616e1e7e0b311245/docker/start.sh#L149\r\nhttps://github.com/temporalio/temporal/blob/3fd1fd800d04649a5c7a4119616e1e7e0b311245/docker/start.sh#L87\r\n\r\nthe docker start.sh scripts, do not use username or password with curl. This means that you cannot use a username/password for elasticsearch when using the auto setup scripts.\r\n\r\nThe workaround i am using for now with kubernetes, is to mount a modified script to setup es within an init container for the frontend server.\r\n\r\nThis also means that the frontend container will never start, because the polling logic doesn't use a username/password","closedAt":"2021-05-22T01:33:19Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDgzOTk3NzA2MQ==","author":{"login":"ajbeach2"},"authorAssociation":"NONE","body":"For the workaround, I also needed to change the docker command because the docker image will continue to fail to connect to es.\r\n\r\nSo my initContainer poll es and the the frontend container command changes to \r\n\r\n ./start-temporal.sh\r\n\r\n","createdAt":"2021-05-12T17:50:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1544#issuecomment-839977061","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0MTUzNDUzOA==","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"hi, \r\ncurrently the auto setup scripts are only aimed for dev / test purpose, not for production setup.\r\n\r\nwe do welcome community contribution","createdAt":"2021-05-14T22:34:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1544#issuecomment-841534538","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0NjMyMTMxNg==","author":{"login":"alexshtin"},"authorAssociation":"CONTRIBUTOR","body":"I recently refactor our scripts that we run in docker. Elasticsearch setup is now running only for auto-setup image (#1501). I also added k8s [server job](https://github.com/temporalio/helm-charts/blob/master/templates/server-job.yaml#L192-L246) which is responsible for index creation in k8s environment.","createdAt":"2021-05-22T00:37:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1544#issuecomment-846321316","viewerDidAuthor":false}],"createdAt":"2021-05-12T17:46:59Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODEzMzk5","name":"config","description":"","color":"a5a1f4"}],"milestone":null,"number":1544,"reactionGroups":[],"state":"CLOSED","title":"ES Auto Setup does not use username and password","updatedAt":"2021-05-22T01:33:19Z","url":"https://github.com/temporalio/temporal/issues/1544"}
