{"assignees":[{"id":"MDQ6VXNlcjIxODY5Ng==","login":"markmark206","name":"Mark Markaryan","databaseId":0},{"id":"MDQ6VXNlcjg3NjI4OTM=","login":"wxing1292","name":"Wenquan Xing","databaseId":0}],"author":{"id":"MDQ6VXNlcjE3NjY1MTU=","is_bot":false,"login":"samarabbas","name":"Samar Abbas"},"body":"## Expected Behavior\r\nActivity task dispatched as expected\r\n\r\n## Actual Behavior\r\nActivity task times out due to ScheduleToStart\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Workflow which schedules activities\r\n  1. Restart matching roles\r\n  1. Workflow gets stuck due to activity task not getting dispatched and eventually times out\r\n\r\n```\r\n{\r\n  \"eventId\": 243,\r\n  \"timestamp\": 1591564231540998957,\r\n  \"eventType\": \"ActivityTaskScheduled\",\r\n  \"version\": -24,\r\n  \"taskId\": 970990029,\r\n  \"activityTaskScheduledEventAttributes\": {\r\n    \"activityId\": \"39\",\r\n    \"activityType\": {\r\n      \"name\": \"CorpUserReplicationActivities::replicateNextPage\"\r\n    },\r\n    \"taskList\": {\r\n      \"name\": \"IdentityTaskList\"\r\n    },\r\n    \"input\": \"IllXTmpiM1Z1ZEY5cFpEbzZPaTB0SXlOcFpEbzZPamd4TmpZek5qVTEi\",\r\n    \"scheduleToCloseTimeoutSeconds\": 2400,\r\n    \"scheduleToStartTimeoutSeconds\": 2400,\r\n    \"startToCloseTimeoutSeconds\": 60,\r\n    \"heartbeatTimeoutSeconds\": 300,\r\n    \"decisionTaskCompletedEventId\": 242,\r\n    \"retryPolicy\": {\r\n      \"initialIntervalInSeconds\": 1,\r\n      \"backoffCoefficient\": 2,\r\n      \"maximumIntervalInSeconds\": 600,\r\n      \"maximumAttempts\": 0,\r\n      \"expirationIntervalInSeconds\": 2400\r\n    }\r\n  }\r\n},\r\n{\r\n  \"eventId\": 244,\r\n  \"timestamp\": 1591566631548894103,\r\n  \"eventType\": \"ActivityTaskTimedOut\",\r\n  \"version\": -24,\r\n  \"taskId\": 973079612,\r\n  \"activityTaskTimedOutEventAttributes\": {\r\n    \"details\": \"\",\r\n    \"scheduledEventId\": 243,\r\n    \"startedEventId\": -23,\r\n    \"timeoutType\": \"SCHEDULE_TO_START\",\r\n    \"lastFailureReason\": \"\"\r\n  }\r\n},\r\n```\r\n\r\n## Specifications\r\n\r\n  - Version: Cadence v0.11.0\r\n  - Platform: Postgres SQL\r\n","closedAt":"2020-10-21T01:08:31Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY1ODk5MDE0Mg==","author":{"login":"samarabbas"},"authorAssociation":"MEMBER","body":"We need to repro this on Temporal bits backed by MySQL.","createdAt":"2020-07-15T20:24:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/459#issuecomment-658990142","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcxMzIyNzgyNQ==","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"close issue due to cannot reproduce & no further information\r\n","createdAt":"2020-10-21T01:08:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/459#issuecomment-713227825","viewerDidAuthor":false}],"createdAt":"2020-06-16T16:26:51Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":{"number":1,"title":"Initial Temporal Release","description":"","dueOn":null},"number":459,"reactionGroups":[],"state":"CLOSED","title":"Activity tasks getting lost on matching role restarts","updatedAt":"2020-10-21T01:08:31Z","url":"https://github.com/temporalio/temporal/issues/459"}
