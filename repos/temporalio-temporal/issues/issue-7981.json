{"assignees":[],"author":{"id":"MDQ6VXNlcjU0MDM2OTg5","is_bot":false,"login":"HoangViet144","name":"Trần Hoàng Việt"},"body":"## Expected Behavior\nAble to add search attribute for mysql visibility store\n\n## Actual Behavior\nReceived error `\"Failed to add search attributes to store mysql8: Unable to save search attributes: something went wrong, please retry (6b50ceaa).\"`. In internal-frontend deployment log, I found this error `\"error\":\"unable to find bootstrap container for the given service name\"`\n\nAfter searching around the source code, the given error is from https://github.com/temporalio/temporal/blob/main/common/archiver/provider/provider.go#L86. I suppose it is due to I setup GCS using GCP application default service account:\n```\n  archival:\n    history:\n      state: \"enabled\"\n      enableRead: true\n      provider:\n        gstorage:\n          credentialsPath: \"\"\n    visibility:\n      state: \"enabled\"\n      enableRead: true\n      provider:\n        gstorage:\n          credentialsPath: \"\"\n```\n\nHowever, this line (https://github.com/temporalio/temporal/blob/main/common/archiver/gcloud/connector/client.go#L60) said that it is still OK to use application default service account. I can even use archival feature with this setup. But when I add search feature, it returns error\n\n## Steps to Reproduce the Problem\n\n  1. Setup temporal using helm\n  2. Enable archival feature with provider is GCS and using application default service account\n  3. Create search feature for a particular namespace\n\n## Specifications\n\n  - Version: 1.27.2\n  - Platform: GKE\n","closedAt":"2025-07-11T07:54:57Z","comments":[{"id":"IC_kwDODNqesM62Xans","author":{"login":"yycptt"},"authorAssociation":"MEMBER","body":"The `unable to find bootstrap container for the given service name` error should be fixed in the latest [v1.28.0](https://github.com/temporalio/temporal/releases/tag/v1.28.0) release by [this](https://github.com/temporalio/temporal/pull/7766) PR. \n\n> `\"Failed to add search attributes to store mysql8: Unable to save search attributes: something went wrong, please retry (6b50ceaa).\"` \n\nThis seems to be a different issue. Can you retry search for the error hash `6b50ceaa` in server logs and see what's the exact error?","createdAt":"2025-07-10T23:54:38Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/7981#issuecomment-3059591660","viewerDidAuthor":false},{"id":"IC_kwDODNqesM62dLc-","author":{"login":"HoangViet144"},"authorAssociation":"NONE","body":"I have tried v1.28.0 and it works now. I will close this issue","createdAt":"2025-07-11T07:54:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/7981#issuecomment-3061102398","viewerDidAuthor":false}],"createdAt":"2025-06-28T03:01:09Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":7981,"reactionGroups":[],"state":"CLOSED","title":"Unable to add search attribute when using gstorage archiver with application-default service account","updatedAt":"2025-07-11T07:54:57Z","url":"https://github.com/temporalio/temporal/issues/7981"}
