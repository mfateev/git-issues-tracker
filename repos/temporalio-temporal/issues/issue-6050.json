{"assignees":[{"id":"MDQ6VXNlcjIwNjgxMjQ=","login":"rodrigozhou","name":"Rodrigo Zhou","databaseId":0}],"author":{"id":"U_kgDOBl_p1g","is_bot":false,"login":"jeenadeepak","name":""},"body":"## Expected Behavior\r\nApplication should work normally after upgrading\r\n\r\n## Actual Behavior\r\nApplication is crashing after upgrading to version 1.24.0\r\n\r\n## Steps to Reproduce the Problem\r\n  1. Schema upgrade to version 1.24.0 from 1.23.1 is successfully done.\r\n  2. Application upgrade to version 1.23.1 from older version was successful .\r\n  3. \r\n\r\n## Specifications\r\n  - Version: 1.24.0 with mysql\r\n  - Platform:  AWS EKS version 1.30\r\n\r\nSharing **temporal-frontend** logs: \r\n\r\n<img width=\"1727\" alt=\"Screenshot 2024-06-02 at 5 54 10 PM\" src=\"https://github.com/temporalio/temporal/assets/106949078/06b2facd-888f-4ff4-b897-1773cd441d22\">\r\n\r\n```\r\n{\"level\":\"warn\",\"ts\":\"2024-06-02T12:40:35.201Z\",\"msg\":\"Unspecified task queue kind\",\"service\":\"frontend\",\"wf-task-queue-name\":\"KYC_WORKER_QUEUE\",\"wf-namespace\":\"qa_kyc_default\",\"logging-call-at\":\"workflow_handler.go:786\"}\r\n{\"level\":\"warn\",\"ts\":\"2024-06-02T12:40:36.459Z\",\"msg\":\"Unspecified task queue kind\",\"service\":\"frontend\",\"wf-task-queue-name\":\"KYC_WORKER_QUEUE\",\"wf-namespace\":\"dev_kyc_default\",\"logging-call-at\":\"workflow_handler.go:786\"}\r\n{\"level\":\"error\",\"ts\":\"2024-06-02T12:40:49.358Z\",\"msg\":\"Operation failed with an error.\",\"error\":\"ListWorkflowExecutions operation failed. Select failed: sql: Scan error on column index 18, name \\\"root_workflow_id\\\": converting NULL to string is unsupported\",\"logging-call-at\":\"visiblity_manager_metrics.go:264\",\"stacktrace\":\"go.temporal.io/server/common/log.(*zapLogger).Error\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/log/zap_logger.go:156\\ngo.temporal.io/server/common/persistence/visibility.(*visibilityManagerMetrics).updateErrorMetric\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/persistence/visibility/visiblity_manager_metrics.go:264\\ngo.temporal.io/server/common/persistence/visibility.(*visibilityManagerMetrics).ListWorkflowExecutions\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/persistence/visibility/visiblity_manager_metrics.go:209\\ngo.temporal.io/server/service/frontend.(*WorkflowHandler).ListWorkflowExecutions\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/workflow_handler.go:2295\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_ListWorkflowExecutions_Handler.func1\\n\\t/home/runner/go/pkg/mod/go.temporal.io/api@v1.32.1-0.20240425235436-fa9b9c7c3dc8/workflowservice/v1/service_grpc.pb.go:2161\\ngo.temporal.io/server/common/rpc/interceptor.(*RetryableInterceptor).Intercept.func1\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/retry.go:63\\ngo.temporal.io/server/common/backoff.ThrottleRetryContext\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/backoff/retry.go:143\\ngo.temporal.io/server/common/rpc/interceptor.(*RetryableInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/retry.go:67\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*CallerInfoInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/caller_info.go:81\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*SDKVersionInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/sdk_version.go:69\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*RateLimitInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/rate_limit.go:82\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceRateLimitInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_rate_limit.go:86\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*ConcurrentRequestLimitInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/concurrent_request_limit.go:108\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceValidatorInterceptor).StateValidationIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_validator.go:224\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*HealthInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/health.go:66\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*TelemetryInterceptor).UnaryIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/telemetry.go:193\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).handleRedirectAPIInvocation.func2\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:245\\ngo.temporal.io/server/service/frontend.(*NoopRedirectionPolicy).WithNamespaceRedirect\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/dc_redirection_policy.go:125\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).handleRedirectAPIInvocation\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:242\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:202\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/authorization.(*Interceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/authorization/interceptor.go:181\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.GrpcServerOptionsProvider.NewServerMetricsContextInjectorInterceptor.func2\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/metrics/grpc.go:66\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc.UnaryServerInterceptor.func1\\n\\t/home/runner/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc@v0.51.0/interceptor.go:315\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceLogInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_logger.go:85\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceValidatorInterceptor).NamespaceValidateIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_validator.go:135\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/utf8validator.(*Validator).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/utf8validator/validate.go:182\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.GrpcServerOptionsProvider.NewServiceErrorInterceptor.func1\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/grpc.go:178\\ngoogle.golang.org/grpc.NewServer.chainUnaryServerInterceptors.chainUnaryInterceptors.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1177\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_ListWorkflowExecutions_Handler\\n\\t/home/runner/go/pkg/mod/go.temporal.io/api@v1.32.1-0.20240425235436-fa9b9c7c3dc8/workflowservice/v1/service_grpc.pb.go:2163\\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1369\\ngoogle.golang.org/grpc.(*Server).handleStream\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1780\\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1019\"}\r\n{\"level\":\"warn\",\"ts\":\"2024-06-02T12:40:49.482Z\",\"msg\":\"Unspecified task queue kind\",\"service\":\"frontend\",\"wf-task-queue-name\":\"1@kyc-5f476d4bb8-25pkc:232dd755-1228-4dd1-972e-0ac24fba85ee\",\"wf-namespace\":\"stage_kyc_default\",\"logging-call-at\":\"workflow_handler.go:786\"}\r\n{\"level\":\"warn\",\"ts\":\"2024-06-02T12:40:49.494Z\",\"msg\":\"Unspecified task queue kind\",\"service\":\"frontend\",\"wf-task-queue-name\":\"1@kyc-ccddfdf7f-cnrsg:9178fd68-fbde-40fd-af2f-6bd53042b3e4\",\"wf-namespace\":\"qa_kyc_default\",\"logging-call-at\":\"workflow_handler.go:786\"}\r\n{\"level\":\"warn\",\"ts\":\"2024-06-02T12:40:49.531Z\",\"msg\":\"Unspecified task queue kind\",\"service\":\"frontend\",\"wf-task-queue-name\":\"1@kyc-65b69bcfb7-44prj:c94b957f-8672-42a6-b116-03e981b15fb6\",\"wf-namespace\":\"dev_kyc_default\",\"logging-call-at\":\"workflow_handler.go:786\"}\r\n{\"level\":\"error\",\"ts\":\"2024-06-02T12:40:49.571Z\",\"msg\":\"Operation failed with an error.\",\"error\":\"ListWorkflowExecutions operation failed. Select failed: sql: Scan error on column index 18, name \\\"root_workflow_id\\\": converting NULL to string is unsupported\",\"logging-call-at\":\"visiblity_manager_metrics.go:264\",\"stacktrace\":\"go.temporal.io/server/common/log.(*zapLogger).Error\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/log/zap_logger.go:156\\ngo.temporal.io/server/common/persistence/visibility.(*visibilityManagerMetrics).updateErrorMetric\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/persistence/visibility/visiblity_manager_metrics.go:264\\ngo.temporal.io/server/common/persistence/visibility.(*visibilityManagerMetrics).ListWorkflowExecutions\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/persistence/visibility/visiblity_manager_metrics.go:209\\ngo.temporal.io/server/service/frontend.(*WorkflowHandler).ListWorkflowExecutions\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/workflow_handler.go:2295\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_ListWorkflowExecutions_Handler.func1\\n\\t/home/runner/go/pkg/mod/go.temporal.io/api@v1.32.1-0.20240425235436-fa9b9c7c3dc8/workflowservice/v1/service_grpc.pb.go:2161\\ngo.temporal.io/server/common/rpc/interceptor.(*RetryableInterceptor).Intercept.func1\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/retry.go:63\\ngo.temporal.io/server/common/backoff.ThrottleRetryContext\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/backoff/retry.go:143\\ngo.temporal.io/server/common/rpc/interceptor.(*RetryableInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/retry.go:67\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*CallerInfoInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/caller_info.go:81\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*SDKVersionInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/sdk_version.go:69\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*RateLimitInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/rate_limit.go:82\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceRateLimitInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_rate_limit.go:86\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*ConcurrentRequestLimitInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/concurrent_request_limit.go:108\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceValidatorInterceptor).StateValidationIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_validator.go:224\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*HealthInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/health.go:66\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*TelemetryInterceptor).UnaryIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/telemetry.go:193\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).handleRedirectAPIInvocation.func2\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:245\\ngo.temporal.io/server/service/frontend.(*NoopRedirectionPolicy).WithNamespaceRedirect\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/dc_redirection_policy.go:125\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).handleRedirectAPIInvocation\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:242\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:202\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/authorization.(*Interceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/authorization/interceptor.go:181\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.GrpcServerOptionsProvider.NewServerMetricsContextInjectorInterceptor.func2\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/metrics/grpc.go:66\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc.UnaryServerInterceptor.func1\\n\\t/home/runner/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc@v0.51.0/interceptor.go:315\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceLogInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_logger.go:85\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceValidatorInterceptor).NamespaceValidateIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_validator.go:135\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/utf8validator.(*Validator).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/utf8validator/validate.go:182\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.GrpcServerOptionsProvider.NewServiceErrorInterceptor.func1\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/grpc.go:178\\ngoogle.golang.org/grpc.NewServer.chainUnaryServerInterceptors.chainUnaryInterceptors.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1177\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_ListWorkflowExecutions_Handler\\n\\t/home/runner/go/pkg/mod/go.temporal.io/api@v1.32.1-0.20240425235436-fa9b9c7c3dc8/workflowservice/v1/service_grpc.pb.go:2163\\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1369\\ngoogle.golang.org/grpc.(*Server).handleStream\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1780\\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1019\"}\r\n{\"level\":\"error\",\"ts\":\"2024-06-02T12:40:49.572Z\",\"msg\":\"service failures\",\"operation\":\"ListWorkflowExecutions\",\"wf-namespace\":\"dev_oms_default\",\"error\":\"ListWorkflowExecutions operation failed. Select failed: sql: Scan error on column index 18, name \\\"root_workflow_id\\\": converting NULL to string is unsupported\",\"logging-call-at\":\"telemetry.go:411\",\"stacktrace\":\"go.temporal.io/server/common/log.(*zapLogger).Error\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/log/zap_logger.go:156\\ngo.temporal.io/server/common/rpc/interceptor.(*TelemetryInterceptor).handleError\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/telemetry.go:411\\ngo.temporal.io/server/common/rpc/interceptor.(*TelemetryInterceptor).UnaryIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/telemetry.go:202\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).handleRedirectAPIInvocation.func2\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:245\\ngo.temporal.io/server/service/frontend.(*NoopRedirectionPolicy).WithNamespaceRedirect\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/dc_redirection_policy.go:125\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).handleRedirectAPIInvocation\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:242\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:202\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/authorization.(*Interceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/authorization/interceptor.go:181\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.GrpcServerOptionsProvider.NewServerMetricsContextInjectorInterceptor.func2\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/metrics/grpc.go:66\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc.UnaryServerInterceptor.func1\\n\\t/home/runner/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc@v0.51.0/interceptor.go:315\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceLogInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_logger.go:85\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceValidatorInterceptor).NamespaceValidateIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_validator.go:135\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/utf8validator.(*Validator).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/utf8validator/validate.go:182\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.GrpcServerOptionsProvider.NewServiceErrorInterceptor.func1\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/grpc.go:178\\ngoogle.golang.org/grpc.NewServer.chainUnaryServerInterceptors.chainUnaryInterceptors.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1177\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_ListWorkflowExecutions_Handler\\n\\t/home/runner/go/pkg/mod/go.temporal.io/api@v1.32.1-0.20240425235436-fa9b9c7c3dc8/workflowservice/v1/service_grpc.pb.go:2163\\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1369\\ngoogle.golang.org/grpc.(*Server).handleStream\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1780\\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1019\"}\r\n{\"level\":\"error\",\"ts\":\"2024-06-02T12:40:49.620Z\",\"msg\":\"Operation failed with an error.\",\"error\":\"ListWorkflowExecutions operation failed. Select failed: sql: Scan error on column index 18, name \\\"root_workflow_id\\\": converting NULL to string is unsupported\",\"logging-call-at\":\"visiblity_manager_metrics.go:264\",\"stacktrace\":\"go.temporal.io/server/common/log.(*zapLogger).Error\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/log/zap_logger.go:156\\ngo.temporal.io/server/common/persistence/visibility.(*visibilityManagerMetrics).updateErrorMetric\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/persistence/visibility/visiblity_manager_metrics.go:264\\ngo.temporal.io/server/common/persistence/visibility.(*visibilityManagerMetrics).ListWorkflowExecutions\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/persistence/visibility/visiblity_manager_metrics.go:209\\ngo.temporal.io/server/service/frontend.(*WorkflowHandler).ListWorkflowExecutions\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/workflow_handler.go:2295\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_ListWorkflowExecutions_Handler.func1\\n\\t/home/runner/go/pkg/mod/go.temporal.io/api@v1.32.1-0.20240425235436-fa9b9c7c3dc8/workflowservice/v1/service_grpc.pb.go:2161\\ngo.temporal.io/server/common/rpc/interceptor.(*RetryableInterceptor).Intercept.func1\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/retry.go:63\\ngo.temporal.io/server/common/backoff.ThrottleRetryContext\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/backoff/retry.go:143\\ngo.temporal.io/server/common/rpc/interceptor.(*RetryableInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/retry.go:67\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*CallerInfoInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/caller_info.go:81\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*SDKVersionInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/sdk_version.go:69\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*RateLimitInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/rate_limit.go:82\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceRateLimitInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_rate_limit.go:86\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*ConcurrentRequestLimitInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/concurrent_request_limit.go:108\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceValidatorInterceptor).StateValidationIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_validator.go:224\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*HealthInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/health.go:66\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*TelemetryInterceptor).UnaryIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/telemetry.go:193\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).handleRedirectAPIInvocation.func2\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:245\\ngo.temporal.io/server/service/frontend.(*NoopRedirectionPolicy).WithNamespaceRedirect\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/dc_redirection_policy.go:125\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).handleRedirectAPIInvocation\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:242\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:202\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/authorization.(*Interceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/authorization/interceptor.go:181\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.GrpcServerOptionsProvider.NewServerMetricsContextInjectorInterceptor.func2\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/metrics/grpc.go:66\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc.UnaryServerInterceptor.func1\\n\\t/home/runner/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc@v0.51.0/interceptor.go:315\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceLogInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_logger.go:85\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceValidatorInterceptor).NamespaceValidateIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_validator.go:135\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/utf8validator.(*Validator).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/utf8validator/validate.go:182\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.GrpcServerOptionsProvider.NewServiceErrorInterceptor.func1\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/grpc.go:178\\ngoogle.golang.org/grpc.NewServer.chainUnaryServerInterceptors.chainUnaryInterceptors.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1177\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_ListWorkflowExecutions_Handler\\n\\t/home/runner/go/pkg/mod/go.temporal.io/api@v1.32.1-0.20240425235436-fa9b9c7c3dc8/workflowservice/v1/service_grpc.pb.go:2163\\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1369\\ngoogle.golang.org/grpc.(*Server).handleStream\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1780\\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1019\"}\r\n{\"level\":\"error\",\"ts\":\"2024-06-02T12:40:51.663Z\",\"msg\":\"Operation failed with an error.\",\"error\":\"ListWorkflowExecutions operation failed. Select failed: sql: Scan error on column index 18, name \\\"root_workflow_id\\\": converting NULL to string is unsupported\",\"logging-call-at\":\"visiblity_manager_metrics.go:264\",\"stacktrace\":\"go.temporal.io/server/common/log.(*zapLogger).Error\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/log/zap_logger.go:156\\ngo.temporal.io/server/common/persistence/visibility.(*visibilityManagerMetrics).updateErrorMetric\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/persistence/visibility/visiblity_manager_metrics.go:264\\ngo.temporal.io/server/common/persistence/visibility.(*visibilityManagerMetrics).ListWorkflowExecutions\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/persistence/visibility/visiblity_manager_metrics.go:209\\ngo.temporal.io/server/service/frontend.(*WorkflowHandler).ListWorkflowExecutions\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/workflow_handler.go:2295\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_ListWorkflowExecutions_Handler.func1\\n\\t/home/runner/go/pkg/mod/go.temporal.io/api@v1.32.1-0.20240425235436-fa9b9c7c3dc8/workflowservice/v1/service_grpc.pb.go:2161\\ngo.temporal.io/server/common/rpc/interceptor.(*RetryableInterceptor).Intercept.func1\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/retry.go:63\\ngo.temporal.io/server/common/backoff.ThrottleRetryContext\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/backoff/retry.go:143\\ngo.temporal.io/server/common/rpc/interceptor.(*RetryableInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/retry.go:67\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*CallerInfoInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/caller_info.go:81\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*SDKVersionInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/sdk_version.go:69\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*RateLimitInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/rate_limit.go:82\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceRateLimitInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_rate_limit.go:86\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*ConcurrentRequestLimitInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/concurrent_request_limit.go:108\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceValidatorInterceptor).StateValidationIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_validator.go:224\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*HealthInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/health.go:66\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*TelemetryInterceptor).UnaryIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/telemetry.go:193\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).handleRedirectAPIInvocation.func2\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:245\\ngo.temporal.io/server/service/frontend.(*NoopRedirectionPolicy).WithNamespaceRedirect\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/dc_redirection_policy.go:125\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).handleRedirectAPIInvocation\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:242\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:202\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/authorization.(*Interceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/authorization/interceptor.go:181\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.GrpcServerOptionsProvider.NewServerMetricsContextInjectorInterceptor.func2\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/metrics/grpc.go:66\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc.UnaryServerInterceptor.func1\\n\\t/home/runner/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc@v0.51.0/interceptor.go:315\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceLogInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_logger.go:85\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceValidatorInterceptor).NamespaceValidateIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_validator.go:135\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/utf8validator.(*Validator).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/utf8validator/validate.go:182\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.GrpcServerOptionsProvider.NewServiceErrorInterceptor.func1\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/grpc.go:178\\ngoogle.golang.org/grpc.NewServer.chainUnaryServerInterceptors.chainUnaryInterceptors.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1177\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_ListWorkflowExecutions_Handler\\n\\t/home/runner/go/pkg/mod/go.temporal.io/api@v1.32.1-0.20240425235436-fa9b9c7c3dc8/workflowservice/v1/service_grpc.pb.go:2163\\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1369\\ngoogle.golang.org/grpc.(*Server).handleStream\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1780\\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1019\"}\r\n{\"level\":\"error\",\"ts\":\"2024-06-02T12:40:51.663Z\",\"msg\":\"service failures\",\"operation\":\"ListWorkflowExecutions\",\"wf-namespace\":\"dev_oms_default\",\"error\":\"ListWorkflowExecutions operation failed. Select failed: sql: Scan error on column index 18, name \\\"root_workflow_id\\\": converting NULL to string is unsupported\",\"logging-call-at\":\"telemetry.go:411\",\"stacktrace\":\"go.temporal.io/server/common/log.(*zapLogger).Error\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/log/zap_logger.go:156\\ngo.temporal.io/server/common/rpc/interceptor.(*TelemetryInterceptor).handleError\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/telemetry.go:411\\ngo.temporal.io/server/common/rpc/interceptor.(*TelemetryInterceptor).UnaryIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/telemetry.go:202\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).handleRedirectAPIInvocation.func2\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:245\\ngo.temporal.io/server/service/frontend.(*NoopRedirectionPolicy).WithNamespaceRedirect\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/dc_redirection_policy.go:125\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).handleRedirectAPIInvocation\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:242\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/service/frontend/redirection_interceptor.go:202\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/authorization.(*Interceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/authorization/interceptor.go:181\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.GrpcServerOptionsProvider.NewServerMetricsContextInjectorInterceptor.func2\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/metrics/grpc.go:66\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc.UnaryServerInterceptor.func1\\n\\t/home/runner/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc@v0.51.0/interceptor.go:315\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceLogInterceptor).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_logger.go:85\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceValidatorInterceptor).NamespaceValidateIntercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/interceptor/namespace_validator.go:135\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/common/utf8validator.(*Validator).Intercept\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/utf8validator/validate.go:182\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1186\\ngo.temporal.io/server/service/frontend.GrpcServerOptionsProvider.NewServiceErrorInterceptor.func1\\n\\t/home/runner/work/docker-builds/docker-builds/temporal/common/rpc/grpc.go:178\\ngoogle.golang.org/grpc.NewServer.chainUnaryServerInterceptors.chainUnaryInterceptors.func1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1177\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_ListWorkflowExecutions_Handler\\n\\t/home/runner/go/pkg/mod/go.temporal.io/api@v1.32.1-0.20240425235436-fa9b9c7c3dc8/workflowservice/v1/service_grpc.pb.go:2163\\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1369\\ngoogle.golang.org/grpc.(*Server).handleStream\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1780\\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1\\n\\t/home/runner/go/pkg/mod/google.golang.org/grpc@v1.63.2/server.go:1019\"}\r\n{\"level\":\"warn\",\"ts\":\"2024-06-02T12:41:29.232Z\",\"msg\":\"Unspecified task queue kind\",\"service\":\"frontend\",\"wf-task-queue-name\":\"1@kyc-65b69bcfb7-44prj:c94b957f-8672-42a6-b116-03e981b15fb6\",\"wf-namespace\":\"dev_kyc_default\",\"logging-call-at\":\"workflow_handler.go:786\"}\r\n```","closedAt":"2024-06-06T00:11:11Z","comments":[{"id":"IC_kwDODNqesM5_2XH9","author":{"login":"exslim"},"authorAssociation":"NONE","body":"Bump. We experience the same bug after upgrade to 1.24.0 on postgresql. Any ideas hot to quickly fix this without waiting for new release?","createdAt":"2024-06-03T11:29:14Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6050#issuecomment-2144956925","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5_4BRb","author":{"login":"bllfr0g"},"authorAssociation":"NONE","body":"The release notes did not say that there is a schema update required for 1.24.0. Is there?","createdAt":"2024-06-03T14:45:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6050#issuecomment-2145391707","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5_5Hg8","author":{"login":"CarlosBorroto"},"authorAssociation":"NONE","body":"@bllfr0g there is an schema update, but we applied it and we are still experiencing the same issue.\r\n\r\n```bash\r\n❯ git status\r\nHEAD detached at v1.24.0\r\nnothing to commit, working tree clean\r\n\r\n❯ SQL_DATABASE=temporal ./temporal-sql-tool update -schema-dir schema/postgresql/v12/temporal/versioned             \r\n2024-06-03T09:31:30.000-0400    INFO    UpdateSchemeTask started        {\"config\": {\"DBName\":\"\",\"TargetVersion\":\"\",\"SchemaDir\":\"schema/postgresql/v12/temporal/versioned\",\"IsDryRun\":false}, \"logging-call-at\": \"updatetask.go:97\"}\r\n2024-06-03T09:31:30.151-0400    DEBUG   Schema Dirs: [v1.12]    {\"logging-call-at\": \"updatetask.go:195\"}\r\n2024-06-03T09:31:30.152-0400    INFO    Processing schema file: schema/postgresql/v12/temporal/versioned/v1.12/nexus_incoming_services.sql      {\"logging-call-at\": \"updatetask.go:241\"}\r\n2024-06-03T09:31:30.152-0400    DEBUG   running 1 updates for current version 1.11      {\"logging-call-at\": \"updatetask.go:131\"}\r\n2024-06-03T09:31:30.152-0400    DEBUG   ---- Executing updates for version 1.12 ----    {\"logging-call-at\": \"updatetask.go:150\"}\r\n2024-06-03T09:31:30.152-0400    DEBUG   CREATE TABLE nexus_incoming_services ( service_id BYTEA NOT NULL, data BYTEA NOT NULL, data_encoding VARCHAR(16) NOT NULL, version BIGINT NOT NULL, PRIMARY KEY (service_id) );       {\"logging-call-at\": \"updatetask.go:152\"}\r\n2024-06-03T09:31:30.475-0400    DEBUG   CREATE TABLE nexus_incoming_services_partition_status ( id INT NOT NULL PRIMARY KEY DEFAULT 0, version BIGINT NOT NULL, CONSTRAINT only_one_row CHECK (id = 0) );    {\"logging-call-at\": \"updatetask.go:152\"}\r\n2024-06-03T09:31:30.533-0400    DEBUG   ---- Done ----  {\"logging-call-at\": \"updatetask.go:169\"}\r\n2024-06-03T09:31:30.863-0400    DEBUG   Schema updated from 1.11 to 1.12        {\"logging-call-at\": \"updatetask.go:142\"}\r\n2024-06-03T09:31:30.863-0400    INFO    UpdateSchemeTask done   {\"logging-call-at\": \"updatetask.go:120\"}\r\n\r\n❯ SQL_DATABASE=temporal_visibility ./temporal-sql-tool update -schema-dir schema/postgresql/v12/visibility/versioned\r\n2024-06-03T09:31:39.527-0400    INFO    UpdateSchemeTask started        {\"config\": {\"DBName\":\"\",\"TargetVersion\":\"\",\"SchemaDir\":\"schema/postgresql/v12/visibility/versioned\",\"IsDryRun\":false}, \"logging-call-at\": \"updatetask.go:97\"}\r\n2024-06-03T09:31:39.685-0400    DEBUG   Schema Dirs: [v1.5]     {\"logging-call-at\": \"updatetask.go:195\"}\r\n2024-06-03T09:31:39.688-0400    INFO    Processing schema file: schema/postgresql/v12/visibility/versioned/v1.5/add_root_workflow_info.sql      {\"logging-call-at\": \"updatetask.go:241\"}\r\n2024-06-03T09:31:39.688-0400    DEBUG   running 1 updates for current version 1.4       {\"logging-call-at\": \"updatetask.go:131\"}\r\n2024-06-03T09:31:39.688-0400    DEBUG   ---- Executing updates for version 1.5 ----     {\"logging-call-at\": \"updatetask.go:150\"}\r\n2024-06-03T09:31:39.688-0400    DEBUG   ALTER TABLE executions_visibility ADD COLUMN root_workflow_id VARCHAR(255) NULL;        {\"logging-call-at\": \"updatetask.go:152\"}\r\n2024-06-03T09:31:39.792-0400    DEBUG   ALTER TABLE executions_visibility ADD COLUMN root_run_id VARCHAR(255) NULL;     {\"logging-call-at\": \"updatetask.go:152\"}\r\n2024-06-03T09:31:39.864-0400    DEBUG   CREATE INDEX by_root_workflow_id ON executions_visibility (namespace_id, root_workflow_id, (COALESCE(close_time, '9999-12-31 23:59:59')) DESC, start_time DESC, run_id);      {\"logging-call-at\": \"updatetask.go:152\"}\r\n2024-06-03T09:31:43.395-0400    DEBUG   CREATE INDEX by_root_run_id ON executions_visibility (namespace_id, root_run_id, (COALESCE(close_time, '9999-12-31 23:59:59')) DESC, start_time DESC, run_id);  {\"logging-call-at\": \"updatetask.go:152\"}\r\n2024-06-03T09:31:44.441-0400    DEBUG   ---- Done ----  {\"logging-call-at\": \"updatetask.go:169\"}\r\n2024-06-03T09:31:44.755-0400    DEBUG   Schema updated from 1.4 to 1.5  {\"logging-call-at\": \"updatetask.go:142\"}\r\n2024-06-03T09:31:44.755-0400    INFO    UpdateSchemeTask done   {\"logging-call-at\": \"updatetask.go:120\"}","createdAt":"2024-06-03T16:45:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6050#issuecomment-2145679420","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5_5Ra0","author":{"login":"CarlosBorroto"},"authorAssociation":"NONE","body":"We also upgraded to the latest temporal-ui image we could find in [docker hub](https://hub.docker.com/r/temporalio/ui/tags) (2.27.2). We still see the same error. We were previously using what the helm chart is using, [2.25.0](https://github.com/temporalio/helm-charts/blob/temporal-0.39.0/charts/temporal/values.yaml#L314).","createdAt":"2024-06-03T17:07:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6050#issuecomment-2145719988","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6AAN4j","author":{"login":"CarlosBorroto"},"authorAssociation":"NONE","body":"We noticed after enough new workflows, the error goes away. It seems the latest schema change introduced a new column `root_workflow_id ` and defaulted it to null. However, the code is not ready to handle the null values. Once you have enough entries with a non-null value in the database, the bug \"goes away\". The bug reappears if you filter enough that old entries with the null show up in your results first page.\r\n\r\nYou could clean up old entries in your namespace, or wait for them to expire or leave the first page of your queries when browsing. Still, hoping this gets fixed before upgrading our production environments.","createdAt":"2024-06-04T13:28:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6050#issuecomment-2147540515","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6AAuBv","author":{"login":"bllfr0g"},"authorAssociation":"NONE","body":"I am still shocked that there is a schema upgrade for 1.24.0 but it was not called out in the release notes.","createdAt":"2024-06-04T14:23:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"CONFUSED","users":{"totalCount":1}}],"url":"https://github.com/temporalio/temporal/issues/6050#issuecomment-2147672175","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6AEDIu","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"Thanks for reporting. Sorry for the miss. We will take this as high priority task.","createdAt":"2024-06-04T22:54:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6050#issuecomment-2148545070","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6AEJwo","author":{"login":"alexshtin"},"authorAssociation":"CONTRIBUTOR","body":"I updated release notes. Thanks for reporting.","createdAt":"2024-06-04T23:26:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6050#issuecomment-2148572200","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6AN_kW","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"Should be fixed now with v1.24.1. You will need to upgrade schema for that.","createdAt":"2024-06-06T00:11:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6050#issuecomment-2151151894","viewerDidAuthor":false}],"createdAt":"2024-06-02T12:48:19Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":6050,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":3}},{"content":"EYES","users":{"totalCount":1}}],"state":"CLOSED","title":"Temporal 1.24.0 <- 1.23.1 upgrade error","updatedAt":"2024-06-06T00:11:11Z","url":"https://github.com/temporalio/temporal/issues/6050"}
