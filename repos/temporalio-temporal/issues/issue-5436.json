{"assignees":[],"author":{"id":"MDQ6VXNlcjU5NDAyMjQ=","is_bot":false,"login":"granescb","name":"Sergey Anishenko"},"body":"## Expected Behavior\r\n\r\n200 http status\r\n## Actual Behavior\r\nhttp 503 sometime\r\n![image](https://github.com/temporalio/temporal/assets/5940224/83778c75-a248-44cc-97fc-b6fcce5004dd)\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Open \"api/v1/namespaces/<your_namespace>/search-attributes?\" in browser\r\n  2. Open browser console\r\n  3. Update page 20-30 times to get some errors \r\n\r\n\r\n## Specifications\r\n\r\n  - Version: 1.22.4\r\n\r\nThe error from the component **temporal-frontend**:\r\n`{\"level\":\"error\",\"ts\":\"2024-02-19T13:17:16.265Z\",\"msg\":\"service failures\",\"operation\":\"OperatorListSearchAttributes\",\"wf-namespace\":\"les\",\"error\":\"Unable to get namespace info with error: les\",\"logging-call-at\":\"telemetry.go:341\",\"stacktrace\":\"go.temporal.io/server/common/log.(*zapLogger).Error\\n\\t/home/builder/temporal/common/log/zap_logger.go:156\\ngo.temporal.io/server/common/rpc/interceptor.(*TelemetryInterceptor).handleError\\n\\t/home/builder/temporal/common/rpc/interceptor/telemetry.go:341\\ngo.temporal.io/server/common/rpc/interceptor.(*TelemetryInterceptor).UnaryIntercept\\n\\t/home/builder/temporal/common/rpc/interceptor/telemetry.go:174\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.58.2/server.go:1195\\ngo.temporal.io/server/service/frontend.(*RedirectionInterceptor).Intercept\\n\\t/home/builder/temporal/service/frontend/redirection_interceptor.go:180\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.58.2/server.go:1195\\ngo.temporal.io/server/common/authorization.(*interceptor).Interceptor\\n\\t/home/builder/temporal/common/authorization/interceptor.go:158\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.58.2/server.go:1195\\ngo.temporal.io/server/common/metrics.NewServerMetricsContextInjectorInterceptor.func1\\n\\t/home/builder/temporal/common/metrics/grpc.go:66\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.58.2/server.go:1195\\ngo.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc.UnaryServerInterceptor.func1\\n\\t/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc@v0.42.0/interceptor.go:344\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.58.2/server.go:1195\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceLogInterceptor).Intercept\\n\\t/home/builder/temporal/common/rpc/interceptor/namespace_logger.go:84\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.58.2/server.go:1195\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceValidatorInterceptor).NamespaceValidateIntercept\\n\\t/home/builder/temporal/common/rpc/interceptor/namespace_validator.go:111\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.58.2/server.go:1195\\ngo.temporal.io/server/common/rpc.ServiceErrorInterceptor\\n\\t/home/builder/temporal/common/rpc/grpc.go:145\\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.58.2/server.go:1186\\ngo.temporal.io/api/operatorservice/v1._OperatorService_ListSearchAttributes_Handler\\n\\t/go/pkg/mod/go.temporal.io/api@v1.24.1-0.20231003165936-bb03061759c8/operatorservice/v1/service.pb.go:302\\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.58.2/server.go:1376\\ngoogle.golang.org/grpc.(*Server).handleStream\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.58.2/server.go:1753\\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.58.2/server.go:998\"}`\r\n","closedAt":null,"comments":[{"id":"IC_kwDODNqesM50YLMN","author":{"login":"granescb"},"authorAssociation":"CONTRIBUTOR","body":"Probably, the error is rising here: https://github.com/temporalio/temporal/blob/b670c79114d2dacd07bb53156281abe10e96473e/service/frontend/operator_handler.go#L518-L526\r\nAnd there is no information about which exactly error happens in the logs, only namespace name.","createdAt":"2024-02-19T13:50:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5436#issuecomment-1952494349","viewerDidAuthor":false},{"id":"IC_kwDODNqesM51lYJI","author":{"login":"granescb"},"authorAssociation":"CONTRIBUTOR","body":"Fixed typo here https://github.com/temporalio/temporal/pull/5473","createdAt":"2024-03-01T08:25:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5436#issuecomment-1972732488","viewerDidAuthor":false},{"id":"IC_kwDODNqesM7J83mU","author":{"login":"Mahee777"},"authorAssociation":"NONE","body":"@granescb this issues still there ?\n","createdAt":"2025-10-10T03:39:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5436#issuecomment-3388176788","viewerDidAuthor":false}],"createdAt":"2024-02-19T13:27:51Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":5436,"reactionGroups":[],"state":"OPEN","title":"503 in api/v1/namespaces/<your_namespace>/search-attributes? sometime","updatedAt":"2025-10-10T03:39:22Z","url":"https://github.com/temporalio/temporal/issues/5436"}
