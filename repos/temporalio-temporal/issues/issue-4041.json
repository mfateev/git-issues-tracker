{"assignees":[],"author":{"id":"MDQ6VXNlcjkzNjQ5MzE=","is_bot":false,"login":"mlcdf","name":"Maxime Le Conte des Floris"},"body":"## Expected Behavior\r\n\r\nHello :)\r\n\r\nSending trace to a jaeger instance by specifying [`OTEL*` env variables](https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/sdk-environment-variables.md) as it's said in [the docs](https://github.com/temporalio/temporal/blob/7b6ce254525b4ed7776e8ba6bf701da493eea1de/develop/docs/tracing.md).\r\n\r\n```\r\n$ docker inspect temporal-server | grep OTEL\r\n                \"OTEL_EXPORTER_OTLP_INSECURE=true\",\r\n                \"OTEL_LOG_LEVEL=debug\",\r\n                \"OTEL_TRACES_EXPORTER=otlp\",\r\n                \"OTEL_EXPORTER_OTLP_TRACES_PROTOCOL=grpc\",\r\n                \"OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=jaeger:4317\",\r\n                \"OTEL_EXPORTER_OTLP_TRACES_INSECURE=true\",\r\n```\r\n\r\n## Actual Behavior\r\n\r\n`OTEL_*` env variables aren't taken into account. \r\n\r\nThe only way I managed to make this work is to use this config: \r\n\r\n```\r\notel:\r\n  exporters:\r\n    - kind:\r\n        signal: traces\r\n        model: otlp\r\n        protocol: grpc\r\n      spec:\r\n        connection:\r\n          insecure: true\r\n          endpoint: jaeger:4317\r\n```\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n1. Start jaeger using https://github.com/temporalio/temporal/blob/master/develop/docker-compose/docker-compose.jaeger.yml\r\n2. Start a temporal-server with the following env variable\r\n```\r\n            OTEL_EXPORTER_OTLP_TRACES_ENDPOINT: \"jaeger:4317\"\r\n            OTEL_EXPORTER_OTLP_TRACES_PROTOCOL: grpc\r\n            OTEL_EXPORTER_OTLP_TRACES_INSECURE: \"true\"\r\n            OTEL_EXPORTER_OTLP_INSECURE: \"true\"\r\n            OTEL_EXPORTER_OTLP_SPAN_INSECURE: \"true\"\r\n```\r\n3. Open the jaeger UI: there is now trace\r\n\r\n## Specifications\r\n\r\n  - Version: Temporal 1.18.1\r\n  - Platform: Docker (running on Debian 10)\r\n","closedAt":"2024-02-27T17:08:08Z","comments":[{"id":"IC_kwDODNqesM50r52t","author":{"login":"stephanos"},"authorAssociation":"MEMBER","body":"@mlcdf I'm still learning about OTEL. Would an environment variable _override_ an existing config value? Does OTEL assume there is exactly one exporter per \"model\" (otlp in this example)?","createdAt":"2024-02-21T18:38:19Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4041#issuecomment-1957666221","viewerDidAuthor":false},{"id":"IC_kwDODNqesM51VVVF","author":{"login":"mlcdf"},"authorAssociation":"NONE","body":"I apologies for the late reply @stephanos, and thank you for the fix!","createdAt":"2024-02-28T09:03:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4041#issuecomment-1968526661","viewerDidAuthor":false},{"id":"IC_kwDODNqesM514o-D","author":{"login":"stephanos"},"authorAssociation":"MEMBER","body":"@mlcdf let me know if this doesn't work for you in any way üëç ","createdAt":"2024-03-05T01:33:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/temporalio/temporal/issues/4041#issuecomment-1977782147","viewerDidAuthor":false}],"createdAt":"2023-03-10T13:38:57Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"},{"id":"MDU6TGFiZWwyNTQ2NTE2MDA0","name":"metrics","description":"","color":"e5f97f"},{"id":"LA_kwDODNqesM8AAAABOQLBBg","name":"otel","description":"","color":"18FC02"}],"milestone":null,"number":4041,"reactionGroups":[],"state":"CLOSED","title":"OTEL env var not taken into account","updatedAt":"2024-03-05T01:33:57Z","url":"https://github.com/temporalio/temporal/issues/4041"}
