{"assignees":[{"id":"MDQ6VXNlcjYzNTAzMDE=","login":"jbreiding","name":"Jeremy","databaseId":0}],"author":{"id":"MDQ6VXNlcjg0NDExMDE0","is_bot":false,"login":"yiminc","name":"Yimin Chen"},"body":"Currently, services errors are reported as separate metrics one per error type, for example [here](https://github.com/temporalio/temporal/blob/f7ed3949134883ba7633e72933bf9be835f78a34/common/metrics/defs.go#L2234-L2250). Same for persistence_errors. \r\nThis makes it very hard to have a metrics query for dashboard to show all service_errors. \r\nShould consider having one metric for all service_errors with error type tag for each error type.","closedAt":"2022-04-19T23:40:39Z","comments":[{"id":"IC_kwDODNqesM5BeBEl","author":{"login":"jbreiding"},"authorAssociation":"CONTRIBUTOR","body":"@yiminc \r\nThis is the metric where the conversation ended with a new metric and deprecation plan for the old metric?","createdAt":"2022-04-13T19:06:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2628#issuecomment-1098387749","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5BeSaC","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"Yes, we want to create a new metrics, say service_errors_with_type, and emit it with error_type tag. In 1.17, we will keep the old metrics (those service_errors_xxx), but in release note of 1.17 we would warn that those metrics will be gone and in 1.18 we would remove those old metrics. But we will keep service_errors as separate metrics untouched as it is used to calculate SLO etc, i'm not fully clear how exactly it is used.","createdAt":"2022-04-13T20:29:19Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/temporal/issues/2628#issuecomment-1098458754","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5BeeOx","author":{"login":"jbreiding"},"authorAssociation":"CONTRIBUTOR","body":"> Yes, we want to create a new metrics, say service_errors_with_type, and emit it with error_type tag. In 1.17, we will keep the old metrics (those service_errors_xxx), but in release note of 1.17 we would warn that those metrics will be gone and in 1.18 we would remove those old metrics. But we will keep service_errors as separate metrics untouched as it is used to calculate SLO etc, i'm not fully clear how exactly it is used.\r\n\r\nI can figure out a deprecation path once the new metric is in place.","createdAt":"2022-04-13T21:31:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/temporal/issues/2628#issuecomment-1098507185","viewerDidAuthor":false}],"createdAt":"2022-03-22T00:30:53Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":2628,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"consider report all service_errors as one metric with error type as tag","updatedAt":"2022-04-19T23:40:39Z","url":"https://github.com/temporalio/temporal/issues/2628"}
