{"assignees":[],"author":{"id":"MDQ6VXNlcjE0NjM2MjI=","is_bot":false,"login":"mfateev","name":"Maxim Fateev"},"body":"When running branch sample I consistently get decision task completion failure due to \"requested workflow history does not exist\":\r\n\r\n```\r\nINFO    internal/internal_worker.go:1019        Started Worker  {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\"}\r\n2020-03-27T12:16:17.526-0700    INFO    branch/branch_workflow.go:18    SampleBranchWorkflow begin      {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\"}\r\n2020-03-27T12:16:17.526-0700    DEBUG   internal/internal_event_handlers.go:463 ExecuteActivity {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"ActivityID\": \"0\", \"ActivityType\": \"SampleActivity\"}\r\n2020-03-27T12:16:17.526-0700    DEBUG   internal/internal_event_handlers.go:463 ExecuteActivity {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"ActivityID\": \"1\", \"ActivityType\": \"SampleActivity\"}\r\n2020-03-27T12:16:17.527-0700    DEBUG   internal/internal_event_handlers.go:463 ExecuteActivity {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"ActivityID\": \"2\", \"ActivityType\": \"SampleActivity\"}\r\n2020-03-27T12:16:17.527-0700    DEBUG   internal/internal_event_handlers.go:463 ExecuteActivity {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"ActivityID\": \"3\", \"ActivityType\": \"SampleActivity\"}\r\n2020-03-27T12:16:17.527-0700    DEBUG   internal/internal_event_handlers.go:463 ExecuteActivity {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"ActivityID\": \"4\", \"ActivityType\": \"SampleActivity\"}\r\n2020-03-27T12:16:17.527-0700    DEBUG   internal/internal_event_handlers.go:463 ExecuteActivity {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"ActivityID\": \"5\", \"ActivityType\": \"SampleActivity\"}\r\n2020-03-27T12:16:17.527-0700    DEBUG   internal/internal_event_handlers.go:463 ExecuteActivity {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"ActivityID\": \"6\", \"ActivityType\": \"SampleActivity\"}\r\n2020-03-27T12:16:17.527-0700    DEBUG   internal/internal_event_handlers.go:463 ExecuteActivity {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"ActivityID\": \"7\", \"ActivityType\": \"SampleActivity\"}\r\n2020-03-27T12:16:17.527-0700    DEBUG   internal/internal_event_handlers.go:463 ExecuteActivity {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"ActivityID\": \"8\", \"ActivityType\": \"SampleActivity\"}\r\n2020-03-27T12:16:17.527-0700    DEBUG   internal/internal_event_handlers.go:463 ExecuteActivity {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"ActivityID\": \"9\", \"ActivityType\": \"SampleActivity\"}\r\n2020-03-27T12:16:17.527-0700    INFO    branch/branch_workflow.go:33    Activities started      {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\"}\r\nRun sampleActivity with input branch 6 of 10. \r\nRun sampleActivity with input branch 2 of 10. \r\nRun sampleActivity with input branch 8 of 10. \r\nRun sampleActivity with input branch 9 of 10. \r\nRun sampleActivity with input branch 7 of 10. \r\nRun sampleActivity with input branch 1 of 10. \r\nRun sampleActivity with input branch 3 of 10. \r\nRun sampleActivity with input branch 10 of 10. \r\n2020-03-27T12:16:17.754-0700    WARN    internal/internal_task_pollers.go:332   Failed to process decision task.        {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"9844283c-6190-4bd4-9a36-2237db768afb\", \"error\": \"requested workflow history does not exist\"}\r\ngo.temporal.io/temporal/internal.(*workflowTaskPoller).RespondTaskCompletedWithMetrics\r\n        /Users/maxim/go/pkg/mod/go.temporal.io/temporal@v0.20.0-alpha/internal/internal_task_pollers.go:332\r\ngo.temporal.io/temporal/internal.(*workflowTaskPoller).processWorkflowTask\r\n        /Users/maxim/go/pkg/mod/go.temporal.io/temporal@v0.20.0-alpha/internal/internal_task_pollers.go:299\r\ngo.temporal.io/temporal/internal.(*workflowTaskPoller).ProcessTask\r\n        /Users/maxim/go/pkg/mod/go.temporal.io/temporal@v0.20.0-alpha/internal/internal_task_pollers.go:248\r\ngo.temporal.io/temporal/internal.(*baseWorker).processTask\r\n        /Users/maxim/go/pkg/mod/go.temporal.io/temporal@v0.20.0-alpha/internal/internal_worker_base.go:303\r\nRun sampleActivity with input branch 4 of 10. \r\nRun sampleActivity with input branch 5 of 10. \r\n2020-03-27T12:16:17.835-0700    DEBUG   internal/internal_task_handlers.go:1117 Cached state staled, new task has unexpected events     {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"CachedPreviousStartedEventID\": 26, \"TaskFirstEventID\": 1, \"TaskStartedEventID\": 42, \"TaskPreviousStartedEventID\": 26}\r\n2020-03-27T12:16:17.835-0700    INFO    branch/branch_workflow.go:39    Activity returned with result   {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"resutl\": \"Result_branch 1 of 10.\"}\r\n2020-03-27T12:16:17.835-0700    INFO    branch/branch_workflow.go:39    Activity returned with result   {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"resutl\": \"Result_branch 2 of 10.\"}\r\n2020-03-27T12:16:17.835-0700    INFO    branch/branch_workflow.go:39    Activity returned with result   {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"resutl\": \"Result_branch 3 of 10.\"}\r\n2020-03-27T12:16:17.835-0700    INFO    branch/branch_workflow.go:39    Activity returned with result   {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"resutl\": \"Result_branch 4 of 10.\"}\r\n2020-03-27T12:16:17.835-0700    INFO    branch/branch_workflow.go:39    Activity returned with result   {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"resutl\": \"Result_branch 5 of 10.\"}\r\n2020-03-27T12:16:17.835-0700    INFO    branch/branch_workflow.go:39    Activity returned with result   {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"resutl\": \"Result_branch 6 of 10.\"}\r\n2020-03-27T12:16:17.835-0700    INFO    branch/branch_workflow.go:39    Activity returned with result   {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"resutl\": \"Result_branch 7 of 10.\"}\r\n2020-03-27T12:16:17.835-0700    INFO    branch/branch_workflow.go:39    Activity returned with result   {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"resutl\": \"Result_branch 8 of 10.\"}\r\n2020-03-27T12:16:17.835-0700    INFO    branch/branch_workflow.go:39    Activity returned with result   {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"resutl\": \"Result_branch 9 of 10.\"}\r\n2020-03-27T12:16:17.835-0700    INFO    branch/branch_workflow.go:39    Activity returned with result   {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\", \"resutl\": \"Result_branch 10 of 10.\"}\r\n2020-03-27T12:16:17.835-0700    INFO    branch/branch_workflow.go:46    SampleBranchWorkflow end        {\"Domain\": \"default\", \"TaskList\": \"branch-task-list\", \"WorkerID\": \"52276@maxpro.local@\", \"WorkflowType\": \"SampleBranchWorkflow\", \"WorkflowID\": \"0eb3cf09-dddf-454f-804a-19788667a73f\", \"RunID\": \"53fb0d72-8821-4106-a1f3-cf921e7ac012\"}\r\n```\r\nI'm using Pulling temporal (temporalio/auto-setup:latest)...","closedAt":"2020-04-01T19:31:59Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwNzQ0Nzg1Nw==","author":{"login":"mfateev"},"authorAssociation":"MEMBER","body":"Fixed through https://github.com/temporalio/temporal/pull/262","createdAt":"2020-04-01T19:31:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/256#issuecomment-607447857","viewerDidAuthor":true}],"createdAt":"2020-03-27T19:20:06Z","labels":[],"milestone":null,"number":256,"reactionGroups":[],"state":"CLOSED","title":"Error: \"requested workflow history does not exist\"","updatedAt":"2020-04-01T19:32:00Z","url":"https://github.com/temporalio/temporal/issues/256"}
