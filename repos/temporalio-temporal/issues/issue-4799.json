{"assignees":[],"author":{"id":"MDQ6VXNlcjEwMDM1Ng==","is_bot":false,"login":"abtris","name":"Ladislav Prskavec"},"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nI need call in activity Azure Go SDK and here is part of logic. You get token for possible retry problems but I need own retry logic that I can't use retry with token in Temporal.\r\n\r\n```\r\nif token == nil {\r\n\tpoller, err := clientFactory.NewApplicationsClient().BeginDelete(ctx, AzureDataResourceGroupName, appName, nil)\r\n\tif err != nil {\r\n\t\treturn result, err\r\n\t}\r\n\t// save token (use for retry)\r\n\ttoken, _ := poller.ResumeToken()\r\n\t\r\n\t} else {\r\n\tpoller, err = clientFactory.NewApplicationsClient().BeginDelete(ctx, AzureDataResourceGroupName, appName, &armmanagedapplications.ApplicationsClientBeginDeleteOptions{\r\n\t\tResumeToken: token,\r\n\t})\r\n}\r\n```\r\n\r\n\r\n**Describe the solution you'd like**\r\n\r\nMy idea, if we have possible save token for retry and can use if activity is retried that will be great.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nNo idea, I just write some my implementation that logic inside activity using my own db.\r\n\r\n**Additional context**\r\n\r\nRelated discussion was in https://temporalio.slack.com/archives/CTDTU3J4T/p1692802525517009","closedAt":"2023-09-01T18:00:21Z","comments":[{"id":"IC_kwDODNqesM5k3khK","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"i think you could heartbeat to record the token, and retrieve it from later retry attempt.\r\n","createdAt":"2023-08-24T19:29:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4799#issuecomment-1692289098","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5k7V_O","author":{"login":"abtris"},"authorAssociation":"NONE","body":"@yiminc Heartbeat details are not guaranteed to be recorded in Slack from @mfateev ","createdAt":"2023-08-25T12:26:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4799#issuecomment-1693278158","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5lA4wt","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"Your process could be killed after you fetched token but before you saved it to your own db. So there is no way to 100% guarantee that. From what you describe, your application will continue to work (by fetch a new token) if that happens. So I think heartbeat could be a good solution for you. \r\n\r\nOther approach is to break your activities into 2 activities, first one fetch the token, and second one take token as input.","createdAt":"2023-08-27T18:24:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4799#issuecomment-1694731309","viewerDidAuthor":false}],"createdAt":"2023-08-24T04:47:58Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":4799,"reactionGroups":[],"state":"CLOSED","title":"Improve retry with saved token","updatedAt":"2023-09-01T18:00:21Z","url":"https://github.com/temporalio/temporal/issues/4799"}
