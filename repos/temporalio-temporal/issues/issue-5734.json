{"assignees":[{"id":"MDQ6VXNlcjIwNjgxMjQ=","login":"rodrigozhou","name":"Rodrigo Zhou","databaseId":0}],"author":{"id":"MDQ6VXNlcjEwMTg3MjAz","is_bot":false,"login":"zoulja","name":""},"body":"## Expected Behavior\r\nTemporal can be started using docker compose with cassandra, all services must be running\r\n\r\n## Actual Behavior\r\nTemporal fails to start with the following error:\r\n```\r\ntemporal              | Error: unable to health check \"temporal.api.workflowservice.v1.WorkflowService\" service: connection error: desc = \"transport: Error while dialing: dial tcp 172.18.0.3:7233: connect: connection refused\"\r\ntemporal              | ('export TEMPORAL_CLI_SHOW_STACKS=1' to see stack traces)\r\ntemporal              | Waiting for Temporal server to start...\r\ntemporal              | 2024/04/15 12:32:12 error: failed to connect to \"[HostInfo hostname=\\\"172.18.0.2\\\" connectAddress=\\\"172.18.0.2\\\" peer=\\\"<nil>\\\" rpc_address=\\\"0.0.0.0\\\" broadcast_address=\\\"172.18.0.2\\\" preferred_ip=\\\"<nil>\\\" connect_addr=\\\"172.18.0.2\\\" connect_addr_source=\\\"connect_address\\\" port=9042 data_centre=\\\"datacenter1\\\" rack=\\\"rack1\\\" host_id=\\\"30e6c360-b68e-4d78-b863-9bb8e4b07646\\\" version=\\\"v3.11.9\\\" state=UP num_tokens=256]\" due to error: Keyspace 'temporal_visibility' does not exist\r\n```\r\ntemporal-admin-tools, temporal-ui, temporal-cassandra are Up and running, only temporal itself fails and exits\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Follow the instructions from https://github.com/temporalio/docker-compose?tab=readme-ov-file#how-to-use to clone the repo and get the compose file\r\n  2. Start the compose using `docker compose -f docker-compose-cass.yml up` command\r\n  3. Observe the logs and compose services status\r\n\r\n## Specifications\r\n\r\n  - Version: the latest one from Git\r\n  - Platform: MacOS\r\n","closedAt":"2024-04-29T06:10:01Z","comments":[{"id":"IC_kwDODNqesM57_X2M","author":{"login":"rodrigozhou"},"authorAssociation":"MEMBER","body":"@zoulja Sorry about this, standard visibility support has been removed from docker images, and this `docker-compose-cass.yml` should've been removed as well. Can you use `docker-compose-cass-es.yml` instead?","createdAt":"2024-04-26T22:53:33Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5734#issuecomment-2080210316","viewerDidAuthor":false}],"createdAt":"2024-04-16T14:31:06Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":5734,"reactionGroups":[],"state":"CLOSED","title":"Cassandra based docker compose fails to start ","updatedAt":"2024-04-29T06:10:01Z","url":"https://github.com/temporalio/temporal/issues/5734"}
