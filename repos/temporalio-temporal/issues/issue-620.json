{"assignees":[{"id":"MDQ6VXNlcjE3NjY1MTU=","login":"samarabbas","name":"Samar Abbas","databaseId":0}],"author":{"id":"MDQ6VXNlcjIyMzI1MjQ=","is_bot":false,"login":"alexshtin","name":"Alex Shtin"},"body":"It is data race actually:\r\n```\r\n==================\r\nWARNING: DATA RACE\r\nRead at 0x00c0020682f8 by goroutine 2198:\r\n  go.temporal.io/server/host.(*integrationSuite).TestActivityHeartbeatTimeouts.func2()\r\n      /temporal/host/activity_test.go:1027 +0x1c2\r\n  go.temporal.io/server/host.(*TaskPoller).PollAndProcessActivityTask()\r\n      /temporal/host/taskpoller.go:378 +0x623\r\n  go.temporal.io/server/host.(*integrationSuite).TestActivityHeartbeatTimeouts.func3()\r\n      /temporal/host/activity_test.go:1064 +0x55\r\n\r\nPrevious write at 0x00c0020682f8 by goroutine 2439:\r\n  go.temporal.io/server/host.(*integrationSuite).TestActivityHeartbeatTimeouts.func1()\r\n      /temporal/host/activity_test.go:1000 +0x8be\r\n  go.temporal.io/server/host.(*TaskPoller).PollAndProcessWorkflowTaskWithAttemptAndRetryAndForceNewWorkflowTask()\r\n      /temporal/host/taskpoller.go:247 +0xb7c\r\n  go.temporal.io/server/host.(*TaskPoller).PollAndProcessWorkflowTaskWithAttemptAndRetry()\r\n      /temporal/host/taskpoller.go:118 +0x90\r\n  go.temporal.io/server/host.(*TaskPoller).PollAndProcessWorkflowTaskWithAttempt()\r\n      /temporal/host/taskpoller.go:99 +0xae\r\n  go.temporal.io/server/host.(*TaskPoller).PollAndProcessWorkflowTask()\r\n      /temporal/host/taskpoller.go:77 +0x1053\r\n  go.temporal.io/server/host.(*integrationSuite).TestActivityHeartbeatTimeouts()\r\n      /temporal/host/activity_test.go:1072 +0x1031\r\n  runtime.call32()\r\n      /usr/local/go/src/runtime/asm_amd64.s:539 +0x3a\r\n  reflect.Value.Call()\r\n      /usr/local/go/src/reflect/value.go:321 +0xd3\r\n  github.com/stretchr/testify/suite.Run.func1()\r\n      /go/pkg/mod/github.com/stretchr/testify@v1.6.1/suite/suite.go:158 +0x391\r\n  testing.tRunner()\r\n      /usr/local/go/src/testing/testing.go:1039 +0x1eb\r\n\r\nGoroutine 2198 (running) created at:\r\n  go.temporal.io/server/host.(*integrationSuite).TestActivityHeartbeatTimeouts()\r\n      /temporal/host/activity_test.go:1063 +0xdc1\r\n  runtime.call32()\r\n      /usr/local/go/src/runtime/asm_amd64.s:539 +0x3a\r\n  reflect.Value.Call()\r\n      /usr/local/go/src/reflect/value.go:321 +0xd3\r\n  github.com/stretchr/testify/suite.Run.func1()\r\n      /go/pkg/mod/github.com/stretchr/testify@v1.6.1/suite/suite.go:158 +0x391\r\n  testing.tRunner()\r\n      /usr/local/go/src/testing/testing.go:1039 +0x1eb\r\n\r\nGoroutine 2439 (finished) created at:\r\n  testing.(*T).Run()\r\n      /usr/local/go/src/testing/testing.go:1090 +0x700\r\n  github.com/stretchr/testify/suite.runTests()\r\n      /go/pkg/mod/github.com/stretchr/testify@v1.6.1/suite/suite.go:203 +0xe6\r\n  github.com/stretchr/testify/suite.Run()\r\n      /go/pkg/mod/github.com/stretchr/testify@v1.6.1/suite/suite.go:176 +0x8c3\r\n  go.temporal.io/server/host.TestIntegrationSuite()\r\n      /temporal/host/integration_test.go:85 +0xf6\r\n  testing.tRunner()\r\n      /usr/local/go/src/testing/testing.go:1039 +0x1eb\r\n==================\r\n\r\n```","closedAt":"2020-09-07T19:42:52Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY4ODQ4ODA4OA==","author":{"login":"samarabbas"},"authorAssociation":"MEMBER","body":"This is already enabled and running as part of buildkite builds","createdAt":"2020-09-07T19:42:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/620#issuecomment-688488088","viewerDidAuthor":false}],"createdAt":"2020-07-28T16:24:24Z","labels":[{"id":"MDU6TGFiZWwyMjIxODYyMjUy","name":"flaky-test","description":"","color":"949fdd"}],"milestone":null,"number":620,"reactionGroups":[],"state":"CLOSED","title":"TestIntegrationSuite/TestActivityRetry is flaky","updatedAt":"2020-09-07T19:42:52Z","url":"https://github.com/temporalio/temporal/issues/620"}
