{"assignees":[],"author":{"id":"MDQ6VXNlcjE4MTA0MTY3","is_bot":false,"login":"hafiz-qasim","name":"Hafiz Qasim"},"body":"Hi Temporal team and community,\n\nI’m trying to understand whether it’s realistically possible to run Temporal on Kubernetes in a way that keeps the history service memory usage stable and within limits, without eventually hitting OOM kills.\n\nEnvironment\n\t•\tTemporal version: 1.29.1\n\t•\tPersistence: PostgreSQL\n\t•\tDeployment: Kubernetes\n\t•\tHistory service replicas: 1\n\t•\tShards: tried multiple values\n\t•\tMonitoring: Grafana community dashboard for Temporal server\n\nLoad model\n\t•\tExecute 100 workflows per minute, evenly distributed\n\t•\tAfter each minute of execution: 1 minute sleep\n\t•\tAfter 15 cycles, there is a 30-minute idle period\n\t•\tThis pattern repeats\n\nWhat I’ve tried, adjusting:\n\t•\tNumber of shards\n\t•\tHistory and events cache settings\n\t•\tDatabase connection pool sizes\n\t•\tVerifying via Grafana that traffic drops during idle periods\n\nObserved behavior\n\t•\tHistory pod memory usage continuously accumulates over time\n\t•\tMemory does not stabilize or decrease, even during idle periods\n\t•\tEventually the history pod is OOM killed\n\t•\tI don’t see a clear plateau in memory usage in Grafana\n\nMain question\nHas anyone successfully deployed Temporal on Kubernetes such that the history service memory remains stable over time (especially under cyclical or bursty workloads), without relying on restarts or OOM recovery?\n\nIf so:\n\t•\tWhat configuration patterns made the difference?\n\t•\tIs multiple history replicas required for memory stability?\n\t•\tAre there known limitations or expected behavior around cache eviction / GC in this scenario?\n\nI’d appreciate any guidance, references, or confirmation of whether this is expected behavior or a misconfiguration on my side.\n\nThanks in advance!\n","closedAt":null,"comments":[],"createdAt":"2025-12-24T10:03:38Z","labels":[],"milestone":null,"number":8902,"reactionGroups":[],"state":"OPEN","title":"History service memory usage upward trend","updatedAt":"2025-12-24T10:05:25Z","url":"https://github.com/temporalio/temporal/issues/8902"}
