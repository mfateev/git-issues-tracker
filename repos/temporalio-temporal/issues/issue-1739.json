{"assignees":[{"id":"MDQ6VXNlcjIyMzI1MjQ=","login":"alexshtin","name":"Alex Shtin","databaseId":0}],"author":{"id":"MDQ6VXNlcjIyMzI1MjQ=","is_bot":false,"login":"alexshtin","name":"Alex Shtin"},"body":"**Is your feature request related to a problem? Please describe.**\r\nIn many places better error code can be returned from different APIs. One of the example is `NOT_FOUND` error code is returned when requesting a termination and workflow is already completed. It makes it impossible to differentiate this from the case when workflow is actually doesn't exists.  `FAILED_PRECONDITION` seems to be a better error code according to the https://github.com/googleapis/googleapis/blob/master/google/rpc/code.proto.\r\n\r\n**Describe the solution you'd like**\r\nAll public APIs need to be reviews holistically and proper adjustment should be made.\r\n\r\n**Additional context**\r\nhttps://community.temporal.io/t/terminating-a-completed-run-grpc-error-code-is-not-found-why-not-aborted-or-failed-precondition/2565","closedAt":null,"comments":[{"id":"IC_kwDODNqesM5WVCli","author":{"login":"javiercanillas"},"authorAssociation":"NONE","body":"Is this issue being prioritized? \r\n\r\nI did an utility method to determine if this exception is caused because execution was completed or not:\r\n```java\r\n  public static boolean isWorkflowCompleted(@NonNull final WorkflowNotFoundException exception) {\r\n    return Optional.of(exception)\r\n        .map(Exception::getCause)\r\n        .filter(StatusRuntimeException.class::isInstance)\r\n        .map(e -> (StatusRuntimeException) e)\r\n        .map(StatusRuntimeException::getStatus)\r\n        .filter(\r\n            status ->\r\n                Status.Code.NOT_FOUND.equals(status.getCode())\r\n                    && \"workflow execution already completed\".equals(status.getDescription()))\r\n        .isPresent();\r\n  }\r\n```\r\n","createdAt":"2023-02-28T15:10:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1739#issuecomment-1448356194","viewerDidAuthor":false}],"createdAt":"2021-07-17T19:47:02Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1739,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"state":"OPEN","title":"Return more accurate error codes","updatedAt":"2023-03-03T20:21:29Z","url":"https://github.com/temporalio/temporal/issues/1739"}
