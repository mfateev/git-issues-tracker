{"assignees":[],"author":{"id":"MDQ6VXNlcjQ1MjM5NTU=","is_bot":false,"login":"longquanzheng","name":"Quanzheng Long"},"body":"## Background\r\n\r\nThe main problem of this technology is that it requires developers to write code to be replayable. This is against the existing pattern of human programming. \r\nMost people don't know their code must be replayable. On the other hand, software must be soft. We have to change code all the time for business changes and new requirements. \r\nThese two factors together have made things extremely difficult for engineers to use Temporal. \r\n\r\n## Proposal\r\n\r\nInstead of writing the Temporal workflow, we let users write workflow in code by defining a set of **WorkflowState**. \r\nEach **WorkflowState** defines two things: **requestPrecondition** and **decideNextStates** \r\n**requestPrecondition** will request for signals, timers, activity, etc \r\nWhen all/any precondition is met, the **decideNextStates** is invoked to get the next states to jump into. \r\n\r\nTo make this idea work, we build one Temporal workflow for everyone so that they don't need to write their Temporal workflow. \r\nThis workflow will call **requestPrecondition** and **decideNextStates** using Temporal activities, so that those user workflow code is always replay safe. \r\n\r\nIn another way to think about it, this is a Codable version of StepFunctions which is built on top of Temporal. \r\n\r\nIt preserves all most the full power of Temporal like \r\n* Reset workflow \r\n* Search Attributes\r\n* Writing unit tests for workflow code(which is super hard for StepFunctions) \r\n* etc\r\n\r\nAnd there is no need to worry about non-deterministic errors. \r\n\r\n## Limitation\r\n\r\n* We may lose some readability of the workflow code\r\n* We will lose some flexibility of mutating internal workflow states compared to native Temporal workflow code. \r\n","closedAt":null,"comments":[{"id":"IC_kwDODNqesM5HJFIt","author":{"login":"ccl0326"},"authorAssociation":"NONE","body":"hi @longquanzheng , i totally agree this proposal. Is any progress now?","createdAt":"2022-07-25T04:27:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2685#issuecomment-1193562669","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5HJHMb","author":{"login":"longquanzheng"},"authorAssociation":"CONTRIBUTOR","body":"@ccl0326 yeah I have started the project https://docs.google.com/document/d/1BpJuHf67ibaOWmN_uWw_pbrBVyb6U1PILXyzohxA5Ms/edit","createdAt":"2022-07-25T04:41:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2685#issuecomment-1193571099","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5LWkQH","author":{"login":"longquanzheng"},"authorAssociation":"CONTRIBUTOR","body":"@ccl0326 \r\n\r\nSome updates \r\nHere is the [slides](https://docs.google.com/presentation/d/1CpsroSf6NeVce_XyUhFTkd9bLHN8UHRtM9NavPCMhj8/edit#slide=id.gfe2f455492_0_26) of a comparison\r\n\r\nA design [doc](https://docs.google.com/document/d/1BpJuHf67ibaOWmN_uWw_pbrBVyb6U1PILXyzohxA5Ms/edit).\r\n\r\nWe have implemented the first version with Temporal: https://github.com/cadence-oss/iwf\r\n\r\nAnd a Java [SDK](https://github.com/cadence-oss/iwf-java):\r\nIt could be easily extended to support any other languages as the [API schema](https://github.com/cadence-oss/iwf-idl) is very lightweight","createdAt":"2022-10-01T02:42:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2685#issuecomment-1264206855","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5N9ONB","author":{"login":"longquanzheng"},"authorAssociation":"CONTRIBUTOR","body":"the project is now moved to IndeedEng: https://github.com/indeedeng/iwf and just released the first version","createdAt":"2022-11-08T22:11:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2685#issuecomment-1307894593","viewerDidAuthor":false}],"createdAt":"2022-03-30T19:18:17Z","labels":[],"milestone":null,"number":2685,"reactionGroups":[],"state":"OPEN","title":"[Interpreter Proposal] New way to write workflow using Temporal","updatedAt":"2023-03-03T20:20:48Z","url":"https://github.com/temporalio/temporal/issues/2685"}
