{"assignees":[],"author":{"id":"MDQ6VXNlcjc2Nzk4OTYz","is_bot":false,"login":"Nyuuk","name":"Nyuuk"},"body":"## Web UI 404 when accessing detail of workflow id from archival\r\n![image](https://github.com/user-attachments/assets/d93e3b8f-5847-4578-810e-dcd0080bf06b)\r\n\r\nHere is the English translation of your issue:\r\n\r\n---\r\n\r\nI am using Helm to deploy to GKE with the `values.archival.gcloud.yaml` as follows:\r\n\r\n```yaml\r\nserver:\r\n  archival:\r\n    history:\r\n      state: \"enabled\"\r\n      enableRead: true\r\n      provider:\r\n        gstorage:\r\n          credentialsPath: \"/etc/credentials/credentials.json\"\r\n    visibility:\r\n      state: \"enabled\"\r\n      enableRead: true\r\n      provider:\r\n        gstorage:\r\n          credentialsPath: \"/etc/credentials/credentials.json\"\r\n\r\n  namespaceDefaults:\r\n    archival:\r\n      history:\r\n        state: \"enabled\"\r\n        URI: \"gs://kp-temporal-archival/temporal_archival\"\r\n      visibility:\r\n        state: \"enabled\"\r\n        URI: \"gs://kp-temporal-archival/temporal_visibility\"\r\n```\r\n\r\nFor persistence, I am using PostgreSQL with the following `values.postgresql.yaml`:\r\n\r\n```yaml\r\nserver:\r\n  config:\r\n    persistence:\r\n      default:\r\n        driver: \"sql\"\r\n\r\n        sql:\r\n          driver: \"postgres12\"\r\n          host: postgres.example.dev\r\n          port: 5432\r\n          database: temporal\r\n          user: temporal\r\n          password: temporal\r\n          maxConns: 20\r\n          maxConnLifetime: \"1h\"\r\n\r\n      visibility:\r\n        driver: \"sql\"\r\n\r\n        sql:\r\n          driver: \"postgres12\"\r\n          host: postgres.example.dev\r\n          port: 5432\r\n          database: temporal_visibility\r\n          user: temporal\r\n          password: temporal\r\n          maxConns: 20\r\n          maxConnLifetime: \"1h\"\r\n\r\ncassandra:\r\n  enabled: false\r\n\r\nmysql:\r\n  enabled: false\r\n\r\npostgresql:\r\n  enabled: true\r\n\r\nprometheus:\r\n  enabled: false\r\n\r\ngrafana:\r\n  enabled: false\r\n  \r\nelasticsearch:\r\n  enabled: true\r\n\r\nschema:\r\n  createDatabase:\r\n    enabled: false\r\n  setup:\r\n    enabled: true\r\n  update:\r\n    enabled: true\r\n```\r\n\r\nThen, I forward the Web UI using Internal Ingress with the following configuration:\r\n\r\n```yaml\r\nweb:\r\n  enabled: true\r\n  replicaCount: 1\r\n  image:\r\n    repository: temporalio/ui\r\n    tag: 2.28.0\r\n    pullPolicy: IfNotPresent\r\n  service:\r\n    type: ClusterIP\r\n    port: 8080\r\n    annotations: {}\r\n  ingress:\r\n    enabled: true\r\n    annotations:\r\n      kubernetes.io/ingress.regional-static-ip-name: ingress-temporal-web\r\n      kubernetes.io/ingress.allow-http: \"true\"\r\n      kubernetes.io/ingress.class: \"gce-internal\"\r\n    hosts:\r\n      - \"temporal.example.dev\"\r\n    tls:\r\n      - secretName: temporal\r\n        hosts:\r\n          - temporal.example.dev\r\n```\r\n\r\nThe archival and visibility files are already in the bucket.\r\n![image](https://github.com/user-attachments/assets/164719ba-f231-4632-8156-bace700a6377)\r\n![image](https://github.com/user-attachments/assets/ad638eaf-a003-49f2-824c-9054a0a07c69)\r\n---\r\nand this is my version server `1.24.2`","closedAt":null,"comments":[{"id":"IC_kwDODNqesM6K1Lnn","author":{"login":"Akiyaaaaaa"},"authorAssociation":"NONE","body":"I am encountering the same issue when accessing the details of a temporal workflow. Here's the result from the browser network:\r\n![Here's the result from the browser network: ](https://github.com/user-attachments/assets/9d23602a-6d72-4956-abc8-1308965b089d)\r\n\r\n","createdAt":"2024-09-04T14:18:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6479#issuecomment-2329197031","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6K1ZBX","author":{"login":"Nyuuk"},"authorAssociation":"NONE","body":"> I am encountering the same issue when accessing the details of a temporal workflow. Here's the result from the browser network: ![Here's the result from the browser network: ](https://private-user-images.githubusercontent.com/107343416/364414620-9d23602a-6d72-4956-abc8-1308965b089d.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjU0NjA4NzYsIm5iZiI6MTcyNTQ2MDU3NiwicGF0aCI6Ii8xMDczNDM0MTYvMzY0NDE0NjIwLTlkMjM2MDJhLTZkNzItNDk1Ni1hYmM4LTEzMDg5NjViMDg5ZC5qcGc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwOTA0JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDkwNFQxNDM2MTZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1hYzgwNDBkNDdmNzZiNmFiYWE1MjU5MWE4NDU0MDkyMjMxMDE5ZmJlZGFmMGQxNmRjYWQ3NTAyM2JkYmI5YmFjJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.s8ZiXpJslVcgWy9dPE-RyUcGHaQT0iGL1b3RcTTF8PM)\r\n\r\nwhat's your environment do you use? docker, local, or kubernetes?","createdAt":"2024-09-04T14:39:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6479#issuecomment-2329251927","viewerDidAuthor":false}],"createdAt":"2024-09-04T14:02:26Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":6479,"reactionGroups":[],"state":"OPEN","title":"GKE Web UI 404 Archival Using bucket","updatedAt":"2024-09-04T14:39:13Z","url":"https://github.com/temporalio/temporal/issues/6479"}
