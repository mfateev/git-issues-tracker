{"assignees":[{"id":"MDQ6VXNlcjU5NDI5NjM=","login":"MichaelSnowden","name":"Michael Snowden","databaseId":0}],"author":{"id":"MDQ6VXNlcjU5NDI5NjM=","is_bot":false,"login":"MichaelSnowden","name":"Michael Snowden"},"body":"## Expected Behavior\r\nI would expect the unit of the \"replication_tasks_lag\", \"replication_tasks_fetched\", and \"replication_tasks_returned\" metrics to be the number of tasks, or unspecified. In addition, I'd expect them to use the histogram boundaries defined for \"dimensionless\" histograms.\r\n\r\n## Actual Behavior\r\nThe aforementioned metrics have millisecond  units. Also, they are using the histogram boundaries that we have defined in the config keyed by \"milliseconds\".\r\n\r\n## Steps to Reproduce the Problem\r\n[This][1] is how replication task metrics are written to. You can see that what's actually being recorded is the difference between the task IDs, not time, but the metric is defined as a timer [here][2].\r\n\r\n[1]: https://github.com/temporalio/temporal/blob/fc281193f28338af793997b57981e78eeea117dd/service/history/replication/ack_manager.go#L266\r\n[2]: https://github.com/temporalio/temporal/blob/fc281193f28338af793997b57981e78eeea117dd/common/metrics/metric_defs.go#L1462\r\n\r\n## Specifications\r\n\r\nSource code problem affecting all platforms.\r\n","closedAt":"2023-06-23T01:35:42Z","comments":[],"createdAt":"2023-06-12T17:28:54Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":4483,"reactionGroups":[],"state":"CLOSED","title":"Replication task metrics are using the wrong units","updatedAt":"2023-06-23T01:35:42Z","url":"https://github.com/temporalio/temporal/issues/4483"}
