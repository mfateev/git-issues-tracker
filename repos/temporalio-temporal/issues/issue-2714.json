{"assignees":[],"author":{"id":"MDQ6VXNlcjEyNDU1MzAx","is_bot":false,"login":"Ryan-Thomas","name":"Ryan Thomas"},"body":"When using Workflow.sleep(0) with Java SDK, no event is added to the workflow history. This can lead to a pitfall when people write Workflows where the sleep duration is controlled by a dynamic property. If the property value is changed to or from 0, the workflow history will have changed and this causes nondeterminism errors. \r\n\r\nI think it would make more sense if calling Workflow.sleep(0) added an event to the history to avoid this pitfall. I know this is difficult to change now because it seems like something that would not be backwards-compatible, but it's worth thinking about. ","closedAt":"2022-05-21T15:21:16Z","comments":[{"id":"IC_kwDODNqesM5BatHr","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"Imaging you want to load a dynamic config to get concurrent size and start concurrent number of activities based on that config, you will run into the same problem as it is non-deterministic. \r\nYou should use side effect (or mutable side effect) to fetch your dynamic config so it is replay safe. ","createdAt":"2022-04-13T03:36:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2714#issuecomment-1097519595","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5E0rI2","author":{"login":"flazx"},"authorAssociation":"NONE","body":"thanks for you reply. I tried as you said, the error as below image.\r\n![image](https://user-images.githubusercontent.com/122400/173485029-4d45114e-638d-43f5-b9a9-7c693011a35a.png)\r\n","createdAt":"2022-06-14T03:07:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2714#issuecomment-1154658870","viewerDidAuthor":false}],"createdAt":"2022-04-11T22:19:33Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":2714,"reactionGroups":[],"state":"CLOSED","title":"Add event to history for Workflow.sleep(0)","updatedAt":"2022-06-14T03:07:13Z","url":"https://github.com/temporalio/temporal/issues/2714"}
