{"assignees":[],"author":{"id":"MDQ6VXNlcjU3NjMxNDAw","is_bot":false,"login":"marcin-maciej-seweryn","name":"Marcin Maciej Seweryn"},"body":"## Expected Behavior\r\nDefault claims mapper and authorizer support namespace with uppercase characters.\r\n\r\n## Actual Behavior\r\nThe default claims mapper converts all uppercase characters in namespace name to lowercase and passes them further to authorizer.\r\nAuthorizer compares the converted namespace name with the original value from the request and fails to find a match which follows to request rejection.\r\n\r\nThe conversion to lower case happens in line 112 and the converted namespace name gets stored in line 121:\r\nhttps://github.com/temporalio/temporal/blob/56b464eb938688a0d50baa3177bd1686e1b84eef/common/authorization/default_jwt_claim_mapper.go#L112-L122\r\n\r\nThe comparison of converted and original namespace names happens in the map lookup in line 60:\r\nhttps://github.com/temporalio/temporal/blob/56b464eb938688a0d50baa3177bd1686e1b84eef/common/authorization/default_authorizer.go#L60\r\n\r\nThe default claims mapper and authorizer work just fine with namespaces with only lowercase characters.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Start Temporal with a default claim mapper and authorizer\r\n  2. Create a namespace with a uppercase letters\r\n  3. Generate token for a namespace with uppercase letters\r\n  4. Point worker to the namespace\r\n\r\n## Specifications\r\n\r\n  - Version: 1.10.1\r\n  - Platform: OSX\r\n","closedAt":"2021-06-24T17:24:46Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg2Njk0ODM3NA==","author":{"login":"sergeybykov"},"authorAssociation":"MEMBER","body":"@marcin-maciej-seweryn Thank you for reporting this issue! I submitted #1671 to address it.","createdAt":"2021-06-23T15:42:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1670#issuecomment-866948374","viewerDidAuthor":false}],"createdAt":"2021-06-23T13:28:29Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":1670,"reactionGroups":[],"state":"CLOSED","title":"Default claims mapper and authorizer don't support namespaces with uppercase characters","updatedAt":"2021-06-24T17:24:46Z","url":"https://github.com/temporalio/temporal/issues/1670"}
