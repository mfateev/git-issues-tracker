{"assignees":[],"author":{"id":"MDQ6VXNlcjIyMDk4MjQ2","is_bot":false,"login":"andrey-dubnik","name":"cloudwiz"},"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nHi\r\n\r\nI have a question which came out from the security scan we did recently. Is there a reason on why thrift (github.com/apache/thrift@v0.0.0-20161221203622-b2a4d4ae21c7) is pinned? It does look like this one is from version 0.10. There is another one used by the ringpop-go (actually 2) one from 0.9.3 and another one from the no longer maintained repo. Latest thrift is 0.15 and beyond 0.13 have some active CVEs. Could you please consider reviewing the thrift versions in those 2 packages?\r\n\r\nHere is some dependency graph\r\n\r\n```\r\ngo.temporal.io/server github.com/apache/thrift@v0.0.0-20161221203622-b2a4d4ae21c7\r\ngo.temporal.io/server github.com/temporalio/ringpop-go@v0.0.0-20211012191444-6f91b5915e95\r\ngithub.com/temporalio/ringpop-go@v0.0.0-20211012191444-6f91b5915e95 github.com/apache/thrift@v0.0.0-20150905105024-5bc8b5a3a5da\r\ngithub.com/temporalio/ringpop-go@v0.0.0-20211012191444-6f91b5915e95 github.com/samuel/go-thrift@v0.0.0-20191111193933-5165175b40af\r\n```\r\n\r\n**Describe the solution you'd like**\r\n\r\nMinimum thrift library version of 0.13, better 0.15\r\n\r\n**Describe alternatives you've considered**\r\n\r\nNone available\r\n","closedAt":null,"comments":[{"id":"IC_kwDODNqesM47olNR","author":{"login":"tminusplus"},"authorAssociation":"CONTRIBUTOR","body":"For context there has been some effort put into this outside of the Temporal team. Happy to continue pushing along my patches if they are still interested. The update is not trivial and includes breaking changes.\r\n\r\n- PR pending on forked tchannel-go for update to v0.13.0 at https://github.com/temporalio/tchannel-go/pull/1.\r\n- Opened an issue with uber/tchannel-go asking them to revisit updating Thrift at https://github.com/uber/tchannel-go/issues/844.\r\n- Have a patch ready to update the forked ringpop-go to support v0.13.0 once tchannel-go is updated.\r\n\r\nHappy to change my patches to support whatever version the Temporal team would like to use. Likely, v0.13.0 is the most compatible with other Go dependencies, which is useful for mono-repos. But, updating to v0.14.0+ fixes a potential DOS [CVE-2020-13949](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-13949). This CVE does not seem too dangerous but will leave judgement calls up to the team.\r\n\r\nI will also be testing these patches on a three-node cluster in the next week or so.","createdAt":"2021-12-23T19:42:11Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2320#issuecomment-1000493905","viewerDidAuthor":false},{"id":"IC_kwDODNqesM48EXiF","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"cc @mcbryde","createdAt":"2022-01-07T22:12:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2320#issuecomment-1007777925","viewerDidAuthor":false},{"id":"IC_kwDODNqesM48f_jM","author":{"login":"tminusplus"},"authorAssociation":"CONTRIBUTOR","body":"I added a branch to update to v0.15.0, the latest. I will open the PR for review once I have tested the ringpop-go changes, and then tested Temporal in a production environment with it.\r\n\r\nhttps://github.com/temporalio/tchannel-go/pull/2","createdAt":"2022-01-18T02:37:00Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2320#issuecomment-1015019724","viewerDidAuthor":false},{"id":"IC_kwDODNqesM481P3j","author":{"login":"tminusplus"},"authorAssociation":"CONTRIBUTOR","body":"PR is opened https://github.com/temporalio/tchannel-go/pull/2","createdAt":"2022-01-24T22:02:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2320#issuecomment-1020591587","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5IyUIU","author":{"login":"tminusplus"},"authorAssociation":"CONTRIBUTOR","body":"This should be done now with https://github.com/temporalio/temporal/pull/3250","createdAt":"2022-08-19T22:53:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2320#issuecomment-1221149204","viewerDidAuthor":false}],"createdAt":"2021-12-22T18:06:14Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":2320,"reactionGroups":[],"state":"OPEN","title":"Thrift version update and unification","updatedAt":"2023-03-03T20:21:13Z","url":"https://github.com/temporalio/temporal/issues/2320"}
