{"assignees":[],"author":{"id":"MDQ6VXNlcjIyMDk4MjQ2","is_bot":false,"login":"andrey-dubnik","name":"cloudwiz"},"body":"Hi, temporal system worker is spawning the warning messages which are affecting the prometheus reporter\r\n\r\n## Expected Behavior\r\n\r\nNo metric errors is expected\r\n\r\n## Actual Behavior\r\n\r\n```\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:26.166Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [namespace cluster_name client_name workflow_type activity_type operation type worker_type task_queue]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:26.168Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [cluster_name operation workflow_type task_queue type namespace client_name worker_type activity_type]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:26.173Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [cluster_name namespace client_name operation type worker_type workflow_type activity_type task_queue]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:26.178Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [cluster_name operation namespace type client_name worker_type workflow_type activity_type task_queue]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:26.358Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [cluster_name worker_type client_name task_queue namespace operation type workflow_type activity_type]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:26.358Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [type operation workflow_type task_queue cluster_name activity_type namespace client_name worker_type]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:26.364Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [worker_type workflow_type activity_type operation type cluster_name namespace client_name task_queue]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:26.456Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [workflow_type type activity_type operation namespace client_name worker_type cluster_name task_queue]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:26.457Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [activity_type operation workflow_type worker_type type cluster_name task_queue namespace client_name]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:26.458Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [operation type cluster_name workflow_type activity_type task_queue namespace client_name worker_type]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:27.460Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [worker_type type cluster_name workflow_type task_queue activity_type operation namespace client_name]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:27.466Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [cluster_name worker_type activity_type namespace type client_name workflow_type operation task_queue]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:27.466Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [client_name worker_type workflow_type operation namespace activity_type type cluster_name task_queue]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:27.469Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [activity_type task_queue type client_name worker_type namespace cluster_name workflow_type operation]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:27.469Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [namespace workflow_type task_queue client_name worker_type operation type cluster_name activity_type]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:27.476Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [workflow_type activity_type operation namespace type cluster_name worker_type task_queue client_name]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:27.479Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [operation worker_type type cluster_name workflow_type activity_type task_queue namespace client_name]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n{\"level\":\"warn\",\"ts\":\"2022-08-24T14:38:27.483Z\",\"msg\":\"error in prometheus reporter\",\"error\":\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"temporal_worker_task_slots_available\\\", help: \\\"temporal_worker_task_slots_available gauge\\\", constLabels: {}, variableLabels: [namespace worker_type task_queue type client_name operation workflow_type activity_type cluster_name]} has different label names or a different help string\",\"logging-call-at\":\"config.go:429\"}\r\n```\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n it just appears\r\n\r\n## Specifications\r\n\r\n  - Version: 1.17.4\r\n\r\n","closedAt":"2023-08-27T20:24:19Z","comments":[{"id":"IC_kwDODNqesM5lA-XN","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"Did not repro with 1.21 or 1.20.","createdAt":"2023-08-27T20:24:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3265#issuecomment-1694754253","viewerDidAuthor":false}],"createdAt":"2022-08-24T14:43:31Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":3265,"reactionGroups":[],"state":"CLOSED","title":"System Worker - error in prometheus reporter","updatedAt":"2023-08-27T20:24:20Z","url":"https://github.com/temporalio/temporal/issues/3265"}
