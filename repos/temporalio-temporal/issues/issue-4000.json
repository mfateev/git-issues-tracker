{"assignees":[],"author":{"id":"MDQ6VXNlcjM1MTEzNDQ2","is_bot":false,"login":"vikstrous2","name":"Viktor Stanchev"},"body":"## Expected Behavior\nI ran into a weird error in a test run, just using the temporal auto-setup docker image version 1.19.1. I don't think I'm doing anything special. Just starting some basic containers.\n\n## Actual Behavior\nThe following logs show how temporal failed to start\nhttps://gist.github.com/vikstrous2/7d016b5562903b723d93b6a403589620\n\n## Steps to Reproduce the Problem\nStart temporal from this docker-compose file over and over again until this error triggers:\n\n\n```\nversion: '3.4'\nservices:\n  temporal-db:\n    image: postgres:9.6.24-alpine@sha256:8342bcb43446694428ec6594e72e4299692854f0fc3aca090b0ab46f4c7f32a1\n    restart: unless-stopped\n    environment:\n      POSTGRES_PASSWORD: temporal\n      POSTGRES_USER: temporal\n    ports:\n      - 5434:5432\n    healthcheck:\n      interval: 1000h\n      test: 'true'\n  temporal:\n    image: temporalio/auto-setup:1.19.1@sha256:3b582c47c354e7f9958c098f168ceb514766ab93526e9be1d772179663710d0f\n    restart: unless-stopped\n    depends_on:\n      - temporal-db\n    environment:\n      - DB=postgresql\n      - DB_PORT=5432\n      - POSTGRES_USER=temporal\n      - POSTGRES_PWD=temporal\n      - POSTGRES_SEEDS=temporal-db\n    ports:\n      - 7233:7233\n    healthcheck:\n      interval: 1000h\n      test: 'true'\n```\n\n## Specifications\n* Version: 1.19.1\n* Platform: docker\n\n","closedAt":null,"comments":[{"id":"IC_kwDODNqesM5Wra3Z","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"It seems it is coming from the ringpop (which uses tchannel). We do plan to deprecate ringpop and replace with other better maintained membership library.","createdAt":"2023-03-03T22:41:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/temporalio/temporal/issues/4000#issuecomment-1454222809","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5ZC1oY","author":{"login":"waseemshahwan"},"authorAssociation":"NONE","body":"Regularly crashing in our CI environments. Every ~1/20 pipeline executions.","createdAt":"2023-04-03T08:42:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4000#issuecomment-1493916184","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5apyqQ","author":{"login":"MikePresman"},"authorAssociation":"NONE","body":"Crashing our CI environments as well. More detail here -> https://github.com/temporalio/cli/issues/212","createdAt":"2023-04-24T22:24:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4000#issuecomment-1520904848","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5i1krb","author":{"login":"shojaeix"},"authorAssociation":"NONE","body":"It also crashed our CI a few times per week. I wish there was a way to control/catch the error before it happens","createdAt":"2023-07-31T11:46:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4000#issuecomment-1658211035","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5oakkQ","author":{"login":"MikePresman"},"authorAssociation":"NONE","body":"What's the progress on this?","createdAt":"2023-10-07T19:04:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4000#issuecomment-1751795984","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5unZNe","author":{"login":"nocive"},"authorAssociation":"NONE","body":"bump","createdAt":"2023-12-14T13:07:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":3}}],"url":"https://github.com/temporalio/temporal/issues/4000#issuecomment-1855820638","viewerDidAuthor":false}],"createdAt":"2023-03-02T01:25:43Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg0","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":4000,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"state":"OPEN","title":"bug: concurrent map read and map write","updatedAt":"2023-12-14T13:07:34Z","url":"https://github.com/temporalio/temporal/issues/4000"}
