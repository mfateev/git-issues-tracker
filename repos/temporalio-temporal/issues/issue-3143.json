{"assignees":[{"id":"MDQ6VXNlcjE3MjM4ODEw","login":"maoyi16","name":"Yi","databaseId":0}],"author":{"id":"MDQ6VXNlcjk1NjM=","is_bot":false,"login":"robholland","name":"Rob Holland"},"body":"**Is your feature request related to a problem? Please describe.**\r\nThe current per task queue metrics have a `per_tl` suffix as a hang-over from Cadence which uses the term task list. The `taskqueue` label uses the task queue name for the label on the root partitions but the internal partition task queue name for the partitions. This makes it difficult to sum the metrics across partitions in order to check, for example, polling sync rates for the task queue as a whole.\r\n\r\n**Describe the solution you'd like**\r\nI suggest adding new metrics with `_per_taskqueue` naming. This will make it easier to discover the metric as it uses the correct Temporal term (rather than tl for task list). The metrics should have their root taskqueue for the `taskqueue` labels and a `partition` label which records their task queue partition (0 for the root). This will make it easy to sum values for the task queue as a whole, and also viable to know how many partitions a task queue currently has which is not currently exposed in an easy to consume way.\r\n\r\nThe old metric would continue to be emitted but deprecated after some number of releases.\r\n\r\n**Describe alternatives you've considered**\r\nAn alternative would be to amend the labels for the existing metric names but this will break existing dashboards/alerting and cause confusion.","closedAt":null,"comments":[],"createdAt":"2022-07-26T16:36:10Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":3143,"reactionGroups":[],"state":"OPEN","title":"Improved per task queue metrics","updatedAt":"2023-03-03T20:19:44Z","url":"https://github.com/temporalio/temporal/issues/3143"}
