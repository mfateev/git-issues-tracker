{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"**Describe the solution you'd like**\r\n\r\nToday we only support a single string for query failure: https://github.com/temporalio/api/blob/c5bab058fa7ffb52c7137cdbaabd37ac0c41537f/temporal/api/query/v1/message.proto#L56. This means users can't get stack traces or set any of the details they expect to be able to set when using errors in other parts of the platform (workflows, activities, updates, etc). Also, users expect to be able to \"encode\" failures (i.e. move the message to a payload so it is encryptable, see [here](https://github.com/temporalio/api/blob/c5bab058fa7ffb52c7137cdbaabd37ac0c41537f/temporal/api/failure/v1/message.proto#L107-L122)), but queries not supporting our proper failure structures does not allow them to do this for queries.\r\n\r\nSupport a full `temporal.api.failure.v1.Failure` on query result (can be mutually exclusive with the string today)\r\n","closedAt":null,"comments":[{"id":"IC_kwDODNqesM6UfNu4","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Proposed API:\r\n\r\n* Add `temporal.api.failure.v1.Failure failure` to `temporal.api.query.v1.WorkflowQueryResult`. This will be set by SDKs _in addition_ to the existing `error_message`.\r\n* Add `temporal.api.failure.v1.Failure failure` to `temporal.api.errordetails.v1.QueryFailedFailure`. This will be populated by server with the `failure` from above","createdAt":"2024-11-21T13:45:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6845#issuecomment-2491210680","viewerDidAuthor":false},{"id":"IC_kwDODNqesM7IxbGP","author":{"login":"ashish111333"},"authorAssociation":"NONE","body":"hey chad can I take this ?","createdAt":"2025-10-04T16:35:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6845#issuecomment-3368399247","viewerDidAuthor":false},{"id":"IC_kwDODNqesM7I-wKg","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"This may have already been done in https://github.com/temporalio/api/pull/503 and #6947 by @bergundy. @bergundy - can you confirm we can close this issue?","createdAt":"2025-10-06T14:12:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6845#issuecomment-3371893408","viewerDidAuthor":false},{"id":"IC_kwDODNqesM7JBRrM","author":{"login":"ashish111333"},"authorAssociation":"NONE","body":"@cretz  Np I was looking for something interesting to work on , if you can point in the right direction (anywhere where the team needs help )   I would be happy to work on it.","createdAt":"2025-10-06T16:12:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6845#issuecomment-3372554956","viewerDidAuthor":false}],"createdAt":"2024-11-20T14:13:05Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":6845,"reactionGroups":[],"state":"OPEN","title":"Support full, structured failures for queries","updatedAt":"2025-10-06T16:12:53Z","url":"https://github.com/temporalio/temporal/issues/6845"}
