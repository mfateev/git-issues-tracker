{"assignees":[],"author":{"id":"U_kgDOBa_Siw","is_bot":false,"login":"Baskkra","name":""},"body":"## Expected Behavior\r\ntemporal can running as it was\r\n\r\n## Actual Behavior\r\ntemporal can't be called by service that used it\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. temporal up and running\r\n  2. our service try to create temporal client init\r\n  3. and got this error :\r\n  temporal front-end\r\n  `{\"level\":\"error\",\"ts\":\"2022-08-08T05:30:42.376Z\",\"msg\":\"Unable to call matching.PollActivityTaskQueue.\",\"service\":\"frontend\",\"wf-task-queue-name\":\"/_sys/CMNINV-ADJUST_STOCK_BY_DELTA-SET_CHANNEL_STOCK/2\",\"timeout\":\"1m9.999634523s\",\"error\":\"any: message type \\\"temporal.api.errordetails.v1.NamespaceNotFoundFailure\\\" isn't linked in\",\"logging-call-at\":\"workflowHandler.go:1047\",\"stacktrace\":\"go.temporal.io/server/common/log.(*zapLogger).Error\\n\\t/temporal/common/log/zap_logger.go:143\\ngo.temporal.io/server/service/frontend.(*WorkflowHandler).PollActivityTaskQueue\\n\\t/temporal/service/frontend/workflowHandler.go:1047\\ngo.temporal.io/server/service/frontend.(*DCRedirectionHandlerImpl).PollActivityTaskQueue.func2\\n\\t/temporal/service/frontend/dcRedirectionHandler.go:502\\ngo.temporal.io/server/service/frontend.(*NoopRedirectionPolicy).WithNamespaceRedirect\\n\\t/temporal/service/frontend/dcRedirectionPolicy.go:118\\ngo.temporal.io/server/service/frontend.(*DCRedirectionHandlerImpl).PollActivityTaskQueue\\n\\t/temporal/service/frontend/dcRedirectionHandler.go:498\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_PollActivityTaskQueue_Handler.func1\\n\\t/go/pkg/mod/go.temporal.io/api@v1.4.1-0.20210622200201-edd2d5680749/workflowservice/v1/service.pb.go:1142\\ngo.temporal.io/server/common/authorization.(*interceptor).Interceptor\\n\\t/temporal/common/authorization/interceptor.go:152\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.38.0/server.go:1127\\ngo.temporal.io/server/common/metrics.NewServerMetricsContextInjectorInterceptor.func1\\n\\t/temporal/common/metrics/grpc.go:66\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.38.0/server.go:1127\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceCountLimitInterceptor).Intercept\\n\\t/temporal/common/rpc/interceptor/namespace_count_limit.go:90\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.38.0/server.go:1127\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceRateLimitInterceptor).Intercept\\n\\t/temporal/common/rpc/interceptor/namespace_rate_limit.go:88\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.38.0/server.go:1127\\ngo.temporal.io/server/common/rpc/interceptor.(*RateLimitInterceptor).Intercept\\n\\t/temporal/common/rpc/interceptor/rate_limit.go:83\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.38.0/server.go:1127\\ngo.temporal.io/server/common/rpc/interceptor.(*TelemetryInterceptor).Intercept\\n\\t/temporal/common/rpc/interceptor/telemetry.go:108\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.38.0/server.go:1127\\ngo.temporal.io/server/common/rpc.ServiceErrorInterceptor\\n\\t/temporal/common/rpc/grpc.go:131\\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.38.0/server.go:1127\\ngo.temporal.io/server/common/rpc/interceptor.(*NamespaceLogInterceptor).Intercept\\n\\t/temporal/common/rpc/interceptor/namespace_logger.go:84\\ngoogle.golang.org/grpc.chainUnaryServerInterceptors.func1\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.38.0/server.go:1113\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_PollActivityTaskQueue_Handler\\n\\t/go/pkg/mod/go.temporal.io/api@v1.4.1-0.20210622200201-edd2d5680749/workflowservice/v1/service.pb.go:1144\\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.38.0/server.go:1286\\ngoogle.golang.org/grpc.(*Server).handleStream\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.38.0/server.go:1609\\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.2\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.38.0/server.go:934\"}\r\n`\r\n\r\ntemporal-web :\r\n`  metadata: Metadata { _internal_repr: {}, flags: 0 },\r\n  details: 'service rate limit exceeded'\r\n}\r\n[2022-08-08T05:28:11.082Z] OperationalError: 8 RESOURCE_EXHAUSTED: service rate limit exceeded\r\n    at Object.exports.createStatusError (/usr/app/node_modules/grpc/src/common.js:91:15)\r\n    at Object.onReceiveStatus (/usr/app/node_modules/grpc/src/client_interceptors.js:1209:28)\r\n    at InterceptingListener._callNext (/usr/app/node_modules/grpc/src/client_interceptors.js:568:42)\r\n    at InterceptingListener.onReceiveStatus (/usr/app/node_modules/grpc/src/client_interceptors.js:618:8)\r\n    at callback (/usr/app/node_modules/grpc/src/client_interceptors.js:847:24) {\r\n  cause: Error: 8 RESOURCE_EXHAUSTED: service rate limit exceeded\r\n      at Object.exports.createStatusError (/usr/app/node_modules/grpc/src/common.js:91:15)\r\n      at Object.onReceiveStatus (/usr/app/node_modules/grpc/src/client_interceptors.js:1209:28)\r\n      at InterceptingListener._callNext (/usr/app/node_modules/grpc/src/client_interceptors.js:568:42)\r\n      at InterceptingListener.onReceiveStatus (/usr/app/node_modules/grpc/src/client_interceptors.js:618:8)\r\n      at callback (/usr/app/node_modules/grpc/src/client_interceptors.js:847:24) {\r\n    code: 8,\r\n    metadata: Metadata { _internal_repr: {}, flags: 0 },\r\n    details: 'service rate limit exceeded'\r\n  },\r\n  isOperational: true,\r\n  code: 8,\r\n  metadata: Metadata { _internal_repr: {}, flags: 0 },\r\n  details: 'service rate limit exceeded'\r\n}`\r\n\r\n\r\n## Specifications\r\n\r\n  - Version: temporal 1.11\r\n  - Platform: helm chart k8s\r\n","closedAt":"2022-08-15T09:22:17Z","comments":[{"id":"IC_kwDODNqesM5IVTYs","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"Is your server having different version of frontend and matching? It looks like frontend is running an older version that does not recogonize NamespaceNotFoundFailure. Also you need to register your namespace first. You can do so using tctl tool.","createdAt":"2022-08-12T21:48:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3196#issuecomment-1213543980","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5IaIMO","author":{"login":"Baskkra"},"authorAssociation":"NONE","body":"Hi @yiminc thank you  it happens because we have 2 different release in one k8s namespace that have same label with different version. It's fixed with moving other deployment to another namespace.\r\n\r\nSuper thank you for the response!","createdAt":"2022-08-15T09:22:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3196#issuecomment-1214808846","viewerDidAuthor":false}],"createdAt":"2022-08-08T05:34:00Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":3196,"reactionGroups":[],"state":"CLOSED","title":"Unable to call matching.PollActivityTaskQueue","updatedAt":"2022-08-15T09:22:17Z","url":"https://github.com/temporalio/temporal/issues/3196"}
