{"assignees":[],"author":{"id":"MDQ6VXNlcjY0MTIxNjk=","is_bot":false,"login":"mjameswh","name":"James Watkins-Harvey"},"body":"## Description\r\n\r\nAt the moment, each heartbeat will incur 2 state transitions. One state transition happen when the `RecordActivityHeartbeat` API is called. Another state transition when the previous heartbeat timeout happens and it would create a new heartbeat timeout timer.\r\n\r\nIt seems like it might be possible to do optimize this, by creating the new heartbeat timeout timer when `RecordActivityHeartbeat` API is called, so when the previous heartbeat timeout timer fires, it would be a no-op, avoiding the second state transition.","closedAt":"2023-10-05T23:50:45Z","comments":[{"id":"IC_kwDODNqesM5oS-Vm","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"After discussion, this is expected behavior. Trying to optimize it would result in many edge cases that may perform worse. \r\nSo will not change it for now.","createdAt":"2023-10-05T23:50:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4781#issuecomment-1749804390","viewerDidAuthor":false}],"createdAt":"2023-08-18T02:46:26Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":4781,"reactionGroups":[],"state":"CLOSED","title":"Each activity heartbeats results in two state transitions","updatedAt":"2023-10-05T23:50:45Z","url":"https://github.com/temporalio/temporal/issues/4781"}
