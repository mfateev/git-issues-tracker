{"assignees":[],"author":{"id":"MDQ6VXNlcjc3NTQxMjA=","is_bot":false,"login":"yycptt","name":"Yichao Yang"},"body":"**Is your feature request related to a problem? Please describe.**\r\nRight now shard info persistence is periodic (by default every 5mins), and history task processing progress is part of shard info (shardInfo.QueueStates).\r\n\r\nWhen load is high on the cluster losing 5mins of task processing progress means lots of reprocessing after shard reload, since we have no idea they are duplicated tasks. This duplication also make task processing rate limit harder.\r\n\r\nIf instead of time based, we can make the condition based on # of task processed, we'll be able to check point more often when load is high and reduce re-processing. \r\n\r\n**Describe the solution you'd like**\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n","closedAt":"2023-09-26T22:27:38Z","comments":[],"createdAt":"2023-08-24T23:43:58Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":4805,"reactionGroups":[],"state":"CLOSED","title":"Persist shard info based on # of history tasks completed","updatedAt":"2023-09-26T22:27:38Z","url":"https://github.com/temporalio/temporal/issues/4805"}
