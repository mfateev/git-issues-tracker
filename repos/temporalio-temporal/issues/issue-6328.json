{"assignees":[],"author":{"id":"MDQ6VXNlcjY3NzM4NTI=","is_bot":false,"login":"BrianKopp","name":"Brian Kopp"},"body":"## Expected Behavior\r\n\r\nUnit tests should pass\r\n\r\n## Actual Behavior\r\n\r\nUnit tests do not pass\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Checkout tag `v1.24.2` or `release/v1.24.x`\r\n  1. Run unit tests, either via `make unit-test-coverage` or `go test ./service/history/workflow/...`\r\n  1. Observe failure\r\n\r\n```\r\n=== Failed\r\n=== FAIL: service/history/workflow TestMutableStateSuite/TestTotalEntitiesCount (0.00s)\r\n2024-07-22T22:38:14.867Z\tinfo\tTask key range updated\t{\"number\": 1048576, \"next-number\": 2097152, \"logging-call-at\": \"task_key_generator.go:177\"}\r\n    controller.go:231: missing call(s) to *cluster.MockMetadata.ClusterNameForFailoverVersion(is equal to false (bool), is equal to 1234 (int64)) /home/runner/work/temporal/temporal/service/history/workflow/mutable_state_impl_test.go:1087\r\n    controller.go:231: missing call(s) to *cluster.MockMetadata.GetCurrentClusterName() /home/runner/work/temporal/temporal/service/history/workflow/mutable_state_impl_test.go:1091\r\n    controller.go:231: aborting test due to missing call(s)\r\n\r\n=== FAIL: service/history/workflow TestMutableStateSuite (0.05s)\r\n\r\nDONE 4541 tests, 7 skipped, 2 failures in 665.189s\r\nmake: *** [Makefile:405: unit-test-coverage] Error 1\r\n```\r\n## Specifications\r\n\r\n  - Version: v1.24.2\r\n  - Platform: \r\n ```\r\nCurrent runner version: '2.317.0'\r\nOperating System\r\n  Ubuntu\r\n  [2](https://github.com/bigeyedata/temporal/actions/runs/10049193855/job/27775132542?pr=19#step:1:2)2.04.4\r\n  LTS\r\nRunner Image\r\n  Image: ubuntu-22.04\r\n  Version: 20240714.1.0\r\n  Included Software: https://github.com/actions/runner-images/blob/ubuntu22/20240714.1/images/ubuntu/Ubuntu2204-Readme.md\r\n  Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu22%2F20240714.1\r\nRunner Image Provisioner\r\n  2.0.[3](https://github.com/bigeyedata/temporal/actions/runs/10049193855/job/27775132542?pr=19#step:1:3)70.1\r\n```","closedAt":null,"comments":[],"createdAt":"2024-07-23T15:36:49Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":6328,"reactionGroups":[],"state":"OPEN","title":"Unit test error in v1.24.2","updatedAt":"2024-07-23T15:36:49Z","url":"https://github.com/temporalio/temporal/issues/6328"}
