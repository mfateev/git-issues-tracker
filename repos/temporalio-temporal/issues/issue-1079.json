{"assignees":[{"id":"MDQ6VXNlcjg3NjI4OTM=","login":"wxing1292","name":"Wenquan Xing","databaseId":0}],"author":{"id":"MDQ6VXNlcjg3NjI4OTM=","is_bot":false,"login":"wxing1292","name":"Wenquan Xing"},"body":"**Is your feature request related to a problem? Please describe.**\r\nAllow directly inject tasks without updating mutable state\r\n\r\nWhen doing deletion of workflow records in ES, mutable state itself is not required. \r\nDB layer should provide the functionality to directly inject tasks without mutable state\r\n\r\nWhen this issue is done, re-enable the DB check on current workflow record not being a zombie workflow\r\nalso update test with deleted test case\r\n```go\r\nTestUpdateWorkflowExecutionWithZombieState\r\n...\r\n\r\n// try to turn current workflow into zombie state, this should end with an error\r\nupdatedInfo := copyWorkflowExecutionInfo(info.ExecutionInfo)\r\nupdatedState := copyWorkflowExecutionState(info.ExecutionState)\r\nupdatedState.State = enumsspb.WORKFLOW_EXECUTION_STATE_ZOMBIE\r\nupdatedState.Status = enumspb.WORKFLOW_EXECUTION_STATUS_RUNNING\r\n_, err = s.ExecutionManager.UpdateWorkflowExecution(&p.UpdateWorkflowExecutionRequest{\r\n\tUpdateWorkflowMutation: p.WorkflowMutation{\r\n\t\tExecutionInfo:  updatedInfo,\r\n\t\tExecutionState: updatedState,\r\n\t\tNextEventID:    info.NextEventId,\r\n\t\tCondition:      nextEventID,\r\n\t\tChecksum:       csum,\r\n\t},\r\n\tRangeID: s.ShardInfo.GetRangeId(),\r\n\tMode:    p.UpdateWorkflowModeBypassCurrent,\r\n})\r\ns.NotNil(err)\r\n\r\n...\r\n```","closedAt":"2020-12-15T00:56:20Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc0MzQ3NTkwNg==","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"additional test to resurrect: https://github.com/temporalio/temporal/pull/988/commits/a022a150d68ebe74542766cdabf7086b800bd572","createdAt":"2020-12-11T23:19:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1079#issuecomment-743475906","viewerDidAuthor":false}],"createdAt":"2020-12-11T22:10:23Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1079,"reactionGroups":[],"state":"CLOSED","title":"Allow directly inject tasks without updating mutable state","updatedAt":"2020-12-15T00:56:20Z","url":"https://github.com/temporalio/temporal/issues/1079"}
