{"assignees":[],"author":{"id":"MDQ6VXNlcjYxNzY3MTE=","is_bot":false,"login":"doshide","name":""},"body":"I'm trying to build a long-running process engine with Temporal, and the workflow structure is based on the official sample 'HelloSignal.java', like below:\r\n\r\n       while (!queryDataActivity.isFinished(projectId) || !actionQueue.isEmpty()) {\r\n            if (!Workflow.await(Duration.ofSeconds(10), () -> !actionQueue.isEmpty())) {\r\n                continue;\r\n            }\r\n            Action action = actionQueue.poll();\r\n            if (action instanceof ElementAction) {\r\n                elementActivity.doAction(projectId, (ElementAction) action);\r\n            }\r\n            if (action instanceof FlowAction) {\r\n                flowActivity.doAction(projectId, (FlowAction) action);\r\n            }\r\n        }\r\n\r\nRecently I found my test workflow terminated unexpectedly several times. I downloaded workflow history and found theses logs from the tail of the history:\r\n\r\n{\r\n\t\"eventId\": \"51200\",\r\n\t\"eventTime\": {\r\n\t\t\"seconds\": \"1607538963\",\r\n\t\t\"nanos\": 697987657\r\n\t},\r\n\t\"eventType\": \"EVENT_TYPE_WORKFLOW_TASK_STARTED\",\r\n\t\"version\": \"0\",\r\n\t\"taskId\": \"1188186\",\r\n\t\"workflowTaskStartedEventAttributes\": {\r\n\t\t\"scheduledEventId\": \"51199\",\r\n\t\t\"identity\": \"7148d862-ce0d-4642-b266-d21ee278f370\",\r\n\t\t\"requestId\": \"3b78c271-0d33-4ae4-89d4-dd6296d0477b\"\r\n\t},\r\n\t\"attributes\": \"workflowTaskStartedEventAttributes\"\r\n}, {\r\n\t\"eventId\": \"51201\",\r\n\t\"eventTime\": {\r\n\t\t\"seconds\": \"1607538963\",\r\n\t\t\"nanos\": 718118222\r\n\t},\r\n\t\"eventType\": \"EVENT_TYPE_WORKFLOW_TASK_FAILED\",\r\n\t\"version\": \"0\",\r\n\t\"taskId\": \"1188189\",\r\n\t\"workflowTaskFailedEventAttributes\": {\r\n\t\t\"scheduledEventId\": \"51199\",\r\n\t\t\"startedEventId\": \"51200\",\r\n\t\t\"cause\": \"WORKFLOW_TASK_FAILED_CAUSE_FORCE_CLOSE_COMMAND\",\r\n\t\t\"identity\": \"history-service\",\r\n\t\t\"baseRunId\": \"\",\r\n\t\t\"newRunId\": \"\",\r\n\t\t\"forkEventVersion\": \"0\",\r\n\t\t\"binaryChecksum\": \"\"\r\n\t},\r\n\t\"attributes\": \"workflowTaskFailedEventAttributes\"\r\n}, {\r\n\t\"eventId\": \"51202\",\r\n\t\"eventTime\": {\r\n\t\t\"seconds\": \"1607538963\",\r\n\t\t\"nanos\": 718133178\r\n\t},\r\n\t\"eventType\": \"EVENT_TYPE_WORKFLOW_EXECUTION_TERMINATED\",\r\n\t\"version\": \"0\",\r\n\t\"taskId\": \"1188191\",\r\n\t\"workflowExecutionTerminatedEventAttributes\": {\r\n\t\t\"reason\": \"Workflow history size / count exceeds limit.\",\r\n\t\t\"identity\": \"history-service\"\r\n\t},\r\n\t\"attributes\": \"workflowExecutionTerminatedEventAttributes\"\r\n}\r\n\r\n\r\nIt seems workflow history exceeds limit, so server force terminate the workflow ?\r\n\r\nIn my process engine, workflow is expected to running for years, now I reach the exceed limit within one day.\r\n\r\nI wonder if there is any way to auto clear the log?  or turn down the log level?","closedAt":"2020-12-18T01:48:13Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc0NTAwMTUxNA==","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"@doshide try using continue as new to reduce the history events length:\r\nhttps://docs.temporal.io/docs/go-continue-as-new","createdAt":"2020-12-15T02:01:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1069#issuecomment-745001514","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc0NTcwODQ1NQ==","author":{"login":"doshide"},"authorAssociation":"NONE","body":"@wxing1292  make sense, thanks.","createdAt":"2020-12-16T01:42:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1069#issuecomment-745708455","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc0NzgxNTE1Mw==","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"plz re-open the issue if there is further discussion","createdAt":"2020-12-18T01:48:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1069#issuecomment-747815153","viewerDidAuthor":false}],"createdAt":"2020-12-10T02:16:55Z","labels":[{"id":"MDU6TGFiZWwyMDE5OTA0OTIw","name":"discussion","description":"","color":"3ffcb0"}],"milestone":null,"number":1069,"reactionGroups":[],"state":"CLOSED","title":"Workflow history size / count exceeds limit","updatedAt":"2020-12-18T01:48:13Z","url":"https://github.com/temporalio/temporal/issues/1069"}
