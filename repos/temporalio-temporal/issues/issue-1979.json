{"assignees":[],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"# Background\r\n\r\n`PendingActivityInfo` has a field called `lastWorkerIdentity`.\r\nRight now this field is populated only from a worker response when it picks up the activity task when it was started.\r\nSee: https://github.com/temporalio/temporal/blob/ff069578a44dac7f39d7454771e88a989f62fe61/service/history/historyEngine.go#L1196\r\n\r\n`RecordActivityTaskHeartbeatRequest` and `RecordActivityTaskHeartbeatByIdRequest` from heartbeating API both have `identity` field that right now is not used and exposed in `describeExecution` API even if worker didn't report an identity during actviity task pickup, but did report it later in a heartbeat.\r\n\r\n# Proposal\r\n\r\nEither\r\n1. Identity reported in heartbeating should override `PendingActivityInfo#lastWorkerIdentity` (if heartbeating identity is not empty).\r\n\r\nOr\r\n2.  Identity reported in heartbeating should be exposed in a new `PendingActivityInfo` field.","closedAt":null,"comments":[{"id":"IC_kwDODNqesM43Rvcd","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"Some relevant usecases:\r\nWorker 1 picked the task, Worker 2 heartbeats for this task.\r\nEspecially relevant with async completion of activities.","createdAt":"2021-09-26T23:59:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1979#issuecomment-927397661","viewerDidAuthor":false}],"createdAt":"2021-09-26T23:51:10Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1979,"reactionGroups":[],"state":"OPEN","title":"Worker identity from task heartbeats is not exposed anyhow in API","updatedAt":"2023-03-03T20:21:44Z","url":"https://github.com/temporalio/temporal/issues/1979"}
