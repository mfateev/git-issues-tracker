{"assignees":[],"author":{"id":"MDQ6VXNlcjQ2NjcyMw==","is_bot":false,"login":"dnr","name":"David Reiss"},"body":"## Actual Behavior\r\n\r\nSuppose you have a 5-minute schedule with 1 minute jitter. The next nominal time is 12:20:00, but with jitter it's 12:20:33. Now at 12:20:10 you do an update to the exact same spec. It throws out the previous times and calculates the next times from there. The next nominal time is 12:25:00 now (we're past 12:20:00) and then adds jitter to that. So the run at 12:20:33 is lost.\r\n\r\n## Expected Behavior\r\n\r\nIf there is a matching time _including jitter_ after the update time, it should still run, even if its nominal time was before the update time.\r\n\r\n## Possible Fix\r\n\r\nFor interval specs, it could just look back one interval, but with calendar specs we can't (easily) look backwards. One idea is to start from the previous action time and start calculating forwards, discarding any times where the actual time (including jitter) is in the past (of the update time). Or better, start from max(create time, last update time, previous action time). We use that same construction as the \"retention base\" for idle schedules so that makes some sense.\r\n","closedAt":"2024-03-02T01:13:06Z","comments":[],"createdAt":"2023-09-12T19:45:14Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"},{"id":"LA_kwDODNqesM8AAAABbF9GFg","name":"schedules","description":"","color":"5E45A2"}],"milestone":null,"number":4866,"reactionGroups":[],"state":"CLOSED","title":"schedule update should start from previous action instead of current time","updatedAt":"2024-03-02T01:13:06Z","url":"https://github.com/temporalio/temporal/issues/4866"}
