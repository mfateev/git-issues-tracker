{"assignees":[],"author":{"id":"MDQ6VXNlcjIxMjM3MjMy","is_bot":false,"login":"locustbaby","name":"Sheldon"},"body":"## Expected Behavior\r\nwill show in the outputFile also\r\n\r\n## Actual Behavior\r\nthere is no log file was created,\r\nthe std log:\r\n```\r\nsexy@Sexyguludeng temporal % go run cmd/server/main.go  start\r\n2023/09/23 21:35:31 Loading config; env=development,zone=,configDir=config\r\n2023/09/23 21:35:31 Loading config files=[config/development.yaml]\r\n{\"level\":\"info\",\"ts\":\"2023-09-23T21:35:31.331+0800\",\"msg\":\"Build info.\",\"git-time\":\"0001-01-01T00:00:00.000Z\",\"git-revision\":\"\",\"git-modified\":false,\"go-arch\":\"arm64\",\"go-os\":\"darwin\",\"go-version\":\"go1.21.1\",\"cgo-enabled\":true,\"server-version\":\"1.22.0\",\"debug-mode\":false,\"logging-call-at\":\"main.go:148\"}\r\n{\"level\":\"info\",\"ts\":\"2023-09-23T21:35:31.331+0800\",\"msg\":\"dynamic config changed for the key: system.enableeagerworkflowstart oldValue: nil newValue: { constraints: {} value: true }\",\"logging-call-at\":\"file_based_client.go:275\"}\r\n{\"level\":\"info\",\"ts\":\"2023-09-23T21:35:31.331+0800\",\"msg\":\"dynamic config changed for the key: frontend.enableupdateworkflowexecution oldValue: nil newValue: { constraints: {} value: true }\",\"logging-call-at\":\"file_based_client.go:275\"}\r\n{\"level\":\"info\",\"ts\":\"2023-09-23T21:35:31.331+0800\",\"msg\":\"dynamic config changed for the key: frontend.enableupdateworkflowexecutionasyncaccepted oldValue: nil newValue: { constraints: {} value: true }\",\"logging-call-at\":\"file_based_client.go:275\"}\r\n{\"level\":\"info\",\"ts\":\"2023-09-23T21:35:31.331+0800\",\"msg\":\"dynamic config changed for the key: frontend.workerversioningdataapis oldValue: nil newValue: { constraints: {} value: true }\",\"logging-call-at\":\"file_based_client.go:275\"}\r\n{\"level\":\"info\",\"ts\":\"2023-09-23T21:35:31.331+0800\",\"msg\":\"dynamic config changed for the key: frontend.workerversioningworkflowapis oldValue: nil newValue: { constraints: {} value: true }\",\"logging-call-at\":\"file_based_client.go:275\"}\r\n{\"level\":\"info\",\"ts\":\"2023-09-23T21:35:31.331+0800\",\"msg\":\"dynamic config changed for the key: frontend.accesshistoryfraction oldValue: nil newValue: { constraints: {} value: 1 }\",\"logging-call-at\":\"file_based_client.go:275\"}\r\n{\"level\":\"info\",\"ts\":\"2023-09-23T21:35:31.331+0800\",\"msg\":\"Updated dynamic config\",\"logging-call-at\":\"file_based_client.go:195\"}\r\n{\"level\":\"warn\",\"ts\":\"2023-09-23T21:35:31.331+0800\",\"msg\":\"Not using any authorizer and flag `--allow-no-auth` not detected. Future versions will require using the flag `--allow-no-auth` if you do not want to set an authorizer.\",\"logging-call-at\":\"main.go:178\"}\r\n2023/09/23 21:35:31 gocql: unable to dial control conn 127.0.0.1:9042: dial tcp 127.0.0.1:9042: connect: connection refused\r\n[Fx] PROVIDE    *pprof.PProfInitializerImpl <= go.temporal.io/server/common/pprof.NewInitializer()\r\n[Fx] PROVIDE    *temporal.ServerImpl <= go.temporal.io/server/temporal.NewServerFxImpl()\r\n[Fx] PROVIDE    *temporal.serverOptions <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    chan interface {} <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    temporal.synchronizationModeParams <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    *config.Config <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    *config.PProf <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    log.Config <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    resource.ServiceNames <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    resource.NamespaceLogger <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    resolver.ServiceResolver <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    client.AbstractDataStoreFactory <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    searchattribute.Mapper <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    []grpc.UnaryServerInterceptor <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    authorization.Authorizer <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    authorization.ClaimMapper <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    authorization.JWTAudienceMapper <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    log.Logger <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    client.FactoryProvider <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    dynamicconfig.Client <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    encryption.TLSConfigProvider <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    *client.Config <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    client.Client <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    metrics.Handler <= go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] PROVIDE    []trace.SpanExporter <= go.temporal.io/server/temporal.glob..func2()\r\n[Fx] PROVIDE    client.FactoryProviderFn <= go.temporal.io/server/temporal.PersistenceFactoryProvider()\r\n[Fx] PROVIDE    *temporal.ServicesMetadata[group = \"services\"] <= go.temporal.io/server/temporal.HistoryServiceProvider()\r\n[Fx] PROVIDE    *temporal.ServicesMetadata[group = \"services\"] <= go.temporal.io/server/temporal.MatchingServiceProvider()\r\n[Fx] PROVIDE    *temporal.ServicesMetadata[group = \"services\"] <= go.temporal.io/server/temporal.FrontendServiceProvider()\r\n[Fx] PROVIDE    *temporal.ServicesMetadata[group = \"services\"] <= go.temporal.io/server/temporal.InternalFrontendServiceProvider()\r\n[Fx] PROVIDE    *temporal.ServicesMetadata[group = \"services\"] <= go.temporal.io/server/temporal.WorkerServiceProvider()\r\n[Fx] PROVIDE    *cluster.Config <= go.temporal.io/server/temporal.ApplyClusterMetadataConfigProvider()\r\n[Fx] PROVIDE    config.Persistence <= go.temporal.io/server/temporal.ApplyClusterMetadataConfigProvider()\r\n[Fx] SUPPLY     []temporal.ServerOption\r\n[Fx] PROVIDE    fx.Lifecycle <= go.uber.org/fx.New.func1()\r\n[Fx] PROVIDE    fx.Shutdowner <= go.uber.org/fx.(*App).shutdowner-fm()\r\n[Fx] PROVIDE    fx.DotGraph <= go.uber.org/fx.(*App).dotGraph-fm()\r\n[Fx] RUN        supply: stub([]temporal.ServerOption)\r\n[Fx] RUN        provide: go.temporal.io/server/temporal.ServerOptionsProvider()\r\n[Fx] Error returned: received non-nil error from function \"go.temporal.io/server/temporal\".ServerOptionsProvider\r\n        /Users/sexy/Documents/GitHub/temporal/temporal/fx.go:173:\r\ncassandra schema version compatibility check failed: gocql: unable to create session: unable to connect to initial hosts: dial tcp 127.0.0.1:9042: connect: connection refused\r\n[Fx] ERROR              Failed to initialize custom logger: could not build arguments for function \"go.uber.org/fx\".(*module).constructCustomLogger.func2\r\n        /Users/sexy/go/pkg/mod/go.uber.org/fx@v1.20.0/module.go:251:\r\nfailed to build fxevent.Logger:\r\ncould not build arguments for function \"go.temporal.io/server/temporal\".glob..func8\r\n        /Users/sexy/Documents/GitHub/temporal/temporal/fx.go:1027:\r\nfailed to build log.Logger:\r\nreceived non-nil error from function \"go.temporal.io/server/temporal\".ServerOptionsProvider\r\n        /Users/sexy/Documents/GitHub/temporal/temporal/fx.go:173:\r\ncassandra schema version compatibility check failed: gocql: unable to create session: unable to connect to initial hosts: dial tcp 127.0.0.1:9042: connect: connection refused\r\nUnable to create server. Error: could not build arguments for function \"go.uber.org/fx\".(*module).constructCustomLogger.func2 (/Users/sexy/go/pkg/mod/go.uber.org/fx@v1.20.0/module.go:251): failed to build fxevent.Logger: could not build arguments for function \"go.temporal.io/server/temporal\".glob..func8 (/Users/sexy/Documents/GitHub/temporal/temporal/fx.go:1027): failed to build log.Logger: received non-nil error from function \"go.temporal.io/server/temporal\".ServerOptionsProvider (/Users/sexy/Documents/GitHub/temporal/temporal/fx.go:173): cassandra schema version compatibility check failed: gocql: unable to create session: unable to connect to initial hosts: dial tcp 127.0.0.1:9042: connect: connection refused.\r\nexit status 1\r\n```\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. go run cmd/server/main.go  start\r\n\r\n## Specifications\r\n\r\n  - Version:\r\n  - Platform: \r\n  - config:\r\n```yaml\r\nlog:\r\n  stdout: true\r\n  level: info\r\n  outputFile: \"./test\"\r\n```\r\n\r\n\r\n","closedAt":"2023-09-24T08:22:24Z","comments":[{"id":"IC_kwDODNqesM5nQSvl","author":{"login":"locustbaby"},"authorAssociation":"NONE","body":"Ah, I see, I need to set the stdout as false","createdAt":"2023-09-23T13:56:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4889#issuecomment-1732324325","viewerDidAuthor":false}],"createdAt":"2023-09-23T13:32:41Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":4889,"reactionGroups":[],"state":"CLOSED","title":"why the log still on std instead of outputFile when I run source code?","updatedAt":"2023-09-24T08:22:24Z","url":"https://github.com/temporalio/temporal/issues/4889"}
