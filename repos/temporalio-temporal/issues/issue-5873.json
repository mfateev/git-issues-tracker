{"assignees":[],"author":{"id":"MDQ6VXNlcjQ1MjM5NTU=","is_bot":false,"login":"longquanzheng","name":"Quanzheng Long"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\n<!-- A clear and concise description of what the problem is. Ex. I'm always frustrated when [...] -->\r\n\r\nIt's not possible to know whether or not the current task is from a  reset. It would be much simpler to build a logic in workflow to fail on certain case (to stop all the activities), then I will reset it later to resume.\r\n\r\n### Describe the solution you'd like\r\n\r\n<!-- A clear and concise description of what you want to happen. SCREENSHOTS OR CODE SAMPLES ARE VERY HELPFUL -->\r\n\r\nExpose a boolean flag in WorkflowContext to indicate whether the current workflow task is from a reset?(basically if the previous task is workflow task failed with reason of Reset)","closedAt":null,"comments":[{"id":"IC_kwDODNqesM59H5nG","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"This is a server-side feature. If this information is deemed important, it will have to be provided on each task in history. Transferring to server repo...","createdAt":"2024-05-07T20:13:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5873#issuecomment-2099222982","viewerDidAuthor":false},{"id":"IC_kwDODNqesM59IC9w","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"As discussed internally, the SDK has the information already, it uses it to reseed the RNG.\r\n\r\n@longquanzheng, can you show an example of how you'd expect this to be used? A short sample would be nice so we can understand what you have in mind.\r\n\r\nAlso, what would this flag do if a workflow was reset multiple times?","createdAt":"2024-05-07T20:33:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5873#issuecomment-2099261296","viewerDidAuthor":false},{"id":"IC_kwDODNqesM59I0R5","author":{"login":"longquanzheng"},"authorAssociation":"CONTRIBUTOR","body":"\r\n> @longquanzheng, can you show an example of how you'd expect this to be used? A short sample would be nice so we can understand what you have in mind.\r\n> \r\n\r\n\r\nYeah I need to implement a \"soft timeout\" for a workflow. It will fail the workflow on the timeout. But later on I will let a human to manually restart it by resetting the workflow back to the last workflow task. If I have this boolean, I can just let it create another timer again as an \"extended timeout\". \r\n\r\nThis also sounds like a workaround of a missing feature of \"soft timeout\" that Maxim pointed out. https://github.com/temporalio/temporal/issues/1412 \r\n\r\n> Also, what would this flag do if a workflow was reset multiple times?\r\n\r\nI would expect the flag is only true for the first workflow task after reset. So if a history:\r\n```\r\nWF task failed by reset\r\nWF task scheduled\r\nWF task started <-- flag will be true\r\n...\r\nWF task scheduled\r\nWF task started <-- flag will be false\r\n...\r\nWF task failed by reset\r\nWF task scheduled\r\nWF task started <-- flag will be true\r\n...\r\nWF task scheduled\r\nWF task started <-- flag will be false\r\n...\r\n\r\n```\r\n","createdAt":"2024-05-07T23:18:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5873#issuecomment-2099463289","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5_Unx5","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"I would recommend that you create a timer and cancel the root workflow scope for a soft timeout for now.\r\nI agree that soft timeout would be a great feature to have in the platform.","createdAt":"2024-05-28T21:10:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5873#issuecomment-2136112249","viewerDidAuthor":false}],"createdAt":"2024-05-07T18:47:41Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":5873,"reactionGroups":[],"state":"OPEN","title":"WorkflowContext provides whether the current workflow task is from a reset","updatedAt":"2024-05-28T21:10:30Z","url":"https://github.com/temporalio/temporal/issues/5873"}
