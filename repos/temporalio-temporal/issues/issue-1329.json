{"assignees":[{"id":"MDQ6VXNlcjIyMzI1MjQ=","login":"alexshtin","name":"Alex Shtin","databaseId":0}],"author":{"id":"MDQ6VXNlcjE2NTAxNzAy","is_bot":false,"login":"sp13ceg","name":"Shanmugaprabhu"},"body":"**Is your feature request related to a problem? Please describe.**\r\nOur organization expects log json to be in specific format with some additional values. Right now the zaplogger config is rigid and we cannot supply any customization.\r\n \r\n**Describe the solution you'd like**\r\nIt will be great if there is an option to customize Zaplogger through server options. \r\n\r\nhttps://github.com/temporalio/temporal/blob/master/temporal/server.go#L107\r\n\r\n\r\n","closedAt":"2021-03-12T01:56:31Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc5NDMxMjk2OQ==","author":{"login":"sp13ceg"},"authorAssociation":"NONE","body":"Hi, If this requirement make sense we can contribute to it. Thanks.","createdAt":"2021-03-09T19:01:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1329#issuecomment-794312969","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc5NzE3OTEwNQ==","author":{"login":"alexshtin"},"authorAssociation":"CONTRIBUTOR","body":"I added new server option `temporal.WithLogger()` which accepts instance of `log.Logger` interface which is:\r\n```go\r\n\tLogger interface {\r\n\t\tDebug(msg string, tags ...tag.Tag)\r\n\t\tInfo(msg string, tags ...tag.Tag)\r\n\t\tWarn(msg string, tags ...tag.Tag)\r\n\t\tError(msg string, tags ...tag.Tag)\r\n\t\tFatal(msg string, tags ...tag.Tag)\r\n\t}\r\n```\r\nwhere `tag.Tag` is another interface:\r\n```go\r\n\tTag interface {\r\n\t\tKey() string\r\n\t\tValue() interface{}\r\n\t}\r\n```\r\nThis is how you can provide custom version of `zap.Logger`:\r\n```go\r\n\tlogger := log.NewZapLogger(buildMyCustomZapLogger())\r\n\ts := temporal.NewServer(\r\n\t\t...\r\n\t\ttemporal.WithLogger(logger),\r\n\t)\r\n```\r\n\r\nOr you can completely reimplement `log.Logger` interface and use your favourite logger under the hood. `tag.Tag` can be implemented by any custom struct but if you gonna use `zap.Logger` underneath, I would recommend build tags using `tag.NewZapTag()` func.\r\n\r\nThere are also 2 axillary interfaces:\r\n```go\r\n\tWithLogger interface {\r\n\t\tWith(tags ...tag.Tag) Logger\r\n\t}\r\n\tSkipLogger interface {\r\n\t\tSkip(extraSkip int) Logger\r\n\t}\r\n\r\n```\r\nYou can implement `WithLogger` interface with `With` method which should return new instance of your logger with prepended tags. Otherwise internal (not very efficient) preppender is used.\r\n\r\nIf your logger also implements `SkipLogger` then `Skip` method will be called and `extraSkip` parameter will have number of extra stack trace frames to skip (useful if you want to log caller func file/line).","createdAt":"2021-03-12T01:56:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1329#issuecomment-797179105","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc5NzU0MTU3NA==","author":{"login":"sp13ceg"},"authorAssociation":"NONE","body":"Thank you. I will try this.","createdAt":"2021-03-12T14:56:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1329#issuecomment-797541574","viewerDidAuthor":false}],"createdAt":"2021-02-25T01:29:15Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1329,"reactionGroups":[],"state":"CLOSED","title":"Allow to customize Zaplogger config through server options","updatedAt":"2021-03-12T14:56:40Z","url":"https://github.com/temporalio/temporal/issues/1329"}
