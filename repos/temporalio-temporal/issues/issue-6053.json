{"assignees":[{"id":"MDQ6VXNlcjIwNjgxMjQ=","login":"rodrigozhou","name":"Rodrigo Zhou","databaseId":0}],"author":{"id":"MDQ6VXNlcjM5NzE0Mzc5","is_bot":false,"login":"bllfr0g","name":""},"body":"running 1.23.1, I have the `postgres` driver for the default schmea, and `postgres_12` for the visibility schema (in order to have advanced visibilty.)\r\n\r\nwhen I upgrade to 1.24.0, I get this error:\r\n\r\n```\r\n[Fx] Error returned: received non-nil error from function \"go.temporal.io/server/temporal\".ServerOptionsProvider\r\n\t/home/runner/work/docker-builds/docker-builds/temporal/temporal/fx.go:183:\r\nsql schema version compatibility check failed: not supported plugin postgres, only supported: map[mysql8:0x42f15c0 postgres12:0xc000721380 postgres12_pgx:0xc000721390 sqlite:0x42aef78]\r\n[Fx] ERROR\t\tFailed to initialize custom logger: could not build arguments for function \"go.uber.org/fx\".(*module).constructCustomLogger.func2\r\n\t/home/runner/go/pkg/mod/go.uber.org/fx@v1.21.1/module.go:292:\r\nfailed to build fxevent.Logger:\r\ncould not build arguments for function \"go.temporal.io/server/temporal\".glob..func8\r\n\t/home/runner/work/docker-builds/docker-builds/temporal/temporal/fx.go:1009:\r\nfailed to build log.Logger:\r\nreceived non-nil error from function \"go.temporal.io/server/temporal\".ServerOptionsProvider\r\n\t/home/runner/work/docker-builds/docker-builds/temporal/temporal/fx.go:183:\r\nsql schema version compatibility check failed: not supported plugin postgres, only supported: map[mysql8:0x42f15c0 postgres12:0xc000721380 postgres12_pgx:0xc000721390 sqlite:0x42aef78]\r\nUnable to create server. Error: could not build arguments for function \"go.uber.org/fx\".(*module).constructCustomLogger.func2 (/home/runner/go/pkg/mod/go.uber.org/fx@v1.21.1/module.go:292): failed to build fxevent.Logger: could not build arguments for function \"go.temporal.io/server/temporal\".glob..func8 (/home/runner/work/docker-builds/docker-builds/temporal/temporal/fx.go:1009): failed to build log.Logger: received non-nil error from function \"go.temporal.io/server/temporal\".ServerOptionsProvider (/home/runner/work/docker-builds/docker-builds/temporal/temporal/fx.go:183): sql schema version compatibility check failed: not supported plugin postgres, only supported: map[mysql8:0x42f15c0 postgres12:0xc000721380 postgres12_pgx:0xc000721390 sqlite:0x42aef78].\r\n```\r\n\r\n\r\n\r\nI'm guessing that means I need to switch to the `postgres12` plugin for the default schema now as well?\r\n\r\nThat's no problem for me, I'm running postgres16. Just wondering if this is expected; I didn't see it mentioned in the release notes.","closedAt":"2024-06-05T15:40:24Z","comments":[{"id":"IC_kwDODNqesM6ALESQ","author":{"login":"rodrigozhou"},"authorAssociation":"MEMBER","body":"Apologies for the causing the issue. Yes this is expected, and the release notes have been edited to address this change.","createdAt":"2024-06-05T15:40:24Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6053#issuecomment-2150384784","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6Dn1Ws","author":{"login":"jaylin-sf"},"authorAssociation":"NONE","body":"Hi @rodrigozhou, \r\n\r\nI have the same issue with 1.24.2, the databases in PostgreSQL (Azure Flexible Server) have been created successfully. But it failed to build log.Logger for some reason.\r\n\r\nUnable to create server. Error: could not build arguments for function \"go.uber.org/fx\".(*module).constructCustomLogger.func2 (/home/runner/go/pkg/mod/go.uber.org/fx@v1.21.1/module.go:292): failed to build fxevent.Logger: could not build arguments for function \"go.temporal.io/server/temporal\".glob..func8 (/home/runner/work/docker-builds/docker-builds/temporal/temporal/fx.go:1009): failed to build log.Logger: received non-nil error from function \"go.temporal.io/server/temporal\".ServerOptionsProvider (/home/runner/work/docker-builds/docker-builds/temporal/temporal/fx.go:183): sql schema version compatibility check failed: pq: no pg_hba.conf entry for host \"20.227.4.75\", user \"temporal_pg_test\", database \"temporal\", no encryption.\r\n\r\nBTW: I passed in CA file in environment variables with the latest docker image (temporalio/auto-setup):\r\nPOSTGRES_TLS_ENABLED = true\r\nPOSTGRES_TLS_CA_FILE = {path from container volume}\r\n\r\nDB = postgres12\r\n\r\nRegards,\r\nJay","createdAt":"2024-07-04T07:01:01Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/6053#issuecomment-2208257452","viewerDidAuthor":false}],"createdAt":"2024-06-03T14:57:18Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":6053,"reactionGroups":[],"state":"CLOSED","title":"postgres plugin no longer supported for default schema in 1.24.0?","updatedAt":"2024-07-04T07:02:46Z","url":"https://github.com/temporalio/temporal/issues/6053"}
