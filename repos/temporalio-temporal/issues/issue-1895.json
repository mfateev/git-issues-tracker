{"assignees":[{"id":"MDQ6VXNlcjQ2NjcyMw==","login":"dnr","name":"David Reiss","databaseId":0},{"id":"MDQ6VXNlcjU4MzkxOQ==","login":"underrun","name":"J Derek Wilson","databaseId":0},{"id":"MDQ6VXNlcjIyMzI1MjQ=","login":"alexshtin","name":"Alex Shtin","databaseId":0}],"author":{"id":"MDQ6VXNlcjI0ODU3ODA5","is_bot":false,"login":"jrsmiley","name":"John Smiley"},"body":"**Is your feature request related to a problem? Please describe.**\r\nThe linked PR is intended to allow temporal to run in Docker as a non-root user.  \r\n\r\n**Describe the solution you'd like**\r\nLooking at the changes, it appears that uid 1000 and gid 1000 were used for the temporal user id and group id. Under some implementations of Docker, the user is required to supply their own uid:gid to run the container, which may conflict with the 1000:1000 chosen. May I suggest using the “nobody” user to run temporal under?\r\n\r\n**Additional context**\r\nDocker implementations that require uid:gid to be passed as arguments as part of a non-root runtime environment.\r\n","closedAt":null,"comments":[{"id":"IC_kwDODNqesM42kt62","author":{"login":"underrun"},"authorAssociation":"CONTRIBUTOR","body":"nobody isn't a great fit because we need filesystem permissions for the user - \r\n\r\nbut i'm not sure i understand why it's a problem to run the container with 1000:1000 if your user is 1000:1000 - can you explain why this is a problem for your use case?","createdAt":"2021-09-08T21:45:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1895#issuecomment-915594934","viewerDidAuthor":false},{"id":"IC_kwDODNqesM42ne9I","author":{"login":"jrsmiley"},"authorAssociation":"NONE","body":"Would you be available for a call to discuss in real-time?\n\n\nOn Wed, Sep 8, 2021 at 4:45 PM Derek Wilson ***@***.***>\nwrote:\n\n> nobody isn't a great fit because we need filesystem permissions for the\n> user -\n>\n> but i'm not sure i understand why it's a problem to run the container with\n> 1000:1000 if your user is 1000:1000 - can you explain why this is a problem\n> for your use case?\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/temporalio/temporal/issues/1895#issuecomment-915594934>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AF5UZUKPXQYSPP6R55SLT2LUA7KQBANCNFSM5DTG3MEQ>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n>\n","createdAt":"2021-09-09T18:03:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1895#issuecomment-916320072","viewerDidAuthor":false},{"id":"IC_kwDODNqesM42qazA","author":{"login":"dnr"},"authorAssociation":"MEMBER","body":"I'm not sure I understand the problem either. Can you be specific about the container implementation you're referring to so that we can look into it?\r\n\r\nThe point of `nobody` is that nothing should ever run as that uid, so I don't think that makes sense here.","createdAt":"2021-09-10T17:40:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1895#issuecomment-917089472","viewerDidAuthor":false},{"id":"IC_kwDODNqesM42us4G","author":{"login":"jrsmiley"},"authorAssociation":"NONE","body":"I'm not sure I entirely understand either.  I'm quoting a Docker expert\nthat I'm working with.  He has offered to join a call to explain.\n\nOn Fri, Sep 10, 2021 at 12:41 PM David Reiss ***@***.***>\nwrote:\n\n> I'm not sure I understand the problem either. Can you be specific about\n> the container implementation you're referring to so that we can look into\n> it?\n>\n> The point of nobody is that nothing should ever run as that uid, so I\n> don't think that makes sense here.\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/temporalio/temporal/issues/1895#issuecomment-917089472>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AF5UZUNW6JP6OM3QDJOZBS3UBI7LNANCNFSM5DTG3MEQ>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n>\n","createdAt":"2021-09-13T13:51:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1895#issuecomment-918212102","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5dgQYc","author":{"login":"plaisted"},"authorAssociation":"NONE","body":"We have a similar requirement for passing security scans that require UID/GID > 10000 (https://kubesec.io/basics/containers-securitycontext-runasuser/). I know there are other ways to mitigate this risk but this is a pretty common requirement for vulnerability scanning of containers.\r\n","createdAt":"2023-05-30T16:31:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1895#issuecomment-1568736796","viewerDidAuthor":false}],"createdAt":"2021-09-07T21:21:51Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1895,"reactionGroups":[],"state":"OPEN","title":"Use \"nobody\" account to run binaries in the docker","updatedAt":"2023-05-30T16:31:39Z","url":"https://github.com/temporalio/temporal/issues/1895"}
