{"assignees":[],"author":{"id":"MDQ6VXNlcjg3NjI4OTM=","is_bot":false,"login":"wxing1292","name":"Wenquan Xing"},"body":"[tagsToMap](https://github.com/temporalio/temporal/blob/43b1049/common/metrics/tally_metric_provider.go#L106) is invoked everything when emitting counter / timer e.g.\r\n* [example 1](https://github.com/temporalio/temporal/blob/43b1049/common/metrics/tally_metric_provider.go#L79)\r\n* [example 2](https://github.com/temporalio/temporal/blob/43b1049/common/metrics/tally_metric_provider.go#L86)\r\n* [example 3](https://github.com/temporalio/temporal/blob/43b1049/common/metrics/tally_metric_provider.go#L93)\r\n* [example 4](https://github.com/temporalio/temporal/blob/43b1049/common/metrics/tally_metric_provider.go#L100)\r\n\r\nconsider exclude the unwanted tags when exporting the metrics to e.g. prometheus, instead of during metrics generation, like ^","closedAt":null,"comments":[{"id":"IC_kwDODNqesM5FaauW","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"The tagsToMap would exclude the tags listed in excludeTags by replacing them as const value. Not sure what the suggestion here is? The excludeTags also has whitelist of values that can be included, not sure how useful it is.","createdAt":"2022-06-23T15:25:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3015#issuecomment-1164553110","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5FahpB","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"Can we execute the exclusion logic when exporting the metrics to e.g. premetheus? instead of doing <- this logic every time when increasing a counter.","createdAt":"2022-06-23T15:47:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3015#issuecomment-1164581441","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5FgfOo","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"sample pic which shows that tagsToMap function may create too many objects\r\n<img width=\"1516\" alt=\"image\" src=\"https://user-images.githubusercontent.com/8762893/175749789-9fa64e1d-91b6-4791-b1ad-00aa487b87e3.png\">\r\n","createdAt":"2022-06-25T00:00:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3015#issuecomment-1166144424","viewerDidAuthor":false}],"createdAt":"2022-06-23T07:21:19Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":3015,"reactionGroups":[],"state":"OPEN","title":"Possibility to exclude metrics tags when emitting metrics?","updatedAt":"2023-03-03T20:19:35Z","url":"https://github.com/temporalio/temporal/issues/3015"}
