{"assignees":[],"author":{"id":"MDQ6VXNlcjUyMzA0","is_bot":false,"login":"bergundy","name":"Roey Berman"},"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nAn issue that has come up a few times in the community slack is auto-activity heartbeats.\r\nA lot of the time heartbeats are used just to verify that the activity is still running on a Worker or there might not be a simple way to heartbeat from the activity logic in a timely manner so heartbeats are implemented \"externally\" as follows:\r\n\r\n```ts\r\nasync function autoheartbeat(fn) {\r\n  async function heartbeat() {\r\n    const cx = activity.Context.current();\r\n    for (;;) {\r\n      await cx.sleep(cx.info.heartbeatTimeout / 2);\r\n      cx.heartbeat();\r\n    }\r\n  }\r\n  return (...args) => Promise.race([heartbeat(), fn(...args)]);\r\n}\r\n\r\nexport const myActivity = autoheartbeat(async (arg1, arg2) => {\r\n  // activity logic\r\n});\r\n```\r\n\r\n**Describe the solution you'd like**\r\n\r\nAdd support for Worker heartbeat so activities automatically failover to a new Worker if the current executing Worker goes down.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nA trivial alternative is to ask users to wrap their activity function in an \"autoheartbeat\" wrapper as shown above or add SDK support for auto activity heartbeat.\r\n\r\nPer-activity heartbeat is noisier than Worker heartbeat so it'd be better if we supported Worker heartbeats.\r\n","closedAt":null,"comments":[{"id":"IC_kwDODNqesM45DV81","author":{"login":"sevein"},"authorAssociation":"CONTRIBUTOR","body":"Relates to https://github.com/temporalio/sdk-go/issues/126.","createdAt":"2021-11-02T07:55:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1891#issuecomment-957177653","viewerDidAuthor":false}],"createdAt":"2021-09-05T07:51:09Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1891,"reactionGroups":[],"state":"OPEN","title":"Worker heartbeat","updatedAt":"2023-03-03T20:21:38Z","url":"https://github.com/temporalio/temporal/issues/1891"}
