{"assignees":[],"author":{"id":"MDQ6VXNlcjE0NjM2MjI=","is_bot":false,"login":"mfateev","name":"Maxim Fateev"},"body":"Currently, the workflow code can wait for the completion of its child workflow.\r\nIt is also possible to wait for the completion of any workflow given its id from an external client.\r\nAbility waiting for the completion of any workflow from a decider code is missing.\r\n\r\nStrawman proposal:\r\n\r\nAdd a WaitForExternalWorkflowCompletion decision and the corresponding event.\r\nAdd a WaitForExternalWorkflowCompletionFailed event\r\nAdd ExternalWorkflowCompleted/Failed/Cancelled/Terminated/TimedOut events. Another option is to have an\r\nExternalWorkflowCompleted event that contains the termination event of the external workflow as a field.\r\n\r\nCopied from https://github.com/uber/cadence/issues/656","closedAt":null,"comments":[{"id":"IC_kwDODNqesM49WUDd","author":{"login":"thewmo"},"authorAssociation":"CONTRIBUTOR","body":"+1 for this change - it would make it possible to \"re-parent\" child workflows across continued-as-new parents, which is very useful in batch-like workflows where children take varying amount of time to execute and you don't want to have to wait for all children to complete before moving on to the next chunk in the batch.","createdAt":"2022-02-03T18:06:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-1029259485","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5HPiXI","author":{"login":"shaunco"},"authorAssociation":"NONE","body":"+1\r\n\r\nThis would be extremely helpful as the current mechanisms for a workflow to wait for the completion of an external workflow are all quite messy. I really just want my workflow to go to \"sleep\" until that external workflow completes.","createdAt":"2022-07-26T09:40:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":12}}],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-1195255240","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5j90gb","author":{"login":"akhil-ggv"},"authorAssociation":"NONE","body":"Is this feature added?","createdAt":"2023-08-14T11:29:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-1677150235","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5yEb5v","author":{"login":"paulnpdev"},"authorAssociation":"MEMBER","body":"discussed in-depth internally","createdAt":"2024-01-28T23:52:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-1913765487","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5yU_tQ","author":{"login":"dylanturn"},"authorAssociation":"NONE","body":"> discussed in-depth internally\r\n\r\nWe wait with bated breath...","createdAt":"2024-01-30T23:50:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"LAUGH","users":{"totalCount":1}}],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-1918106448","viewerDidAuthor":false},{"id":"IC_kwDODNqesM54tXh3","author":{"login":"moredure"},"authorAssociation":"NONE","body":"+1","createdAt":"2024-03-28T13:14:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-2025158775","viewerDidAuthor":false},{"id":"IC_kwDODNqesM58L7ZR","author":{"login":"AdilsonTorres"},"authorAssociation":"NONE","body":"+1","createdAt":"2024-04-29T19:27:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-2083501649","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5-HfQ_","author":{"login":"Sammo98"},"authorAssociation":"NONE","body":"+1\r\n`It is also possible to wait for the completion of any workflow given its id from an external client.`\r\n\r\nIs this actually possible in temporal currently? Or this is something copied from cadence issue?","createdAt":"2024-05-16T18:09:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}},{"content":"EYES","users":{"totalCount":2}}],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-2115892287","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6bcTVS","author":{"login":"binjamil"},"authorAssociation":"NONE","body":"@mfateev any expected timeline for this feature request? More than 4 years old now for this simple yet very useful utility ","createdAt":"2025-01-22T17:48:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-2607887698","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6h0FR9","author":{"login":"sowmyaseshathri"},"authorAssociation":"NONE","body":"@mfateev  Any updates on this? This will be good to have ","createdAt":"2025-03-11T15:33:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-2714784893","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6tdpxO","author":{"login":"lukeramsden"},"authorAssociation":"NONE","body":"There's quite of a lot of advanced state co-ordination in our architecture and just come across this limitation - would help our use case a lot to be able to do this","createdAt":"2025-05-26T16:32:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-2910231630","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6uPsXj","author":{"login":"earodriguez"},"authorAssociation":"NONE","body":"+1 to being able to \"re-parent\" a workflow that's executed on its own externally but can also function as a child workflow. In my org we've run into an issue where we have long running workflows that are often called on their own, but those same exact workflows can be \"redundantly\" called as child workflows as part of a bigger set of activities. \n\nFor example, bigParent can execute child workflows childA, childB, and childC. childA can often be executed by something else before bigParent is called. So if we:\n\n1. execute childA\n2. execute bigParent\n3. bigParent tries to execute child workflows childA (already running) + childB + childC\n\nWe hit an issue where we either have to throw an error or erroneously continue executing bigParent because childA was already running. bigParent is relying on some data created from childA which causes further issues.\n\nThe solution we're going to try to run with for now is, in the parent workflow, check for prior executed workflows like childA before executing children and poll their status at a regular interval until its finished as a workaround, but official support for this would be awesome. It would make workflow history clearer + make this more ergonomic.","createdAt":"2025-05-30T19:51:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-2923349475","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6uW_jZ","author":{"login":"lukeramsden"},"authorAssociation":"NONE","body":"The workaround to this is an \"infinite activity\" that uses the client at the service layer to do this rather than doing it inside the workflow, which means you can use USE_EXISTING\n\n```typescript\nresult = await proxyActivities<ActivitiesType>({\n  // wait forever on this activity\n  retry: {\n    initialInterval: '100ms',\n    maximumInterval: '1s',\n    maximumAttempts: Infinity,\n  },\n  // it heartbeats so we know its alive\n  heartbeatTimeout: '5s',\n  startToCloseTimeout: '5m',\n}).executeChildA(args);\n```\n\n```typescript\nconst activityContext = Context.current();\nconst heartbeatInterval = setInterval(() => { activityContext.heartbeat({ now: clock.now().toISOString() }); }, 1000);\ntry {\n  return temporalClient.workflow.execute(childA, {\n    workflowId: `workflow-id-child-a`,\n    args: [args],\n    taskQueue: \"task queue\",\n    workflowIdConflictPolicy: 'USE_EXISTING',\n    workflowIdReusePolicy: 'ALLOW_DUPLICATE',\n  });\n} finally {\n  clearInterval(heartbeatInterval);\n}\n```","createdAt":"2025-05-31T14:32:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-2925263065","viewerDidAuthor":false},{"id":"IC_kwDODNqesM7Becq7","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"The preferred option today is to use a WorkflowRunOperation via Nexus, it will create a workflow that is not parented to the caller workflow but instead more loosely linked. When using `WorkflowIdConflictPolicy` `USE_EXISTING`, if a workflow is already running for the provided ID, a callback will be attached to it and invoked when the workflow finally reaches a terminal state. This includes following the entire run chain across retries and continue-as-new.\n\nThere is a limitation of the number of allowed callbacks to be attached to a single workflow, currently 32, configurable via the `system.maxCallbacksPerWorkflow` dynamic config. This limitation will likely be increased in the near future.\n\nWe should also allow similar behavior without going through a Nexus handler though.","createdAt":"2025-09-02T16:14:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/680#issuecomment-3245984443","viewerDidAuthor":false}],"createdAt":"2020-08-18T03:48:13Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwyMDE5NzgzNzUw","name":"API","description":"Issues/features involving the API","color":"3d910f"},{"id":"MDU6TGFiZWwyMDE5OTIzNjU1","name":"devexp","description":"","color":"9350b7"},{"id":"MDU6TGFiZWwzMTM4ODI4MTE3","name":"up-for-grabs","description":"Issues to consider for external contribution","color":"69CD90"}],"milestone":null,"number":680,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":70}}],"state":"OPEN","title":"Add ability for workflow to wait for completion of an external workflow","updatedAt":"2025-09-02T16:14:48Z","url":"https://github.com/temporalio/temporal/issues/680"}
