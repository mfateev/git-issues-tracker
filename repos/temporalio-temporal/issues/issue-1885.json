{"assignees":[],"author":{"id":"MDQ6VXNlcjU1NTQzODYw","is_bot":false,"login":"salzr","name":"David Salazar"},"body":"## Expected Behavior\r\ntemporal-history service in **RUNNING** status.\r\n\r\n## Actual Behavior\r\ntemporal-history service currently in **CrashLoopBackOff** \r\nIt was working as expected for quite some time then ran into the following exception.\r\n\r\n`{\"level\":\"info\",\"ts\":\"2021-09-02T16:51:40.748Z\",\"msg\":\"Acquired shard\",\"service\":\"history\",\"shard-id\":285,\"address\":\"1.2.3.4.5:7234\",\"shard-item\":\"0xc0047f1080\",\"logging-call-at\":\"shardContext.go:1273\"}\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0x13bc31e]\r\n\r\ngoroutine 12236 [running]:\r\ngo.temporal.io/server/common/persistence.(*statsComputer).computeMutableStateStats(0xc00472b670, 0xc000727c08, 0xc004199680)\r\n\t/temporal/common/persistence/statsComputer.go:70 +0x33e\r\ngo.temporal.io/server/common/persistence.(*executionManagerImpl).GetWorkflowExecution(0xc00472b650, 0xc0046ed590, 0xc000406d20, 0x13, 0x2177eb2)\r\n\t/temporal/common/persistence/executionStore.go:105 +0x279` \r\n\r\nBecause of this workflows are stuck.  Fails to create new or cancel existing workflows.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Unknown the root cause.  Continues to fail post aquiring the same shard-id.\r\n\r\n## Specifications\r\n\r\n  - Version: temporalio/server:0.29.0\r\n  - Platform: K8s\r\n","closedAt":"2021-10-18T18:48:13Z","comments":[{"id":"IC_kwDODNqesM42WyAF","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"@salzr Could you try latest server version 1.12.0","createdAt":"2021-09-02T18:18:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1885#issuecomment-911941637","viewerDidAuthor":false},{"id":"IC_kwDODNqesM44Y8g2","author":{"login":"samarabbas"},"authorAssociation":"MEMBER","body":"Closing due to no activity.","createdAt":"2021-10-18T18:48:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1885#issuecomment-946063414","viewerDidAuthor":false}],"createdAt":"2021-09-02T17:22:11Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"},{"id":"MDU6TGFiZWwyNzcwMzY2NzYw","name":"close-after-30-days","description":"","color":"1d76db"}],"milestone":null,"number":1885,"reactionGroups":[],"state":"CLOSED","title":"temporal-history nil pointer dereference error on boot","updatedAt":"2021-10-18T18:48:14Z","url":"https://github.com/temporalio/temporal/issues/1885"}
