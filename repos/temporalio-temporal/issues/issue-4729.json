{"assignees":[{"id":"MDQ6VXNlcjIwNjgxMjQ=","login":"rodrigozhou","name":"Rodrigo Zhou","databaseId":0}],"author":{"id":"MDQ6VXNlcjUxNzY4Mw==","is_bot":false,"login":"Sushisource","name":"Spencer Judge"},"body":"## Expected Behavior\r\nSearching by a custom text field should work, as it does using the ES backend.\r\n\r\n## Actual Behavior\r\nAfter upserting the custom attribute from a workflow with a value like `configdriven-stresstest`, subsequent queries fail with errors like the following:\r\n\r\n```\r\n\"level\":\"error\",\"ts\":\"2023-08-03T16:49:59.640-0700\",\"msg\":\"service failures\",\"operation\":\"CountWorkflowExecutions\",\"wf-namespace\":\"default\",\"error\":\"CountWorkflowExecutions operation failed. Query failed: SQL logic error: no such column: stresstest (1)\r\n```\r\nor\r\n```\r\nerror\":\"ListWorkflowExecutions operation failed. Select failed: SQL logic error: no such column: stresstest (1)\",\r\n```\r\n\r\nMy guess is there is some kind of escaping or parsing issue with dashes going on here.\r\n\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. `temporal operator search-attribute create --name CustomStringField --type Text`\r\n  1. Upsert the value from a workflow with something with dashes in it like `foo-bar`\r\n  1. Attempt to query/list for WFs matching that value\r\n\r\n## Specifications\r\n\r\n  - Version: 1.21.4\r\n  - Platform: Temporal CLI using SQLite backend\r\n","closedAt":"2023-08-10T21:04:30Z","comments":[{"id":"IC_kwDODNqesM5jraWS","author":{"login":"rodrigozhou"},"authorAssociation":"MEMBER","body":"The issue only happens in SQLite. PR https://github.com/temporalio/temporal/pull/4755 fixes it.","createdAt":"2023-08-09T23:42:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4729#issuecomment-1672324498","viewerDidAuthor":false}],"createdAt":"2023-08-04T17:24:42Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":4729,"reactionGroups":[],"state":"CLOSED","title":"SQLite (SQL generally?) visibility problems with custom text fields","updatedAt":"2023-08-10T21:04:46Z","url":"https://github.com/temporalio/temporal/issues/4729"}
