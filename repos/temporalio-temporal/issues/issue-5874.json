{"assignees":[],"author":{"id":"MDQ6VXNlcjQ1MjM5NTU=","is_bot":false,"login":"longquanzheng","name":"Quanzheng Long"},"body":"**Is your feature request related to a problem? Please describe.**\r\nAfter reset, the signal reapply is great but sometimes I need to partially reapply to the new run. For example, some signals are from human that are important to keep. Some are not from human and it’s intended to drop so that workflow can behave differently.\r\nThis is impossible to do today because there is no way to know if the signal is before or after reset point for reapply.\r\n\r\nAdditionally, it would be nice to provide info like the time of the signal. This is recorded in history event but not exposed in SDK.\r\n\r\n**Describe the solution you'd like**\r\nIt is possible to get this info from history— we have a reset event and then comes with a batch of history to reapply in that batch. So it would be nice if SDK can provide a flag to tell whether or not the signal is from reapply.\r\n\r\nThe new api may be something like :\r\n```golang\r\ntype SignalInfo struct{\r\n    FromReapply bool\r\n    SendingTime time.Time\r\n}\r\n\r\ninfo, ok := channel.ReceiveAsyncWithInfo(&val)\r\n```\r\n**Describe alternatives you've considered**\r\nAnother idea is to let server provide a feature to filter some signals when reapply — maybe based on signal names. But I feel like an SDK feature is better — more flexible and easier to implement\r\n\r\n**Additional context**\r\nSlack thread with Temporal team(Maxim) https://temporalio.slack.com/archives/CTDTU3J4T/p1686762087116689?thread_ts=1686722741.716739&cid=CTDTU3J4T \r\n","closedAt":null,"comments":[{"id":"IC_kwDODNqesM59H5u_","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"I understand this generically, but if you have different signals that need to behave differently (e.g. some from human and some not), might it be best to provide that info in the signal argument?\r\n\r\nI am a bit scared of encouraging people to write the workflow to do different things based on whether it was reset. Having said that, we have the unsafe/discouraged-for-use `workflow.IsReplaying(ctx) bool`. So maybe we can have a similar `workflow.IsReplayingBeforeResetPoint(ctx) bool`.","createdAt":"2023-06-16T19:38:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5874#issuecomment-2099223487","viewerDidAuthor":false},{"id":"IC_kwDODNqesM59H5vH","author":{"login":"longquanzheng"},"authorAssociation":"CONTRIBUTOR","body":"It’s actually for the signals after the reset point which are considered as “reapply”. The one before reset point shouldn’t be treated differently in workflow code. \r\n\r\nThere is no way for workflow to know by argument. ","createdAt":"2023-06-16T19:49:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5874#issuecomment-2099223495","viewerDidAuthor":false},{"id":"IC_kwDODNqesM59H5vL","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"So is `!workflow.IsReplayingBeforeResetPoint(ctx)` enough to know that?","createdAt":"2023-06-16T21:57:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5874#issuecomment-2099223499","viewerDidAuthor":false},{"id":"IC_kwDODNqesM59H5vR","author":{"login":"longquanzheng"},"authorAssociation":"CONTRIBUTOR","body":"> So is `!workflow.IsReplayingBeforeResetPoint(ctx)` enough to know that?\r\n\r\nNo , it’s different than that…maybe I’ll make up a history as an example later. \r\n\r\nThe signals that I need to process differently are going to be re-processed again after reset, without any replay at all. ","createdAt":"2023-06-16T22:03:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5874#issuecomment-2099223505","viewerDidAuthor":false},{"id":"IC_kwDODNqesM59H5vV","author":{"login":"mfateev"},"authorAssociation":"MEMBER","body":"This requires a server-side change. The service must mark reapplied signals to distinguish them from the newly received signals.","createdAt":"2024-05-07T18:16:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5874#issuecomment-2099223509","viewerDidAuthor":true},{"id":"IC_kwDODNqesM59H5vZ","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Transferring to the server repo...","createdAt":"2024-05-07T20:14:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5874#issuecomment-2099223513","viewerDidAuthor":false}],"createdAt":"2023-06-16T17:51:27Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":5874,"reactionGroups":[],"state":"OPEN","title":"Provide extra info of the received signal for re-apply from reset, and others","updatedAt":"2024-05-07T20:14:16Z","url":"https://github.com/temporalio/temporal/issues/5874"}
