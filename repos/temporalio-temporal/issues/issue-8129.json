{"assignees":[],"author":{"id":"MDQ6VXNlcjQzMTIxMTQ=","is_bot":false,"login":"blackcatpolice","name":""},"body":"## Expected Behavior\nWhen I call activity it work \n\n## Actual Behavior\nNo.1 When I set activity retry times 1 \nWhen I call activity ， it not work and the worker state changed stopped\nNo.2 When I set activity retry times more than 1 , example 2\nWhen I call activity , it work , but it will resend the first failed request.\nNo3. When I use retry times more than 1 .\nIt works ,but the first canceled act request resend and now the new  second request also send , it been my db has two same accountd_id record\n\n## Steps to Reproduce the Problem\n\n  1.The temporal use mutex example.\n  2. I write the test case send multi transaction request\n  3. The mutex by account_id .\n  4. The mutex is ok, but the activity not ok\n\n## Specifications\n\n  - Version:\n\"@temporalio/activity\": \"^1.11.8\",\n    \"@temporalio/client\": \"^1.11.8\",\n    \"@temporalio/worker\": \"^1.11.8\",\n    \"@temporalio/workflow\": \"^1.11.8\",\n  - Platform:\n  - Windows\n  - Nestjs 10.0.0\n\n\n","closedAt":"2025-08-21T23:00:45Z","comments":[{"id":"IC_kwDODNqesM6_d_ES","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"> No.1 When I set activity retry times 1\nWhen I call activity ， it not work and the worker state changed stopped\n\nWhat do you expect to happen? Can you provide a minimal reproduction?\n\n> No.2 When I set activity retry times more than 1 , example 2\nWhen I call activity , it work , but it will resend the first failed request.\n\nI don't follow, what do you mean by \"resend the first fail request\"?\n\n> No3. When I use retry times more than 1 .\nIt works ,but the first canceled act request resend and now the new second request also send , it been my db has two same accountd_id record\n\nThat is likely due to a timeout that occured which caused Temporal to consider the first attempt as failed and retry the activity.\nYou should code the activities to be idempotent and prevent this situation from happening and pay attention to the activity start-to-close timeouts.\n\nI'm closing since I do not see a clear way of reproducing an issue with the system and it seems like there may be some misunderstanding of what the expected behavior is.","createdAt":"2025-08-21T23:00:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/8129#issuecomment-3212308754","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6_d_dp","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Feel free to discuss on our slack to get support.","createdAt":"2025-08-21T23:01:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/8129#issuecomment-3212310377","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6_d_kE","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"http://temporal.io/slack","createdAt":"2025-08-21T23:02:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/8129#issuecomment-3212310788","viewerDidAuthor":false}],"createdAt":"2025-07-31T18:33:12Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":8129,"reactionGroups":[],"state":"CLOSED","title":"Big Issue When Acitivity set retry:maximumAttempts:1 , it's not work","updatedAt":"2025-08-21T23:02:03Z","url":"https://github.com/temporalio/temporal/issues/8129"}
