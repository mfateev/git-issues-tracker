{"assignees":[],"author":{"id":"MDQ6VXNlcjkyMDg1","is_bot":false,"login":"nunofgs","name":"Nuno Sousa"},"body":"First of all, thank you for Temporal ❤️ \r\n\r\n## Expected Behavior\r\nI should be able to create search attributes with `temporal operator search-attribute create --name FoobarId --type Int`.\r\n\r\n## Actual Behavior\r\nIt says it succeeds but then if you list attributes it's not there.\r\n\r\n**This works in v1.22.4, but doesn't in v1.23.0**\r\n\r\nAlso, in v1.23.0 if you try adding the same search attribute twice you get an error that mentions it's already there, but in v1.23.0 you always get `Search attributes have been added`, which further indicates there's a possible breaking change.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\nHere's a small repro docker-compose:\r\n\r\n```yml\r\nversion: \"3\"\r\n\r\nservices:\r\n  mysql:\r\n    image: mysql\r\n    environment:\r\n      - MYSQL_ALLOW_EMPTY_PASSWORD=yes\r\n\r\n  temporal:\r\n    image: temporalio/auto-setup:1.23.0\r\n    environment:\r\n      - DB=mysql\r\n      - DB_PORT=3306\r\n      - MYSQL_USER=root\r\n      - MYSQL_SEEDS=mysql\r\n```\r\n\r\n  1. `docker-compose up -d`\r\n  1. `docker-compose exec temporal bash`\r\n  1. `temporal operator search-attribute create --name FoobarId --type Int`\r\n  1. `temporal operator search-attribute list`\r\n\r\nResults:\r\n\r\n```\r\n❯ docker-compose up -d\r\n[+] Running 11/11\r\n ✔ mysql 10 layers [⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿]      0B/0B      Pulled                         11.3s\r\n   ✔ ea4e27ae0b4c Pull complete                                                 1.9s\r\n   ✔ 519fbc71d3a7 Pull complete                                                 0.5s\r\n   ✔ 3543c786ec0e Pull complete                                                 0.6s\r\n   ✔ 5cbcd7fa1c4c Pull complete                                                 1.7s\r\n   ✔ a9b531b9c23d Pull complete                                                 1.2s\r\n   ✔ 606e5727259a Pull complete                                                 2.1s\r\n   ✔ f05ab3dbe893 Pull complete                                                 4.6s\r\n   ✔ 03d0dad6b159 Pull complete                                                 2.3s\r\n   ✔ f0b98fb7a666 Pull complete                                                 5.6s\r\n   ✔ f26e0edca2bb Pull complete                                                 2.9s\r\n[+] Building 0.0s (0/0)                                              docker:orbstack\r\n[+] Running 3/3\r\n ✔ Network temporal-repro_default       Cre...                                  0.0s\r\n ✔ Container temporal-repro-mysql-1     S...                                    0.4s\r\n ✔ Container temporal-repro-temporal-1  Started                                 0.4s\r\n\r\n❯ docker-compose exec temporal bash\r\n249d641a2523:/etc/temporal$ TEMPORAL_ADDRESS=temporal:7233 temporal operator search-attribute create --name FoobarId --type Int\r\nSearch attributes have been added\r\n249d641a2523:/etc/temporal$ TEMPORAL_ADDRESS=temporal:7233 temporal operator search-attribute list\r\n             Name                Type\r\n  BatcherNamespace            Keyword\r\n  BatcherUser                 Keyword\r\n  BinaryChecksums             KeywordList\r\n  BuildIds                    KeywordList\r\n  CloseTime                   Datetime\r\n  ExecutionDuration           Int\r\n  ExecutionStatus             Keyword\r\n  ExecutionTime               Datetime\r\n  HistoryLength               Int\r\n  HistorySizeBytes            Int\r\n  ParentRunId                 Keyword\r\n  ParentWorkflowId            Keyword\r\n  RunId                       Keyword\r\n  StartTime                   Datetime\r\n  StateTransitionCount        Int\r\n  TaskQueue                   Keyword\r\n  TemporalChangeVersion       KeywordList\r\n  TemporalNamespaceDivision   Keyword\r\n  TemporalSchedulePaused      Bool\r\n  TemporalScheduledById       Keyword\r\n  TemporalScheduledStartTime  Datetime\r\n  WorkflowId                  Keyword\r\n  WorkflowType                Keyword\r\n249d641a2523:/etc/temporal$\r\n```\r\n\r\n## Specifications\r\n\r\n  - Version: 1.23.0\r\n  - Platform: Mac + Docker\r\n","closedAt":"2024-05-22T09:47:58Z","comments":[{"id":"IC_kwDODNqesM5-nvC7","author":{"login":"nunofgs"},"authorAssociation":"NONE","body":"Turns out this was because I was using mysql 5.7 as the database. It works with mysql 8.","createdAt":"2024-05-22T09:47:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5669#issuecomment-2124345531","viewerDidAuthor":false}],"createdAt":"2024-04-05T15:56:57Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":5669,"reactionGroups":[],"state":"CLOSED","title":"Can't create search attributes in v1.23.0","updatedAt":"2024-05-22T09:47:58Z","url":"https://github.com/temporalio/temporal/issues/5669"}
