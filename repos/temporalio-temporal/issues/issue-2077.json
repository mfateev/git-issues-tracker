{"assignees":[{"id":"MDQ6VXNlcjIyMzI1MjQ=","login":"alexshtin","name":"Alex Shtin","databaseId":0}],"author":{"id":"MDQ6VXNlcjIyMzI1MjQ=","is_bot":false,"login":"alexshtin","name":"Alex Shtin"},"body":"## Expected Behavior\r\nTerminate batch operation works and terminates running workflows.\r\n\r\n## Actual Behavior\r\nTerminate batch operation doesn't work.\r\n\r\n## Steps to Reproduce the Problem\r\n```\r\ntctl batch start --query \"ExecutionStatus='Running'\" --reason \"Kill'Em All\" --bt terminate\r\n```\r\n\r\nServer logs will show:\r\n\r\n```\r\ntemporal                | {\"level\":\"error\",\"ts\":\"2021-10-20T15:45:34.271Z\",\"msg\":\"Activity error.\",\"Namespace\":\"temporal-system\",\"TaskQueue\":\"temporal-sys-batcher-taskqueue\",\"WorkerID\":\"65@7a8a1d05f1be@\",\r\n\"WorkflowID\":\"fc3e96f3-90bf-4795-aa34-047138986c9a\",\"RunID\":\"773caed4-f105-4103-861b-81728b41db27\",\"ActivityType\":\"temporal-sys-batch-activity\",\"Attempt\":1,\"Error\":\"last connection error: connection error\r\n: desc = \\\"transport: Error while dialing dial tcp 127.0.0.1:7233: connect: connection refused\\\"\",\"logging-call-at\":\"internal_task_pollers.go:863\",\"stacktrace\":\"go.temporal.io/server/common/log.(*zapLogge\r\nr).Error\\n\\t/temporal/common/log/zap_logger.go:143\\ngo.temporal.io/server/common/log.(*SdkLogger).Error\\n\\t/temporal/common/log/sdk_logger.go:83\\ngo.temporal.io/sdk/internal.(*activityTaskHandlerImpl).Exe\r\ncute\\n\\t/go/pkg/mod/go.temporal.io/sdk@v1.9.0/internal/internal_task_handlers.go:1837\\ngo.temporal.io/sdk/internal.(*activityTaskPoller).ProcessTask\\n\\t/go/pkg/mod/go.temporal.io/sdk@v1.9.0/internal/inter\r\nnal_task_pollers.go:863\\ngo.temporal.io/sdk/internal.(*baseWorker).processTask\\n\\t/go/pkg/mod/go.temporal.io/sdk@v1.9.0/internal/internal_worker_base.go:343\"}\r\n```\r\n\r\nThis happens because `127.0.0.1` is hardcoded in [config_template.yaml](https://github.com/temporalio/temporal/blob/master/docker/config_template.yaml#L283).","closedAt":"2021-12-04T01:31:50Z","comments":[],"createdAt":"2021-10-21T00:16:08Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":2077,"reactionGroups":[],"state":"CLOSED","title":"Batch operation doesn't work with default docker-compose","updatedAt":"2022-01-21T06:04:51Z","url":"https://github.com/temporalio/temporal/issues/2077"}
