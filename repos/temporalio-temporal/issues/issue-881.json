{"assignees":[{"id":"MDQ6VXNlcjQ2NjcyMw==","login":"dnr","name":"David Reiss","databaseId":0}],"author":{"id":"MDQ6VXNlcjg3NjI4OTM=","is_bot":false,"login":"wxing1292","name":"Wenquan Xing"},"body":"**Is your feature request related to a problem? Please describe.**\r\nCurrently, partitioned matching task queue may encounter issue if the following scenario happens:\r\n1. t = 0: task added to task queue `queue` with partition 42\r\n2. t = 1: no poller appears, task is persisted to DB\r\n3. t = 2: matching host with task queue `queue` with partition 42 shutdown\r\n\r\naccording to the current arch, each task queue manager (within matching service) is responsible for loading tasks from DB and push the task to a common rally point if task queue is partitioned, so poller, can poll existing tasks, without starvation.\r\n\r\nthe above arch has a flaw, i.e. if the task queue (with partition) is not directly polled, and task queue manager not initialized, then the poller may take a long time picking up some tasks (if num of worker << number of partition & randomization)\r\n\r\n**Describe the solution you'd like**\r\n1. common metadata manager / service / component which will notify all matching service to initialize corresponding task queue manager\r\n2. round robin polling\r\n\r\n**Describe alternatives you've considered**\r\nN/A\r\n\r\n**Additional context**\r\nPossibly related issue: #459\r\n","closedAt":null,"comments":[],"createdAt":"2020-10-21T00:30:14Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwyMDE5OTE1MjIx","name":"performance","description":"","color":"f4f275"},{"id":"MDU6TGFiZWwyNTc2NTM3NTI4","name":"difficulty: medium","description":"","color":"ffaf11"}],"milestone":null,"number":881,"reactionGroups":[],"state":"OPEN","title":"Matching Service Task Queue Metadata Management","updatedAt":"2022-11-05T03:08:35Z","url":"https://github.com/temporalio/temporal/issues/881"}
