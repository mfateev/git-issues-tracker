{"assignees":[],"author":{"id":"MDQ6VXNlcjc5MjM0NjA=","is_bot":false,"login":"chunming-c","name":"chunming, chen"},"body":"## Expected Behavior\r\n\r\nHi forks, thank you for the great work. I faced a difficulty which might not be a bug but I couldn't find relative solution anywhere. In our case I would like to know how should we detect workflow has timeout or how should we catch the timeout error when `WorkflowRunTimeout` is reached. For example, the following set the `WorkflowRunTimeout` to 1 second which should enter workflow `defer` function once timeout is reached. \r\n\r\n**main.go**\r\n```go\r\nfunc main() {\r\n\t...\r\n\tworkflowOptions := client.StartWorkflowOptions{\r\n\t\tID:        workflowID,\r\n\t\tTaskQueue: \"\",\r\n                 // Set workflow timeout to one second.\r\n\t\tWorkflowRunTimeout: 1 * time.Second,\r\n\t}\r\n\r\n\twe, err := c.ExecuteWorkflow(context.Background(), workflowOptions, YourWorkflow)\r\n}\r\n```\r\n\r\n\r\n**workflow.go**\r\n```go\r\nfunc YourWorkflow(ctx workflow.Context) error {\r\n\tdefer func() {\r\n                 // Ideally the defer function should be called once one second passed. The fact is the temporal will terminate \r\n                 // the workflow without entering the the defer function.\r\n\t\tif !errors.Is(ctx.Err(), workflow.ErrCanceled) {\r\n\t\t\treturn\r\n\t\t}\r\n\t}()\r\n\r\n        time.Sleep(5 * time.Second)\r\n\r\n\treturn nil\r\n}\r\n\r\n```\r\n\r\n## Actual Behavior\r\n\r\nThe fact is the temporal will terminate the workflow without entering the the `defer` function.\r\n\r\n\r\n## Specifications\r\n\r\n  - Version: `v1.18.4`\r\n  - Platform: OSX\r\n","closedAt":"2022-12-22T01:32:56Z","comments":[{"id":"IC_kwDODNqesM5RMtTm","author":{"login":"chunming-c"},"authorAssociation":"NONE","body":"Close by re-posting to https://github.com/temporalio/sdk-go/issues/984","createdAt":"2022-12-22T01:32:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3746#issuecomment-1362285798","viewerDidAuthor":false}],"createdAt":"2022-12-21T10:19:23Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":3746,"reactionGroups":[],"state":"CLOSED","title":"No error will be thrown if `WorkflowRunTimeout` is reached","updatedAt":"2022-12-22T01:32:56Z","url":"https://github.com/temporalio/temporal/issues/3746"}
