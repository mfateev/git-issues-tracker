{"assignees":[],"author":{"id":"MDQ6VXNlcjQ2MjIwNg==","is_bot":false,"login":"binchenX","name":"Bin Chen"},"body":"## Expected Behavior\n\noffical [golang sample code](https://github.com/temporalio/samples-go/tree/main/helloworld) can run successfully.\n\nNotes: already read https://docs.temporal.io/troubleshooting/deadline-exceeded-error. Can't make sense where to look since the cli works, was expecting the sample works too.\n\n## Actual Behavior\n\noffical golang sample code failed with context deadline exceeded.\n\n```\n➜  helloworld git:(main) go run worker/main.go\n2025/01/31 15:08:44 INFO  No logger configured for temporal client. Created default one.\n2025/01/31 15:08:49 Unable to create client failed reaching server: context deadline exceeded\nexit status 1\n```\n\n## Steps to Reproduce the Problem\n\n  \n1. Deployed to kubernetes following [offical helm chart](https://github.com/temporalio/helm-charts). \n\n2. Port forwarding to local, ensure cluster is health and temporal cli works\n\n```bash\n➜  kubectl port-forward services/temporal-frontend-headless 7233:7233               \nForwarding from 127.0.0.1:7233 -> 7233\nForwarding from [::1]:7233 -> 7233\nHandling connection for 7233\nHandling connection for 7233\nHandling connection for 7233\nHandling connection for 7233\nHandling connection for 7233\nHandling connection for 7233\n\n\n➜  temporal operator cluster health --address 127.0.0.1:7233\nSERVING\n\n➜  temporal operator namespace create --namespace default\n\n➜  temporal operator namespace list\n  NamespaceInfo.Name                    default\n  NamespaceInfo.Id                      3524a90c-ad2a-416e-aa0e-647520983665\n  NamespaceInfo.Description\n  NamespaceInfo.OwnerEmail\n  NamespaceInfo.State                   Registered\n  NamespaceInfo.Data                    map[]\n  Config.WorkflowExecutionRetentionTtl  72h0m0s\n  ReplicationConfig.ActiveClusterName   active\n  ReplicationConfig.Clusters            [{\"clusterName\":\"active\"}]\n  Config.HistoryArchivalState           Disabled\n  Config.VisibilityArchivalState        Disabled\n  IsGlobalNamespace                     false\n  FailoverVersion                       0\n  FailoverHistory                       []\n  Config.HistoryArchivalUri\n  Config.VisibilityArchivalUri\n\n  NamespaceInfo.Name                    temporal-system\n  NamespaceInfo.Id                      32049b68-7872-4094-8e63-d0dd59896a83\n  NamespaceInfo.Description             Temporal internal system namespace\n  NamespaceInfo.OwnerEmail              temporal-core@temporal.io\n  NamespaceInfo.State                   Registered\n  NamespaceInfo.Data                    map[]\n  Config.WorkflowExecutionRetentionTtl  168h0m0s\n  ReplicationConfig.ActiveClusterName   active\n  ReplicationConfig.Clusters            [{\"clusterName\":\"active\"}]\n  Config.HistoryArchivalState           Disabled\n  Config.VisibilityArchivalState        Disabled\n  IsGlobalNamespace                     false\n  FailoverVersion                       0\n  FailoverHistory                       []\n  Config.HistoryArchivalUri\n  Config.VisibilityArchivalUri\n```\n\n3. Run the [sample hello world code](https://github.com/temporalio/samples-go/tree/main/helloworld) and failed.\n\n```bash\n➜  helloworld git:(main) go run worker/main.go\n2025/01/31 15:08:44 INFO  No logger configured for temporal client. Created default one.\n2025/01/31 15:08:49 Unable to create client failed reaching server: context deadline exceeded\nexit status 1\n```\n\n## Specifications\n\n```\n  ➜  ✗ temporal -v\ntemporal version 1.2.0 (Server 1.26.2, UI 2.34.0)\n\n  ➜  temporal operator cluster describe\n  ClusterName  PersistenceStore  VisibilityStore\n  active       cassandra         elasticsearch\n\n  - Platform: Kubernetes/EKS \n```\n\n## Other\n\n- Was in running in cooperation so involves firewall and proxy. but again since the temporal cli works, was expecting the client program be no different. Would love to know extra config for the client such timeout and proxy if that exists and deems to be issue.  ","closedAt":null,"comments":[{"id":"IC_kwDODNqesM6d9mCb","author":{"login":"giuliohome"},"authorAssociation":"NONE","body":"We’re encountering a similar issue. In our case [^1][^2], it’s not the sample code, but we get the same `\"failed reaching server: context deadline exceeded\"` in very similar Temporal client code.\n\n```go\nc, err := client.Dial(client.Options{\n        HostPort:  os.Getenv(\"TEMPORAL_HOSTPORT\"),\n        Namespace: os.Getenv(\"TEMPORAL_NAMESPACE\"),\n    })\n    if err != nil {\n        log.Error(\"Unable to create client\", \"error\", err)\n        panic(err)\n    }\n```\n\n> {\"time\":\"2025-02-10T17:25:39.557547051Z\",\"level\":\"ERROR\",\"msg\":\"Unable to create client\",\"myapp\":{\"activity\":\"results\",\"error\":\"failed reaching server: context deadline exceeded\"}}\n\n[^1]: Platform: Kubernetes/AKS.\n[^2]: Our panic (at least the most recent one observed) appears to be caused by temporary resource throttling and/or a concurrent Kubernetes deployment.","createdAt":"2025-02-11T08:52:49Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/7200#issuecomment-2650169499","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6fUmWE","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"You should try to run the sample with grpc debugging enabled, there may be some useful information in there:\n\n`GRPC_GO_LOG_VERBOSITY_LEVEL=99` `GRPC_GO_LOG_SEVERITY_LEVEL=info`.","createdAt":"2025-02-20T23:55:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/7200#issuecomment-2672977284","viewerDidAuthor":false}],"createdAt":"2025-01-31T04:43:29Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":7200,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"OPEN","title":"temporal cli works but hit deadline-exceeded error for sample code","updatedAt":"2025-02-20T23:55:54Z","url":"https://github.com/temporalio/temporal/issues/7200"}
