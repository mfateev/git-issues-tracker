{"assignees":[],"author":{"id":"MDQ6VXNlcjc2MDI0MTUz","is_bot":false,"login":"shiyao-afterpay","name":""},"body":"We need to bulk terminated workflow based on its submitted time range.\r\n\r\nCurrently, we have to terminate workflow one by one, which is too slow.","closedAt":"2021-05-08T07:09:53Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDgzNDc1MDk0NQ==","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"if you are using ES as visibility backend try this: https://docs.temporal.io/docs/system-tools/tctl/#signal-cancel-terminate-workflows-as-a-batch-job","createdAt":"2021-05-07T20:23:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1522#issuecomment-834750945","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzNTAwMzU3MA==","author":{"login":"shiyao-afterpay"},"authorAssociation":"NONE","body":"If I want to terminate 6M workflows, how much time will it take?\r\n\r\nThe data storage is three Cassandra replicas.\r\n\r\nPlease give me a ballpark number, and possibly the limiting factors so that we know how to increase the speed.  Thanks.","createdAt":"2021-05-08T02:57:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1522#issuecomment-835003570","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzNTA1NTIxMQ==","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"without knowing the exactly capacity, i would say at least few hours.\r\n\r\ndepending on how the workflow termination is done\r\n1. using tctl batch command\r\n2. query workflow with specific time range and terminate manually by calling terminate API\r\n\r\n1 will be executed by Temporal worker (not the user SDK worker, this Temporal worker normally executes maintenance work, but will also execute the batch operations)\r\n2 relies on customized script\r\n\r\ncomparing above, option 2 may consume less resources but requires more work writing the scripts\r\n\r\noverall limiting factor is capacity, cpu / mem / number of Temporal hosts / DB\r\n","createdAt":"2021-05-08T03:43:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1522#issuecomment-835055211","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzNTA2NDczNw==","author":{"login":"shiyao-afterpay"},"authorAssociation":"NONE","body":"What about the performance if we want to delete all workflows under a NAMESPACE, seems like more of a one-shot database \r\n operation without much filtering. Does temporal have some optimizations on this?\r\n","createdAt":"2021-05-08T03:58:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1522#issuecomment-835064737","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzNTEyODc0MQ==","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"deletion of all workflow within a namespace is not a supported feature.\r\nif you really want, one hack is to delete relevant records for that namespace from executions table\r\n\r\nwhat is your real use case?","createdAt":"2021-05-08T06:05:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1522#issuecomment-835128741","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzNTE2MjAxMg==","author":{"login":"shiyao-afterpay"},"authorAssociation":"NONE","body":" I see. Thanks.","createdAt":"2021-05-08T07:09:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1522#issuecomment-835162012","viewerDidAuthor":false}],"createdAt":"2021-05-06T07:03:56Z","labels":[{"id":"MDU6TGFiZWwyMDE5OTA0OTIw","name":"discussion","description":"","color":"3ffcb0"},{"id":"MDU6TGFiZWwyNzcwMzY2NzYw","name":"close-after-30-days","description":"","color":"1d76db"}],"milestone":null,"number":1522,"reactionGroups":[],"state":"CLOSED","title":"Terminate workflows based on its submitted time range.","updatedAt":"2021-05-08T07:09:53Z","url":"https://github.com/temporalio/temporal/issues/1522"}
