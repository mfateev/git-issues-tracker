{"assignees":[],"author":{"id":"MDQ6VXNlcjE4MjU4MDM=","is_bot":false,"login":"Dmitriusan","name":""},"body":"## Expected Behavior\r\nWe have a new workflow that should be effectively disabled during PROD deployment until the development is fully completed. To achieve that, we specify a CRON schedule `0 0 29 2 1`. The idea is:\r\n\r\nThe next execution date for this crontab entry would be `February 29th` of the `next leap year` which falls on a `Monday`. According to the calendar, that should happen in the year 2032 so we have plenty of time to complete the development. \r\n## Actual Behavior\r\nIn fact, for some reason Temporal CRON schedules that differently\r\n![image](https://user-images.githubusercontent.com/1825803/236550676-17b3daa0-aa5f-4358-8f88-16649444a0fe.png)\r\n\r\nI've tried checking the sleep period manually and it does not correspond to the CRON specified. Is there some integer overflow?\r\n```\r\n> date -d 'now + 6604 hours 52 minutes 13 seconds'\r\nMon 05 Feb 2024 02:13:18 AM EET\r\n```\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. specify a CRON schedule `0 0 29 2 1`\r\n  1. schedule some workflow\r\n  1. take a look at expected date\r\n\r\n## Specifications\r\n\r\n  - Version: v1.9.0 web\r\n  - Platform: Linux\r\n","closedAt":"2023-10-21T19:23:51Z","comments":[{"id":"IC_kwDODNqesM5bl_Vv","author":{"login":"dnr"},"authorAssociation":"MEMBER","body":"Classic cron syntax has the \"feature\" than when both day-of-month and day-of-week are specified, then they're treated as \"or\" instead of \"and\". (The cron implementation in Schedules doesn't do this but the one for workflow CronSchedule does.)\r\n\r\nIn this case, why not just not start the workflow at all?","createdAt":"2023-05-05T19:31:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4288#issuecomment-1536685423","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5bmS9F","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"Just for reference https://crontab.guru/#0_0_29_2_1 has same next schedule at 2024-02-05 00:00:00\r\n","createdAt":"2023-05-05T20:49:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4288#issuecomment-1536765765","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5bmcd9","author":{"login":"Dmitriusan"},"authorAssociation":"NONE","body":"@dnr thank you for the clarification! Very unobvious, but looks like \"Works as desired\". May be a good candidate for including some note at Temporal documentation\r\nRegarding not starting the workflow, we have a system that auto-starts all workflows that match some criteria, so CRON looked like a good \"simple alternative\" to feature flags for enabling the workflow on some environments and skipping on other envs\r\n\r\n@yiminc , great web service, thanks for pointing out to it!","createdAt":"2023-05-05T21:34:44Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4288#issuecomment-1536804733","viewerDidAuthor":false}],"createdAt":"2023-05-05T19:23:25Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":4288,"reactionGroups":[],"state":"CLOSED","title":"Wrong handling of sophisticated CRON schedule","updatedAt":"2023-10-21T19:23:51Z","url":"https://github.com/temporalio/temporal/issues/4288"}
