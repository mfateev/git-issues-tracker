{"assignees":[{"id":"U_kgDOB0vcng","login":"pdoerner","name":"","databaseId":0}],"author":{"id":"MDQ6VXNlcjE0NjM2MjI=","is_bot":false,"login":"mfateev","name":"Maxim Fateev"},"body":"**Is your feature request related to a problem? Please describe.**\r\nFrom a [forum post](https://community.temporal.io/t/how-to-tell-the-namespace-is-ready-to-be-polled-by-workers/1606):\r\n>  Hi Temporal team!\r\nI’m looking for ways to simplify Temporal development experience for new engineers from my organization. As part of that, I’ve created a small generic code that could automatically create a namespace on worker/starter application startup. The idea is to have it off for staging and production (so namespaces have to be manually created there) but be able to automatically create required namespaces on a local machine.\r\nTo do that, I make a DescribeNamespace call and it fails, make a RegisterNamespace call. This works fine in the sense that namespace is created and is visible in Temporal web, however, it’s not immediately “useful” as for ~10-15 seconds after namespace was created requests fail with `io.grpc.StatusRuntimeException: NOT_FOUND: namespace: basic_worker-namespace not found`\r\nI tried to run another DescribeNamespace call after RegisterNamespace but it succeeds and indicated the namespace is already created. Same with ListNamespaces.\r\nThe best workaround I’ve found for now is to make a GetWorkflowExecutionHistory request for some fake workflow id. If it fails with status code NOT_FOUND I deduce the namespace is not propagated yet, once it fails with INVALID_ARGUMENT I assume the namespace is ready and I can let worker and client request go.\r\nIs there a way to tell that the namespace is “ready” and other calls can be initiated? I feel I’m missing something pretty obvious.\r\n\r\n**Describe the solution you'd like**\r\nNamespace registration is synchronous. I.e. after the `RegisterNamespace` returned then it can be used without errors.\r\n\r\nIf it is not possible to implement at scale reduce the delay to at most a second in a locally deployed Temporal version.\r\n","closedAt":"2023-03-08T23:49:18Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc4ODIwMDYxMw==","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Experiencing the same issue with the NodeJS SDK integration tests.\r\nGetting `NOT_FOUND: namespace: default not found` after a successful `describeNamespace()` call.","createdAt":"2021-03-01T19:16:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1336#issuecomment-788200613","viewerDidAuthor":false},{"id":"IC_kwDODNqesM45p8xC","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Ideally there should be a way to reliably know if namespace registration is complete or not instead of the current workaround (which sometimes fails in CI as well).","createdAt":"2021-11-12T17:42:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1336#issuecomment-967298114","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5NPm_8","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"The namespace cache should read through (with proper rate limiting) if it cannot find the requested namespace.\r\nThere should be no delay between namespace is registered and become available for use. \r\nThis is not only for local environment.","createdAt":"2022-10-29T18:58:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1336#issuecomment-1295937532","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5OjgpW","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"It would be great if we could prioritize this, it seems like a small effort server-side and would result in better experience for anyone creating server environments for testing.","createdAt":"2022-11-17T01:37:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1336#issuecomment-1317931606","viewerDidAuthor":false}],"createdAt":"2021-02-28T19:59:10Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwyMDE5OTIzNjU1","name":"devexp","description":"","color":"9350b7"},{"id":"MDU6TGFiZWwzMDAxNDk5NzYw","name":"operations","description":"","color":"f9d0c4"},{"id":"LA_kwDODNqesM8AAAABGnVHrA","name":"P0","description":"","color":"D93F0B"}],"milestone":null,"number":1336,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":6}}],"state":"CLOSED","title":"Remove namespace registration delay","updatedAt":"2023-03-08T23:49:18Z","url":"https://github.com/temporalio/temporal/issues/1336"}
