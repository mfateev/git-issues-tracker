{"assignees":[],"author":{"id":"MDQ6VXNlcjg3NjI4OTM=","is_bot":false,"login":"wxing1292","name":"Wenquan Xing"},"body":"acquireShards function right now only assert shard (in mem) data structure is in valid state, additional assertion should also be performed against DB (source of truth), e.g. using `AssertShardOwnership` persistence API \r\n\r\nhttps://github.com/temporalio/temporal/blob/v1.17.1/service/history/shard/controller_impl.go#L344","closedAt":"2022-10-20T22:34:40Z","comments":[{"id":"IC_kwDODNqesM5HTDvw","author":{"login":"dnr"},"authorAssociation":"MEMBER","body":"In order to `AssertShardOwnership` you need to have the current `RangeID`, right? So this is only for shards that are already loaded?","createdAt":"2022-07-27T01:52:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3135#issuecomment-1196178416","viewerDidAuthor":false}],"createdAt":"2022-07-22T20:47:06Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":3135,"reactionGroups":[],"state":"CLOSED","title":"Assert shard ownership against source of truth when acquireShards is invoked","updatedAt":"2022-10-20T22:34:40Z","url":"https://github.com/temporalio/temporal/issues/3135"}
