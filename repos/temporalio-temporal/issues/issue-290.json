{"assignees":[],"author":{"id":"MDQ6VXNlcjE0NjM2MjI=","is_bot":false,"login":"mfateev","name":"Maxim Fateev"},"body":"Activity timeouts are are complicated to give full control over activity failure and retry behavior. \r\nThere are two issues with the current design:\r\n\r\n1. Activity `ScheduleToClose` doesn't make sense when `RetryPolicy.expiration` is specified.\r\n2. By default activities are not retried which is not intuitive for the new users as well as not desired behaviour in 99.9% of use cases.\r\n\r\nThe strawman redesign proposal:\r\n- Change all timeouts from _InSeconds_ to some real time intervals. The service still can have internal resolution restrictions (like currently 1 second). But we can relax some of that in the future without API changes.\r\n- Merge retry policy into [ScheduleActivityTaskDecisionAttributes](https://github.com/temporalio/temporal-proto/blob/87860d09ca5ef15231169ba4ad1264212c5f29da/decision/message.proto#L35).\r\n- Remove `ExpirationIntervalInSeconds` and always use `ScheduleToClose` timeout instead\r\n- As `MaximumAttempts` becomes always present assume that its default 0 (\"unlimited attempts\") means that by default an activity is retried up to `ScheduleToClose` timeout.\r\n- To  \"at most once\" activity execution (current default) can be achieved by setting the `MaximumAttempts` to 1.\r\n- Default other fields of retry policy to (subject to discussion or even becoming part of the service configuration)\r\n     - `InitialRetryInterval` to 1 second\r\n     - `MaximumRetryInterval` to 90 * `InitialRetryInterval`\r\n     - `ExponentialCoefficient` to 2","closedAt":"2020-07-31T16:01:25Z","comments":[],"createdAt":"2020-04-11T15:06:09Z","labels":[],"milestone":null,"number":290,"reactionGroups":[],"state":"CLOSED","title":"Activity timeouts and retry policy redesign","updatedAt":"2020-07-31T16:01:25Z","url":"https://github.com/temporalio/temporal/issues/290"}
