{"assignees":[],"author":{"id":"MDQ6VXNlcjM3MjE0MQ==","is_bot":false,"login":"skrul","name":"Steve Krulewitz"},"body":"## Expected Behavior\r\n\r\nPrior to v0.23.0, the canary would start up and always attempt to create the `canary` namespace. If the namespace already existed, it wold silently ignore the error and continue. This comment in the code confirms this is the intended behavior https://github.com/temporalio/temporal/blob/v0.23.0/canary/client.go#L53\r\n\r\n## Actual Behavior\r\n\r\nWhen the canary runs and creates the `canary` namespace, it finds that the namespace exists and it logs the error and exits:\r\n\r\n```\r\n2020/05/21 20:06:02 Loading config; env=staging,zone=,configDir=/config\r\n2020/05/21 20:06:02 Loading configFiles=[/config/staging.yaml]\r\n{\"level\":\"info\",\"ts\":\"2020-05-21T20:06:02.141Z\",\"msg\":\"starting canary\",\"namespace\":\"canary\"}\r\n{\"level\":\"error\",\"ts\":\"2020-05-21T20:07:02.143Z\",\"msg\":\"createNamespace failed\",\"error\":\"rpc error: code = AlreadyExists desc = Namespace already exists.\",\"stacktrace\":\"github.com/temporalio/temporal/canary.(*canaryImpl).Run\\n\\t/temporal/temporal/canary/canary.go:101\\ngithub.com/temporalio/temporal/canary.(*canaryRunner).execute.func1\\n\\t/temporal/temporal/canary/runner.go:95\"}\r\n```\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Run the canary on a cluster that already has a `canary` namespace\r\n\r\n## Specifications\r\n\r\n  - Version: v0.23.0\r\n  - Platform: linux\r\n","closedAt":"2020-05-22T19:24:39Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYzMjg3MDM2NQ==","author":{"login":"skrul"},"authorAssociation":"NONE","body":"Going to close this, I believe I was seeing this issue because I had built the canary with the wrong version of the proto submodule","createdAt":"2020-05-22T19:24:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/399#issuecomment-632870365","viewerDidAuthor":false}],"createdAt":"2020-05-21T20:35:54Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":399,"reactionGroups":[],"state":"CLOSED","title":"Canary exits when namespace exists","updatedAt":"2020-05-22T19:24:39Z","url":"https://github.com/temporalio/temporal/issues/399"}
