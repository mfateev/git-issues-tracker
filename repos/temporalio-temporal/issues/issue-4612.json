{"assignees":[],"author":{"id":"MDQ6VXNlcjc3NTQxMjA=","is_bot":false,"login":"yycptt","name":"Yichao Yang"},"body":"## Expected Behavior\r\nIf history service is not running, matching service ideally should not generate lots of DB requests.\r\n\r\n## Actual Behavior\r\nWhen task in matching tasks table failed to be dispatched, the loaded task will be acked and a new task will be created. This is essentially a busy loop and consume tons of persistence resources.\r\n\r\nThis logic exists today to prevent one bad task from blocking the entire task queue I think.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1.\r\n  1.\r\n  1.\r\n\r\n## Specifications\r\n\r\n  - Version:\r\n  - Platform:\r\n","closedAt":null,"comments":[{"id":"IC_kwDODNqesM5iIFAa","author":{"login":"alexshtin"},"authorAssociation":"CONTRIBUTOR","body":"Current work around is to start services in the following sequence: history, matching, frontend, worker.","createdAt":"2023-07-21T22:11:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/4612#issuecomment-1646284826","viewerDidAuthor":false}],"createdAt":"2023-07-11T00:59:27Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"},{"id":"LA_kwDODNqesM7iefm2","name":"matching","description":"","color":"AC7693"}],"milestone":null,"number":4612,"reactionGroups":[],"state":"OPEN","title":"Matching task dispatch busy loop when history service is not available","updatedAt":"2023-07-21T22:11:28Z","url":"https://github.com/temporalio/temporal/issues/4612"}
