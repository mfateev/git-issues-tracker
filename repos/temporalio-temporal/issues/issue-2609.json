{"assignees":[],"author":{"id":"MDQ6VXNlcjExOTQyMg==","is_bot":false,"login":"tsurdilo","name":"Tihomir Surdilovic"},"body":"Request: Add ability to transfer child workflows to new parent run when parent calls continue as new. \r\n\r\nCurrently the child workflow is not transferred and follows the parentClosePolicy. ","closedAt":null,"comments":[{"id":"IC_kwDODNqesM5FV1li","author":{"login":"albertyfwu"},"authorAssociation":"NONE","body":"@tsurdilo Can you clarify what \"transfer child workflows\" would mean in practice?\r\n\r\nToday, upon continue as new, do child workflows continue to follow the parentClosePolicy or are they effectively abandoned?","createdAt":"2022-06-22T16:37:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2609#issuecomment-1163352418","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5IlCwJ","author":{"login":"bkniffler"},"authorAssociation":"NONE","body":"Today, it seems that with the default `PARENT_CLOSE_POLICY_TERMINATE`, children are terminated if the parent workflow continues as new. Until there is a built-in way to handle transfer of children to the next WF run, I'm doing the following:\r\n- Save an array/map `pendingChildren` of all running children in the parent worklfow \r\n- Pass workflowIds to the next run, as an argument of the continueAsNew fn\r\n- Call an activity for each workflow that waits for their result and clears items from `pendingChildren` on error or success\r\n\r\nUnfortunately, workflows (at least in TS SDK) don't allow to wait for workflows that they didn't directly spawn. We can use getExternalWorkflowHandle, but it doesn't really expose much info/functionalyity (like wait for result or the status). Thus, we need to use activities.","createdAt":"2022-08-17T08:20:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2609#issuecomment-1217670153","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5IlC9Y","author":{"login":"bkniffler"},"authorAssociation":"NONE","body":"(if there is better strategies @tsurdilo, would love some feedback)","createdAt":"2022-08-17T08:21:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2609#issuecomment-1217671000","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5xc204","author":{"login":"picpromusic"},"authorAssociation":"NONE","body":"Is #373 related(a valid preparation) to this issue?","createdAt":"2024-01-22T07:15:30Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2609#issuecomment-1903390008","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6DbYQo","author":{"login":"JakeCooper"},"authorAssociation":"NONE","body":"Just a heads up this would be super useful\r\n\r\nWe've got an example usecase where we use Temporal as a mutex on a buildQueue. We're essentially pushing child workflow executions (builds) into the parent (buildQueue) workflow\r\n\r\nThis works great, until we have to continue as new. \r\n\r\nSince we can't move the handle over (aka just Promise.any await on the number of builds), the top level buildQueue just kinda has to poll the child workflows on an interval","createdAt":"2024-07-03T03:11:54Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2609#issuecomment-2204992552","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6DcIep","author":{"login":"JakeCooper"},"authorAssociation":"NONE","body":"We've also attempted the bidirection signals (As suggested by Maxim and Roey on [Slack](https://temporalio.slack.com/archives/CTRCR8RBP/p1719985220287989?thread_ts=1719890618.119439&cid=CTRCR8RBP)). However, this has resulted in a couple times accidentally recursively signaling between both workflows\r\n\r\nWould love to be able to just grab something which we can dynamically await on in the workflow itself. Makes this pattern a lot easier and less error prone","createdAt":"2024-07-03T06:26:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2609#issuecomment-2205190057","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6Pjds4","author":{"login":"pilsy"},"authorAssociation":"NONE","body":"Take a look at https://www.npmjs.com/package/chrono-forge?activeTab=readme#handling-circular-workflow-relationships @JakeCooper ","createdAt":"2024-10-12T07:26:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2609#issuecomment-2408438584","viewerDidAuthor":false}],"createdAt":"2022-03-14T18:51:43Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":2609,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":23}}],"state":"OPEN","title":"Add ability to transfer child workflows to new parent run when parent calls continue as new","updatedAt":"2024-10-12T07:26:17Z","url":"https://github.com/temporalio/temporal/issues/2609"}
