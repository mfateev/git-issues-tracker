{"assignees":[{"id":"MDQ6VXNlcjU1MTU2Nzg=","login":"shawnhathaway","name":"Shawn Hathaway","databaseId":0},{"id":"MDQ6VXNlcjU1NTIzODE=","login":"mastermanu","name":"","databaseId":0}],"author":{"id":"MDQ6VXNlcjE0NjM2MjI=","is_bot":false,"login":"mfateev","name":"Maxim Fateev"},"body":"https://github.com/uber/cadence/issues/3351","closedAt":"2020-07-31T18:56:06Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY1ODk4OTAyMQ==","author":{"login":"samarabbas"},"authorAssociation":"MEMBER","body":"Need to verify if this happens with Temporal.","createdAt":"2020-07-15T20:22:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/470#issuecomment-658989021","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2NzMwMDA1Ng==","author":{"login":"mastermanu"},"authorAssociation":"MEMBER","body":"This does not reproduce on the latest temporal server bits:\r\n\r\nWorkflow History:\r\n\r\n   5  StartChildWorkflowExecutionInitiated  {Namespace:default,                                                                                                       \r\n                                            WorkflowId:sanity-standard-2020-07-31T18:48:05Z,                                                                          \r\n                                            WorkflowType:{Name:bench-driver},                                                                                         \r\n                                            TaskQueue:{Name:temporal-bench,                                                                                           \r\n                                            Kind:Normal}, Input:[{Concurrency:2 Count:2                                                                               \r\n                                            Parameters:map[Basic:map[SequenceCount:0]                                                                                 \r\n                                            ConfigDriven:map[BuiltInType: TotalInstances:0]                                                                           \r\n                                            Pandemic:map[Depth:2 Fanout:7 Type:standard]                                                                              \r\n                                            Reactor:map[SignalsPerRun:0 SignalsTotal:0                                                                                \r\n                                            TotalExecutions:0] Type:pandemic]}],                                                                                      \r\n                                            WorkflowExecutionTimeout:40s,                                                                                             \r\n                                            WorkflowRunTimeout:40s, WorkflowTaskTimeout:5s,                                                                           \r\n                                            ParentClosePolicy:Terminate,                                                                                              \r\n                                            WorkflowTaskCompletedEventId:4,                                                                                           \r\n                                            WorkflowIdReusePolicy:AllowDuplicate,                                                                                     \r\n                                            **RetryPolicy:{InitialInterval:1s,                                                                                          \r\n                                            BackoffCoefficient:2,                                                                                                     \r\n                                            MaximumInterval:5s, MaximumAttempts:5,                                                                                    \r\n                                            NonRetryableErrorTypes:[len=0]},**                                                                                          \r\n                                            Header:{Fields:map{}}}                                                                                                    \r\n   6  ChildWorkflowExecutionStarted         {Namespace:default, InitiatedEventId:5,                                                                                   \r\n                                            WorkflowExecution:{WorkflowId:sanity-standard-2020-07-31T18:48:05Z,                                                       \r\n                                            RunId:7a7ecee7-b617-41f4-96fa-3ee5a3de9351},                                                                              \r\n                                            WorkflowType:{Name:bench-driver}, Header:{Fields:map{}}}                                                                  \r\n   7  WorkflowTaskScheduled                 {TaskQueue:{Name:temporal-dev:8c482def-d658-4a35-8216-d2ebc259106a,                                                       \r\n                                            Kind:Sticky}, StartToCloseTimeout:5s, Attempt:1}                                                                          \r\n   8  WorkflowTaskStarted                   {ScheduledEventId:7,                                                                                                      \r\n                                            Identity:617231@temporal-dev@,                                                                                            \r\n                                            RequestId:9ef55904-af4e-4b43-9e22-878fb70f3bfe}                                                                           \r\n   9  WorkflowTaskCompleted                 {ScheduledEventId:7, StartedEventId:8,                                                                                    \r\n                                            Identity:617231@temporal-dev@,                                                                                            \r\n                                            BinaryChecksum:94f4b578a0ec8b544ae3b099702269cf}                                                                          \r\n  10  ChildWorkflowExecutionFailed          **{Failure:{Message:simulated failure to exercise retry, Source:GoSDK,                                                      \r\n                                            FailureInfo:&Failure_ApplicationFailureInfo{ApplicationFailureInfo:&ApplicationFailureInfo{Type:errorString,NonRetryable  \r\n                                            :false,Detai ls:nil,},}}, Namespace:default, WorkflowExecution:{WorkflowId:sanity-standard-2020-07-31T18:48:05Z,          \r\n                                            RunId:ea886b6d-5a94-4faa-a0e1-c3f728e3afa4}, WorkflowType:{Name:bench-driver}, InitiatedEventId:5, StartedEventId:6,      \r\n                                            RetryState:MaximumAttemptsReached}** \r\n\r\nI see the Child Workflow print its start log 5 times before I finally get the following error:\r\n\r\n2020-07-31T11:53:04.592-0700\tWARN\tsanity/workflow.go:75\tworkflow failed\t{\"Namespace\": \"default\", \"TaskQueue\": \"temporal-bench\", \"WorkerID\": \"617657@temporal-dev@\", \"WorkflowType\": \"sanity\", \"WorkflowID\": \"1\", \"RunID\": \"4f9d55b3-a14d-4eff-b3fc-cca4f05a2c16\", \"scenarioName\": \"pandemicStandard\", \"Error\": \"child workflow execution error (workflowID: sanity-standard-2020-07-31T18:52:27Z, runID: fe22384c-b43a-42ab-bbc3-1e7f29cc55c5, initiatedEventID: 5, startedEventID: 6, workflowType: bench-driver): simulated failure to exercise retry\"}\r\ngithub.com/temporalio/temporal-bench/common.(*ZapAdapter).Warn\r\n\t/home/manu/work/temporal-bench/common/zap_adapter.go:70\r\ngo.temporal.io/sdk/internal/log.(*ReplayLogger).Warn\r\n\t/home/manu/go/pkg/mod/go.temporal.io/sdk@v0.27.1-0.20200731022914-4dfdb125c775/internal/log/replay_logger.go:68\r\ngithub.com/temporalio/temporal-bench/workflows/sanity.executeScenario\r\n\t/home/manu/work/temporal-bench/workflows/sanity/workflow.go:103\r\ngithub.com/temporalio/temporal-bench/workflows/sanity.SanityWorkflow\r\n\t/home/manu/work/temporal-bench/workflows/sanity/workflow.go:75\r\nreflect.Value.call\r\n\t/usr/local/go/src/reflect/value.go:460\r\nreflect.Value.Call\r\n\t/usr/local/go/src/reflect/value.go:321\r\ngo.temporal.io/sdk/internal.(*workflowEnvironmentInterceptor).ExecuteWorkflow\r\n\t/home/manu/go/pkg/mod/go.temporal.io/sdk@v0.27.1-0.20200731022914-4dfdb125c775/internal/workflow.go:370\r\ngo.temporal.io/sdk/internal.(*workflowExecutor).Execute\r\n\t/home/manu/go/pkg/mod/go.temporal.io/sdk@v0.27.1-0.20200731022914-4dfdb125c775/internal/internal_worker.go:759\r\ngo.temporal.io/sdk/internal.(*syncWorkflowDefinition).Execute.func1\r\n\t/home/manu/go/pkg/mod/go.temporal.io/sdk@v0.27.1-0.20200731022914-4dfdb125c775/internal/internal_workflow.go:491\r\ngo.temporal.io/sdk/internal.(*dispatcherImpl).NewCoroutine.func1\r\n\t/home/manu/go/pkg/mod/go.temporal.io/sdk@v0.27.1-0.20200731022914-4dfdb125c775/internal/internal_workflow.go:903\r\n","createdAt":"2020-07-31T18:56:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/470#issuecomment-667300056","viewerDidAuthor":false}],"createdAt":"2020-06-19T02:05:35Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":{"number":2,"title":"Code Complete","description":"","dueOn":"2020-07-31T00:00:00Z"},"number":470,"reactionGroups":[],"state":"CLOSED","title":"ChildWorkflows not being retried with MySQL persistence","updatedAt":"2020-07-31T18:56:06Z","url":"https://github.com/temporalio/temporal/issues/470"}
