{"assignees":[],"author":{"id":"MDQ6VXNlcjU1NTIzODE=","is_bot":false,"login":"mastermanu","name":""},"body":"If I start out with a large retention period, realize it is too big, and then reduce it, only new Workflows will be created with the smaller retention period. We still have to wait the original retention period in order for those older workflows to get cleaned up. Would be nice if reducing the retention period gives the option of cleaning up completed workflows whose age exceeds the period.","closedAt":"2023-08-27T17:33:03Z","comments":[{"id":"IC_kwDODNqesM5lA2ZH","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"This is now possible to do via batch operation. We decided to not auto trigger a batch delete but user has the ability to trigger a batch delete with query filter for workflows that has closed for more than X days.","createdAt":"2023-08-27T17:33:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1598#issuecomment-1694721607","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5udoQs","author":{"login":"gabrielalmeida"},"authorAssociation":"NONE","body":"A warning indicating the retention change will affect only new workflows would have helped a lot understanding our recent situation. A note stating that batch-delete is the way to go to handle previous retention policy leftovers would also be nice.\r\n\r\nWe had `history_nodes` table growing unexpectedly for a few days because another collaborator, unaware of this behavior, increased and then after a while reduced the retention policy. There was no easy way to track why this happened, since the current value reported by `temporal operator namespace describe` was \"as expected\", nor we could find any docs about this behavior.\r\n\r\nAdding some keywords here to index them and help if someone else is struggling to find this info: `historyScannerVerifyRetention`, `historyScannerEnabled`, `WorkflowExecutionRetentionTtl`, scavenger, cleanup","createdAt":"2023-12-13T04:43:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/temporal/issues/1598#issuecomment-1853260844","viewerDidAuthor":false}],"createdAt":"2021-06-05T01:06:59Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwyNTk0NTYwMDQy","name":"backlog","description":"","color":"0144E5"},{"id":"MDU6TGFiZWwzMDAxNDk5NzYw","name":"operations","description":"","color":"f9d0c4"}],"milestone":null,"number":1598,"reactionGroups":[],"state":"CLOSED","title":"reducing namespace retention period should delete retained workflows that exceed the new period","updatedAt":"2023-12-13T04:43:02Z","url":"https://github.com/temporalio/temporal/issues/1598"}
