{"assignees":[],"author":{"id":"MDQ6VXNlcjkwMTcxMg==","is_bot":false,"login":"thewmo","name":""},"body":"## Expected Behavior\r\n\r\nIf I configure the `publicClient` used by the worker role to an endpoint that uses TLS, and further if I specify TLS attributes in `tls.frontend.client`, I expect the SdkClient to attempt to connect via TLS.\r\n\r\n## Actual Behavior\r\n\r\nThe SdkClient will only attempt to connect via TLS if TLS is configured in the `tls.frontend.server` block. This is not always true, for example, if TLS is being terminated by an upstream load balancer. This results in the worker failing to start correctly and ultimately terminating with message `error starting scanner` and error `context deadline exceeded`.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Configure a temporal cluster such that the frontend service operates in plaintext but has an upstream load balancer supporting GRPC over TLS.\r\n  1. Configure the worker service with the `publicClient.hostPort` pointing at the load balancer endpoint.\r\n  1. Observe that the worker fails to start because it attempts a plain TCP connection to the TLS endpoint.\r\n\r\n## Specifications\r\n\r\n  - Version: 1.12.2\r\n  - Platform: AWS ECS with frontend upstream ALB\r\n\r\nNote that I nearly filed this as a suggestion or enhancement rather than a bug, because it is probably acceptable when running via the Kubernetes Helm Chart. However it will impact users running open source Temporal in other environments, and make for a difficult-to-debug error.","closedAt":"2021-10-15T16:39:54Z","comments":[{"id":"IC_kwDODNqesM43-sp2","author":{"login":"thewmo"},"authorAssociation":"CONTRIBUTOR","body":"Submitted a PR with a fix at https://github.com/temporalio/temporal/pull/2036","createdAt":"2021-10-08T23:53:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2035#issuecomment-939182710","viewerDidAuthor":false},{"id":"IC_kwDODNqesM44Swt7","author":{"login":"thewmo"},"authorAssociation":"CONTRIBUTOR","body":"Note that after discussion with @sergeybykov we merged a [fix](https://github.com/temporalio/temporal/pull/2036) for this issue.","createdAt":"2021-10-15T16:39:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/2035#issuecomment-944442235","viewerDidAuthor":false}],"createdAt":"2021-10-08T23:12:50Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":2035,"reactionGroups":[],"state":"CLOSED","title":"Worker client TLS unsupported if TLS is not provided directly by frontend","updatedAt":"2021-10-15T16:39:54Z","url":"https://github.com/temporalio/temporal/issues/2035"}
