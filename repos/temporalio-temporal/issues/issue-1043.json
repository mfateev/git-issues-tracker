{"assignees":[{"id":"MDQ6VXNlcjg3NjI4OTM=","login":"wxing1292","name":"Wenquan Xing","databaseId":0}],"author":{"id":"MDQ6VXNlcjg3NjI4OTM=","is_bot":false,"login":"wxing1292","name":"Wenquan Xing"},"body":"**Is your feature request related to a problem? Please describe.**\r\nWhen a struct need to start background thread for maintenance, one common patten is to use `common.Daemon` interface and implement the corresponding `Start` and `Stop` functions. To guarantee the at most once execution, following logic is added:\r\n\r\n```go\r\nfunc Start() {\r\n\tif !atomic.CompareAndSwapInt32(\r\n\t\t&e.status,\r\n\t\tcommon.DaemonStatusInitialized,\r\n\t\tcommon.DaemonStatusStarted,\r\n\t) {\r\n\t\treturn\r\n\t}\r\n}\r\n```\r\n\r\n```go\r\nfunc Stop() {\r\n\tif !atomic.CompareAndSwapInt32(\r\n\t\t&e.status,\r\n\t\tcommon.DaemonStatusStarted,\r\n\t\tcommon.DaemonStatusStopped,\r\n\t) {\r\n\t\treturn\r\n\t}\r\n}\r\n```\r\n\r\nThe above logic is scattered within the entire server repo, we should abstract a common lib and reuse\r\n","closedAt":"2024-03-16T00:51:18Z","comments":[],"createdAt":"2020-12-02T03:01:46Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwxNzkwMTM1NzM5","name":"refactoring","description":"","color":"e8b181"},{"id":"MDU6TGFiZWwyNTc2NTM1ODQ2","name":"difficulty: easy","description":"","color":"68d662"}],"milestone":null,"number":1043,"reactionGroups":[],"state":"CLOSED","title":"Unify common.Daemon interface and common logic","updatedAt":"2024-03-16T00:51:18Z","url":"https://github.com/temporalio/temporal/issues/1043"}
