{"assignees":[],"author":{"id":"U_kgDOC7O-dA","is_bot":false,"login":"gasaha12331","name":""},"body":"## Expected Behavior\nWorkflow history/activity should be visible in temporal ui.\n\n## Actual Behavior\n\nNot able to see history/activity of any workflow in temporal.\nGetting this error in temporal history pods.\n\n```\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x172da60]\ngoroutine 33806 [running]:\ngo.temporal.io/server/common/persistence/sql.(*sqlExecutionStore).getVisibilityTasks(0xc00078ed50, {0x2d8cd50, 0xc005c15aa0}, 0xc003668480)\n /home/builder/temporal/common/persistence/sql/execution_tasks.go:767 +0x440\ngo.temporal.io/server/common/persistence/sql.(*sqlExecutionStore).getHistoryImmediateTasks(0x0?, {0x2d8cd50?, 0xc005c15aa0?}, 0x0?)\n /home/builder/temporal/common/persistence/sql/execution_tasks.go:137 +0x319\ngo.temporal.io/server/common/persistence/sql.(*sqlExecutionStore).GetHistoryTasks(0x1?, {0x2d8cd50?, 0xc005c15aa0?}, 0x0?)\n /home/builder/temporal/common/persistence/sql/execution_tasks.go:89 +0x106\ngo.temporal.io/server/common/persistence.(*executionManagerImpl).GetHistoryTasks(0xc0006b0a00, {0x2d8cd50, 0xc005c15aa0}, 0xc003668480)\n /home/builder/temporal/common/persistence/execution_manager.go:855 +0xba\ngo.temporal.io/server/common/persistence.(*executionRateLimitedPersistenceClient).GetHistoryTasks(0xc00078ed80, {0x2d8cd50, 0xc005c15aa0}, 0xc003668480)\n /home/builder/temporal/common/persistence/persistence_rate_limited_clients.go:353 +0xa2\ngo.temporal.io/server/common/persistence.(*executionPersistenceClient).GetHistoryTasks(0xc0006afc80, {0x2d8cd50, 0xc005c15aa0}, 0xc003668480)\n /home/builder/temporal/common/persistence/persistence_metric_clients.go:402 +0x2dc\ngo.temporal.io/server/common/persistence.(*executionRetryablePersistenceClient).GetHistoryTasks.func1({0x2d8cd50?, 0xc005c15aa0?})\n /home/builder/temporal/common/persistence/persistence_retryable_clients.go:380 +0x49\ngo.temporal.io/server/common/backoff.ThrottleRetryContext({0x2d8cd50, 0xc005c15aa0}, 0xc003fcf9e8, {0x2d6fce0, 0xc000055fb0}, 0x0?)\n /home/builder/temporal/common/backoff/retry.go:145 +0x20a\ngo.temporal.io/server/common/persistence.(*executionRetryablePersistenceClient).GetHistoryTasks(0x1?, {0x2d8cd50?, 0xc005c15aa0?}, 0x0?)\n /home/builder/temporal/common/persistence/persistence_retryable_clients.go:384 +0x73\ngo.temporal.io/server/service/history/queues.NewImmediateQueue.func1.1({0x0, 0x0, 0x0})\n /home/builder/temporal/service/history/queues/queue_immediate.go:80 +0x278\ngo.temporal.io/server/common/collection.(*PagingIteratorImpl[...]).getNextPage(0x0)\n /home/builder/temporal/common/collection/paging_iterator.go:116 +0x34\ngo.temporal.io/server/common/collection.NewPagingIterator[...](0xc003668360)\n /home/builder/temporal/common/collection/paging_iterator.go:52 +0x88\ngo.temporal.io/server/service/history/queues.(*IteratorImpl).HasNext(0xc008defce0, 0x0)\n /home/builder/temporal/service/history/queues/iterator.go:74 +0xb8\ngo.temporal.io/server/service/history/queues.(*SliceImpl).SelectTasks(0xc007122000, 0x0?, 0x64)\n /home/builder/temporal/service/history/queues/slice.go:375 +0x199\ngo.temporal.io/server/service/history/queues.(*ReaderImpl).loadAndSubmitTasks(0xc003400160)\n /home/builder/temporal/service/history/queues/reader.go:468 +0x216\ngo.temporal.io/server/service/history/queues.(*ReaderImpl).eventLoop(0xc003400160)\n /home/builder/temporal/service/history/queues/reader.go:436 +0x66\ncreated by go.temporal.io/server/service/history/queues.(*ReaderImpl).Start\n /home/builder/temporal/service/history/queues/reader.go:178 +0x8a\n\n```\n\n","closedAt":"2025-01-30T07:24:51Z","comments":[],"createdAt":"2025-01-24T13:29:03Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":7159,"reactionGroups":[],"state":"CLOSED","title":"Crashback loop in temporal history pods","updatedAt":"2025-01-30T07:24:51Z","url":"https://github.com/temporalio/temporal/issues/7159"}
