{"assignees":[],"author":{"id":"MDQ6VXNlcjIxODY5Ng==","is_bot":false,"login":"markmark206","name":"Mark Markaryan"},"body":"## Expected Behavior\r\n\r\n[POSTGRES_SEEDS](https://github.com/temporalio/temporal/blob/0298eb7a78db8eee5424fd588ba61aed6555c775/docker/docker-compose-postgres.yml#L26) value in docker-compose should be always honored.\r\n\r\nhttps://github.com/temporalio/temporal/blob/0298eb7a78db8eee5424fd588ba61aed6555c775/docker/docker-compose-postgres.yml#L17-L28\r\n\r\n## Actual Behavior\r\n\r\nSetting [POSTGRES_PWD](https://github.com/temporalio/temporal/blob/0298eb7a78db8eee5424fd588ba61aed6555c775/docker/docker-compose-postgres.yml#L25) to nothing or `''` causes `POSTGRES_SEEDS` value to be ignored and defaulted to `127.0.0.1`\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. edit [docker-compose-postgress.yml](https://github.com/temporalio/temporal/blob/0298eb7a78db8eee5424fd588ba61aed6555c775/docker/docker-compose-postgres.yml#L26) to replace `POSTGRES_PWD` line with the following line:\r\n\r\n```\r\n      - \"POSTGRES_PWD=''\"\r\n```\r\n\r\nand, because we don't care about schema setup, replace \r\n```\r\n    image: temporalio/auto-setup:0.23.1\r\n```\r\nwith \r\n```\r\n    image: temporalio/server:0.23.1\r\n```\r\n\r\nalso, set `POSTGRES_SEEDS` value to a string that doesn't correspond to an accessible hostname (e. g. `nosuchhost`).\r\n\r\n  2.  start things up: \r\n```\r\ntemporal/docker $ docker-compose -f docker-compose-posgres.yml up\r\n```\r\n  3. watch the log complain about not being able to connect to `127.0.0.1` (instead of `nosuchhost`)\r\n\r\n```\r\ntemporal_1  | 2020/06/16 17:18:06 sql schema version compatibility check failed: unable to create SQL connection: dial tcp 127.0.0.1:5432: connect: connection refused\r\n```\r\n## Specifications\r\n\r\n  - Version: 0.23.1\r\n  - Platform: mac os\r\n\r\nThis issue was reported by Niels in our slack: https://temporalio.slack.com/archives/CTRCR8RBP/p1592310464138900\r\n\r\n(Thank you!)","closedAt":"2020-06-19T12:14:22Z","comments":[],"createdAt":"2020-06-16T17:37:27Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":460,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"docker-compose-postres.yml: setting POSTGRES_PWD to empty causes POSTGRES_SEEDS to be ignored","updatedAt":"2020-06-19T12:14:22Z","url":"https://github.com/temporalio/temporal/issues/460"}
