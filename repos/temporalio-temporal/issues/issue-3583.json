{"assignees":[],"author":{"id":"MDQ6VXNlcjExOTQyMg==","is_bot":false,"login":"tsurdilo","name":"Tihomir Surdilovic"},"body":"In some failure situations users end up in a state where mutable state is missing for exec but data is still in visibility store. \r\n\r\nAdmin delete seems to only work if mutable state is found, and if not skips visibility delete: https://github.com/temporalio/temporal/blob/master/service/frontend/adminHandler.go#L1443\r\n\r\nPlease allow for visibility to still try to be removed in this case.","closedAt":"2022-11-18T22:48:36Z","comments":[{"id":"IC_kwDODNqesM5ONLdQ","author":{"login":"yiminc"},"authorAssociation":"MEMBER","body":"If you look closer, after it failed to load mutable state, it add some warning logging to the respond, and it proceed to delete visibility if possible. Note that, if visibility store is Cassandra, it is not possible to delete visibility without mutable state due to it rely on StartTime or Close time which is only available from mutable state.","createdAt":"2022-11-11T19:02:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/3583#issuecomment-1312077648","viewerDidAuthor":false}],"createdAt":"2022-11-11T18:26:09Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":3583,"reactionGroups":[],"state":"CLOSED","title":"Improve Admin DeleteWorkflowExecution to work if execution mutable state is missing","updatedAt":"2022-11-18T22:48:36Z","url":"https://github.com/temporalio/temporal/issues/3583"}
