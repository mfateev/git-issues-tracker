{"assignees":[],"author":{"id":"MDQ6VXNlcjIxODM5MDQ=","is_bot":false,"login":"tomwheeler","name":"Tom Wheeler"},"body":"When starting a local Temporal development server using Temporal CLI version 0.12.0, I observe \"error in prometheus reporter\" warnings in the terminal window. Although I experience this while using the CLI, I believe the underlying problem is in the server code, so I am reporting it here. There have been [similar issues](https://github.com/temporalio/temporal/issues?q=is%3Aissue+%22a+previously+registered+descriptor+with+the+same+fully-qualified+name%22+is%3Aclosed) in the past, though none still open nor recent enough that I believe this to be a duplicate of those.\r\n\r\n## Expected Behavior\r\nWhen starting the development server via the CLI, I expect to see a couple of relevant startup messages. Since the server is self-contained and requires no setup or configuration from the user, I do not expect to see warnings or errors unless I've started the program incorrectly (e.g., specifying malformed arguments or attempting to bind to a port already in use).\r\n\r\n## Actual Behavior\r\nSoon after starting the development server via the CLI, I consistently see two or more warnings with the message \"error in prometheus reporter\" in the terminal window where that server is running. Here is a complete copy of the terminal session in which I started the development server about 45 minutes ago (there are two such warnings, both of which appeared in the first 10 minutes):\r\n\r\n```\r\n$ temporal server start-dev\r\nTemporal server is running at: localhost:7233\r\nWeb UI is running at: http://localhost:8233\r\nMetrics available at: http://localhost:52072/metrics\r\ntime=2024-05-09T16:41:20.407 level=WARN msg=\"error in prometheus reporter\" error=\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"AccessHistoryOld\\\", help: \\\"AccessHistoryOld counter\\\", constLabels: {}, variableLabels: [{namespace <nil>} {service_name <nil>} {operation <nil>}]} has different label names or a different help string\"\r\ntime=2024-05-09T16:41:20.419 level=WARN msg=\"error in prometheus reporter\" error=\"a previously registered descriptor with the same fully-qualified name as Desc{fqName: \\\"AccessHistoryOld\\\", help: \\\"AccessHistoryOld counter\\\", constLabels: {}, variableLabels: [{service_name <nil>} {operation <nil>} {namespace <nil>}]} has different label names or a different help string\"\r\n```\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Install Temporal CLI version 0.12.0 (which is based on Temporal Server release 1.23.0). I did this via homebrew, although I doubt that the installation method is relevant\r\n  2. Run `temporal server start-dev` to start the development server\r\n  3. Run a few Workflows. It does not matter which. I have experienced this while running a reference application, exercise code from a training course, and examples from the `samples-go` repository. \r\n\r\n## Specifications\r\n\r\n  - Version: Temporal CLI version 0.12.0\r\n  - Platform: M2 MacBook Pro, running MacOS 13.6.6\r\n","closedAt":"2024-05-15T17:50:31Z","comments":[],"createdAt":"2024-05-09T22:35:25Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":null,"number":5897,"reactionGroups":[],"state":"CLOSED","title":"\"error in prometheus reporter\" warnings in Temporal Server 1.23.0 (CLI version 0.12.0)","updatedAt":"2024-05-15T17:50:31Z","url":"https://github.com/temporalio/temporal/issues/5897"}
