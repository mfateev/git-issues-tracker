{"assignees":[],"author":{"id":"MDQ6VXNlcjM3MjE0MQ==","is_bot":false,"login":"skrul","name":"Steve Krulewitz"},"body":"## Expected Behavior\r\n\r\nGenerally a \"dryrun\" feature of a tool will run through some complicated process without actually applying changes, then removing the option will cause the changes to be applied. This is useful to gain some confidence that running the process won't fail in the middle due to some unexpected situation. \r\n\r\n## Actual Behavior\r\n\r\nThe \"dryrun\" feature of the temporal-sql-tool seems to be there for testing purposes and will create a new temporary database to execute the schema change on. However, it also seems to execute the schema update regardless of the setting.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n```\r\n$ ./temporal-sql-tool --user root create --database temporal\r\n$ ./temporal-sql-tool --user root setup-schema -v 0.0\r\n2020/05/19 11:16:19 Starting schema setup, config=&{SchemaFilePath: InitialVersion:0.0 Overwrite:false DisableVersioning:false}\r\n2020/05/19 11:16:19 Setting up version tables\r\n2020/05/19 11:16:19 Setting initial schema version to 0.0\r\n2020/05/19 11:16:19 Updating schema update log\r\n2020/05/19 11:16:19 Schema setup complete\r\n$ ./temporal-sql-tool --user root update-schema --dryrun --schema-dir schema/mysql/v57/temporal/versioned\r\n2020/05/19 11:16:46 UpdateSchemeTask started, config=&{DBName: TargetVersion: SchemaDir:schema/mysql/v57/temporal/versioned IsDryRun:true}\r\n2020/05/19 11:16:46 Starting schema setup, config=&{SchemaFilePath: InitialVersion:0.0 Overwrite:true DisableVersioning:false}\r\n2020/05/19 11:16:46 Setting up version tables\r\n2020/05/19 11:16:46 Setting initial schema version to 0.0\r\n2020/05/19 11:16:46 Updating schema update log\r\n2020/05/19 11:16:46 Schema setup complete\r\n2020/05/19 11:16:46 ---- Executing updates for version 0.1 ----\r\n.......\r\n2020/05/19 11:16:47 ---- Done ----\r\n2020/05/19 11:16:47 Schema updated from 0.3 to 0.4\r\n2020/05/19 11:16:47 UpdateSchemeTask done\r\n$ mysql -u  root -e \"show tables\" temporal\r\n+---------------------------+\r\n| Tables_in_temporal        |\r\n+---------------------------+\r\n| activity_info_maps        |\r\n| buffered_events           |\r\n| child_execution_info_maps |\r\n| cluster_membership        |\r\n....\r\n| transfer_tasks            |\r\n+---------------------------+\r\n```\r\n\r\n## Specifications\r\n\r\n  - Version: I ran the  test on v0.21.1 but the problem exists on v0.23.0 as well\r\n  - Platform:  MacOS\r\n","closedAt":"2021-02-25T00:13:01Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc4NTQ3ODgwNQ==","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"dry run ability is removed, since dry run functionality does not really do anything other than letting user to shoot them in the foot.\r\n\r\nref #1300 ","createdAt":"2021-02-25T00:13:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/392#issuecomment-785478805","viewerDidAuthor":false}],"createdAt":"2020-05-19T18:19:20Z","labels":[{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"}],"milestone":{"number":1,"title":"Initial Temporal Release","description":"","dueOn":null},"number":392,"reactionGroups":[],"state":"CLOSED","title":"temporal-sql-tool's \"dryrun\" option is confusing","updatedAt":"2021-02-25T00:13:01Z","url":"https://github.com/temporalio/temporal/issues/392"}
