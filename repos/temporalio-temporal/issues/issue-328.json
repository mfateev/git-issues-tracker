{"assignees":[],"author":{"id":"MDQ6VXNlcjE0NjM2MjI=","is_bot":false,"login":"mfateev","name":"Maxim Fateev"},"body":"They claim supporting LWT: https://docs.aws.amazon.com/keyspaces/latest/devguide/functional-differences.html\r\n\r\nThis would be great for users running on AWS.","closedAt":null,"comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg4MDE4MTY0OA==","author":{"login":"rfwagner"},"authorAssociation":"NONE","body":"They don't support LOGGED BATCH. Isn't that a showstopper at this point?","createdAt":"2021-07-14T20:19:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-880181648","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg4MDE4NzU4OQ==","author":{"login":"samarabbas"},"authorAssociation":"MEMBER","body":"Yes we need ability to update multiple rows in single batch protected by condition.  So this would be a blocker.","createdAt":"2021-07-14T20:29:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-880187589","viewerDidAuthor":false},{"id":"IC_kwDODNqesM44ZlAt","author":{"login":"joebowbeer"},"authorAssociation":"NONE","body":"Some discussion here as well:\r\n\r\nhttps://community.temporal.io/t/running-on-amazon-keyspaces/159/7","createdAt":"2021-10-18T22:54:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-946229293","viewerDidAuthor":false},{"id":"IC_kwDODNqesM44Zl3B","author":{"login":"joebowbeer"},"authorAssociation":"NONE","body":"AWS Keyspaces differences:\r\n- https://docs.aws.amazon.com/keyspaces/latest/devguide/keyspaces-vs-cassandra.html\r\n- https://docs.aws.amazon.com/keyspaces/latest/devguide/functional-differences.html\r\n- https://docs.aws.amazon.com/keyspaces/latest/devguide/cassandra-apis.html\r\n- https://docs.aws.amazon.com/keyspaces/latest/devguide/consistency.html#UnsupportedConsistency\r\n\r\nIs `LOGGED BATCH` support the only thing that is missing?\r\n\r\nIn community forum someone stated that `LOCAL_QUORUM` consistency level may be sufficient. Can someone confirm?\r\n\r\nDoes anyone know how to track Keyspaces progress other than via AWS support? I can't find a public roadmap or issue list.","createdAt":"2021-10-18T23:02:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-946232769","viewerDidAuthor":false},{"id":"IC_kwDODNqesM44Zo9O","author":{"login":"robzienert"},"authorAssociation":"CONTRIBUTOR","body":"Conditional delete is another feature missing.","createdAt":"2021-10-18T23:27:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"EYES","users":{"totalCount":1}}],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-946245454","viewerDidAuthor":false},{"id":"IC_kwDODNqesM4-CpZo","author":{"login":"nwheeler81"},"authorAssociation":"NONE","body":"> Conditional delete is another feature missing.\r\n\r\nI think, Amazon Keyspaces supports condition delete.\r\ndelete from table where pk=? and cl=? IF col>9;\r\n\r\n@ Row 1\r\n-----------+-------\r\n [applied] | False\r\n col           | 9 ","createdAt":"2022-02-15T22:58:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-1040881256","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5AV9ya","author":{"login":"freeqaz"},"authorAssociation":"NONE","body":"Any update on this, out of curiosity? I'm likely not the only person looking to answer this question. We're looking to use Temporal, but we're not sure if we should go with Cassandra or SQL.\r\n\r\nManaging a Cassandra cluster ourselves sounds pretty bad, and I would prefer to use Keyspaces over that. If anybody is more skilled at testing out a deployment of Temporal on Keyspaces, that would be super helpful. Thanks!","createdAt":"2022-03-25T22:54:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":3}}],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-1079499930","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5AV_PD","author":{"login":"freeqaz"},"authorAssociation":"NONE","body":"Just to add some more context from poking around on existing threads:\r\n\r\n## LWT support (added)\r\n\r\n@mfateev said [here](https://community.temporal.io/t/aws-keyspace-as-managed-cassandra-for-temporal/1762) that they need AWS Keyspaces to add LWT support. From the time this was posted, AWS must have added this because [this](https://docs.aws.amazon.com/keyspaces/latest/devguide/functional-differences.html#functional-differences.light-transactions) page says the following:\r\n\r\n> \"Amazon Keyspaces (for Apache Cassandra) fully supports compare and set functionality on INSERT, UPDATE, and DELETE commands, which are known as lightweight transactions (LWTs) in Apache Cassandra. As a serverless offering, Amazon Keyspaces (for Apache Cassandra) provides consistent performance at any scale, including for lightweight transactions. With Amazon Keyspaces, there is no performance penalty for using lightweight transactions.\"\r\n\r\n## Conditional delete support (probably added, but I'm a noob)\r\n\r\nThe comment above from @nwheeler81 shows conditional deletes working, and the Keyspaces docs say the [following](https://docs.aws.amazon.com/keyspaces/latest/devguide/functional-differences.html#functional-differences.batch):\r\n\r\n> \"Amazon Keyspaces supports unlogged batch commands with up to 30 commands in the batch. Only unconditional INSERT, UPDATE, or DELETE commands are permitted in a batch. Logged batches are not supported.\"\r\n\r\nThis is for batches, and nothing else is mentioned anywhere on the website. Maybe with more digging I can sort this out, but @nwheeler81's comment likely trumps the docs.\r\n\r\n## Logged Batch support (not supported still)\r\n\r\nThis page on [supported Cassandra features](https://docs.aws.amazon.com/keyspaces/latest/devguide/cassandra-apis.html#cassandra-api-support) is probably the best place to \"glance\" for info.\r\n\r\nThey say that Logged Batch is unsupported, but unlogged batches are supported. I don't know enough about Temporal or Cassandra to understand what this means.\r\n\r\n-------\r\n\r\nThat's my summary of the state of this so far. If there is anything else missing that Temporal uses, I'm happy to dig in and verify. Otherwise, it seems like the only thing missing is \"Logged Batch\" support.\r\n\r\nIs there a workaround possible for that?","createdAt":"2022-03-25T23:08:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-1079505859","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5Tuqcq","author":{"login":"ouanixi"},"authorAssociation":"NONE","body":"I think there's also a consistency level that is not matched. \r\nA few comments in the code state that \"quorum\" level consistency is required. [Here's one.](https://github.com/temporalio/temporal/blob/ad8342bd5b95f5a3c243f7d0f12ae561a91633b6/common/persistence/cassandra/cassandraPersistence.go#L2551)\r\nWhich is [not supported](https://docs.aws.amazon.com/keyspaces/latest/devguide/consistency.html) by keyspaces","createdAt":"2023-01-26T09:27:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-1404741418","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5duxcw","author":{"login":"Zonalds"},"authorAssociation":"NONE","body":"hi,\r\n\r\nHas anything changed? ","createdAt":"2023-06-01T18:02:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":6}}],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-1572542256","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5xATs6","author":{"login":"karunagoyal"},"authorAssociation":"NONE","body":"Hi all,\r\nCan anyone clarify if it is supported?","createdAt":"2024-01-17T14:17:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-1895906106","viewerDidAuthor":false},{"id":"IC_kwDODNqesM52wJuY","author":{"login":"meet-bhagdev"},"authorAssociation":"NONE","body":"Temporal team - i am a product manager at AWS working on Amazon Keyspaces. Would love to re-engage here to understand what we can do to enable [Temporal.io](http://temporal.io/) for Amazon Keyspaces","createdAt":"2024-03-12T18:53:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":23}},{"content":"EYES","users":{"totalCount":1}}],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-1992334232","viewerDidAuthor":false},{"id":"IC_kwDODNqesM59JEhT","author":{"login":"wojo"},"authorAssociation":"NONE","body":"@meet-bhagdev we are evaluating Temporal and would much prefer to use Keyspaces, I think the gaps are above so we'll be watching this closely.","createdAt":"2024-05-08T00:45:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-2099529811","viewerDidAuthor":false},{"id":"IC_kwDODNqesM59rLe5","author":{"login":"jamesbuddrige"},"authorAssociation":"NONE","body":"Also keen to see this! We're currently using Postgres on RDS, but would love to see keyspaces support.","createdAt":"2024-05-13T18:03:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-2108471225","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6DUxs3","author":{"login":"maxime-gaudron"},"authorAssociation":"NONE","body":"@meet-bhagdev any news? :) ","createdAt":"2024-07-02T13:56:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-2203261751","viewerDidAuthor":false},{"id":"IC_kwDODNqesM6-Co_M","author":{"login":"matanbaruch"},"authorAssociation":"NONE","body":"+1","createdAt":"2025-08-14T12:57:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/temporal/issues/328#issuecomment-3188363212","viewerDidAuthor":false}],"createdAt":"2020-04-25T19:27:14Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwyMDE5ODA4MDcy","name":"product-integration","description":"New integration with the product","color":"db6db4"},{"id":"MDU6TGFiZWwyMDE5ODA5MzEz","name":"database","description":"","color":"ea8a77"},{"id":"MDU6TGFiZWwzMTM4ODI4MTE3","name":"up-for-grabs","description":"Issues to consider for external contribution","color":"69CD90"}],"milestone":null,"number":328,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":19}}],"state":"OPEN","title":"Try to run temporal on top of  Amazon Keyspaces","updatedAt":"2025-08-14T12:57:36Z","url":"https://github.com/temporalio/temporal/issues/328"}
