{"assignees":[],"author":{"id":"MDQ6VXNlcjk5NzU4Mg==","is_bot":false,"login":"kkcmadhu","name":""},"body":"I configured temporal 1.21 using k8s and s3 archival on EKS. apparently my s3 access key was in correct. when i started temporal it started fine, but when i \r\n## Expected Behavior\r\nError should have underlying cause\r\n\r\n## Actual Behavior\r\nArchival related errors do not get shown up in create name space calls\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. configure temporal on eks cluster with s3 archival\r\n  2. do not configure s3 access key/or invalid key\r\n  3. start temporal, it gets started successfully\r\n  4.  create a namespace from tctl or client library and you will get 403 without any hint that it origniated from archival/s3.\r\n\r\n\r\n\r\n## Specifications\r\n\r\n  - Version: 1.2.1\r\n  - Platform: k8s/eks\r\n\r\n\r\nhere is the stack trace :\r\n\r\nbash-5.0# tctl --namespace samples-namespace namespace register\r\nError: Register namespace operation failed.\r\nError Details: rpc error: code = Unknown desc = Forbidden: Forbidden\r\nstatus code: 403, request id: 250DCE81B9026FA0, host id: bTkqpS/CChOZrwZw14CL1p8mOfKlnEMU66Pm25Mx33DxGk6a+KD6xLvdso3cX7xhjAopvQ/dUGA=\r\n(‘export TEMPORAL_CLI_SHOW_STACKS=1’ to see stack traces)\r\n\r\nin the front end i see the following in logs\r\n\r\n{“level”:“error”,“ts”:“2020-11-11T11:22:30.917Z”,“msg”:“Unknown error”,“service”:“frontend”,“error”:“Forbidden: Forbidden\\n\\tstatus code: 403, request id: C486AFCD8246BCA6, host id: p3YC1NdyUDJbVfGd6OrQ8IYuLcOmqSYpQaauroLUyQUoF7qkekVFxR+mQrX5bgQC3DVf2/L7BWI=”,“logging-call-at”:“workflowHandler.go:3399”,“stacktrace”:“go.temporal.io/server/common/log/loggerimpl.(*loggerImpl).Error\\n\\t/temporal/common/log/loggerimpl/logger.go:138\\ngo.temporal.io/server/service/frontend.(*WorkflowHandler).error\\n\\t/temporal/service/frontend/workflowHandler.go:3399\\ngo.temporal.io/server/service/frontend.(*WorkflowHandler).RegisterNamespace\\n\\t/temporal/service/frontend/workflowHandler.go:252\\ngo.temporal.io/server/service/frontend.(*DCRedirectionHandlerImpl).RegisterNamespace\\n\\t/temporal/service/frontend/dcRedirectionHandler.go:177\\ngo.temporal.io/server/service/frontend.(*AccessControlledWorkflowHandler).RegisterNamespace\\n\\t/temporal/service/frontend/accessControlledHandler.go:469\\ngo.temporal.io/server/service/frontend.(*WorkflowNilCheckHandler).RegisterNamespace\\n\\t/temporal/service/frontend/workflowNilCheckHandler.go:62\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_RegisterNamespace_Handler.func1\\n\\t/go/pkg/mod/go.temporal.io/api@v1.1.0/workflowservice/v1/service.pb.go:957\\ngo.temporal.io/server/common/rpc.Interceptor\\n\\t/temporal/common/rpc/interceptor.go:35\\ngo.temporal.io/api/workflowservice/v1._WorkflowService_RegisterNamespace_Handler\\n\\t/go/pkg/mod/go.temporal.io/api@v1.1.0/workflowservice/v1/service.pb.go:959\\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.32.0/server.go:1194\\ngoogle.golang.org/grpc.(*Server).handleStream\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.32.0/server.go:1517\\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.2\\n\\t/go/pkg/mod/google.golang.org/grpc@v1.32.0/server.go:859”}\r\n","closedAt":null,"comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc4MTIzMjIxNw==","author":{"login":"slayerjain"},"authorAssociation":"NONE","body":"Just happened to me as well. Thank god for this issue, I was puzzled about why I wasn't able to create a domain. Forgot about the archival feature. ","createdAt":"2021-02-18T10:07:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/983#issuecomment-781232217","viewerDidAuthor":false}],"createdAt":"2020-11-12T08:17:34Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg5","name":"good first issue","description":"Good for newcomers","color":"7057ff"},{"id":"MDU6TGFiZWwxNzkwMTM1NzM5","name":"refactoring","description":"","color":"e8b181"},{"id":"MDU6TGFiZWwyMDE5ODE3MzQ2","name":"potential-bug","description":"","color":"66b9cc"},{"id":"MDU6TGFiZWwyODE3MDk3ODQ0","name":"planning","description":"","color":"006b75"},{"id":"MDU6TGFiZWwzMDAxNDk5NzYw","name":"operations","description":"","color":"f9d0c4"},{"id":"MDU6TGFiZWwzMTM4ODI4MTE3","name":"up-for-grabs","description":"Issues to consider for external contribution","color":"69CD90"}],"milestone":null,"number":983,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":5}}],"state":"OPEN","title":"loggging/exception stack trace not capturing underlying errors","updatedAt":"2021-07-04T20:05:35Z","url":"https://github.com/temporalio/temporal/issues/983"}
