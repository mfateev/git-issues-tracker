{"assignees":[],"author":{"id":"MDQ6VXNlcjE3MzUwOTc=","is_bot":false,"login":"Rastusik","name":"Martin Fris"},"body":"**Is your feature request related to a problem? Please describe.**\r\nWeâ€™ve been testing temporal with Aurora DB and there were problems when we were doing failovers to new master. Temporal services were still connected to the former master and we had to restart all the services to make the cluster work again. The usual setup is to have a virtual IP which is used by the application, and the IP is pointing to the write instance of the mysql (mysql master).\r\n\r\n**Describe the solution you'd like**\r\nThe temporal services should be able to discover that the there is a new master (which means that they are currently connected to a read only slave) in the mysql cluster and they should be able automatically reconnect to the new master.\r\n\r\n**Describe alternatives you've considered**\r\nI don't think there is an alternative solution with MySql.\r\n\r\n**Additional context**\r\n\r\n","closedAt":"2021-07-03T01:53:30Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg3MzI1MDkzMw==","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"additional background\r\nhttps://community.temporal.io/t/temporal-with-mysql-how-to-survive-master-slave-failovers/2496","createdAt":"2021-07-02T20:52:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1703#issuecomment-873250933","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg3MzI3NjMxNQ==","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"@Rastusik \r\n\r\ncan you provide more details about the Aurora failover behavior?\r\n\r\nis the new active / master aurora behind a different DNS?\r\nis the old active / master aurora returning any error if read only?\r\n\r\nany link to aurora behavior or code sample is welcomed","createdAt":"2021-07-02T22:01:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1703#issuecomment-873276315","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg3MzMwNTM5MQ==","author":{"login":"leowmjw"},"authorAssociation":"NONE","body":"@wxing1292 Set rejectReadOnly=true to support Aurora MySQL failover --> https://github.com/go-sql-driver/mysql#rejectreadonly","createdAt":"2021-07-02T23:41:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/temporal/issues/1703#issuecomment-873305391","viewerDidAuthor":false},{"id":"IC_kwDODNqesM40xQ_k","author":{"login":"wxing1292"},"authorAssociation":"CONTRIBUTOR","body":"the potential fix #1705 is included in v1.11.2","createdAt":"2021-07-23T00:48:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/1703#issuecomment-885329892","viewerDidAuthor":false}],"createdAt":"2021-07-02T19:28:52Z","labels":[{"id":"MDU6TGFiZWwxNjIxMDMwNzg3","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1703,"reactionGroups":[],"state":"CLOSED","title":"Add support for MySql/Aurora failover","updatedAt":"2021-07-23T00:48:21Z","url":"https://github.com/temporalio/temporal/issues/1703"}
