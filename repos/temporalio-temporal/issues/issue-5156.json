{"assignees":[{"id":"MDQ6VXNlcjQ2NjcyMw==","login":"dnr","name":"David Reiss","databaseId":0}],"author":{"id":"U_kgDOB-TQaw","is_bot":false,"login":"dzmitry-panamarenka-absa","name":""},"body":"**Author**: Dima Ponomarenko\r\n\r\n### Summary of the feature being proposed\r\nExtend `global:authorization` section of docker config to allow configuring of expected audience value.\r\nCurrently, it's possible to configure JWTClaimMapper via config file. If `defaultJWTClaimMapper` is used, one of the existing checks there is to validate `aud` claim against the expected values received from `audienceGetter.Audience`. But the `audienceGetter` is not defined by default and the only way to set it is to use custom temporal build. If `audienceGetter` is not set, 'aud' is not validated at all. There is no way to configure it using docker config file unlike claimMapper and authorizer. Ideally, we should allow specifying the expected audience value in the docker config itself, but I'd like to hear if you can suggest a better way.\r\n\r\n### What value does this feature bring to Temporal?\r\nThis feature will simplify Temporal setup when JWT-based authentication is used.\r\nAs an example, Azure Active Directory oAuth2. In's commonly used in enterprise environment, where you must check the `aud` because application within your organisation share the same JWT signing key. As a result, another application from your org can successfully authenticate and mimic your JWT claims to get access into your system, unless you check `aud`. https://learn.microsoft.com/en-us/entra/identity-platform/id-token-claims-reference#payload-claims\r\n\r\nIt's possible to build custom Temporal with your own `audienceGetter` backed in. But it requires more knowledge (including golang) and make is harder to maintain. As well as keeping your custom build up to date.\r\nBut I believe the following security feature should be achievable using configuration file and without custom Temporal builds.\r\n### Are you willing to implement this feature yourself?\r\nYes","closedAt":null,"comments":[{"id":"IC_kwDODNqesM5s98wB","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"I am going to forward this to the Temporal server repo...","createdAt":"2023-11-27T16:28:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5156#issuecomment-1828178945","viewerDidAuthor":false},{"id":"IC_kwDODNqesM5zsNXd","author":{"login":"dzmitry-panamarenka-absa"},"authorAssociation":"NONE","body":"Are there any plans to implement this change?\r\nPerhaps you would be willing to accept a contribution to this issue, if we can agree on the design first.","createdAt":"2024-02-13T09:50:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5156#issuecomment-1940968925","viewerDidAuthor":false},{"id":"IC_kwDODNqesM50xwxB","author":{"login":"dzmitry-panamarenka-absa"},"authorAssociation":"NONE","body":"I'd to highlight importance of `aud` check by putting this link to \"JSON Web Token Best Current Practices\" standard [RFC 8725](https://datatracker.ietf.org/doc/html/rfc8725#name-use-and-validate-audience)","createdAt":"2024-02-22T11:00:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5156#issuecomment-1959201857","viewerDidAuthor":false},{"id":"IC_kwDODNqesM63deSh","author":{"login":"robholland"},"authorAssociation":"MEMBER","body":"We would definitely consider a config interface to set this.","createdAt":"2025-07-16T10:33:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/temporal/issues/5156#issuecomment-3077956769","viewerDidAuthor":false}],"createdAt":"2023-11-20T18:21:35Z","labels":[],"milestone":null,"number":5156,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":4}}],"state":"OPEN","title":"Allow configuration of expected audience value for Temporal authorization","updatedAt":"2025-07-16T10:33:31Z","url":"https://github.com/temporalio/temporal/issues/5156"}
