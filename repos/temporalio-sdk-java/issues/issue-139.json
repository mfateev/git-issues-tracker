{"assignees":[],"author":{"id":"MDQ6VXNlcjU0NDk5MQ==","is_bot":false,"login":"kelnos","name":"Brian Tarricone"},"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nWhen building a Temporal app using Scala, we need to add jackson-scala-module so it knows how to handle Scala types.  However, we need access to the `ObjectMapper` to do this.\r\n\r\nThis isn't useful for just Scala; for example, we also have a few other org-specific Jackson modules that we use to make using Twilio-internal JVM types easier with Jackson.\r\n\r\n**Describe the solution you'd like**\r\n\r\nTwo options come to mind:\r\n\r\n1. A new constructor for `JacksonJsonPayloadConverter` that allows us to pass our own `ObjectMapper`.\r\n2. A `getObjectMapper()` method that returns the `ObjectMapper` that's already been created, which allows us to augment its configuration.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nRight now I'm using fragile bits of reflection to fetch the private `ObjectMapper` field to make modifications to it.  Obviously, that's not sustainable.\r\n\r\n**Additional context**\r\n\r\n n/a\r\n","closedAt":"2020-08-23T19:32:43Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY1MjkwMDI5MA==","author":{"login":"michalbric"},"authorAssociation":"NONE","body":"Same issue with Kotlin data classes.\r\nTo save time for anybody until the issue is resolved, the reflection based workaround for Kotlin is as follows:\r\n\r\n```kotlin\r\nval jacksonJsonPayloadConverter = JacksonJsonPayloadConverter()\r\nval privateMapperField = JacksonJsonPayloadConverter::class.java.getDeclaredField(\"mapper\");\r\nprivateMapperField.isAccessible = true\r\nprivateMapperField.set(\r\n    jacksonJsonPayloadConverter,\r\n    ObjectMapper().registerKotlinModule().findAndRegisterModules()\r\n)\r\n\r\nval defaultDataConverter =\r\n        DefaultDataConverter(NullPayloadConverter(), ByteArrayPayloadConverter(), jacksonJsonPayloadConverter)\r\nval workflowClientOptions = WorkflowClientOptions.newBuilder()\r\n        .setDataConverter(defaultDataConverter)\r\n        .build()\r\n\r\nval client = WorkflowClient.newInstance(service, workflowClientOptions)\r\n```","createdAt":"2020-07-02T09:33:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-java/issues/139#issuecomment-652900290","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3ODgxNDkzNw==","author":{"login":"mfateev"},"authorAssociation":"MEMBER","body":"Public constructor that takes ObjectMapper added to JacksonJsonPayloadConverter by https://github.com/temporalio/java-sdk/pull/150","createdAt":"2020-08-23T19:32:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/139#issuecomment-678814937","viewerDidAuthor":true}],"createdAt":"2020-06-30T00:17:04Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQ0","name":"enhancement","description":"User experience","color":"a2eeef"}],"milestone":null,"number":139,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"state":"CLOSED","title":"Need ability to modify ObjectMapper created by JacksonJsonPayloadConverter","updatedAt":"2020-08-23T19:32:44Z","url":"https://github.com/temporalio/sdk-java/issues/139"}
