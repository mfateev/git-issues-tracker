{"assignees":[],"author":{"id":"U_kgDOCxMEXg","is_bot":false,"login":"oleg-kovrizhin-paradym","name":""},"body":"## Expected Behavior\n\nTests should be started without fail\n## Actual Behavior\n\nTest failed with\nCaused by: io.grpc.netty.shaded.io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: /127.0.0.1:7233\nCaused by: java.net.ConnectException: Connection refused\n\n\n## Steps to Reproduce the Problem\n\nThe problem is: \n\nWe are trying to migrate our app from the previous temporal boot starter from '1.29.0' to '1.30.1', but we can't because our tests are failing. It is a bit strange because we didn't change anything except the version of the library. Maybe you could help us and say what is going wrong.\n\nOur configuration is:\nspring.main.allow-bean-definition-overriding=true\nspring.temporal.connection.target=127.0.0.1:7233\nspring.temporal.namespace=default\nspring.temporal.test-server.enabled=true\nspring.temporal.namespaces[0].namespace=default\nspring.temporal.namespaces[0].alias=microservice\nspring.temporal.namespaces[0].connection.target=127.0.0.1:7233\nspring.temporal.namespaces[0].workersAutoDiscovery.packages=com.package.temporal\n\nNothing special in the workers and activities definitions, only taskQueues are defined.\n\nClient autowired like this:\n\n   @Autowired\n    @Qualifier(\"microserviceWorkflowClient\")\n    @Lazy\n    private WorkflowClient microserviceWorkflowClient;\n\nOne interesting thing, if we put everything to the default client and have a configuration like this, the test started normally, and we don't see any issue. Looks like something is wrong with the namespaces configuration for Spring Boot.\n\nThis is the working configuration:\n\nspring.main.allow-bean-definition-overriding=true\nspring.temporal.connection.target=127.0.0.1:7233\nspring.temporal.namespace=default\nspring.temporal.test-server.enabled=true\nspring.temporal.workersAutoDiscovery.packages=io.package.temporal\n#spring.temporal.namespaces[0].namespace=default\n#spring.temporal.namespaces[0].alias=microservice\n#spring.temporal.namespaces[0].connection.target=127.0.0.1:7233\n#spring.temporal.namespaces[0].workersAutoDiscovery.packages=io.package.temporal\n\nClient:\n\n    @Autowired\n    private WorkflowClient workflowClient;\n\nIt looks like the gRPC server is not started when you define namespaces, but it is a bit hard to figure out why. Could you have a look at that? Thanks. Or give some advice on what to check.\n\nOn version 1.29.0 both configurations are working fine.\n\n## Specifications\n\n  - Version: 1.30.1\n  - Platform: Mac\n","closedAt":"2025-08-08T05:36:32Z","comments":[],"createdAt":"2025-08-06T13:35:45Z","labels":[],"milestone":null,"number":2610,"reactionGroups":[],"state":"CLOSED","title":"Spring boot with namespaces configuration Connection refused: /127.0.0.1:7233 in tests","updatedAt":"2025-08-08T05:36:32Z","url":"https://github.com/temporalio/sdk-java/issues/2610"}
