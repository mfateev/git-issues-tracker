{"assignees":[],"author":{"id":"MDQ6VXNlcjU5ODUzMzk=","is_bot":false,"login":"frank-le","name":"Frank"},"body":"## Actual Behavior\r\nError: `This annotation can be used only on the interface method it implements.`\r\n\r\n## Steps to Reproduce the Problem\r\nChange Temporal-samples with the followings and just execute any test, e.g., HelloActivityTest\r\n```\r\n    testImplementation group: 'org.mockito', name: 'mockito-core', version: '2.28.2'\r\n    testImplementation group: 'org.powermock', name: 'powermock-api-mockito2', version: '2.0.5'\r\n```\r\n\r\n## Specifications\r\n\r\n  - Version: 10.3\r\n  - Platform: MacOS\r\n","closedAt":"2023-04-19T20:07:25Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc3MzE2ODEzNA==","author":{"login":"GreyTeardrop"},"authorAssociation":"CONTRIBUTOR","body":"I've faced the same issue with Mockito 2.x/3.x. As of version 2.0.0, Mockito has switched to annotating mock with all the annotations it can find on the source class or interface, which, in turn, makes Temporal's `POJOActivityImplMetadata` unhappy.\r\n\r\nThe workaround I've found is to create all activity mocks with a flag to disable annotation copying\r\n\r\n```java\r\nMockito.mock(ActivityInterface.class, Mockito.withSettings().withoutAnnotations())\r\n```\r\n\r\nI wonder what would be the proper solution. Perhaps instead of making Temporal's SDK more lenient, upgrading examples repo to recent Mockito to display how `withoutAnnotations()` has to be used for all mocks would be enough?\r\n\r\n**Update**: `withoutAnnotation()` was implemented in Mockito 2.11.2, https://github.com/mockito/mockito/issues/1206#issuecomment-336579095 has a workaround for older Mockito versions in case it's needed.","createdAt":"2021-02-04T09:34:33Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-java/issues/332#issuecomment-773168134","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc3MzUxODE4NQ==","author":{"login":"robzienert"},"authorAssociation":"NONE","body":"This is also a problem with [mockk](https://mockk.io/), but I haven't taken the time to investigate yet.","createdAt":"2021-02-04T18:33:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/332#issuecomment-773518185","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc3MzY4Njc4NA==","author":{"login":"GreyTeardrop"},"authorAssociation":"CONTRIBUTOR","body":"I've opened up a [PR](https://github.com/temporalio/samples-java/pull/73) to the `samples-java` repository showing how Mockito 3 could be used to mock activities.","createdAt":"2021-02-05T00:09:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/332#issuecomment-773686784","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5aUdei","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"Closing until more information is provided. Mockito 2 and 3 are used both in our own samples/ tests and by our users to mock activities from what I know. Feel free to reopen with a reproduction.","createdAt":"2023-04-19T20:07:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/332#issuecomment-1515313058","viewerDidAuthor":false}],"createdAt":"2021-02-04T06:21:08Z","labels":[],"milestone":null,"number":332,"reactionGroups":[],"state":"CLOSED","title":"Test with mock activity doesn't work with Mockito version 2","updatedAt":"2023-04-19T20:07:25Z","url":"https://github.com/temporalio/sdk-java/issues/332"}
