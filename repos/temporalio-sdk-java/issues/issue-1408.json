{"assignees":[{"id":"MDQ6VXNlcjUzMjEwOA==","login":"Spikhalskiy","name":"Dmitry Spikhalsky","databaseId":0}],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"## Expected Behavior\r\n\r\nThe default behavior of Temporal Workers, if there is non-`TemporalFailure` exception thrown in the workflow, is to fail a workflow task.\r\nThis is configured by `WorkflowImplementationOptions#setFailWorkflowExceptionTypes`.\r\n\r\n## Actual Behavior\r\n\r\nIf users use\r\n```\r\nWorker#registerWorkflowImplementationTypes(Class<?>... workflowImplementationClasses)\r\nWorker#registerWorkflowImplementationTypes(WorkflowImplementationOptions options, Class<?>... workflowImplementationClasses)\r\nWorker#addWorkflowImplementationFactory(WorkflowImplementationOptions options, Class<R> workflowInterface, Func<R> factory)\r\n```\r\nthe methods behave as expected and if the user doesn't override `WorkflowImplementationOptions#setFailWorkflowExceptionTypes` non-`TemporalFailure` exceptions in Workflow code don't fail a workflow execution.\r\n\r\nBut if\r\n```\r\naddWorkflowImplementationFactory(Class<R> workflowInterface, Func<R> factory)\r\n```\r\n\r\nif used, `Throwable` is set into `WorkflowImplementationOptions#setFailWorkflowExceptionTypes` by the underlying implementation.\r\n\r\nthis difference is completely unexpected by users and undocumented and I guess it was done for a backwards compatibility in the future, but now it leads to great confusion.","closedAt":"2022-09-08T15:48:22Z","comments":[],"createdAt":"2022-09-07T19:18:59Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQx","name":"bug","description":"Something isn't working","color":"d73a4a"},{"id":"MDU6TGFiZWwxNjIyNzE5ODQ0","name":"enhancement","description":"User experience","color":"a2eeef"}],"milestone":{"number":19,"title":"1.17.0","description":"","dueOn":"2022-09-26T00:00:00Z"},"number":1408,"reactionGroups":[],"state":"CLOSED","title":"addWorkflowImplementationFactory with no ImplementationOptions fails workflow execution on any Throwable","updatedAt":"2022-09-08T15:48:22Z","url":"https://github.com/temporalio/sdk-java/issues/1408"}
