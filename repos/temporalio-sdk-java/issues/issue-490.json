{"assignees":[],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"**Is your feature request related to a problem? Please describe.**\r\nLooks like Temporal Java SDK is lacking the support of context propagators for local activities.\r\nCurrently, there is no way to make context propagation work for LocalActivities as described in Issue #489.\r\nBut even when #489 is resolved, Java SDK API lacks functionality for LocalActivities + ContextPropagators comparable to the one that is available for Activities + ContextPropagators.\r\n`ActivityOption` has `ActivityOption#contextPropagators` that allow specifying custom context propagators for the activity.\r\nYou would expect that `LocalActivityOption` will have `LocalActivityOption#contextPropagators` with the same semantic, but it's not there.\r\n\r\n**Describe the solution you'd like**\r\nAdd `LocalActivityOption#contextPropators` and ensure they are supported the same way as `ActivityOption#contextPropators`","closedAt":"2021-05-19T01:43:30Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg0MzY4MTA5OA==","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"After discussion with @mfateev we decided that `ActivityOptions#contextPropagators` has extremely limited usage. \r\nProbably the only reasonable use case would be if we have a regular activity implemented in a different codebase or language. \r\nOtherwise, ContextPropagators should be specified on `WorkerOptions` and be applied for all activities on both the caller (workflow) and activity worker side anyway, because ActivityOptions are used and applied only on a caller side. Adding a `ContextPropagator` just to the `ActivityOptions` doesnâ€™t enable it on the Acitivity Worker side. \r\nSo, it's not a good idea to adapt it for local activities, and event the existing `ActivityOptions#contextPropagators` should be used carefully with full understanding that they are applied only to the client/stub side.","createdAt":"2021-05-19T01:43:30Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/490#issuecomment-843681098","viewerDidAuthor":false}],"createdAt":"2021-05-14T19:43:15Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQ0","name":"enhancement","description":"User experience","color":"a2eeef"}],"milestone":null,"number":490,"reactionGroups":[],"state":"CLOSED","title":"Add LocalActivityOption#contextPropagators","updatedAt":"2021-07-22T18:10:37Z","url":"https://github.com/temporalio/sdk-java/issues/490"}
