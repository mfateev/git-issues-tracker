{"assignees":[],"author":{"id":"MDQ6VXNlcjEzNDgzNQ==","is_bot":false,"login":"joelmarty","name":"JoÃ«l Marty"},"body":"## Expected Behavior\r\n\r\nUsing the tally/micrometer bridge `MicrometerClientStatsReporter` in client setup should report histogram metrics like it does with other metrics types.\r\nFor instance, only `temporal_client.temporal_request_latency` is published and the submetrics it is supposed to produce (`.max`, `.avg`, `.median`, ...) are not published.\r\n\r\n## Actual Behavior\r\n\r\nConfiguring the SDK with that class as follows makes histogram not being published:\r\n```java\r\nreturn WorkflowServiceStubsOptions.newBuilder()\r\n    .setMetricsScope(new RootScopeBuilder()\r\n                .reporter(new MicrometerClientStatsReporter(statsdMeterRegistry))\r\n                .reportEvery(com.uber.m3.util.Duration.ofMillis(publishInterval.toMillis())));\r\n```\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. See \"Actual Behavior\"\r\n\r\n## Details\r\n\r\nThe issue seems to be coming from the fact that that class implements `reportHistogramValueSamples` and `reportHistogramDurationSamples` as no-ops (see [code](https://github.com/temporalio/sdk-java/blob/master/temporal-sdk/src/main/java/io/temporal/common/reporter/MicrometerClientStatsReporter.java#L108-L130))\r\n\r\n## Specifications\r\n\r\n  - Version: 1.8.1\r\n  - Platform: all\r\n","closedAt":"2022-09-13T11:48:17Z","comments":[{"id":"IC_kwDODN12PM5KOcmQ","author":{"login":"joelmarty"},"authorAssociation":"NONE","body":"Closing as it seems that with micrometer + datadog, distribution aggregation is done on the datadog backend and not on the client as it used to.","createdAt":"2022-09-13T11:50:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1422#issuecomment-1245301136","viewerDidAuthor":false}],"createdAt":"2022-09-13T11:21:12Z","labels":[],"milestone":null,"number":1422,"reactionGroups":[],"state":"CLOSED","title":"MicrometerClientStatsReporter does not report histograms","updatedAt":"2022-09-13T11:50:49Z","url":"https://github.com/temporalio/sdk-java/issues/1422"}
