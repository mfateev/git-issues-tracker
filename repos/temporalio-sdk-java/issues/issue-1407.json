{"assignees":[],"author":{"id":"MDQ6VXNlcjEzODUyNjIx","is_bot":false,"login":"dominik-pakosz","name":"Dominik Pakosz"},"body":"## Expected Behavior\r\nTest server running\r\n\r\n## Actual Behavior\r\nException: `qemu-x86_64: Could not open '/lib64/ld-linux-x86-64.so.2': No such file or directory` thrown\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. download latest release binary\r\n  2. run ./temporal-test-server\r\n  3. no profit - seeing error\r\n\r\n## Specifications\r\n\r\n  - Version: latest - [v1.16.0](https://github.com/temporalio/sdk-java/releases/tag/v1.16.0)\r\n  - Platform: MacOS ARM M1 Pro\r\n","closedAt":"2025-04-21T15:53:28Z","comments":[{"id":"IC_kwDODN12PM5JzjeJ","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"We use Palantir Graal plugin for our native builds. Unfortunately, Palantir doesn't accept contributions or PRs to this project (they just get stale and closed) and doesn't actively develop it.\r\nTo fix this issue, this has to happen: https://github.com/palantir/gradle-graal/pull/469\r\n\r\nAn official Graal plugin for Gradle doesn't have this problem, but it doesn't provision GraalVM and native-image and requires them to be installed and configured in the system. This makes the usage tricky in an open-source project until https://github.com/graalvm/native-build-tools/issues/100 is resolved.\r\nIt looks like Gradle team is moving quite slow with an essential feature and dependency to make it happen: https://github.com/gradle/gradle/pull/18028\r\n\r\nTemporal has to fork Palantir Graal Plugin, merge required fixes and publish to the Sonatype repo at some moment if this becomes a burning issue.","createdAt":"2022-09-06T14:43:21Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1238251401","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5J04Fb","author":{"login":"cv65kr"},"authorAssociation":"NONE","body":"@Spikhalskiy thanks for explanation. I think is quite important topic, a lot companies started exchanging old intel macbooks with new one with arm. I am using Temporal and for me is a big problem because now I need to use CI which tooks ages and don't have a control.\r\n\r\nProper testing is basic of good application.","createdAt":"2022-09-06T20:05:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1238597979","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5J06wH","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"@cv65kr which download did you use?\r\nTry this one: https://github.com/temporalio/sdk-java/releases/download/v1.16.0/temporal-test-server_1.16.0_macOS_amd64.tar.gz.\r\nIt's for Mac OS and should work with no additional steps, IIRC, with Rosetta.\r\nWhich SDK are you using? The TypeScript and Python SDKs both automatically install the right executable for you.","createdAt":"2022-09-06T20:18:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1238608903","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5J09hf","author":{"login":"cv65kr"},"authorAssociation":"NONE","body":"The newest one for Temporal test server (In general I tried multiple versions). \r\n\r\nPHP SDK - https://github.com/temporalio/sdk-php/blob/master/testing/src/Downloader.php#L29 looks like is not working out of box","createdAt":"2022-09-06T20:31:37Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1238620255","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5J1B0b","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Hmm.. the code you sent LGTM at first glance, can you check which file it downloads?","createdAt":"2022-09-06T20:53:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1238637851","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5J1DsF","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"@cv65kr Could you download, unpack and try to run the specific artifact @bergundy pointed?\r\nhttps://github.com/temporalio/sdk-java/releases/download/v1.16.0/temporal-test-server_1.16.0_macOS_amd64.tar.gz\r\nThis one is expected to work on M1. If it doesn't, let us know.","createdAt":"2022-09-06T21:01:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1238645509","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5KHkMp","author":{"login":"dominik-pakosz"},"authorAssociation":"NONE","body":"@Spikhalskiy I tried this artifact.\r\nResult:\r\n```\r\nâ¯ docker-compose exec container-apache /bin/sh\r\n# ./temporal-test-server\r\n/bin/sh: 2: ./temporal-test-server: Exec format error\r\n# exit\r\n```\r\n\r\n```\r\nâ¯ docker-compose exec container-apache /bin/bash\r\nroot@a479b2380cc8:/src# ./temporal-test-server\r\nbash: ./temporal-test-server: cannot execute binary file: Exec format error\r\nroot@a479b2380cc8:/src# exit\r\nexit\r\n```\r\n\r\nCan you advise something more on that as it's not working as expected? ðŸ¤” ","createdAt":"2022-09-12T09:56:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1243497257","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5KI90L","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"@bergundy Can you verify the same on your M1 Mac (https://github.com/temporalio/sdk-java/releases/download/v1.16.0/temporal-test-server_1.16.0_macOS_amd64.tar.gz)?\r\nIt works just fine for me on Intel Mac, so I would expect M1 to be fine too, but let's double-check.","createdAt":"2022-09-12T14:54:46Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1243864331","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5KJAAK","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"@dominik-pakosz youâ€™re running in a docker container not directly on mac. We donâ€™t yet have test server arm builds for linux ","createdAt":"2022-09-12T15:01:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1243873290","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5KJh7c","author":{"login":"cv65kr"},"authorAssociation":"NONE","body":"@bergundy is there any workaround for that? We are running tests inside arm dockers.\r\nI can say that outside of docker working properly.","createdAt":"2022-09-12T16:46:37Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1244012252","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5KJpOf","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"You can run your containers with `--platform amd64` it slows things down but it works.\r\nWe want to support arm builds for both mac and linux, I hope we can get the done relatively soon.","createdAt":"2022-09-12T17:12:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1244042143","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5KN3Gf","author":{"login":"cv65kr"},"authorAssociation":"NONE","body":"@bergundy is there any time frame when you expect releases?","createdAt":"2022-09-13T09:32:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1245147551","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5KN38C","author":{"login":"dominik-pakosz"},"authorAssociation":"NONE","body":"Yea, I can't as I'm installing a lot of packages depending on arm64 or aarch64. From our SRE team point of view we should not go in this direction.\r\nIs there any other solution?","createdAt":"2022-09-13T09:35:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1245150978","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5KPlCQ","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"This issue is blocked by https://github.com/palantir/gradle-graal/pull/469 as an external dependency. Temporal doesn't typically provide time commitments for improvements.\r\nWe accept contributions and the Palantir Graal plugin we depend on to make it happen has an Apache license.","createdAt":"2022-09-13T15:42:50Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-1245597840","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6RhnN9","author":{"login":"otan"},"authorAssociation":"NONE","body":"> This issue is blocked by https://github.com/palantir/gradle-graal/pull/469 as an external dependency. Temporal doesn't typically provide time commitments for improvements.\r\n\r\nthe palantir/gradle-graal repo is now deprecated. is there a plan to get this up and running?\r\nrunning on ARM for CI is significantly cheaper and more prevalent nowadays.","createdAt":"2024-10-28T12:52:54Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-2441507709","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6fqMmd","author":{"login":"diogotorres97"},"authorAssociation":"NONE","body":"Any updates on this one? We also want to run our CI in ARM servers ðŸ˜„ ","createdAt":"2025-02-24T14:40:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-2678639005","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6h1mY7","author":{"login":"purkhusid"},"authorAssociation":"NONE","body":"This is quite painful since ARM has become such a common arch to run on developer laptops. Has there been any progress on this?","createdAt":"2025-03-11T17:37:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-2715182651","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6h2zzt","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"This is on our roadmap, this issue will be closed once it is resolved","createdAt":"2025-03-11T19:35:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-2715499757","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6h9Pa6","author":{"login":"weslien"},"authorAssociation":"NONE","body":"Same here, spent a bucketload of time trying to get this to work on apple silicon. Problem is that I can't even force it to download the amd64 version when running inside a docker container with --platform override (at substantial performance degradation). \n\nMy \"solution\" in the end was to monkey-patch the TS SDK to actually resolve arch to linux/amd64 and get that artifact from temporal.download ðŸ«£\n\nLooking forward to a proper solution","createdAt":"2025-03-12T09:17:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-2717185722","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6pMP0_","author":{"login":"diogotorres97"},"authorAssociation":"NONE","body":"Do we have any ETA to get this released?","createdAt":"2025-04-29T12:05:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-2838560063","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6vzHFI","author":{"login":"diogotorres97"},"authorAssociation":"NONE","body":"@Quinn-With-Two-Ns ?","createdAt":"2025-06-06T14:18:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-2949411144","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6v28hx","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"@diogotorres97 It will be included in the next release, there is no ETA.","createdAt":"2025-06-06T19:22:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1407#issuecomment-2950416497","viewerDidAuthor":false}],"createdAt":"2022-09-06T13:48:10Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQ0","name":"enhancement","description":"User experience","color":"a2eeef"},{"id":"LA_kwDODN12PM8AAAABzzHCJQ","name":"test server","description":"Related to the test server","color":"A71076"}],"milestone":null,"number":1407,"reactionGroups":[],"state":"CLOSED","title":"ARM64 build for Test Server","updatedAt":"2025-06-06T19:22:31Z","url":"https://github.com/temporalio/sdk-java/issues/1407"}
