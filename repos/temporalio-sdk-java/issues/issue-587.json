{"assignees":[],"author":{"id":"MDQ6VXNlcjExOTQyMg==","is_bot":false,"login":"tsurdilo","name":"Tihomir Surdilovic"},"body":"**Is your feature request related to a problem? Please describe.**\r\nThis feature is implemented in Go SDK, not in Java.\r\n\r\n**Describe the solution you'd like**\r\nSet TemporalChangeVersion search attribute to the changeid-version when a new one is set on workflow.\r\nThis will allow users to use search queries, like shown here: https://community.temporal.io/t/list-of-running-workflows-having-a-specific-version/1731\r\n\r\n**Describe alternatives you've considered**\r\nDon't implement\r\n\r\nThis is a really needed feature when using workflow versioning. It works in Go SDK already.\r\n","closedAt":"2025-05-28T22:47:40Z","comments":[{"id":"IC_kwDODN12PM40nVi6","author":{"login":"vitarb"},"authorAssociation":"CONTRIBUTOR","body":"We need to do backwards compatibility for this one.","createdAt":"2021-07-19T17:27:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-882727098","viewerDidAuthor":false},{"id":"IC_kwDODN12PM49gRIe","author":{"login":"longquanzheng"},"authorAssociation":"NONE","body":"Hi any progress on this one? ","createdAt":"2022-02-07T20:04:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-1031868958","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5BeYgU","author":{"login":"longquanzheng"},"authorAssociation":"NONE","body":"Hi any progress on this? I have added this in Cadence long time ago. You may copy some code from it which can make it easier: https://github.com/uber/cadence-java-client/pull/650","createdAt":"2022-04-13T21:01:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-1098483732","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5BeiIZ","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"Not yet. It's a pretty tricky task to do because of the backward compatibility and the fact that the Version State Machine is one of the trickiest ones already. It's on my radar though and I will prioritize it when I get a chance.","createdAt":"2022-04-13T21:54:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":3}},{"content":"EYES","users":{"totalCount":4}}],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-1098523161","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5fVNxs","author":{"login":"hmolinari-attentive"},"authorAssociation":"NONE","body":"Hi, is there any update on this?","createdAt":"2023-06-20T19:38:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-1599396972","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5p_ULq","author":{"login":"rrogers-turo"},"authorAssociation":"NONE","body":"I'm also curious, I tried to query the TemporalChangeVersion and nothing showed up in the TemporalUI because I used the JavaSDK to do a patch on the workflow.","createdAt":"2023-10-24T23:19:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-1778205418","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6O9rpW","author":{"login":"mnichols"},"authorAssociation":"MEMBER","body":"@Quinn-With-Two-Ns is there an alternative workaround you might recommend to discover versions of WF so that users can more easily remove chunks of code with confidence?","createdAt":"2024-10-08T02:22:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-2398534230","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6O9suF","author":{"login":"longquanzheng"},"authorAssociation":"NONE","body":"> @Quinn-With-Two-Ns is there an alternative workaround you might recommend to discover versions of WF so that users can more easily remove chunks of code with confidence?\r\n\r\nTry this design pattern https://medium.com/@qlong/how-to-overcome-some-maintenance-challenges-of-temporal-cadence-workflow-versioning-f893815dd18d","createdAt":"2024-10-08T02:24:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-2398538629","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6O_G5b","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Also this sample https://github.com/temporalio/samples-java/pull/664","createdAt":"2024-10-08T05:49:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-2398907995","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6PFcUs","author":{"login":"mnichols"},"authorAssociation":"MEMBER","body":"Thanks @longquanzheng and @Quinn-With-Two-Ns for the references! ","createdAt":"2024-10-08T18:40:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-2400568620","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6cI1Za","author":{"login":"luispollo"},"authorAssociation":"NONE","body":"Hi there! This issue has been open for quite a long time. Any updates on prioritization?\n\nAlso, I wanted to call out that, at Netflix, we ran into a problem with a similar solution to the sample shared above when removing code paths for old versions, because the call to `Workflow.upsertTypedSearchAttributes` writes an event to the workflow history, so removing it is a backwards-incompatible (aka non-deterministic) workflow change. So if you have long-running workflows, even with continue-as-new, chances are you'll run into a `NonDeterministicException` when doing deployments (which we tend to do frequently), which then gets the workflows stuck.","createdAt":"2025-01-28T16:56:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-2619561562","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6cJDmR","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"This issue is a high priority for us, but some bugs related to `GetVersion` needed to be resolved first. This is not a trivial feature to implement due to backward compatibility and the complexity around the versioning state machine. I hope to make some progress on this soon.","createdAt":"2025-01-28T17:20:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-2619619729","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6cNVkk","author":{"login":"luispollo"},"authorAssociation":"NONE","body":"Thanks for the update, @Quinn-With-Two-Ns. Glad to hear you're prioritizing improvements around this. Out of curiosity, can you please elaborate a bit on the backward compatibility and complexity if this is already supported in the Go SDK? I assume versioning is ultimately implemented at the low level of the protocol/server, so what's special about Java that makes it more difficult to expose the same feature there?\n\nP.S. The original issue proposes a specific solution, which is to use search attributes. Personally, I don't care as much about the implementation detail, so long as there's a way for us to query for what workflows have what changes/versions enabled. For example, if there was a way to query the data that's already recorded in the workflow history as in the example below, that would be fine with me.\n\n![Image](https://github.com/user-attachments/assets/196c0575-4c5a-4898-a44e-860f3f6b3c7a)\n\nLooks like the version is recorded using the concept of a \"marker\" -- if there was a way to query for markers, we'd be set. ðŸ™‚ ","createdAt":"2025-01-29T05:19:18Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-2620741924","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6cUrga","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":">I assume versioning is ultimately implemented at the low level of the protocol/server...\n\nNo, versioning is implemented entirely in the SDK and the implementation in Go is very different then Java so there is no shared logic. Every SDK uses search attributes here so the Java SDK would as well","createdAt":"2025-01-29T19:35:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-2622666778","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6cYcJv","author":{"login":"luispollo"},"authorAssociation":"NONE","body":"@Quinn-With-Two-Ns Thanks for the context.","createdAt":"2025-01-30T06:49:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/587#issuecomment-2623652463","viewerDidAuthor":false}],"createdAt":"2021-07-12T19:46:20Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQ0","name":"enhancement","description":"User experience","color":"a2eeef"}],"milestone":{"number":12,"title":"Next","description":"","dueOn":null},"number":587,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":10}}],"state":"CLOSED","title":"Set TemporalChangeVersion when workflow version is updated","updatedAt":"2025-05-28T22:47:40Z","url":"https://github.com/temporalio/sdk-java/issues/587"}
