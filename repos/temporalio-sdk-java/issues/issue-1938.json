{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNTA0MDQ5","is_bot":false,"login":"Quinn-With-Two-Ns","name":"Quinn Klassen"},"body":"When the SDK converts a Java `Duration` to a `protobuf.Duration` it uses `toMillis()`, but if the Java `Duration` represents a very large value converting to milliseconds may result in an overflow. We should probably convert the seconds directly and truncate the nanoseconds to millisecond precision to maintain consistency.\r\n\r\n```\r\n  public static com.google.protobuf.Duration toProtoDuration(Duration d) {\r\n    // TODO we should refactor an implicit conversion of empty values into ZERO and rename the\r\n    // current method into toJavaDurationSafe, toJavaDurationOrDefault or something like that\r\n    if (d == null) {\r\n      return Durations.ZERO;\r\n    }\r\n\r\n    return Durations.fromMillis(d.toMillis());\r\n  }\r\n\r\n```","closedAt":"2023-12-14T22:28:29Z","comments":[],"createdAt":"2023-11-19T22:16:56Z","labels":[{"id":"LA_kwDODN12PM8AAAABTCzm8g","name":"good first issue","description":"","color":"37F0F1"}],"milestone":null,"number":1938,"reactionGroups":[],"state":"CLOSED","title":"`toProtoDuration` may throw an `ArithmeticException` if Duration is too large","updatedAt":"2023-12-14T22:28:29Z","url":"https://github.com/temporalio/sdk-java/issues/1938"}
