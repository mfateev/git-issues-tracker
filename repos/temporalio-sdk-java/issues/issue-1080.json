{"assignees":[{"id":"MDQ6VXNlcjUzMjEwOA==","login":"Spikhalskiy","name":"Dmitry Spikhalsky","databaseId":0}],"author":{"id":"MDQ6VXNlcjgzMTA1NDg=","is_bot":false,"login":"javiercanillas","name":"Javier Canillas"},"body":"## Expected Behavior\r\nHave different values of `maxConcurrentActivityExecutionSize` and `maxConcurrentLocalActivityExecutionSize` when configuring `WorkerOptions`.\r\n\r\n## Actual Behavior\r\n`maxConcurrentLocalActivityExecutionSize` is configured using `maxConcurrentActivityExecutionSize` when building the object:\r\n\r\nTaken from `WorkerOptions.Builder.build()` [here](https://github.com/temporalio/sdk-java/blob/master/temporal-sdk/src/main/java/io/temporal/worker/WorkerOptions.java#L288):\r\n```java\r\n    public WorkerOptions build() {\r\n      return new WorkerOptions(\r\n          maxWorkerActivitiesPerSecond,\r\n          maxConcurrentActivityExecutionSize,\r\n          maxConcurrentWorkflowTaskExecutionSize,\r\n          maxConcurrentActivityExecutionSize,\r\n          maxTaskQueueActivitiesPerSecond,\r\n          workflowPollThreadCount,\r\n          activityPollThreadCount,\r\n          localActivityWorkerOnly,\r\n          defaultDeadlockDetectionTimeout);\r\n    }\r\n```\r\nIt should be:\r\n\r\n```java\r\n    public WorkerOptions build() {\r\n      return new WorkerOptions(\r\n          maxWorkerActivitiesPerSecond,\r\n          maxConcurrentActivityExecutionSize,\r\n          maxConcurrentWorkflowTaskExecutionSize,\r\n          maxConcurrentLocalActivityExecutionSize,\r\n          maxTaskQueueActivitiesPerSecond,\r\n          workflowPollThreadCount,\r\n          activityPollThreadCount,\r\n          localActivityWorkerOnly,\r\n          defaultDeadlockDetectionTimeout);\r\n    }\r\n```\r\n\r\nSee the change on the 4th argument.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Create an `WorkerOptions.Builder` object.\r\n  2. Set the attribute `maxConcurrentActivityExecutionSize` with value 10\r\n  3. Set the attribute `maxConcurrentLocalActivityExecutionSize` with value 200\r\n  4. Call `build` over the Builder instance\r\n  5. Check that the built object `WorkerOptions` will have both `maxConcurrentActivityExecutionSize` and `maxConcurrentLocalActivityExecutionSize` with value 10.\r\n\r\n## Specifications\r\n  - Version: temporal-sdk-1.3.1\r\n  - Platform: java\r\n","closedAt":"2022-03-18T00:36:04Z","comments":[{"id":"IC_kwDODN12PM4_4H_F","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"Confirm, thanks for the report!\r\n\r\nPlease use `validateAndBuildWithDefaults` as a temporary workaround if you need one. This is our main method to build Options instances right now.","createdAt":"2022-03-17T22:31:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-java/issues/1080#issuecomment-1071677381","viewerDidAuthor":false}],"createdAt":"2022-03-17T21:58:48Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQx","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":{"number":10,"title":"1.9.0","description":"","dueOn":"2022-04-12T00:00:00Z"},"number":1080,"reactionGroups":[],"state":"CLOSED","title":"Bug when building WorkerOptions","updatedAt":"2022-03-18T00:36:04Z","url":"https://github.com/temporalio/sdk-java/issues/1080"}
