{"assignees":[{"id":"MDQ6VXNlcjU1NTIzODE=","login":"mastermanu","name":"","databaseId":0}],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"## Expected Behavior\r\n\r\nIn temporal 0.26.0 java-sdk the following structure worked just fine:\r\n```\r\ninterface WorkflowMarker {\r\n}\r\n\r\n@WorkflowInterface\r\ninterface MyWorkflow {\r\n    @WorkflowMethod\r\n    fun execute(req: Req): Resp\r\n}\r\n\r\nMyWorkflowImpl : MyWorkflow, WorkflowMarker\r\n```\r\n\r\n## Actual Behavior\r\n\r\nIn temporal 0.28.0 it doesn't work and calling a stub causing:\r\n```\r\nCaused by: io.temporal.failure.ApplicationFailure: message='Interface doesn't contain any methods: WorkflowMarker', type='java.lang.IllegalArgumentException', nonRetryable=false\r\n\tat io.temporal.internal.sync.POJOWorkflowInterfaceMetadata.newInstance(POJOWorkflowInterfaceMetadata.java:125)\r\n\tat io.temporal.internal.sync.POJOWorkflowInterfaceMetadata.newInstanceSkipWorkflowAnnotationCheck(POJOWorkflowInterfaceMetadata.java:107)\r\n\tat io.temporal.internal.sync.POJOWorkflowImplMetadata.<init>(POJOWorkflowImplMetadata.java:93)\r\n\tat io.temporal.internal.sync.POJOWorkflowImplMetadata.newListenerInstance(POJOWorkflowImplMetadata.java:75)\r\n\tat io.temporal.internal.sync.WorkflowInternal.registerListener(WorkflowInternal.java:111)\r\n\tat io.temporal.internal.sync.POJOWorkflowImplementationFactory$POJOWorkflowImplementation$RootWorkflowInboundCallsInterceptor.init(POJOWorkflowImplementationFactory.java:318)\r\n\tat io.temporal.internal.sync.POJOWorkflowImplementationFactory$POJOWorkflowImplementation.initialize(POJOWorkflowImplementationFactory.java:237)\r\n\tat io.temporal.internal.sync.SyncWorkflow.lambda$start$1(SyncWorkflow.java:117)\r\n\tat io.temporal.internal.sync.CancellationScopeImpl.run(CancellationScopeImpl.java:104)\r\n\tat io.temporal.internal.sync.WorkflowThreadImpl$RunnableWrapper.run(WorkflowThreadImpl.java:107)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n```\r\n\r\n## Rootcause analysis\r\n\r\nIn 0.26.0 `POJOWorkflowImplMetadata` had a permissive implementation:\r\n```\r\nPOJOWorkflowInterfaceMetadata interfaceMetadata =\r\n    POJOWorkflowInterfaceMetadata.newImplementationInterface(anInterface);\r\nList<POJOWorkflowMethodMetadata> methods = interfaceMetadata.getMethodsMetadata();\r\nfor (POJOWorkflowMethodMetadata methodMetadata : methods) {\r\n...\r\n}\r\n```\r\nIf there is no methods in the interface - we do nothing and go to the next interface.\r\n\r\n`POJOWorkflowInterfaceMetadata.newImplementationInterface(anInterface)` doesnâ€™t throw an exception if there is no methods.\r\n\r\nNow in 0.28.0 for each interface that the workflow implements we have\r\n\r\n`POJOWorkflowInterfaceMetadata.newInstanceSkipWorkflowAnnotationCheck(anInterface);`\r\nwhich throws an exception if the interface is empty even if the interface has no Temporal annotations at all.\r\n\r\n## Specifications\r\n\r\n  - Version: 0.26.0 vs 0.28.0 regression\r\n","closedAt":"2020-08-05T00:16:50Z","comments":[],"createdAt":"2020-07-31T23:58:54Z","labels":[],"milestone":null,"number":165,"reactionGroups":[],"state":"CLOSED","title":"Regression with a workflow implementing an empty marker interface","updatedAt":"2020-08-05T00:16:50Z","url":"https://github.com/temporalio/sdk-java/issues/165"}
