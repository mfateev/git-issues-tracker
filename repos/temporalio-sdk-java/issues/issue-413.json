{"assignees":[{"id":"MDQ6VXNlcjIwNTI3OTk5","login":"vkoby","name":"Vera","databaseId":0}],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"ActivityOptions has a requirement that either `startToClose` or `scheduleToClose` has to be defined. ActivityOptions doesn't have any defaults for both of them at the same time. So default ActivityOptions is actually invalid. \r\n\r\n`Workflow#newActivityStub` has two versions: `Workflow#newActivityStub(activityInterface)` and `Workflow#newActivityStub(activityInterface, activityOptions)`. The first version without `activityOptions` param produces an Activity stub with default broken ActivityOptions, so this method never really can be used right now.","closedAt":"2021-05-07T04:47:34Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDgxMTYzMTM2Mg==","author":{"login":"vitarb"},"authorAssociation":"CONTRIBUTOR","body":"On one hand, since activities are very use case specific, I imagine, it would be hard to pick the \"right\" value, but on on the other I agree that having invalid default options results in a bad experience. @mfateev what do you think? Should we set schedule to close to something like 10 seconds by default?","createdAt":"2021-04-01T04:36:13Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/413#issuecomment-811631362","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgxMjIwMzAxNg==","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"Also probably if we enforce \"`startToClose` or `scheduleToClose`\" rule, ActivityOptions#Builder#validateAndBuildWithDefaults should throw an exception when both of them are not initialized. It's not happening now.","createdAt":"2021-04-01T22:15:05Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/413#issuecomment-812203016","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgyODcyMDQ3MA==","author":{"login":"vkoby"},"authorAssociation":"CONTRIBUTOR","body":"There is no good default value for these timeouts and you can now set default activity options through WorkflowImplementationOptions. But good point about throwing an exception when they haven't been set.","createdAt":"2021-04-28T19:28:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/413#issuecomment-828720470","viewerDidAuthor":false}],"createdAt":"2021-03-31T06:17:30Z","labels":[],"milestone":null,"number":413,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"Workflow#newActivityStub(activityInterface) method produces broken activity stubs","updatedAt":"2021-07-16T01:04:19Z","url":"https://github.com/temporalio/sdk-java/issues/413"}
