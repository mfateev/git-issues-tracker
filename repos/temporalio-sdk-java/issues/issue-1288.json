{"assignees":[{"id":"MDQ6VXNlcjUzMjEwOA==","login":"Spikhalskiy","name":"Dmitry Spikhalsky","databaseId":0}],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"## Actual Behavior\r\n\r\n```\r\n**Invalid Transition{from=INITIATED, action=COMPLETE}, history: [Transition{from=NONE, action=INITIATE}]\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16283)\r\n    \tat io.grpc.Status.asRuntimeException(Status.java:526)\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16284)\r\n    \tat io.temporal.internal.testservice.StateMachine.action(StateMachine.java:230)\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16285)\r\n    \tat io.temporal.internal.testservice.TestWorkflowMutableStateImpl.lambda$childWorkflowCompleted$18(TestWorkflowMutableStateImpl.java:1140)\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16286)\r\n    \tat io.temporal.internal.testservice.TestWorkflowMutableStateImpl.update(TestWorkflowMutableStateImpl.java:331)\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16287)\r\n    \tat io.temporal.internal.testservice.TestWorkflowMutableStateImpl.update(TestWorkflowMutableStateImpl.java:300)\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16288)\r\n    \tat io.temporal.internal.testservice.TestWorkflowMutableStateImpl.childWorkflowCompleted(TestWorkflowMutableStateImpl.java:1137)\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16289)\r\n    \tat io.temporal.internal.testservice.TestWorkflowMutableStateImpl.lambda$processCompleteWorkflowExecution$23(TestWorkflowMutableStateImpl.java:1364)\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16290)\r\n    \tat java.base/java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1426)\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16291)\r\n    \tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:290)\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16292)\r\n    \tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1020)\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16293)\r\n    \tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1656)\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16294)\r\n    \tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1594)\r\n[20:02:50](https://tinycicd.temporal.io/?csrf_token=f528d0f5c84279b41e9738a7416ecb73410dd20d64bb6e77f0f95d12de542f28#L62032862:16295)\r\n    \tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:183)**\r\n```\r\n\r\nSome tests especially in loaded test environments fail with this stacktrace showing that Test Server observes Completion of child workflow before Start of this workflow.","closedAt":"2022-06-27T21:44:34Z","comments":[],"createdAt":"2022-06-27T19:51:52Z","labels":[],"milestone":{"number":15,"title":"1.13.0","description":"","dueOn":"2022-06-28T00:00:00Z"},"number":1288,"reactionGroups":[],"state":"CLOSED","title":"Test Server is unstable for child workflows reporting completion fast","updatedAt":"2022-06-27T21:44:34Z","url":"https://github.com/temporalio/sdk-java/issues/1288"}
