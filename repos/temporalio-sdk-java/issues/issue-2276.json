{"assignees":[],"author":{"id":"MDQ6VXNlcjU0MDcyNjg=","is_bot":false,"login":"lazy-ninja","name":"Niraj"},"body":"## Expected Behavior\r\nIt shouldn't throw a null pointer exception.\r\n\r\n```java \r\n//return null for empty search attributes. \r\nSearchAttributesUtil.encodeTyped(options.getTypedSearchAttributes()); \r\n\r\n//on setting null search attributes in the StartWorkflowExecutionRequest, it will throw NPE\r\nrequest.setSearchAttributes(startParameters.getSearchAttributes());\r\n\r\n//StartWorkflowExecutionRequest#setSearchAttributes\r\nif (searchAttributesBuilder_ == null) {\r\n  if (value == null) {\r\n    throw new NullPointerException();\r\n  }\r\n\r\n```\r\n\r\n## Actual Behavior\r\nIt throws null pointer exception\r\n\r\n\r\n\r\n## Steps to Reproduce the Problem\r\n  1. Create workflow options as \r\n  ```java \r\nWorkflowOptions workflowOptions = WorkflowOptions.newBuilder()\r\n        .setTaskQueue(\"queue\")\r\n        .setWorkflowId(\"workflow-id-1\")\r\n        .setTypedSearchAttributes(SearchAttributes.EMPTY)\r\n        .build();\r\n  ```\r\n 2. create workflow stub for any workflow\r\n ```java \r\nstub = workflowClient.newWorkflowStub(SampleWorkflow.class, workflowOptions);\r\n```\r\n3.  Submit for execution \r\n```java \r\nWorkflowClient.start(stub::execute, {});\r\n```\r\n## Specifications\r\n\r\n  - Version: 1.22.3\r\n  - Platform: MacOS\r\n\r\n","closedAt":"2024-10-17T21:54:04Z","comments":[{"id":"IC_kwDODN12PM6QO5Y_","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Thanks for the bug report! will file a fix for this.","createdAt":"2024-10-17T15:11:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2276#issuecomment-2419824191","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6QVWxK","author":{"login":"lazy-ninja"},"authorAssociation":"NONE","body":"@Quinn-With-Two-Ns thanks for fixing it. can you fix it in the `1.22.x` as well?","createdAt":"2024-10-18T06:16:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2276#issuecomment-2421517386","viewerDidAuthor":false}],"createdAt":"2024-10-17T14:19:56Z","labels":[],"milestone":null,"number":2276,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"Null pointer exception on passing empty search attribute in workflow options","updatedAt":"2024-10-18T06:16:30Z","url":"https://github.com/temporalio/sdk-java/issues/2276"}
