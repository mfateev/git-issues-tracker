{"assignees":[{"id":"MDQ6VXNlcjUzMjEwOA==","login":"Spikhalskiy","name":"Dmitry Spikhalsky","databaseId":0}],"author":{"id":"MDQ6VXNlcjg2NzM3MTYy","is_bot":false,"login":"nagl-stripe","name":""},"body":"## Expected Behavior\r\nAgainst the real temporal server, calling WorkflowStub.getResult() for a workflow that has been terminated immediately throws a WorkflowFailedException. The test environment should behave the same way.\r\n\r\n## Actual Behavior\r\ngetResult() hangs indefinitely or until the user-supplied timeout.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. git clone git@github.com:nagl-stripe/samples-java.git\r\n  1. Run GreetingWorkflow.java. As checked in, it demonstrates the hanging behavior.\r\n  1. To see the expected behavior, `docker-compose up`, change useReal to true on line 154, and re-run.\r\n\r\n## Specifications\r\n\r\n  - Version: 1.2.0\r\n  - Platform: Cassandra, but probably doesn't matter.","closedAt":"2021-09-08T16:35:07Z","comments":[{"id":"IC_kwDODN12PM42Z0Ch","author":{"login":"vitarb"},"authorAssociation":"CONTRIBUTOR","body":"Small simplification for the sample, you can do:\r\n```\r\nworkflow.terminate(\"testing\");\r\n```\r\ninstead of \r\n```\r\n    TerminateWorkflowExecutionRequest terminateWorkflowExecutionRequest =\r\n        TerminateWorkflowExecutionRequest.newBuilder()\r\n            .setReason(\"testing\")\r\n            .setWorkflowExecution(execution)\r\n            .setNamespace(\"default\")\r\n            .build();\r\n\r\n    client\r\n        .getWorkflowServiceStubs()\r\n        .blockingStub()\r\n        .terminateWorkflowExecution(terminateWorkflowExecutionRequest);\r\n```\r\nWhich will also reproduce the same problem.","createdAt":"2021-09-03T18:41:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/628#issuecomment-912736417","viewerDidAuthor":false}],"createdAt":"2021-08-12T22:55:23Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQx","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":{"number":3,"title":"v1.3.0","description":"","dueOn":"2021-08-31T00:00:00Z"},"number":628,"reactionGroups":[],"state":"CLOSED","title":"In TestWorkflowEnviornment, getResult() hangs after terminate()","updatedAt":"2021-09-08T18:36:08Z","url":"https://github.com/temporalio/sdk-java/issues/628"}
