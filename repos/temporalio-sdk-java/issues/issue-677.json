{"assignees":[{"id":"MDQ6VXNlcjIwNTI3OTk5","login":"vkoby","name":"Vera","databaseId":0}],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"## Expected Behavior\r\n\r\nMemo Payloads should be serialized/deserialized with a user-defined data converter. So it should be a converter specified on WorkflowClientOptions if one is provided.\r\n\r\n## Actual Behavior\r\nNow SDK has a mix of serialization styles for Memo.\r\nWe have WorkflowInternal that uses the user-defined converter which is correct: https://github.com/temporalio/sdk-java/pull/611/files#diff-fb38530e603dcfb32354887ad8db985665c82ef0e6f38e9016415b528a07e16aR434\r\nBut we also have `HeaderUtils#intoPayloadMapWithDefaultConverter` used in the whole bunch of places for Memo serialization that uses Default Converter:\r\nhttps://github.com/temporalio/sdk-java/blob/192f0c44f577286187ff382284fb3bc63a34ae26/temporal-sdk/src/main/java/io/temporal/internal/common/HeaderUtils.java#L52\r\n\r\n## Proposal:\r\nSerialization of Memo shouldn't use `HeaderUtils#intoPayloadMapWithDefaultConverter`","closedAt":"2021-08-31T20:11:33Z","comments":[],"createdAt":"2021-08-27T18:59:20Z","labels":[],"milestone":null,"number":677,"reactionGroups":[],"state":"CLOSED","title":"Memo serialization implemented inconsistently","updatedAt":"2021-08-31T20:11:33Z","url":"https://github.com/temporalio/sdk-java/issues/677"}
