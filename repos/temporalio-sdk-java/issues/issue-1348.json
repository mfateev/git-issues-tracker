{"assignees":[{"id":"MDQ6VXNlcjUzMjEwOA==","login":"Spikhalskiy","name":"Dmitry Spikhalsky","databaseId":0}],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"If a workflow code throws an exception that is failing the workflow, it's getting logged by the worker.\r\nIf such a completed with a failure workflow is getting queried, the replay produces the same exact log with an ERROR level and without any additional context that would allow understanding that this exception was effectively \"replayed\" by the query.\r\n\r\nAn exception header:\r\n\r\n```\r\n2022-08-05 13:22:09.172 [ERROR] 21413 --- [af-5dce1629454d] al.internal.sync.WorkflowExecuteRunnable : Workflow execution failure WorkflowId=entityUrn=urn:indeed:icims-requisition-id:39410&&jobseekerUrn=urn:indeed:icims-candidate-id:testingWithApplicationFailureWithoutAnnotation, RunId=645d1209-6c95-4d06-aeaf-5dce1629454d, WorkflowType=HiringProfessionalWorkflow\r\nio.temporal.failure.ApplicationFailure: message='Unsupported Chart: chartId', type='com.indeed.wayfinder.expedition.host.workflows.hiring.professional.exception.UnsupportedChartException', nonRetryable=true\r\n```\r\n\r\nHistory structure:\r\n```\r\nWorkflowExecutionStarted\r\nWorkflowTaskScheduled\r\nWorkflowTaskStarted\r\nWorkflowTaskCompleted\r\nMarkerRecorded (Version)\r\nMarkerRecorded (Local Activity)\r\nWorkflowExecutionFailed\r\n```\r\n\r\n**Describe the solution you'd like**\r\n\r\nThe original exception should be transformed into Warning from the Error.\r\nThe exception that happens in a query-only execution should be on Debug level and contain an additional context that allows to at least track back a query that causes this execution.","closedAt":"2022-08-08T21:38:28Z","comments":[],"createdAt":"2022-08-05T23:28:53Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQx","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":{"number":17,"title":"1.15.0","description":"","dueOn":"2022-07-19T00:00:00Z"},"number":1348,"reactionGroups":[],"state":"CLOSED","title":"Query to a workflow that was failed by the workflow code produces noisy Error log with not enough context","updatedAt":"2022-08-08T21:38:28Z","url":"https://github.com/temporalio/sdk-java/issues/1348"}
