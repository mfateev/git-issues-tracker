{"assignees":[],"author":{"id":"MDQ6VXNlcjExNDQ4OTc5","is_bot":false,"login":"myfancypants","name":"Shanan Sussman"},"body":"## Expected Behavior\r\nJacksonJsonPayloadConverter should be able to handle OffsetDateTime deserialization\r\n\r\nVersion `0.26.0` did not encounter any issues with it previously\r\n\r\n## Actual Behavior\r\nWorkflow execution failure\r\n\r\n```\r\nmaestro    | WARNING: An illegal reflective access operation has occurred\r\nmaestro    | WARNING: Illegal reflective access by com.fasterxml.jackson.databind.util.ClassUtil (file:/service/bin/maestro.jar) to constructor java.time.OffsetDateTime(java.time.LocalDateTime,java.time.ZoneOffset)\r\nmaestro    | WARNING: Please consider reporting this to the maintainers of com.fasterxml.jackson.databind.util.ClassUtil\r\nmaestro    | WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nmaestro    | WARNING: All illegal access operations will be denied in a future release\r\nmaestro    | 2020-07-23T18:38:26.762Z ERROR [i.t.i.sync.POJOWorkflowImplementationFactory] [workflow-method] Workflow execution failure WorkflowId=e4821190-81f8-4eab-8191-406193cbe6ef, RunId=fcf2d818-30a5-4f01-b68c-3e367242ae07, WorkflowType=ServerlessWorkflowMethods\r\nmaestro    | io.temporal.common.converter.DataConverterException: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `java.time.ZoneOffset` (although at least one Creator exists): cannot deserialize from Object value (no delegate- or property-based Creator)\r\nmaestro    |  at [Source: (byte[])\"{\"_type\":\"ServiceOk\",\"response\":{\"dateCreated\":{\"offset\":{\"totalSeconds\":0,\"id\":\"Z\",\"rules\":{\"fixedOffset\":true,\"transitions\":[],\"transitionRules\":[]}},\"nano\":0,\"year\":2020,\"monthValue\":7,\"dayOfMonth\":23,\"hour\":18,\"minute\":38,\"second\":26,\"month\"\"[truncated 309 bytes]; line: 1, column: 314] (through reference chain: ServiceOk[\"response\"]-> Service[\"dateCreated\"]->java.time.OffsetDateTime[\"offset\"])\r\nmaestro    |    at io.temporal.common.converter.JacksonJsonPayloadConverter.fromData(JacksonJsonPayloadConverter.java:82)\r\nmaestro    |    at io.temporal.common.converter.DefaultDataConverter.fromPayload(DefaultDataConverter.java:106)\r\nmaestro    |    at io.temporal.common.converter.DefaultDataConverter.fromPayloads(DefaultDataConverter.java:158)\r\nmaestro    |    at io.temporal.internal.sync.SyncWorkflowContext.lambda$executeActivity$aba2ce5b$1(SyncWorkflowContext.java:181)\r\nmaestro    |    at io.temporal.internal.sync.CompletablePromiseImpl.lambda$thenApply$2df5ef44$1(CompletablePromiseImpl.java:209)\r\nmaestro    |    at io.temporal.internal.sync.CompletablePromiseImpl.lambda$handle$6a2a7e3d$1(CompletablePromiseImpl.java:218)\r\nmaestro    |    at io.temporal.internal.sync.CompletablePromiseImpl.lambda$then$16b0e4cc$1(CompletablePromiseImpl.java:267)\r\nmaestro    |    at io.temporal.internal.sync.CompletablePromiseImpl.invokeHandlers(CompletablePromiseImpl.java:275)\r\nmaestro    |    at io.temporal.internal.sync.CompletablePromiseImpl.complete(CompletablePromiseImpl.java:166)\r\nmaestro    |    at io.temporal.internal.sync.SyncWorkflowContext$ActivityCallback.lambda$invoke$1(SyncWorkflowContext.java:210)\r\nmaestro    |    at io.temporal.internal.sync.CancellationScopeImpl.run(CancellationScopeImpl.java:104)\r\nmaestro    |    at io.temporal.internal.sync.WorkflowThreadImpl$RunnableWrapper.run(WorkflowThreadImpl.java:107)\r\nmaestro    |    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\nmaestro    |    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\nmaestro    |    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\nmaestro    |    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\nmaestro    |    at java.base/java.lang.Thread.run(Thread.java:834)\r\nmaestro    | Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `java.time.ZoneOffset` (although at least one Creator exists): cannot deserialize from Object value (no delegate- or property-based Creator)\r\n```\r\n\r\n## Specifications\r\n\r\n  - Version: 0.27.0\r\n\r\n## Found workaround\r\nusing `jackson-datatype-jsr310` and `objectMapper.registerModule(new JavaTimeModule());` seems to alleviate the issue","closedAt":"2020-08-22T02:17:33Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY3ODU4MDYzNg==","author":{"login":"mfateev"},"authorAssociation":"MEMBER","body":"https://github.com/temporalio/java-sdk/pull/191 added a test that validates that OffsetDateTime is convertible.","createdAt":"2020-08-22T02:17:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/153#issuecomment-678580636","viewerDidAuthor":true}],"createdAt":"2020-07-23T19:48:53Z","labels":[],"milestone":null,"number":153,"reactionGroups":[],"state":"CLOSED","title":"java.time.OffsetDateTime deserialization failing","updatedAt":"2020-08-22T02:17:33Z","url":"https://github.com/temporalio/sdk-java/issues/153"}
