{"assignees":[],"author":{"id":"MDQ6VXNlcjE3ODcyOTY0","is_bot":false,"login":"mmirzaeyan","name":"Mohammad Mirzaeyan"},"body":"## Expected Behavior\nActivities should work the same way with or without RetryOptions configuration.\n\n\n## Actual Behavior\nWhen configuring ActivityOptions with RetryOptions.maxAttempts(1), the workflow throws an error saying the activity type is not registered, even though the same activity works perfectly without RetryOptions.\nCaused by: io.temporal.failure.ApplicationFailure: message=‘Activity Type “reserveInventory” is not registered with a worker. Known types are: chargeCustomer, refundCustomer’, type=‘java.lang.IllegalArgumentException’, nonRetryable=false\n\n## Steps to Reproduce the Problem\n1.Create a workflow with multiple activity stubs\n2.Configure ActivityOptions with RetryOptions.maxAttempts(1)\n3.Register all activities in the worker\n4.Run the workflow\n5.Observe that some activities are reported as “not registered”\n\n## Specifications\n\n  -Temporal Version: 1.26.3.0\n\n\n### Code Example\n```java\n// This FAILS with the above error\nprivate final InventoryActivities inventory =\n    Workflow.newActivityStub(InventoryActivities.class,\n        ActivityOptions.newBuilder()\n            .setTaskQueue(\"ORDER_TASK_QUEUE\")\n            .setStartToCloseTimeout(Duration.ofSeconds(10))\n            .setRetryOptions(RetryOptions.newBuilder()\n                .setMaximumAttempts(1)\n                .build())\n            .build());\n\n// This WORKS without any issues\nprivate final InventoryActivities inventory =\n    Workflow.newActivityStub(InventoryActivities.class,\n        ActivityOptions.newBuilder()\n            .setTaskQueue(\"ORDER_TASK_QUEUE\")\n            .setStartToCloseTimeout(Duration.ofSeconds(10))\n            // No RetryOptions\n            .build());","closedAt":"2025-09-03T04:40:00Z","comments":[{"id":"IC_kwDODN12PM7BdNPi","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"`maxAttempts(1)` should have no impact on the activities registered. Testing I am not able to reproduce this with the code provided. Please provide a minimal stand alone, runnable, replication of the issue if you would like us to investigate further.","createdAt":"2025-09-02T14:44:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2647#issuecomment-3245659106","viewerDidAuthor":false},{"id":"IC_kwDODN12PM7BkxEN","author":{"login":"mmirzaeyan"},"authorAssociation":"NONE","body":"this is my sample repository https://github.com/mmirzaeyan/temporal-sample , docker compose beside the project is using for running temporal , postgress and temporal ui ","createdAt":"2025-09-03T04:26:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2647#issuecomment-3247640845","viewerDidAuthor":false},{"id":"IC_kwDODN12PM7Bk2P2","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"In your example you create two workers listening on the same task queue with different activities registered:\n* Your [PaymentWorker](https://github.com/mmirzaeyan/temporal-sample/blob/main/payment-service/src/main/java/com/example/payment/PaymentWorker.java) has `PaymentActivitiesImpl` registered\n* Your [InventoryWorker](https://github.com/mmirzaeyan/temporal-sample/blob/main/inventory-service/src/main/java/com/example/inventory/InventoryWorker.java) has `InventoryActivitiesImpl` registered\n\nIn Temporal workers listening on the same task queue need to have the same activities registered, or they need to use different task queues. Otherwise you will get errors because the activity is not registered on some workers.\n\nI would recommend looking at our [courses](https://learn.temporal.io/courses/temporal_101/java/) as they cover this in more detail","createdAt":"2025-09-03T04:40:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2647#issuecomment-3247662070","viewerDidAuthor":false}],"createdAt":"2025-08-30T06:03:11Z","labels":[],"milestone":null,"number":2647,"reactionGroups":[],"state":"CLOSED","title":"Activity Type not registered error when using RetryOptions with maxAttempts(1)","updatedAt":"2025-09-03T04:40:00Z","url":"https://github.com/temporalio/sdk-java/issues/2647"}
