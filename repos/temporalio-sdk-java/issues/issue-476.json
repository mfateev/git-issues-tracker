{"assignees":[],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"## Expected Behavior\r\nGrpcRetryer#retryWithResultAsync work as expected performing retries until expiration time is reached.\r\n\r\n## Actual Behavior\r\nGrpcRetryer#retryWithResultAsync returns after the first retry if an exception is thrown from the supplied function instead of being provided in the returned CompletableFuture.\r\n\r\n## Cause\r\nCompletionException is not processed and unwrapped correctly.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\nThis unit test fails with the current implementation, while it's expected to pass:\r\nhttps://github.com/Spikhalskiy/java-sdk/commit/73f678f79a2338f53da394f3a317897953b92951#diff-889cc42980a7287f0e29c43980e54d3c67c343c483105136bf09cb35269e9051R46","closedAt":"2021-05-12T01:30:05Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDgzOTM2NDk2MQ==","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"Closed by #477","createdAt":"2021-05-12T01:30:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/476#issuecomment-839364961","viewerDidAuthor":false}],"createdAt":"2021-05-09T06:00:15Z","labels":[],"milestone":null,"number":476,"reactionGroups":[],"state":"CLOSED","title":"GrpcRetryer#retryWithResultAsync doesn't perform retries in some cases","updatedAt":"2021-05-12T01:30:05Z","url":"https://github.com/temporalio/sdk-java/issues/476"}
