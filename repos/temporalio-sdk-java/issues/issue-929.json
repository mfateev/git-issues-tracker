{"assignees":[{"id":"MDQ6VXNlcjUzMjEwOA==","login":"Spikhalskiy","name":"Dmitry Spikhalsky","databaseId":0}],"author":{"id":"MDQ6VXNlcjYxODkzMw==","is_bot":false,"login":"aniketbhatnagar","name":"Aniket Bhatnagar"},"body":"## Expected Behavior\r\nConsider the following:\r\n```\r\n@ActivityInterface\r\npublic interface BlockListenerActivities {\r\n     @ActivityMethod\r\n     Optional<BlockRef> processNextBlock();\r\n}\r\n\r\n@Slf4j\r\npublic abstract class BaseBlockListenerActivities implements BlockListenerActivities {\r\n    @Override\r\n    public final Optional<BlockRef> processNextBlock() {\r\n        return doProcessNextBlock();\r\n    }\r\n\r\n    abstract protected Optional<BlockRef> doProcessNextBlock();\r\n}\r\n\r\n@Slf4j\r\npublic class BlockListenerActivitiesImpl extends BaseBlockListenerActivities {\r\n    @Override\r\n    protected Optional<BlockRef> doProcessNextBlock() {\r\n        log.info(\"Processing next ETH block\");\r\n        return Optional.empty();\r\n    }\r\n}\r\n```\r\n\r\nThen, registering the activity implementation (`worker.registerActivitiesImplementations(new BlockListenerActivitiesImpl());`) should work.\r\n\r\n\r\n## Actual Behavior\r\nRegistering the activity implementation (`worker.registerActivitiesImplementations(new BlockListenerActivitiesImpl());`) causes the exception `Class doesn't implement any non empty interface annotated with @ActivityInterface: BlockListenerActivitiesImpl`.\r\n\r\nIt seems that that SDK expects `BlockListenerActivitiesImpl` to explicitly say `implements BlockListenerActivities`. \r\n\r\nI ran into this is because I was provided a \"quarkus\" injected bean that automatically extends the activity implementation class to form a proxy like `ActivityImpl_ClientProxy extends ActivityImpl` and temporal SDK rejects `ActivityImpl_ClientProxy` as a valid activity implementation.\r\n\r\n## Steps to Reproduce the Problem\r\nUse the code snippet above and register activity using `worker.registerActivitiesImplementations(new BlockListenerActivitiesImpl());`\r\n\r\n\r\n## Specifications\r\n\r\n  - Version: temporal-sdk 1.6.0\r\n  - Platform: Reproduced on Mac with jdk 14 but should be applicable on all platforms.\r\n","closedAt":"2021-12-28T16:21:21Z","comments":[{"id":"IC_kwDODN12PM47TR-j","author":{"login":"tsurdilo"},"authorAssociation":"MEMBER","body":"Community Forum ref: https://community.temporal.io/t/cant-register-activity-implementation-that-uses-inheritance/3603","createdAt":"2021-12-15T15:38:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/929#issuecomment-994910115","viewerDidAuthor":false}],"createdAt":"2021-12-15T12:00:01Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQ0","name":"enhancement","description":"User experience","color":"a2eeef"}],"milestone":{"number":8,"title":"1.7.0","description":"","dueOn":"2022-01-11T00:00:00Z"},"number":929,"reactionGroups":[],"state":"CLOSED","title":"Can't register activity implementation that uses inheritance","updatedAt":"2021-12-28T20:43:48Z","url":"https://github.com/temporalio/sdk-java/issues/929"}
