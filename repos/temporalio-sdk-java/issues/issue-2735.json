{"assignees":[],"author":{"id":"MDQ6VXNlcjIyMTYwMjEw","is_bot":false,"login":"billrich2001","name":"Bill Richards"},"body":"## Expected Behavior\nNon-root namespaces should be able to use the in-memory test server when `spring.temporal.test-server.enabled=true` is configured, just like the root namespace does.\n\n## Actual Behavior\nNon-root namespaces cannot use the in-memory test server due to a bean name/type mismatch in Spring autoconfiguration. Instead of using `TestWorkflowEnvironment`, the configuration creates a client connecting to the dev server when multiple namespaces are used.\n\n## Steps to Reproduce the Problem\n[Example](https://github.com/bbeck10/temporal-samples-java/pull/1/files)\n1. Configure Spring Boot application with `spring.temporal.test-server.enabled=true`\n2. Set up multiple namespaces (root and non-root namespaces)\n3. Attempt to run tests with non-root namespaces\n4. Observe that non-root namespaces connect to dev server instead of in-memory test server\n\n## Specifications\n- Version: Temporal Java SDK v1.30.0+\n- Platform: Spring Boot with Temporal Spring Boot Autoconfigure\n\n**Root Cause:** The issue appears to be in `NonRootBeanPostProcessor` where there's a name/type mismatch:\n```java\ntestWorkflowEnvironment = findBean(\"temporalTestWorkflowEnvironment\", TestWorkflowEnvironmentAdapter.class);\n```\n\nHowever, `TestServerAutoConfiguration` registers:\n- `\"temporalTestWorkflowEnvironment\"` as a `TestWorkflowEnvironment`\n- `\"temporalTestWorkflowEnvironmentAdapter\"` as a `TestWorkflowEnvironmentAdapter`\n\nThe code is looking for a `TestWorkflowEnvironmentAdapter` with the wrong bean name.","closedAt":"2025-11-26T17:39:04Z","comments":[],"createdAt":"2025-11-24T17:28:13Z","labels":[],"milestone":null,"number":2735,"reactionGroups":[],"state":"CLOSED","title":"Non-root namespaces should be able to use the in-memory test server","updatedAt":"2025-11-26T17:39:04Z","url":"https://github.com/temporalio/sdk-java/issues/2735"}
