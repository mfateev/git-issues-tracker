{"assignees":[{"id":"MDQ6VXNlcjUzMjEwOA==","login":"Spikhalskiy","name":"Dmitry Spikhalsky","databaseId":0}],"author":{"id":"MDQ6VXNlcjUyMTc3","is_bot":false,"login":"loopingrage","name":"Jose de Castro"},"body":"## Expected Behavior\r\nA working test server\r\n\r\n## Actual Behavior\r\nA busted test-server\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Run the temporal typescript test server test [here](https://github.com/temporalio/samples-typescript/blob/main/activities-examples/src/workflows.test.ts)\r\n\r\n## Specifications\r\n\r\n  - Version: Temporal Typescript SDK 1.0.1\r\n  - Platform: Mac\r\n\r\n## Details\r\nThe temporal Typescript SDK [simply pulls](https://github.com/temporalio/sdk-typescript/blob/main/packages/testing/scripts/download-test-server.mjs) the latest build of test server which currently fails with a bunch of Java NoCLassDefFound errors.\r\n\r\n```\r\nException in thread \"grpc-default-executor-3\" java.lang.ExceptionInInitializerError\r\n        at io.temporal.api.common.v1.Payload$MetadataDefaultEntryHolder.<clinit>(Payload.java:124)\r\n        at io.temporal.api.common.v1.Payload.<init>(Payload.java:61)\r\n        at io.temporal.api.common.v1.Payload.<init>(Payload.java:15)\r\n        at io.temporal.api.common.v1.Payload$1.parsePartialFrom(Payload.java:754)\r\n        at io.temporal.api.common.v1.Payload$1.parsePartialFrom(Payload.java:748)\r\n        at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\r\n        at io.temporal.api.common.v1.Payloads.<init>(Payloads.java:63)\r\n        at io.temporal.api.common.v1.Payloads.<init>(Payloads.java:13)\r\n        at io.temporal.api.common.v1.Payloads$1.parsePartialFrom(Payloads.java:754)\r\n        at io.temporal.api.common.v1.Payloads$1.parsePartialFrom(Payloads.java:748)\r\n        at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\r\n        at io.temporal.api.workflowservice.v1.StartWorkflowExecutionRequest.<init>(StartWorkflowExecutionRequest.java:100)\r\n        at io.temporal.api.workflowservice.v1.StartWorkflowExecutionRequest.<init>(StartWorkflowExecutionRequest.java:9)\r\n        at io.temporal.api.workflowservice.v1.StartWorkflowExecutionRequest$1.parsePartialFrom(StartWorkflowExecutionRequest.java:3376)\r\n        at io.temporal.api.workflowservice.v1.StartWorkflowExecutionRequest$1.parsePartialFrom(StartWorkflowExecutionRequest.java:3370)\r\n        at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:86)\r\n        at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:48)\r\n        at io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parseFrom(ProtoLiteUtils.java:223)\r\n        at io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parse(ProtoLiteUtils.java:215)\r\n        at io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parse(ProtoLiteUtils.java:118)\r\n        at io.grpc.MethodDescriptor.parseRequest(MethodDescriptor.java:307)\r\n        at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.messagesAvailableInternal(ServerCallImpl.java:332)\r\n        at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.messagesAvailable(ServerCallImpl.java:315)\r\n        at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1MessagesAvailable.runInContext(ServerImpl.java:834)\r\n        at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\r\n        at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n        at java.lang.Thread.run(Thread.java:833)\r\n        at com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:705)\r\n        at com.oracle.svm.core.posix.thread.PosixPlatformThreads.pthreadStartRoutine(PosixPlatformThreads.java:202)\r\nCaused by: java.lang.RuntimeException: Generated message class \"com.google.protobuf.DescriptorProtos$FieldOptions\" missing method \"getUnverifiedLazy\".\r\n        at com.google.protobuf.GeneratedMessageV3.getMethodOrDie(GeneratedMessageV3.java:1847)\r\n        at com.google.protobuf.GeneratedMessageV3.access$1000(GeneratedMessageV3.java:79)\r\n        at com.google.protobuf.GeneratedMessageV3$FieldAccessorTable$SingularFieldAccessor$ReflectionInvoker.<init>(GeneratedMessageV3.java:2178)\r\n        at com.google.protobuf.GeneratedMessageV3$FieldAccessorTable$SingularFieldAccessor.<init>(GeneratedMessageV3.java:2252)\r\n        at com.google.protobuf.GeneratedMessageV3$FieldAccessorTable.ensureFieldAccessorsInitialized(GeneratedMessageV3.java:1982)\r\n        at com.google.protobuf.DescriptorProtos$FieldOptions.internalGetFieldAccessorTable(DescriptorProtos.java:28933)\r\n        at com.google.protobuf.GeneratedMessageV3.getDescriptorForType(GeneratedMessageV3.java:133)\r\n        at com.google.protobuf.GeneratedMessageV3$ExtendableMessage.parseUnknownField(GeneratedMessageV3.java:1134)\r\n        at com.google.protobuf.DescriptorProtos$FieldOptions.<init>(DescriptorProtos.java:28901)\r\n        at com.google.protobuf.DescriptorProtos$FieldOptions.<init>(DescriptorProtos.java:28795)\r\n        at com.google.protobuf.DescriptorProtos$FieldOptions$1.parsePartialFrom(DescriptorProtos.java:31031)\r\n        at com.google.protobuf.DescriptorProtos$FieldOptions$1.parsePartialFrom(DescriptorProtos.java:31025)\r\n        at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\r\n        at com.google.protobuf.DescriptorProtos$FieldDescriptorProto.<init>(DescriptorProtos.java:11706)\r\n        at com.google.protobuf.DescriptorProtos$FieldDescriptorProto.<init>(DescriptorProtos.java:11598)\r\n        at com.google.protobuf.DescriptorProtos$FieldDescriptorProto$1.parsePartialFrom(DescriptorProtos.java:14351)\r\n        at com.google.protobuf.DescriptorProtos$FieldDescriptorProto$1.parsePartialFrom(DescriptorProtos.java:14345)\r\n        at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\r\n        at com.google.protobuf.DescriptorProtos$DescriptorProto.<init>(DescriptorProtos.java:5232)\r\n        at com.google.protobuf.DescriptorProtos$DescriptorProto.<init>(DescriptorProtos.java:5168)\r\n        at com.google.protobuf.DescriptorProtos$DescriptorProto$1.parsePartialFrom(DescriptorProtos.java:10305)\r\n        at com.google.protobuf.DescriptorProtos$DescriptorProto$1.parsePartialFrom(DescriptorProtos.java:10299)\r\n        at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\r\n        at com.google.protobuf.DescriptorProtos$FileDescriptorProto.<init>(DescriptorProtos.java:1283)\r\n        at com.google.protobuf.DescriptorProtos$FileDescriptorProto.<init>(DescriptorProtos.java:1203)\r\n        at com.google.protobuf.DescriptorProtos$FileDescriptorProto$1.parsePartialFrom(DescriptorProtos.java:4892)\r\n        at com.google.protobuf.DescriptorProtos$FileDescriptorProto$1.parsePartialFrom(DescriptorProtos.java:4886)\r\n        at com.google.protobuf.AbstractParser.parsePartialFrom(AbstractParser.java:158)\r\n        at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:191)\r\n        at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:203)\r\n        at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:208)\r\n        at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:48)\r\n        at com.google.protobuf.DescriptorProtos$FileDescriptorProto.parseFrom(DescriptorProtos.java:2301)\r\n        at com.google.protobuf.Descriptors$FileDescriptor.internalBuildGeneratedFileFrom(Descriptors.java:417)\r\n        at io.temporal.api.common.v1.MessageProto.<clinit>(MessageProto.java:134)\r\n        ... 31 more\r\nCaused by: java.lang.NoSuchMethodException: com.google.protobuf.DescriptorProtos$FieldOptions.getUnverifiedLazy()\r\n        at java.lang.Class.getMethod(DynamicHub.java:2227)\r\n        at com.google.protobuf.GeneratedMessageV3.getMethodOrDie(GeneratedMessageV3.java:1844)\r\n        ... 65 more\r\nException in thread \"grpc-default-executor-3\" java.lang.ExceptionInInitializerError\r\n        at io.temporal.api.common.v1.Payload$MetadataDefaultEntryHolder.<clinit>(Payload.java:124)\r\n        at io.temporal.api.common.v1.Payload.<init>(Payload.java:61)\r\n        at io.temporal.api.common.v1.Payload.<init>(Payload.java:15)\r\n        at io.temporal.api.common.v1.Payload$1.parsePartialFrom(Payload.java:754)\r\n        at io.temporal.api.common.v1.Payload$1.parsePartialFrom(Payload.java:748)\r\n        at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\r\n        at io.temporal.api.common.v1.Payloads.<init>(Payloads.java:63)\r\n        at io.temporal.api.common.v1.Payloads.<init>(Payloads.java:13)\r\n        at io.temporal.api.common.v1.Payloads$1.parsePartialFrom(Payloads.java:754)\r\n        at io.temporal.api.common.v1.Payloads$1.parsePartialFrom(Payloads.java:748)\r\n        at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\r\n        at io.temporal.api.workflowservice.v1.StartWorkflowExecutionRequest.<init>(StartWorkflowExecutionRequest.java:100)\r\n        at io.temporal.api.workflowservice.v1.StartWorkflowExecutionRequest.<init>(StartWorkflowExecutionRequest.java:9)\r\n        at io.temporal.api.workflowservice.v1.StartWorkflowExecutionRequest$1.parsePartialFrom(StartWorkflowExecutionRequest.java:3376)\r\n        at io.temporal.api.workflowservice.v1.StartWorkflowExecutionRequest$1.parsePartialFrom(StartWorkflowExecutionRequest.java:3370)\r\n        at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:86)\r\n        at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:48)\r\n        at io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parseFrom(ProtoLiteUtils.java:223)\r\n        at io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parse(ProtoLiteUtils.java:215)\r\n        at io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parse(ProtoLiteUtils.java:118)\r\n        at io.grpc.MethodDescriptor.parseRequest(MethodDescriptor.java:307)\r\n        at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.messagesAvailableInternal(ServerCallImpl.java:332)\r\n        at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.messagesAvailable(ServerCallImpl.java:315)\r\n        at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1MessagesAvailable.runInContext(ServerImpl.java:834)\r\n        at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\r\n        at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n        at java.lang.Thread.run(Thread.java:833)\r\n        at com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:705)\r\n        at com.oracle.svm.core.posix.thread.PosixPlatformThreads.pthreadStartRoutine(PosixPlatformThreads.java:202)\r\nCaused by: java.lang.RuntimeException: Generated message class \"com.google.protobuf.DescriptorProtos$FieldOptions\" missing method \"getUnverifiedLazy\".\r\n        at com.google.protobuf.GeneratedMessageV3.getMethodOrDie(GeneratedMessageV3.java:1847)\r\n        at com.google.protobuf.GeneratedMessageV3.access$1000(GeneratedMessageV3.java:79)\r\n        at com.google.protobuf.GeneratedMessageV3$FieldAccessorTable$SingularFieldAccessor$ReflectionInvoker.<init>(GeneratedMessageV3.java:2178)\r\n        at com.google.protobuf.GeneratedMessageV3$FieldAccessorTable$SingularFieldAccessor.<init>(GeneratedMessageV3.java:2252)\r\n        at com.google.protobuf.GeneratedMessageV3$FieldAccessorTable.ensureFieldAccessorsInitialized(GeneratedMessageV3.java:1982)\r\n        at com.google.protobuf.DescriptorProtos$FieldOptions.internalGetFieldAccessorTable(DescriptorProtos.java:28933)\r\n        at com.google.protobuf.GeneratedMessageV3.getDescriptorForType(GeneratedMessageV3.java:133)\r\n        at com.google.protobuf.GeneratedMessageV3$ExtendableMessage.parseUnknownField(GeneratedMessageV3.java:1134)\r\n        at com.google.protobuf.DescriptorProtos$FieldOptions.<init>(DescriptorProtos.java:28901)\r\n        at com.google.protobuf.DescriptorProtos$FieldOptions.<init>(DescriptorProtos.java:28795)\r\n        at com.google.protobuf.DescriptorProtos$FieldOptions$1.parsePartialFrom(DescriptorProtos.java:31031)\r\n        at com.google.protobuf.DescriptorProtos$FieldOptions$1.parsePartialFrom(DescriptorProtos.java:31025)\r\n        at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\r\n        at com.google.protobuf.DescriptorProtos$FieldDescriptorProto.<init>(DescriptorProtos.java:11706)\r\n        at com.google.protobuf.DescriptorProtos$FieldDescriptorProto.<init>(DescriptorProtos.java:11598)\r\n        at com.google.protobuf.DescriptorProtos$FieldDescriptorProto$1.parsePartialFrom(DescriptorProtos.java:14351)\r\n        at com.google.protobuf.DescriptorProtos$FieldDescriptorProto$1.parsePartialFrom(DescriptorProtos.java:14345)\r\n        at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\r\n        at com.google.protobuf.DescriptorProtos$DescriptorProto.<init>(DescriptorProtos.java:5232)\r\n        at com.google.protobuf.DescriptorProtos$DescriptorProto.<init>(DescriptorProtos.java:5168)\r\n        at com.google.protobuf.DescriptorProtos$DescriptorProto$1.parsePartialFrom...\r\n```\r\n","closedAt":"2022-08-10T15:28:16Z","comments":[{"id":"IC_kwDODN12PM5IK0Qh","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"We mitigated the problem. You should be able to use the TS testing framework back.","createdAt":"2022-08-10T14:57:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1357#issuecomment-1210795041","viewerDidAuthor":false}],"createdAt":"2022-08-10T07:56:50Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQx","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":{"number":18,"title":"1.16.0","description":"","dueOn":"2022-08-24T00:00:00Z"},"number":1357,"reactionGroups":[],"state":"CLOSED","title":"Latest test-server is broken","updatedAt":"2022-08-10T16:21:13Z","url":"https://github.com/temporalio/sdk-java/issues/1357"}
