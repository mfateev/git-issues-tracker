{"assignees":[],"author":{"id":"U_kgDOBh0lUA","is_bot":false,"login":"dcohen8128","name":"David Cohen"},"body":"## Expected Behavior\r\nIt's indicated in a few places that the default catch up window on a schedule is 1 year:\r\n1. [The documentation website](https://docs.temporal.io/workflows#catchup-window)\r\n2. [The proto definition](https://github.com/temporalio/api/blob/v1.37.0/temporal/api/schedule/v1/message.proto#L239)\r\n3. [The server code](https://github.com/temporalio/temporal/blob/v1.24.2/service/worker/scheduler/workflow.go#L208)\r\n\r\nSo I would expect that if I don't set a catch up window on my `SchedulePolicy` when creating the schedule it will use the default value of 1 year.\r\n\r\n## Actual Behavior\r\nIf you don't set a catch up window on the `SchedulePolicy` the SDK will turn that into a duration of 0 when converting it into the proto `Duration` object [here](https://github.com/temporalio/sdk-java/blob/v1.24.3/temporal-sdk/src/main/java/io/temporal/internal/common/ProtobufTimeUtils.java#L76-L85). Then on the server the it will see that 0 is lower than the 10 second `minCatchupWindow` and use the min instead [here](https://github.com/temporalio/temporal/blob/v1.24.2/service/worker/scheduler/workflow.go#L1149).\r\n\r\n## Steps to Reproduce the Problem\r\nCreate a schedule with a policy that does not contain a catch up window:\r\n\r\n```java\r\nvar policy = SchedulePolicy.newBuilder()\r\n        .setCatchupWindow(null) // Or, remove this line since null is the default\r\n        .build();\r\n\r\nvar schedule = Schedule.newBuilder()\r\n        /* set action and spec and whatever else you want */\r\n        .setPolicy(policy)\r\n        .build();\r\n\r\nvar handle = scheduleClient.createSchedule(\"ScheduleId\", schedule, ScheduleOptions.newBuilder().build());\r\n```\r\n\r\n## Specifications\r\n\r\n  - Version: As far as I can tell, all versions since Schedules were released (Server - 1.17.0+, Java SDK - 1.20.0+)\r\n  - Platform:\r\n","closedAt":"2024-08-18T00:35:26Z","comments":[{"id":"IC_kwDODN12PM6IohJ6","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"This behaviour was changed in https://github.com/temporalio/sdk-java/commit/9a856f30 which is included in Java SDK 1.24.0+","createdAt":"2024-08-15T21:44:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2189#issuecomment-2292322938","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6IohmF","author":{"login":"dcohen8128"},"authorAssociation":"NONE","body":"Oh cool, we have a bunch of systems using older versions of the SDK so that's what I had dug through. My fault for not checking the whole data flow in the newer version.","createdAt":"2024-08-15T21:45:31Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2189#issuecomment-2292324741","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6IokLt","author":{"login":"dcohen8128"},"authorAssociation":"NONE","body":"For existing schedules can we do a no-op update to remove the 0 value from the policy?","createdAt":"2024-08-15T21:48:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2189#issuecomment-2292335341","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6Iy5S1","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Yes you can update the schedule with new policy to remove to remove the value","createdAt":"2024-08-18T00:35:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2189#issuecomment-2295043253","viewerDidAuthor":false}],"createdAt":"2024-08-15T21:41:42Z","labels":[],"milestone":null,"number":2189,"reactionGroups":[],"state":"CLOSED","title":"Schedules without a catch up window use the min catch up window instead of the default catch up window","updatedAt":"2024-08-18T00:35:26Z","url":"https://github.com/temporalio/sdk-java/issues/2189"}
