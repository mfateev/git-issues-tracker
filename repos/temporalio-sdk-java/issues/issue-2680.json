{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNDg2MzQ=","is_bot":false,"login":"brempusz","name":"Bartosz Rempuszewski"},"body":"I introduced activity worker to an existing application (rest service) to expose some logic as activity instead of another rest endpoint.\nSpring boot application fails to start if there is a problem with connection to temporal service.\nI observed this on a server under heavy load.\n\n## Expected Behavior\nApplication should start and report problems with temporal connection as health check.\nApplication should try to reconnect to temporal service and update health check.\n\nMaybe such behavior should be optional, enabled with a configuration property.\n\n\n## Actual Behavior\n\nApplication fails to start\n\n```\n2025-10-10 10:18:47.988 ERROR [,,] 7 --- [main] o.s.boot.SpringApplication               : Application run failed\n\nio.grpc.StatusRuntimeException: DEADLINE_EXCEEDED: ClientCall started after CallOptions deadline was exceeded .9-0,089095 seconds ago\n        at io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)\n        at io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)\n        at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)\n        at io.temporal.api.workflowservice.v1.WorkflowServiceGrpc$WorkflowServiceBlockingStub.getSystemInfo(WorkflowServiceGrpc.java:6740)\n        at io.temporal.serviceclient.SystemInfoInterceptor.getServerCapabilitiesOrThrow(SystemInfoInterceptor.java:112)\n        at io.temporal.serviceclient.SystemInfoInterceptor.lambda$getServerCapabilitiesWithRetryOrThrow$0(SystemInfoInterceptor.java:98)\n        at io.temporal.internal.retryer.GrpcSyncRetryer.retry(GrpcSyncRetryer.java:49)\n        at io.temporal.internal.retryer.GrpcRetryer.retryWithResult(GrpcRetryer.java:40)\n        at io.temporal.serviceclient.SystemInfoInterceptor.getServerCapabilitiesWithRetryOrThrow(SystemInfoInterceptor.java:97)\n        at io.temporal.serviceclient.ChannelManager.lambda$getServerCapabilities$3(ChannelManager.java:324)\n        at io.temporal.internal.worker.WorkflowPollTask.<init>(WorkflowPollTask.java:78)\n        at io.temporal.internal.worker.WorkflowWorker.start(WorkflowWorker.java:178)\n        at io.temporal.internal.worker.SyncWorkflowWorker.start(SyncWorkflowWorker.java:164)\n        at io.temporal.worker.Worker.start(Worker.java:408)\n        at io.temporal.worker.WorkerFactory.start(WorkerFactory.java:204)\n        at io.temporal.spring.boot.autoconfigure.RootNamespaceAutoConfiguration$WorkerFactoryStarter.onApplicationEvent(RootNamespaceAutoConfiguration.java:205)\n        at io.temporal.spring.boot.autoconfigure.RootNamespaceAutoConfiguration$WorkerFactoryStarter.onApplicationEvent(RootNamespaceAutoConfiguration.java:195)\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)\n        at org.springframework.boot.context.event.EventPublishingRunListener.ready(EventPublishingRunListener.java:109)\n        at org.springframework.boot.SpringApplicationRunListeners.lambda$ready$6(SpringApplicationRunListeners.java:80)\n        at java.base/java.lang.Iterable.forEach(Iterable.java:75)\n        at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)\n        at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)\n        at org.springframework.boot.SpringApplicationRunListeners.ready(SpringApplicationRunListeners.java:80)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:332)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)\n        at ... snip ...\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n        at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:102)\n        at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:64)\n        at org.springframework.boot.loader.launch.JarLauncher.main(JarLauncher.java:40)\n```\n\n## Specifications\n\ntemporal java sdk 1.31\ntemporal server version 1.28.0\n","closedAt":"2025-10-13T06:02:53Z","comments":[{"id":"IC_kwDODN12PM7Kaoqn","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"There are multiple options to address this in the linked issue, but I would not recommend following any of them unless absolutely necessary as they are all band-aids over the real problem. The root problem is your Temporal sever is overloaded and needs to be scaled up, taking over 10s for a simple RPC is too long and will cause a poor experience. ","createdAt":"2025-10-13T06:04:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2680#issuecomment-3395979943","viewerDidAuthor":false},{"id":"IC_kwDODN12PM7KbODR","author":{"login":"brempusz"},"authorAssociation":"NONE","body":"Thanks for the explanation.\n\nI hit this issue only during development (so far) when I do rollout of all services (there is a high cpu usage peek in such scenario - all services starting at once).\n\nI will follow hints from https://github.com/temporalio/sdk-java/issues/2466 and try manual start and `WorkflowServiceStubsOptions.Builder.setSystemInfoTimeout`.\n\nStill, I think it would be more \"spring-booty\" to report problems with connection as healthcheck.\n\n","createdAt":"2025-10-13T07:09:21Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2680#issuecomment-3396133073","viewerDidAuthor":false}],"createdAt":"2025-10-10T09:28:31Z","labels":[],"milestone":null,"number":2680,"reactionGroups":[],"state":"CLOSED","title":"Spring Boot application startup failure - DEADLINE_EXCEEDED","updatedAt":"2025-10-13T09:30:02Z","url":"https://github.com/temporalio/sdk-java/issues/2680"}
