{"assignees":[{"id":"MDQ6VXNlcjIwNTI3OTk5","login":"vkoby","name":"Vera","databaseId":0}],"author":{"id":"MDQ6VXNlcjUxNDI0NzQ=","is_bot":false,"login":"mobiletoly","name":"Toly Pochkin"},"body":"## Expected Behavior\r\n\r\nIn local activities throwing exception returned by ApplicationFailure.newNonRetryableFailure should result for workflow NOT to retry it. \r\n\r\n\r\n## Actual Behavior\r\n\r\nthrowing with ApplicationFailure.newNonRetryableFailure in Activity (launched via `Workflow.newLocalActivityStub`) results for workflow to keep retrying, which is incorrect behavior. Regular activities (launched via `Workflow.newActivityStub`) are working as expected.\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Create new activity A with method m() calling `throw ApplicationFailure.newNonRetryableFailure(...)`\r\n  2. Create workflow and register A as local activity via `Workflow.newLocalActivityStub` with `LocalActivityOptions` setup for some retries and duration.\r\n  3. Call method m() from workflow and ensure that m() is keep retrying.\r\n\r\n## Specifications\r\n\r\n  - Version: Temporal Java SDK 1.0.4\r\n  - Platform: Temporal Server 1.5.x\r\n  ","closedAt":"2021-08-17T00:17:37Z","comments":[{"id":"IC_kwDODN12PM41Ufi1","author":{"login":"yibo-yolabs"},"authorAssociation":"NONE","body":"Hi, is there any update on this bug? We are facing this bug too, and want to know when it will be addressed. Thanks!","createdAt":"2021-08-06T23:26:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/323#issuecomment-894564533","viewerDidAuthor":false},{"id":"IC_kwDODN12PM41Ug1i","author":{"login":"yibo-yolabs"},"authorAssociation":"NONE","body":"To walk around this bug, I have to do setDoNotRetry() with the extensive list of exceptions in the LocalActivityOptions.RetryOptions. ","createdAt":"2021-08-06T23:51:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/323#issuecomment-894569826","viewerDidAuthor":false}],"createdAt":"2021-01-28T18:48:27Z","labels":[],"milestone":{"number":3,"title":"v1.3.0","description":"","dueOn":"2021-08-31T00:00:00Z"},"number":323,"reactionGroups":[],"state":"CLOSED","title":"Throwing non-retriable failure ignored by local activities","updatedAt":"2021-08-17T00:17:37Z","url":"https://github.com/temporalio/sdk-java/issues/323"}
