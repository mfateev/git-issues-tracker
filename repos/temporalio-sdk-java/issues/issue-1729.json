{"assignees":[],"author":{"id":"U_kgDOB4Olxg","is_bot":false,"login":"poshak-greytip","name":"poshak"},"body":"## Expected Behavior\r\nThe activities are not getting started.\r\n\r\nThe activity definition is \r\n@ActivityMethod\r\nS3Object fetchS3File(PrefillPayload payload, String referenceId) throws IOException;\r\n\r\nI am trying to call this activity in workflow.\r\nS3Object s3Object  =  prefillActivity.fetchS3File(prefillPayloadRequest,\"123\");\r\n\r\n\r\n## Actual Behavior\r\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.amazonaws.services.s3.model.S3Object[\"objectContent\"]->com.amazonaws.services.s3.model.S3ObjectInputStream[\"in\"]->com.amazonaws.services.s3.internal.S3AbortableInputStream[\"in\"]->com.amazonaws.services.s3.internal.DigestValidationInputStream[\"in\"]->com.amazonaws.services.s3.AmazonS3Client$2[\"in\"]->com.amazonaws.util.ServiceClientHolderInputStream[\"in\"]->com.amazonaws.services.s3.model.S3ObjectInputStream[\"in\"]->com.amazonaws.event.ResponseProgressInputStream[\"in\"]->org.apache.http.conn.EofSensorInputStream[\"eofWatcher\"]->org.apache.http.impl.execchain.ResponseEntityProxy[\"connHolder\"]->org.apache.http.impl.execchain.ConnectionHolder[\"manager\"]->com.amazonaws.http.conn.$Proxy109[\"h\"]->com.amazonaws.http.conn.ClientConnectionManagerFactory$Handler[\"orig\"]->org.apache.http.impl.conn.PoolingHttpClientConnectionManager[\"pool\"]->org.apache.http.impl.conn.CPool[\"condition\"])\r\n\r\n\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1.Try creating a activity which should return an S3 object \r\n \r\n## Specifications\r\n\r\n  - Version: 1.20\r\n  - Platform: java 11\r\n","closedAt":"2023-04-03T07:42:30Z","comments":[{"id":"IC_kwDODN12PM5ZCheY","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"Temporal doesn't handle serialization, we provide integration points (`PayloadConverter`, `PayloadCovec` abstractions) and default implementations for basic scenarios.\r\nWe don't and can't cover all existing objects out there is our standard distribution.\r\n`java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject` is obviously not JSON serializable by default (it's a serialization primitive) and you need to configure your entities or instruct Jackson or other Json framework of your choice on how to deal with that.\r\nTemporal doesn't provide tooling on making S3 objects serializable by Jackson, but it does not limit what users can do with their own serialization logic / settings. It's the user's responsibility, the questions on S3/Jackson should be routed to S3 or Jackson maintainers and teams. \r\n\r\nGenerally, an object containing any kind of input stream (`com.amazonaws.services.s3.model.S3ObjectInputStream`) shouldn't be used as an activity return value. The S3 object should be either fully fetched and converted into a full in-memory representation serializable by Json or any other framework or passed \"by reference / id\".","createdAt":"2023-04-03T07:42:30Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-java/issues/1729#issuecomment-1493833624","viewerDidAuthor":false}],"createdAt":"2023-04-02T09:26:18Z","labels":[{"id":"LA_kwDODN12PM7NRayD","name":"wontfix","description":"This will not be worked on","color":"BFD4F2"}],"milestone":null,"number":1729,"reactionGroups":[],"state":"CLOSED","title":"Jackson serialization issue when activity returns s3 object as response.","updatedAt":"2023-04-03T08:05:39Z","url":"https://github.com/temporalio/sdk-java/issues/1729"}
