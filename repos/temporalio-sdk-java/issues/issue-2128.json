{"assignees":[],"author":{"id":"MDQ6VXNlcjY2NzQ1NTc3","is_bot":false,"login":"Lavmee","name":"Samuel Gagarin"},"body":"## Expected Behavior\r\nWorkflowServiceStubs Bean is created.\r\n\r\n## Actual Behavior\r\nFactory method 'workflowServiceStubs' threw exception with message: com/google/protobuf/GeneratedMessageV3\r\n2024-06-26T12:51:09.185951139Z \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177) ~[spring-beans-6.1.10.jar!/:6.1.10]\r\n2024-06-26T12:51:09.185951972Z \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644) ~[spring-beans-6.1.10.jar!/:6.1.10]\r\n2024-06-26T12:51:09.185952764Z \t... 68 common frames omitted\r\n2024-06-26T12:51:09.185953389Z Caused by: java.lang.NoClassDefFoundError: com/google/protobuf/GeneratedMessageV3\r\n\r\n## Steps to Reproduce the Problem\r\n\r\n  1. Spring version 3.3.1 & Temporal version 1.24.0\r\n  2. Create workflowServiceStubs Bean\r\n```kotlin\r\n    @Bean\r\n    fun workflowServiceStubs(): WorkflowServiceStubs = WorkflowServiceStubs.newServiceStubs(\r\n        WorkflowServiceStubsOptions {\r\n            setTarget(temporalProperties.connectionTarget)\r\n        }\r\n    )\r\n```\r\n\r\n## Specifications\r\n\r\n  - Version: 1.24.0\r\n","closedAt":"2024-07-05T08:49:05Z","comments":[{"id":"IC_kwDODN12PM6Co4VT","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"What version of protobuf are you using?","createdAt":"2024-06-26T13:48:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2128#issuecomment-2191754579","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6CqOd0","author":{"login":"Lavmee"},"authorAssociation":"NONE","body":"> What version of protobuf are you using?\r\n\r\nI found the problem. I use Temporal SDK together with the [DGS](https://github.com/Netflix/dgs-framework) framework, which uses protobuf version 4.26.1","createdAt":"2024-06-26T16:21:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2128#issuecomment-2192107380","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6Cqfs5","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"Yes protobuf `4.26` is know to be [problematic](https://github.com/grpc/grpc-java/issues/11015) with `grpc-java`","createdAt":"2024-06-26T16:41:06Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2128#issuecomment-2192177977","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6DwQ2s","author":{"login":"Lavmee"},"authorAssociation":"NONE","body":"Now workaround for me: use shaded Temporal SDK, so I'm closing the issue. Thanks!","createdAt":"2024-07-05T08:49:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2128#issuecomment-2210467244","viewerDidAuthor":false}],"createdAt":"2024-06-26T12:59:14Z","labels":[],"milestone":null,"number":2128,"reactionGroups":[],"state":"CLOSED","title":"NoClassDefFoundError: com/google/protobuf/GeneratedMessageV3 | Spring 3.3.1","updatedAt":"2024-07-08T14:00:28Z","url":"https://github.com/temporalio/sdk-java/issues/2128"}
