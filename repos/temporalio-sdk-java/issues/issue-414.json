{"assignees":[{"id":"MDQ6VXNlcjIwNTI3OTk5","login":"vkoby","name":"Vera","databaseId":0}],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"## Expected Behavior\r\n\r\nWe have a simple workflow that triggers an activity that fails on its first invocation and succeeds on subsequent calls.\r\nWe setup Activity#retryOptions into maxAttempt = 1 and Workflow#retryOptions into maxAttempt = 2.\r\nWe expect the workflow to pass after the second run.\r\n\r\n## Actual Behavior\r\n\r\nWorkflow fails in unit tests, there is no second run of the workflow.\r\n\r\n## Steps to Reproduce the Problem\r\nThe following unit test is failing, while expected to pass:\r\nhttps://github.com/Spikhalskiy/java-sdk/commit/3ff42f47a9a0c4da359cec07d6cccccf808e6836#diff-1cfa937ab805ee84ebdaf1e67c2f920b3ad72d53cf29e560061aeee0f3d7e012R91\r\n \r\nIf uncomment `//.setUseExternalService(true)` the test passes which points that the issue is probably in TestService implementation.\r\n\r\n## Specifications\r\n\r\nCurrent master: 8384e5393eb84be3044fced0b3db3daa8749c75f\r\n","closedAt":"2021-05-28T20:49:28Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDgxMTYzMTg3MA==","author":{"login":"vitarb"},"authorAssociation":"CONTRIBUTOR","body":"Thanks for reporting the issue, we'll take a look and will get back to you.","createdAt":"2021-04-01T04:38:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/414#issuecomment-811631870","viewerDidAuthor":false}],"createdAt":"2021-03-31T20:20:51Z","labels":[],"milestone":null,"number":414,"reactionGroups":[],"state":"CLOSED","title":"Workflow retry after Activity failure works incorrectly with TestService","updatedAt":"2021-07-16T01:04:30Z","url":"https://github.com/temporalio/sdk-java/issues/414"}
