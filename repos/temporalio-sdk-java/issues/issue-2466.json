{"assignees":[],"author":{"id":"MDQ6VXNlcjQ2OTIyMzU=","is_bot":false,"login":"parinmaru2","name":"parin maru"},"body":"## Expected Behavior\n\nOld SDK versions (older than v1.22.0)\n- If temporal server is unavailable, the worker service would still be able to startup successfully though it would have errors in the logs about the server being unavailable.\n\n\n## Actual Behavior\nNew SDK versions (>= v1.22.0)\n- Worker service wouldn't come up if the temporal server is unavailable.\n\n\n## Desired Behavior\n- It's fine to keep the default behavior where worker wouldn't be able to startup if the temporal server is unavailable. However, it would be good if a config is provided that customers can override if they want the older behavior where the worker service wouldn't crash in case the server is unavailable.\n\n\nMore details can be found in this conversation: https://community.temporal.io/t/spring-boot-starter-behavior-changes-on-app-startup/12239","closedAt":"2025-05-06T16:32:22Z","comments":[{"id":"IC_kwDODN12PM6lRHzK","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"To start a worker the Temporal service must be up and reachable, this is a requirement across all of our SDKs including Java. There was not change to this requirement in `v1.22.0`. In Springboot if you don't want to start a worker on application start up you can set `start-workers: false`. See the [readme](https://github.com/temporalio/sdk-java/tree/master/temporal-spring-boot-autoconfigure#explicit-configuration) for more details ","createdAt":"2025-04-02T14:22:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2466#issuecomment-2772729034","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6lVioZ","author":{"login":"parinmaru2"},"authorAssociation":"NONE","body":"@Quinn-With-Two-Ns If you looked at the [attached link,](https://community.temporal.io/t/spring-boot-starter-behavior-changes-on-app-startup/12239) there are screenshots about the before/after behavior.\n\nBefore (on v1.21.2):\n\n![Image](https://github.com/user-attachments/assets/4da9d147-287a-43c1-a9e4-86539b27e676)\n\n\nAfter (on v1.23.2):\n\n![Image](https://github.com/user-attachments/assets/78bc65be-c218-4c67-976c-b286d551d366)\n\n\nI believe @mfateev commented on that thread that this change was done in v1.22.0.","createdAt":"2025-04-02T22:39:01Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2466#issuecomment-2773887513","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6lVmPr","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"https://github.com/temporalio/sdk-java/issues/1837 changes when a worker we exactly started, but workers have always required a connection to Temporal to start. If you would like to control worker start you can set `start-workers: false` as I described above. ","createdAt":"2025-04-02T22:49:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2466#issuecomment-2773902315","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6lVnwR","author":{"login":"parinmaru2"},"authorAssociation":"NONE","body":"@Quinn-With-Two-Ns I am not sure how `start-workers: false` will help us here.\n\nMy goal is to be able to start my temporal workflow worker even if the upstream temporal server isn't available. How will `start-workers: false` help here? Apologize if I am missing something.","createdAt":"2025-04-02T22:54:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2466#issuecomment-2773908497","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6lVrfq","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"You should only start your worker if the temporal service is available. Why is your Temporal service not avaialbe when you are trying to start a worker?","createdAt":"2025-04-02T23:07:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2466#issuecomment-2773923818","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6lVtkU","author":{"login":"parinmaru2"},"authorAssociation":"NONE","body":"Totally agree with you @Quinn-With-Two-Ns . However, we provide self-hosted Temporal servers within our company as a managed-service. And one of our customers has this very peculiar use case where they want the worker to startup successfully even if Temporal service is not available. ","createdAt":"2025-04-02T23:15:10Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2466#issuecomment-2773932308","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6pahxE","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"If a worker cannot connect to the Temporal service the worker cannot successfully start. I would recommend fixing the issue causing the worker to start before the Temporal service is up.\n\nIf you are okay with the worker start blocking until it connects to the Temporal server you can increase the time for the first connection request by increasing `WorkflowServiceStubsOptions.Builder.setSystemInfoTimeout` and start the worker manually.","createdAt":"2025-04-30T15:06:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2466#issuecomment-2842303556","viewerDidAuthor":false},{"id":"IC_kwDODN12PM6pb29j","author":{"login":"parinmaru2"},"authorAssociation":"NONE","body":"Thanks @Quinn-With-Two-Ns ","createdAt":"2025-04-30T17:01:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2466#issuecomment-2842652515","viewerDidAuthor":false},{"id":"IC_kwDODN12PM7b7knP","author":{"login":"Daverkex"},"authorAssociation":"NONE","body":"Hi @Quinn-With-Two-Ns, a microservice best practice is to make a difference between my application crashing and my application needing something not possible now.\n[Kubernetes](https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/) and [Spring Boot](https://spring.io/blog/2020/03/25/liveness-and-readiness-probes-with-spring-boot) implement this with the readiness vs liveness probes.\nThe mechanism allows avoiding cascading failures overheating the container orchestrator.\n\nIt's not the same for an application to not be responding as for an application to be waiting for \"backends\".\nIn the 1st case, the orchestrator does nothing (in reality, K8s service pointing to the pods remains empty).\nIn the 2nd case, the orchestrator will rotate the pod.\n\nIn a microsystem architecture, a good handle on this behavior is critical. It's the difference between a service being down and all services in the system being down (cascade failure).\n\nKnowing that, could you rethink integrating a way to make a difference between liveness and readiness in the Temporal client for spring?","createdAt":"2025-12-24T13:48:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/2466#issuecomment-3689826767","viewerDidAuthor":false}],"createdAt":"2025-04-02T05:51:26Z","labels":[],"milestone":null,"number":2466,"reactionGroups":[],"state":"CLOSED","title":"Spring boot starter behavior changes on app startup","updatedAt":"2025-12-24T13:48:39Z","url":"https://github.com/temporalio/sdk-java/issues/2466"}
