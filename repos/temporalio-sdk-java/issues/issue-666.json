{"assignees":[{"id":"MDQ6VXNlcjUzMjEwOA==","login":"Spikhalskiy","name":"Dmitry Spikhalsky","databaseId":0}],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"If GrpcRetryer gets some retryable exception enough times that it ends in DEADLINE_EXCEEDED, it will throw DEADLINE_EXCEEDED as the main exception outside, losing information about previous exceptions that actually made us continue retrying and this can hurt debuggability and ease of investigations for our users. Because most application developers will be actually interested in the underlying exception that made us retrying all this time.\r\n\r\nProposed solution:\r\nIf DEADLINE_EXCEEDED happened during retries, we can discard DEADLINE_EXCEEDED and return a previous exception if it exists. \r\nIt's probably the cleanest way because it simulates what happens during a normal timeout. \r\nBut what if the code that uses GrpcRetryer relies on DEADLINE_EXCEEDED exception to detect the expiration of GRPC deadline? It will quickly get DEADLINE_EXCEEDED on the next GRPC operation. We need to discuss if it's good enough and if this approach is safe.\r\n\r\n","closedAt":"2021-08-26T21:18:45Z","comments":[],"createdAt":"2021-08-24T22:23:14Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQx","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":{"number":3,"title":"v1.3.0","description":"","dueOn":"2021-08-31T00:00:00Z"},"number":666,"reactionGroups":[],"state":"CLOSED","title":"GrpcRetryer could lose a real cause in case of DEADLINE_EXCEEDED","updatedAt":"2021-08-31T01:48:12Z","url":"https://github.com/temporalio/sdk-java/issues/666"}
