{"assignees":[{"id":"MDQ6VXNlcjUzMjEwOA==","login":"Spikhalskiy","name":"Dmitry Spikhalsky","databaseId":0}],"author":{"id":"MDQ6VXNlcjMxNTMxOQ==","is_bot":false,"login":"karneyli","name":"Karney Li"},"body":"The spring boot auto discovery doesn't allow taskQueues to be set programmatically or through property interpolation/resolution.  \r\n\r\nIn the java-samples, the [FileProcessingWorker](https://github.com/temporalio/samples-java/blob/main/src/main/java/io/temporal/samples/fileprocessing/FileProcessingWorker.java#L57) registers the `StoreActivitiesImpl` to two different task queues, one shared and one host name specific.  There's no way to do this currently if we go the spring boot autoconfigured route.  The `WorkersTemplate` doesn't have a way to delegate `taskQueues` to a resolver function.  Ideally, it would work similar to how JUnit's @ParameterizedTest + @MethodSource works.\r\n\r\nThe `WorkersTemplate` also doesn't do property value interpolation, so all the taskQueues end up having just being a list of hardcoded strings in the @ActivityImpl annotation, it would be nice if some of the values could come from application properties config.  \r\n\r\n","closedAt":"2023-01-29T22:00:02Z","comments":[{"id":"IC_kwDODN12PM5PcvTm","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"> The spring boot auto discovery doesn't allow taskQueues to be set programmatically or through property interpolation/resolution.\r\n> The WorkersTemplate also doesn't do property value interpolation, so all the taskQueues end up having just being a list of hardcoded strings in the @ActivityImpl annotation, it would be nice if some of the values could come from application properties config.\r\n\r\nPlease take a look at the Spring-Boot Readme:\r\nhttps://github.com/temporalio/sdk-java/tree/master/temporal-spring-boot-autoconfigure-alpha#explicit-configuration","createdAt":"2022-12-01T00:24:32Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1550#issuecomment-1332933862","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5Pc4MC","author":{"login":"karneyli"},"authorAssociation":"NONE","body":"The explicit configuration is an option and would address at least the\ntaskQueues through properties but not the programmatic / dynamic use case.\nAuto-configuration by package is far less toil than listing out all classes\nand beans.  Mixing the two styles according to the documentation is not\nwell-defined in terms of behaviour.\n\nOn Wed, Nov 30, 2022, 7:24 p.m. Dmitry Spikhalskiy ***@***.***>\nwrote:\n\n> The spring boot auto discovery doesn't allow taskQueues to be set\n> programmatically or through property interpolation/resolution.\n>\n> Please take a look at the Readme:\n>\n> https://github.com/temporalio/sdk-java/tree/master/temporal-spring-boot-autoconfigure-alpha#explicit-configuration\n>\n> â€”\n> Reply to this email directly, view it on GitHub\n> <https://github.com/temporalio/sdk-java/issues/1550#issuecomment-1332933862>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AACM7NZJ4U6DKTSNOR5KYLTWK7V4XANCNFSM6AAAAAASQCVF64>\n> .\n> You are receiving this because you authored the thread.Message ID:\n> ***@***.***>\n>\n","createdAt":"2022-12-01T00:45:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1550#issuecomment-1332970242","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5Pnr8o","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"Spring Boot is a framework for config-driven simplified setup. For programmatic-driven setups, Spring Boot is not needed. Users that need unlimited flexible or programmatic configuration should just configure the WorkerFactory from their code not using any Spring Boot module at all. Spring Boot doesn't bring much value here.\r\n\r\nOur Spring Boot doesn't have a goal of unlimited extensibility, it will be opinionated to keep things easy for most typical usages. It's impossible to keep things simple for all usages with config-driven approach.\r\n\r\nI may consider introducing a concept of \"Worker Name or ID\" at some point and make a taskQueue just a property and don't use it to bind properties together, but not at this moment. \r\n","createdAt":"2022-12-02T20:16:28Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1550#issuecomment-1335803688","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5T6QeA","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"Closed by #1623 ","createdAt":"2023-01-29T22:00:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1550#issuecomment-1407780736","viewerDidAuthor":false}],"createdAt":"2022-11-30T21:35:30Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQ0","name":"enhancement","description":"User experience","color":"a2eeef"}],"milestone":{"number":20,"title":"1.18.0","description":"","dueOn":"2022-11-29T00:00:00Z"},"number":1550,"reactionGroups":[],"state":"CLOSED","title":"Dynamic & interpolated taskQueues ","updatedAt":"2023-01-29T22:00:02Z","url":"https://github.com/temporalio/sdk-java/issues/1550"}
