{"assignees":[{"id":"MDQ6VXNlcjUzMjEwOA==","login":"Spikhalskiy","name":"Dmitry Spikhalsky","databaseId":0}],"author":{"id":"MDQ6VXNlcjk5NTk3NjE=","is_bot":false,"login":"seregazhuk","name":"Sergey Zhuk"},"body":"To start using test-sever in PHP-SDK we need the following functionality.","closedAt":"2022-04-21T04:03:34Z","comments":[{"id":"IC_kwDODN12PM5Bzcx3","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"Other SDK successfully use test server without this functionality. If it's currently a prerequisite for using test server in PHP SDK, it shouldn't be. SDKs themselves never call describeNamespace, PHP shouldn't be different. ","createdAt":"2022-04-20T14:33:40Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1158#issuecomment-1104006263","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5BzpBf","author":{"login":"rustatian"},"authorAssociation":"NONE","body":"> Other SDK successfully use test server without this functionality. If it's currently a prerequisite for using test server in PHP SDK, it shouldn't be. SDKs themselves never call describeNamespace, PHP shouldn't be different.\r\n\r\nHey @Spikhalskiy, Could you please point me to a doc or manual with a testing-server limitations? It would be great to see what API it doesn't support.","createdAt":"2022-04-20T15:18:03Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1158#issuecomment-1104056415","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5Bzuc-","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"This class: https://github.com/temporalio/sdk-java/blob/1816ad2499b8e98a20d158a8f0a4c64bb41a9a09/temporal-test-server/src/main/java/io/temporal/internal/testservice/TestWorkflowService.java\r\nimplements WorkflowService, all methods that are not overridden will throw an UNIMPLEMENTED exception.\r\n\r\nCurrently, it's\r\n```\r\n  registerNamespace\r\n  describeNamespace\r\n  listNamespaces\r\n  updateNamespace\r\n  deprecateNamespace\r\n  getWorkflowExecutionHistoryReverse\r\n  resetWorkflowExecution\r\n  listWorkflowExecutions\r\n  listArchivedWorkflowExecutions\r\n  scanWorkflowExecutions\r\n  countWorkflowExecutions\r\n  getSearchAttributes\r\n  resetStickyTaskQueue\r\n  describeTaskQueue\r\n  getClusterInfo\r\n  getSystemInfo\r\n  listTaskQueuePartitions\r\n```\r\n\r\nSome notes:\r\nregisterNamespace is not needed for Test Server, you can just use any namespace name without registering with it\r\nresetStickyTaskQueue probably should be implemented in a trivial way and just return silently without an exception. All SDKs just ignore any exception from the sticky queue reset, because it's not too important.\r\n\r\n","createdAt":"2022-04-20T15:38:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1158#issuecomment-1104078654","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5Bz7L5","author":{"login":"rustatian"},"authorAssociation":"NONE","body":"@Spikhalskiy Great, thank you for the help.\r\n\r\nHowever, this is not a PHP-SDK error, as I figured out.\r\nI have created a simple worker in go-sdk (I'm not a Java dev, so forgive me for the snippet in Go), without any activities or workflows registered. Here is the sample:\r\n```go\r\npackage main\r\n\r\nimport (\r\n\t\"log\"\r\n\r\n\t\"go.temporal.io/sdk/client\"\r\n\t\"go.temporal.io/sdk/worker\"\r\n)\r\n\r\nfunc main() {\r\n\t// The client and worker are heavyweight objects that should be created once per process.\r\n\tc, err := client.NewClient(client.Options{\r\n\t\tHostPort: client.DefaultHostPort,\r\n\t})\r\n\tif err != nil {\r\n\t\tlog.Fatalln(\"Unable to create client\", err)\r\n\t}\r\n\tdefer c.Close()\r\n\r\n\tw := worker.New(c, \"greetings\", worker.Options{})\r\n\r\n\terr = w.Run(worker.InterruptCh()) <-------- ERROR is here\r\n\tif err != nil {\r\n\t\tlog.Fatalln(\"Unable to start worker\", err)\r\n\t}\r\n}\r\n```\r\n\r\nIf you run this code snippet with a test-server, you'll get an error: `2022/04/20 18:16:05 Unable to start worker Method temporal.api.workflowservice.v1.WorkflowService/DescribeNamespace is unimplemented`\r\n\r\nEDIT: test-server version is: 1.10.0","createdAt":"2022-04-20T16:20:34Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1158#issuecomment-1104130809","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5B0G2n","author":{"login":"Spikhalskiy"},"authorAssociation":"CONTRIBUTOR","body":"Good catch, you are right. It was added to Go SDK here: https://github.com/uber-go/cadence-client/pull/196 \r\nIt's actually a discrepancy, we should either remove it from Go SDK or add it to other SDKs. Java, Typescript and I guess Python  SDKs don't do it right now. We will discuss it. I don't see too much reason to make this explicit all. \r\nBut it looks like we should implement some stub describeNamespace in the test server just for the sake of compatibility with older versions of Go SDK.","createdAt":"2022-04-20T16:53:54Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/temporalio/sdk-java/issues/1158#issuecomment-1104178599","viewerDidAuthor":false},{"id":"IC_kwDODN12PM5B0JxN","author":{"login":"rustatian"},"authorAssociation":"NONE","body":"Got u, thanks ðŸ¤ Looking forward to the solution ðŸ‘ðŸ» ","createdAt":"2022-04-20T17:04:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1158#issuecomment-1104190541","viewerDidAuthor":false}],"createdAt":"2022-04-20T07:43:07Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQ0","name":"enhancement","description":"User experience","color":"a2eeef"}],"milestone":{"number":13,"title":"1.11.0","description":"","dueOn":"2022-05-02T00:00:00Z"},"number":1158,"reactionGroups":[],"state":"CLOSED","title":"Implement temporal.api.workflowservice.v1.WorkflowService/DescribeNamespace in test-server","updatedAt":"2022-04-21T04:03:34Z","url":"https://github.com/temporalio/sdk-java/issues/1158"}
