{"assignees":[],"author":{"id":"MDQ6VXNlcjUzMjEwOA==","is_bot":false,"login":"Spikhalskiy","name":"Dmitry Spikhalsky"},"body":"## Expected Behavior\r\n\r\n`workflow_completed` metric counter is expected to count newly completed executions.\r\n\r\n## Actual Behavior\r\n\r\nworkflow_completed counter counts successful completion of workflow methods, including replays for example.\r\n\r\n## Additional Context\r\n\r\nThe same problem is present for `workflow_continue_as_new` counter and `workflow_failed`.\r\n\r\n## Proposed solution\r\n\r\nA worker should log these metrics only after reporting the completion of the workflow task to the server and getting a confirmation from the server that the completion was not rejected.","closedAt":"2025-12-10T13:20:46Z","comments":[{"id":"IC_kwDODN12PM5R_cg9","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"I think we need to fix this in multiple SDKs. May be worth an sdk-features issue.","createdAt":"2023-01-09T12:57:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-java/issues/1590#issuecomment-1375586365","viewerDidAuthor":false}],"createdAt":"2023-01-08T06:40:40Z","labels":[{"id":"MDU6TGFiZWwxNjIyNzE5ODQx","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1590,"reactionGroups":[],"state":"CLOSED","title":"workflow_completed counter counts successful completions of workflow method instead of workflow executions","updatedAt":"2025-12-10T13:20:46Z","url":"https://github.com/temporalio/sdk-java/issues/1590"}
