{"assignees":[],"author":{"id":"MDQ6VXNlcjMwMzUwMjUw","is_bot":false,"login":"mehaKumar","name":"Meha Kumar"},"body":"### Is your feature request related to a problem? Please describe.\n\nI have a synchronous method within an Activity that accesses `ActivityExecutionContext.Current.Logger`. I want to unit test this method, but `Temporalio.Testing.ActivityEnvironment` only has a `RunAsync` method. I have to do one of these hacky options to get around this:\n1) Wrap `Temporalio.Testing.ActivityEnvironment` access in a pass-through interface wrapper, so I can mock it.\n2) Mark my synchronous method Async.\n3) Don't test the synchronous helper on its own, only test the surrounding async Activity.\n\n### Describe the solution you'd like\n\n`Temporalio.Testing.ActivityEnvironment` could have a `Run` method for synchronous code that uses `ActivityExecutionContext`.\n\n","closedAt":null,"comments":[{"id":"IC_kwDOInL6Hs6hTSU6","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> I want to unit test this method, but `Temporalio.Testing.ActivityEnvironment` only has a `RunAsync` method\n\nWe intentionally make it `RunAsync` because it represents any chunk of asynchronous code that could run inside our activity worker. This is the same reason `TemporalWorker` does not offer a synchronous execute. While internally in this testing framework thus far we do not use asynchronous pieces, we may in the future do so.\n\n> I have to do one of these hacky options to get around this:\n\nYou can do whatever you do in any other .NET sync context when you must run async code, e.g. `myEnv.RunAsync(myActivity).GetAwaiter().GetResult()`. But we need to keep this async for any future asynchronous needs internal to the test environment and to be like workers themselves which are async only.","createdAt":"2025-03-07T11:14:46Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/420#issuecomment-2706187578","viewerDidAuthor":false}],"createdAt":"2025-03-06T23:58:32Z","labels":[{"id":"LA_kwDOInL6Hs8AAAABJH7znQ","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":420,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"OPEN","title":"[Feature Request] Provide synchronous Run method in testing","updatedAt":"2025-03-07T12:49:33Z","url":"https://github.com/temporalio/sdk-dotnet/issues/420"}
