{"assignees":[],"author":{"id":"MDQ6VXNlcjcwOTQ0NzQ=","is_bot":false,"login":"jimborogers","name":"James R"},"body":"### Is your feature request related to a problem? Please describe.\n\nI am using NLog with an HTTP target. Logging calls in the workflow result in an non-determinism error captured in this truncated stack trace:\n\n```\nFailed activation on workflow my-workflow with ID 96c4ba3b-1004-f011-846f-6025bd135063 and run ID 0195a9ef-fd91-73e1-94b0-ada51bc3e1a3\nTemporalio.Exceptions.InvalidWorkflowSchedulerException Workflow attempted to perform a thread transfer task which is non-deterministic. This can be caused by timers or other non-deterministic async calls. Void Throw()    at System.Environment.get_StackTrace()\n   at Worker.WorkflowTracingEventListener.OnFrameworkEventWritten(WorkflowInstance instance, EventWrittenEventArgs evt)\n   at Worker.WorkflowTracingEventListener.OnEventWritten(EventWrittenEventArgs evt)\n   at Tracing.EventSource.DispatchToAllListeners(EventWrittenEventArgs eventCallbackArgs)\n   at Tracing.EventSource.WriteEventWithRelatedActivityIdCore(Int32 eventId, Guid* relatedActivityId, Int32 eventDataCount, EventData* data)\n   at Tracing.FrameworkEventSource.WriteEvent(Int32 eventId, Int64 arg1, Int32 arg2, String arg3, Boolean arg4, Int32 arg5, Int32 arg6)\n   at Threading.TimerQueueTimer.Change(UInt32 dueTime, UInt32 period)\n   at Threading.Timer.Change(Int32 dueTime, Int32 period)\n   at Targets.AsyncTaskTarget.Write(AsyncLogEventInfo logEvent)\n   at Targets.AsyncTaskTarget.WriteAsyncThreadSafe(AsyncLogEventInfo logEvent)\n   at NLog.Targets.Target.WriteAsyncLogEvent(AsyncLogEventInfo logEvent)\n```\n\n### Describe the solution you'd like\n\nI discussed this with @cretz at Replay conference - he proposed there is an \"unsafe\" method that could be exposed in the .NET SDK and used for purpose of avoiding these errors.","closedAt":null,"comments":[{"id":"IC_kwDOInL6Hs6jHroH","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Thanks! I have opened #436. In the meantime you can set `TemporalWorkerOptions.DisableWorkflowTracingEventListener` to `true` at the worker level (though that has the consequence of disabling this protection everywhere).","createdAt":"2025-03-19T13:43:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/435#issuecomment-2736699911","viewerDidAuthor":false}],"createdAt":"2025-03-19T06:41:08Z","labels":[{"id":"LA_kwDOInL6Hs8AAAABJH7znQ","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":435,"reactionGroups":[],"state":"OPEN","title":"[Feature Request] Workflow logging - NLog async calls","updatedAt":"2025-03-19T13:43:20Z","url":"https://github.com/temporalio/sdk-dotnet/issues/435"}
