{"assignees":[],"author":{"id":"MDQ6VXNlcjk3MjM0MDI=","is_bot":false,"login":"petrkoutnycz","name":"Petr Koutny"},"body":"### What are you really trying to do?\r\n\r\nTrying to set up Temporal in our application.\r\n\r\n### Describe the bug\r\n\r\nWhen there's a problem when connecting to Temporal service, the `WorkerService` goes down without retrying.\r\n\r\nAlso, since .NET 6 where background service behavior was changed (see [here](https://learn.microsoft.com/en-us/dotnet/core/compatibility/core-libraries/6.0/hosting-exception-handling)), it takes down the whole app with it. This is unacceptable for us as we need it to run as part the app next to other background services.\r\n\r\nAttaching an example of erroneous output. Even though I have permission problem in this case, the whole app goes down. It could be any connection-related problem because of the way how exceptions are handled from the bridge client.\r\n\r\n<img width=\"1366\" alt=\"image\" src=\"https://github.com/temporalio/sdk-dotnet/assets/9723402/d53a97a6-92fa-49df-851e-41b6d894b41e\">\r\n\r\n### Minimal Reproduction\r\n\r\nBasically any sample app works when the connection is wrong. Tested it with .NET 8.\r\n\r\n### Environment/Versions\r\n\r\nIrrelevant.\r\n\r\n### Additional context\r\n\r\nNot yet.","closedAt":"2024-07-03T14:50:01Z","comments":[{"id":"IC_kwDOInL6Hs6CzzPI","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"We intentionally fail if the worker cannot start. We do retry if there is a connectivity issue _during_ operation, but even then for errors we deem non-retryable we fail after a minute which will fail the service. But users have requested that if the worker cannot start it should fail which seems reasonable. Are you saying the worker should never fail and should just continue to retry? Many users want their process to fail on this kind of failure for visibility.\r\n\r\nAlso worst case scenario, https://github.com/temporalio/sdk-dotnet/blob/main/src/Temporalio.Extensions.Hosting/TemporalWorkerService.cs is a very simple little helper around our normal workers if you needed to have your own alternative.","createdAt":"2024-06-27T12:57:36Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/290#issuecomment-2194617288","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs6DgtZF","author":{"login":"petrkoutnycz"},"authorAssociation":"CONTRIBUTOR","body":"I am closing this as I am free to write my own worker service with reliability anyhow I want. If I get the free time, I will make it part of samples repo.","createdAt":"2024-07-03T14:50:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/290#issuecomment-2206389829","viewerDidAuthor":false}],"createdAt":"2024-06-27T06:31:06Z","labels":[{"id":"LA_kwDOInL6Hs8AAAABJH7zkA","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":290,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Worker does not retry if connection fails and kills the whole process","updatedAt":"2024-07-03T16:55:50Z","url":"https://github.com/temporalio/sdk-dotnet/issues/290"}
