{"assignees":[],"author":{"id":"MDQ6VXNlcjI3MDQxMzk=","is_bot":false,"login":"cgillum","name":"Chris Gillum"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\nI have a need to create activities with names that aren't known until runtime. The current design requires me to use `[Activity(string)]` on a method or delegate, which only allows me to use activity names known at compile time.\r\n\r\nAs far as I can tell, there's no simple way for me to add an `ActivityAttribute` to a `Delegate` at runtime in .NET, short of doing some kind of dynamic type generation (which seems like overkill).\r\n\r\n### Describe the solution you'd like\r\n\r\nA simple solution would be to add a `TemporalWorkerOptions.AddActivity(string name, Delegate del)` overload that allows me to specify the activity name explicitly.\r\n","closedAt":"2023-04-20T18:22:14Z","comments":[{"id":"IC_kwDOInL6Hs5WNXul","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":":+1: Yes we do need this (we also need \"dynamic activities\" that catch-all activity invocations that aren't explicitly registered, but that's unrelated).\r\n\r\nWe have a couple of options.\r\n\r\n> A simple solution would be to add a `TemporalWorkerOptions.AddActivity(string name, Delegate del)` overload that allows me to specify the activity name explicitly.\r\n\r\nThis is one option, but there are two problems here: 1) I still want people to be able to use `List<Delegate>` when creating a worker for the common case, and 2) this is not future proofed against other activity options that may come about in the future.\r\n\r\nI'm thinking about keeping `public IList<Delegate> Activities { get; set; } = new List<Delegate>();`, moving `Temporalio.Activity.ActivityAttribute.Definition` to public `Temporalio.Activity.ActivityDefinition` and having a new `public IList<ActivityDefinition> ActivityDefinitions { get; set; } = new List<ActivityDefinition>();` that I validate at worker instantiation time.\r\n\r\nThoughts?","createdAt":"2023-02-27T13:42:56Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/24#issuecomment-1446345637","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5WPc0w","author":{"login":"cgillum"},"authorAssociation":"NONE","body":"For my use-case, the ability to register dynamic activities as a catch-all would also solve my problem (in fact, that would make my current proof-of-concept simpler). Your suggestion to expose `ActivityDefinitions` publicly is also fine from my POV.","createdAt":"2023-02-27T19:01:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/24#issuecomment-1446890800","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5WPhKv","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":":+1: I have opened https://github.com/temporalio/sdk-dotnet/issues/27 (as part of general feature https://github.com/temporalio/features/issues/201). I will probably also expose the activity definition because it's unreasonable to require attributes be the only way to name activities.","createdAt":"2023-02-27T19:13:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/24#issuecomment-1446908591","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5WPjzv","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"@cgillum - Also consider for your use case, if reasonable, to have a single activity with the discriminator in the input instead of the name itself. Granted if you're building a general purpose library for others to use, I can understand why name is better (and it is clearer from a UI POV).","createdAt":"2023-02-27T19:19:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/24#issuecomment-1446919407","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5WYTx7","author":{"login":"cgillum"},"authorAssociation":"NONE","body":"Yeah, this is effectively a general-purpose library for others to use, so the single activity approach unfortunately won't work for me.\r\n\r\nThanks for opening the other issue - I'll keep an eye on that.","createdAt":"2023-03-01T02:10:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-dotnet/issues/24#issuecomment-1449213051","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5WrZ1s","author":{"login":"cgillum"},"authorAssociation":"NONE","body":"@cretz do you have an idea on when you might have time to start work on this?\r\n\r\nIf not, do you accept external PR contributions?","createdAt":"2023-03-03T22:36:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/24#issuecomment-1454218604","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5Wyo3i","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"@cgillum - I have already started on your first suggestion. I am right in the middle of workflow development on https://github.com/cretz/temporal-sdk-dotnet/tree/workflow-more-impl but I have exposed activity definition publicly already. But that code is a mess because it is mid development. Give me a little while longer and another alpha will be released with full workflow support (due to vacation and such, this may not be at least until the week of the 20th).\r\n\r\nAlso in the meantime, would love feedback on SDK approach/code in general. Though not quite yet on that branch :-) May want to wait until the next workflow PR is up hopefully this week (will be merging #29 before I open the next one since I'm daisy-chaining for feedback reasons).\r\n\r\nAs for full impl of #27 and dynamic activity support, I need to wait until after I finish this development on workflows.","createdAt":"2023-03-06T13:14:54Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-dotnet/issues/24#issuecomment-1456115170","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5W7yZO","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"PR #31 up for non-attribute definition of activities. Full dynamic activities, workflows, signals, and queries will come after workflow is completely implemented (so not that far off).","createdAt":"2023-03-07T16:58:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/24#issuecomment-1458513486","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5aZ-2Y","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Closing since this has now been released.","createdAt":"2023-04-20T18:22:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/24#issuecomment-1516760472","viewerDidAuthor":false}],"createdAt":"2023-02-26T02:23:07Z","labels":[{"id":"LA_kwDOInL6Hs8AAAABJH7znQ","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":24,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] Specify activity names at runtime","updatedAt":"2023-04-20T18:22:14Z","url":"https://github.com/temporalio/sdk-dotnet/issues/24"}
