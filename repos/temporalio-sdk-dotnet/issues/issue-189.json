{"assignees":[],"author":{"id":"MDQ6VXNlcjIwODcwNDIz","is_bot":false,"login":"eugbyte","name":"Eugene"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\n<!-- A clear and concise description of what the problem is. Ex. I'm always frustrated when [...] -->\r\nPer the [Temporal documentation](https://docs.temporal.io/retry-policies#default-behavior), workflows do not retry by default.\r\n\r\nOne may expect that by specifying that the `NonRetryableErrorTypes` as an empty list, the default behaviour is followed. However, specifying `NonRetryableErrorTypes` result in the workflow always retrying. My guess is that since all kinds of errors (including `ActivityFailureException` and `ApplicationFailureException`) are omitted from not retrying, the workflow will always retry.\r\n\r\n`Client code:`\r\n```\r\nWorkflowOptions workflowOptions = new() {\r\n    Id = workflowId,\r\n    TaskQueue = EmailWorkflow.TaskQueueName,\r\n    RetryPolicy = new() { NonRetryableErrorTypes = [] }, // <= the workflow always retry\r\n};\r\nvar handle = await client.StartWorkflowAsync(\r\n    workflowRunCall: (MyWorkflow wf) => wf.RunAsync(),\r\n    options: workflowOptions);\r\n```\r\n\r\n`Workflow.cs:`\r\n```\r\n    [WorkflowRun]\r\n    public async Task RunAsync() {\r\n         throw new ApplicationFailureException(message: \"some error\", nonRetryable: true); // <= expects the workflow to not retry, but workflow retries\r\n    }\r\n```\r\n\r\nWhen observing the dashboard via the [Temporal Web UI](https://learn.temporal.io/getting_started/typescript/dev_environment/#set-up-a-local-temporal-development-cluster-with-temporal-cli), the workflow is retried.\r\n### Describe the solution you'd like\r\n\r\n<!-- A clear and concise description of what you want to happen. SCREENSHOTS OR CODE SAMPLES ARE VERY HELPFUL -->\r\nClarify in the documentation that by specifying that the `NonRetryableErrorTypes` as an empty list, the Workflow will always be retried.\r\n\r\n","closedAt":"2024-02-20T14:55:33Z","comments":[{"id":"IC_kwDOInL6Hs50fays","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> One may expect that by specifying that the NonRetryableErrorTypes as an empty list, the default behaviour is followed [...] Clarify in the documentation that by specifying that the NonRetryableErrorTypes as an empty list, the Workflow will always be retried.\r\n\r\nThis is unrelated to `NonRetryableErrorTypes`. `null` is the default retry policy, but you are changing that default by providing a non-null value. And since you aren't setting any of the other retry policy values, those have defaults too. The documentation of `WorkflowOptions.RetryPolicy` mentions unset retry policy means no retry and the documentation of `RetryPolicy` mentions what the default values are of each property you don't set. But we can clarify more if this is surprising.\r\n\r\n(closing as question, but feel free to continue commenting here or join us in the `#dotnet-sdk` channel on https://t.mp/slack or in the forums).","createdAt":"2024-02-20T14:55:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/189#issuecomment-1954393260","viewerDidAuthor":false}],"createdAt":"2024-02-17T05:09:02Z","labels":[{"id":"LA_kwDOInL6Hs8AAAABJH7znQ","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":189,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] Clarify documentation on the effect of specifying the `NonRetryableErrorTypes` as an empty list","updatedAt":"2024-02-20T14:55:33Z","url":"https://github.com/temporalio/sdk-dotnet/issues/189"}
