{"assignees":[],"author":{"id":"MDQ6VXNlcjIwODcwNDIz","is_bot":false,"login":"eugbyte","name":"Eugene"},"body":"### What are you really trying to do?\r\n\r\n<!-- \r\nTell us at a high level what you're doing, to avoid XY problem (https://en.wikipedia.org/wiki/XY_problem) \r\n-->\r\nUnit testing workflow with mock activity.\r\n### Describe the bug\r\nI created a MockActivity\r\n```\r\npublic class MockActivities : IActivities {\r\n    [Activity]\r\n    public string GetName(string id) => \"abc\";\r\n    [Activity]\r\n    public string GetSurname(string id) => \"def\";\r\n}\r\n\r\n```\r\n\r\nWhen I tried to mock the activity for the unit test, e.g.\r\n```\r\n[Fact]\r\npublic async Task WorkflowSucceeds() {\r\nawait using var env = await WorkflowEnvironment.StartTimeSkippingAsync();\r\nusing var worker = new TemporalWorker(\r\n  env.Client,\r\n  new TemporalWorkerOptions($\"task-queue-{Guid.NewGuid()}\")\r\n  .AddAllActivities<IActivities>(new MockActivities())\r\n  .AddWorkflow<MyWorkflow>());\r\n}\r\n\r\n```\r\n\r\nI get the following error:\r\n```\r\nSystem.ArgumentException : No activities found on MyNamespace (Parameter 'type')\r\n```","closedAt":"2024-02-09T12:07:19Z","comments":[{"id":"IC_kwDOInL6Hs5zYizb","author":{"login":"eugbyte"},"authorAssociation":"NONE","body":"Ok I found the reason.\r\n\r\nThe `[Activity]` attribute must not only be added to the method, but also the interface should the Activity Class implement the interface, e.g.\r\n\r\n```\r\npublic interface IActivity {\r\n    [Activity]\r\n    public async Task<string> GetName(string id);\r\n}\r\n\r\npublic class MockActivities : IActivities {\r\n    [Activity]\r\n    public async Task<string> GetName(string id) => \"abc\";\r\n}\r\n\r\n```\r\n\r\nWill be good if you can amend the documentation to specify that the `[Activity]` also be added to interfaces which Activity class implement.","createdAt":"2024-02-09T12:07:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/187#issuecomment-1935813851","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5zbJrw","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Yes, I will make a note to make it clear that the attribute is intentionally not inherited and needs to be in both place if the definition and implementation are in separate places.","createdAt":"2024-02-09T19:37:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/187#issuecomment-1936497392","viewerDidAuthor":false}],"createdAt":"2024-02-09T07:47:18Z","labels":[{"id":"LA_kwDOInL6Hs8AAAABJH7zkA","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":187,"reactionGroups":[],"state":"CLOSED","title":"[Bug] AddAllActivities not working","updatedAt":"2024-02-09T19:37:48Z","url":"https://github.com/temporalio/sdk-dotnet/issues/187"}
