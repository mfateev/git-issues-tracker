{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"### Describe the solution you'd like\r\n\r\nLook at this snippet:\r\n\r\n```csharp\r\nusing Microsoft.Extensions.DependencyInjection;\r\nusing Microsoft.Extensions.Hosting;\r\nusing Temporalio.Client;\r\nusing Temporalio.Extensions.Hosting;\r\nusing Temporalio.Worker;\r\nusing Temporalio.Workflows;\r\n\r\nasync Task RunAsync()\r\n{\r\n    // Start workflow\r\n    var client = await TemporalClient.ConnectAsync(new(\"localhost:7233\"));\r\n    await client.StartWorkflowAsync(\r\n        (MyWorkflow wf) => wf.RunAsync(),\r\n        new(id: $\"wf-{Guid.NewGuid()}\", \"my-task-queue\"));\r\n\r\n    // Run worker (change to false and this will start working)\r\n    const bool useHostBuilder = true;\r\n    try\r\n    {\r\n        if (useHostBuilder)\r\n        {\r\n            var builder = Host.CreateApplicationBuilder();\r\n            builder.Services.AddHostedTemporalWorker(\"localhost:7233\", \"default\", \"my-task-queue\").AddWorkflow<MyWorkflow>();\r\n            var host = builder.Build();\r\n            // Change next line to \"await host.RunAsync();\" and it will start working\r\n            host.Run();\r\n        }\r\n        else\r\n        {\r\n            var worker = new TemporalWorker(\r\n                client, new TemporalWorkerOptions(\"my-task-queue\").AddWorkflow<MyWorkflow>());\r\n            await worker.ExecuteAsync(default);\r\n        }\r\n    }\r\n    catch (OperationCanceledException)\r\n    {\r\n        Console.WriteLine(\"Workers cancelled\");\r\n    }\r\n}\r\n\r\nawait RunAsync();\r\n\r\n[Workflow]\r\npublic class MyWorkflow\r\n{\r\n    [WorkflowRun]\r\n    public Task<string> RunAsync() => Task.FromResult(\"done\");\r\n}\r\n```\r\n\r\nIt doesn't poll, but if you change `host.Run()` to `host.RunAsync()` it works. Very strange. So document that in the `Temporalio.Extensions.Hosting` README. Also document the caveat about issue 36063 in https://github.com/dotnet/runtime (not linking by intention) which trips people up and is a known issue.","closedAt":"2024-04-24T21:24:44Z","comments":[],"createdAt":"2024-04-15T18:22:15Z","labels":[{"id":"LA_kwDOInL6Hs8AAAABJH7znQ","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":220,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] Document host builder caveats","updatedAt":"2024-04-24T21:24:44Z","url":"https://github.com/temporalio/sdk-dotnet/issues/220"}
