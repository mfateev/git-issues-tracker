{"assignees":[],"author":{"id":"MDQ6VXNlcjYzMTczMzUy","is_bot":false,"login":"mahdiAkhi","name":"Mahdi Akhi"},"body":"### What are you really trying to do?\r\n\r\nI'm trying to use Temporal on a docker env. Everything is ok on my PC(windows) and Temporal works properly, but when I deploy my code to the server using docker and call the service which uses from the Temporal, I faced the problem `Unable to load shared library 'temporal_sdk_bridge'`. This issue occurs even when I try the your [samlpe](https://github.com/temporalio/samples-dotnet) .\r\n[logs (1).txt](https://github.com/temporalio/sdk-dotnet/files/11136243/logs.1.txt)\r\n\r\n\r\n\r\n### Here is a complete log of the error\r\n```\r\nSystem.DllNotFoundException: Unable to load shared library 'temporal_sdk_bridge' or one of its dependencies. In order to help diagnose loading problems, consider setting the LD_DEBUG environment variable: libtemporal_sdk_bridge: cannot open shared object file: No such file or directory\r\n   at Temporalio.Bridge.Interop.Methods.runtime_new(RuntimeOptions* options)\r\n   at Temporalio.Bridge.Runtime..ctor(TemporalRuntimeOptions options)\r\n   at Temporalio.Runtime.TemporalRuntime..ctor(TemporalRuntimeOptions options)\r\n   at Temporalio.Runtime.TemporalRuntime.<>c.<.cctor>b__9_0()\r\n   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)\r\n--- End of stack trace from previous location ---\r\n   at System.Lazy`1.CreateValue()\r\n   at System.Lazy`1.get_Value()\r\n   at Temporalio.Runtime.TemporalRuntime.get_Default()\r\n   at Temporalio.Client.TemporalConnection.ConnectAsync(TemporalConnectionOptions options)\r\n   at Temporalio.Client.TemporalClient.ConnectAsync(TemporalClientConnectOptions options)\r\n   at NotificationHelper.Service.NotificationSendService.SendSMS(String toPhoneNumber, String messageBody) in /src/common/NotificationHelper/Service/NotificationSendService.cs:line 75\r\n```\r\n\r\nI find useful [this issue](https://github.com/dotnet/runtime/issues/53600) on dotnet repo. It says that it is possible to use a windows native function.","closedAt":"2023-05-22T13:01:41Z","comments":[{"id":"IC_kwDOInL6Hs5ZD62O","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Are you deploying with `temporal_sdk_bridge.dll` instead of `libtemporal_sdk_bridge.so`? You need `libtemporal_sdk_bridge.so`. We run CI against Linux without issue.\r\n\r\nCan you provide the _exact_ steps you are taking to build your docker container? Or rather, can you provide a full Dockerfile that replicates this issue?","createdAt":"2023-04-03T12:05:17Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/42#issuecomment-1494199694","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5c0K9c","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Needs more information (closing, can answer above questions and reopen as needed)","createdAt":"2023-05-22T13:01:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/42#issuecomment-1557180252","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5oQr5l","author":{"login":"artyomabrahamyan"},"authorAssociation":"NONE","body":"@cretz \r\n\r\nI have a similar issue when I reference dotnet-sdk package inside Azure Functions hosted on Windows machines.\r\nUsing both lazy instantiation or manual ``TemporalClient.ConnectAsync`` gives me \r\n\r\n`Unable to load DLL 'temporal_sdk_bridge' or one of its dependencies: The specified module could not be found. (0x8007007E)\r\n`  error.\r\n\r\nHowever, inside the deployement of my Azure Function I can see runtimes/win-64/native/temporal_sdk_bridge.dll file.\r\n","createdAt":"2023-10-05T16:06:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/42#issuecomment-1749204581","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5oQ9T_","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> However, inside the deployement of my Azure Function I can see runtimes/win-64/native/temporal_sdk_bridge.dll file.\r\n\r\nThat is where it's supposed to be in the nuspec file, but I believe a built/deployed form would have that unmanaged DLL right alongside the rest of the managed ones.","createdAt":"2023-10-05T16:33:50Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/42#issuecomment-1749275903","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5oQ-3g","author":{"login":"artyomabrahamyan"},"authorAssociation":"NONE","body":"Alongside  with the managed DLL's currently there's only a **Temporalio.dll**, both in my  local  and  deployed envs.\r\n","createdAt":"2023-10-05T16:37:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/42#issuecomment-1749282272","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5oRAEG","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"You need `temporal_sdk_bridge.dll` there too (and many other DLLs like `Google.Protobuf.dll`). This should automatically be put into the `bin` by `dotnet build` I believe. This is the case with our https://github.com/temporalio/samples-dotnet which you can try out. You can join us on our public Slack (https://t.mp/slack) in the `#dotnet-sdk` channel or on our forums at https://community.temporal.io/ for more troubleshooting.","createdAt":"2023-10-05T16:40:49Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/42#issuecomment-1749287174","viewerDidAuthor":false}],"createdAt":"2023-04-03T08:22:27Z","labels":[{"id":"LA_kwDOInL6Hs8AAAABJH7zkA","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":42,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Unable to load shared library 'temporal_sdk_bridge' issue  on docker(linux)","updatedAt":"2023-10-05T16:41:56Z","url":"https://github.com/temporalio/sdk-dotnet/issues/42"}
