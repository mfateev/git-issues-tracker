{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"### Describe the bug\r\n\r\nREADME samples in the workflow testing area are not actually running the worker","closedAt":"2024-02-12T21:13:54Z","comments":[{"id":"IC_kwDOInL6Hs5zdCcJ","author":{"login":"eugbyte"},"authorAssociation":"NONE","body":"Same, I faced a timeout issue. The test environmentt Client just keeps running without actually executing the Workflow provided, eventually timing out the test.\r\n\r\nI copied and pasted the example under [Workflow testing](https://github.com/temporalio/sdk-dotnet?tab=readme-ov-file#workflow-testing). \r\n\r\nI am using XUnit, Windows OS (x64).\r\n\r\n`MockWaitADayWorkflow.cs`\r\n```\r\n[Workflow]\r\npublic class MockWaitADayWorkflow {\r\n    [WorkflowRun]\r\n    public async Task<string> RunAsync() {\r\n        await Workflow.DelayAsync(TimeSpan.FromSeconds(1));\r\n        return \"all done\";\r\n    }\r\n}\r\n```\r\n\r\n`TestTemporalWorkflow .cs`\r\n```\r\nusing NanoidDotNet;\r\n\r\npublic class TestTemporalWorkflow {\r\n    [Fact(Timeout = 5_000)]\r\n    public async Task SimpleMockedWorkflow() {\r\n        await using var env = await WorkflowEnvironment.StartTimeSkippingAsync();\r\n        using var worker = new TemporalWorker(\r\n          env.Client,\r\n          new TemporalWorkerOptions($\"task-queue-{Nanoid.Generate()}\").\r\n              AddWorkflow<MockWaitADayWorkflow>());\r\n        var result = await env.Client.ExecuteWorkflowAsync(\r\n            (MockWaitADayWorkflow wf) => wf.RunAsync(),\r\n            new(id: $\"wf-{Nanoid.Generate()}\", taskQueue: worker.Options.TaskQueue!));\r\n        Assert.Equal(\"all done\", result);\r\n    }\r\n}\r\n```\r\n\r\nI get the error that the test has timed out: `Test execution timed out after 5000 milliseconds`.","createdAt":"2024-02-10T12:12:59Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/162#issuecomment-1936992009","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5zdCu4","author":{"login":"eugbyte"},"authorAssociation":"NONE","body":"Also, I added breakpoints within the `RunAsync` method of the `MockWaitADayWorkflow` class and the break point is never reached.","createdAt":"2024-02-10T12:18:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/162#issuecomment-1936993208","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5zdELj","author":{"login":"eugbyte"},"authorAssociation":"NONE","body":"Similar to https://github.com/temporalio/sdk-dotnet/issues/179#issue-2092746994","createdAt":"2024-02-10T12:46:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/162#issuecomment-1936999139","viewerDidAuthor":false},{"id":"IC_kwDOInL6Hs5zjdkm","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Yes, we need to fix that README. In the sample code you are not actually running/executing the worker which you must do. I will update shortly. This is unrelated to the other issue (time skipping test server and workflow update).","createdAt":"2024-02-12T13:25:09Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-dotnet/issues/162#issuecomment-1938676006","viewerDidAuthor":false}],"createdAt":"2023-12-01T12:55:37Z","labels":[{"id":"LA_kwDOInL6Hs8AAAABJH7zkA","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":162,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"[Bug] README workflow testing samples are not running the worker","updatedAt":"2024-02-12T21:13:54Z","url":"https://github.com/temporalio/sdk-dotnet/issues/162"}
