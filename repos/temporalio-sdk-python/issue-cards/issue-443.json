{
  "summary": "Upgrading Python SDK from 1.3.0 to 1.4.0 causes a 'coroutine raised StopIteration' error when triggering workflows that call workflow.upsert_search_attributes via CLI. The issue was fixed in PR #440 but not yet released at the time of reporting.",
  "category": "bug",
  "subcategory": "search-attributes",
  "apis": [
    "upsert_search_attributes"
  ],
  "components": [
    "worker",
    "workflow-instance",
    "cli-execution"
  ],
  "concepts": [
    "coroutine-handling",
    "search-attributes",
    "stopiteration-error",
    "deprecated-api",
    "workflow-execution"
  ],
  "severity": "high",
  "userImpact": "Users upgrading to SDK 1.4.0 experience workflow execution failures when using upsert_search_attributes, blocking workflow triggers from CLI.",
  "rootCause": "Coroutine handling change in SDK 1.4.0 related to upsert_search_attributes implementation causing StopIteration exception.",
  "proposedFix": "Use typed search attributes for upsert_search_attributes instead of the deprecated form (as noted in PR #440).",
  "workaround": "Downgrade to SDK 1.3.0 or use typed search attributes to avoid the deprecated upsert_search_attributes form.",
  "resolution": "fixed",
  "resolutionDetails": "Fixed in PR #440 which addressed the coroutine StopIteration issue, though recommendation is to migrate to typed search attributes.",
  "related": [
    440
  ],
  "keyQuote": "I believe this was just fixed in https://github.com/temporalio/sdk-python/pull/440 but not yet released. In the meantime, I recommend using typed search attributes",
  "number": 443,
  "repo": "temporalio-sdk-python",
  "generatedAt": "2026-01-11T21:07:20.532Z"
}