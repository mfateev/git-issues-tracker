{"assignees":[],"author":{"id":"MDQ6VXNlcjE5NTc3OTk0","is_bot":false,"login":"MaazBinMusa","name":"MaazBinMusa"},"body":"### What are you really trying to do?\r\n\r\n<!-- \r\nIm trying to return a dataclass object from an activity\r\n-->\r\n\r\n### Describe the bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\nI have a workflow where I run 3 activities and I have defined dataclass types for each activity input output. The 3rd activity is acting uniquely strange, where eventhough I outline the activity to return a specific type of dataclass obj, it keeps returing the dict version of it.\r\n\r\nI am forced to check after that activity if the obj is a dataclass instance or not, and if not, I have to make a new obj and initialize it with all the items in the dict that was returned.\r\n\r\n### Additional context\r\n\r\nI'm running the python version of temporal, on the cloud. We also have a codec server in the middle. I don't think the env has much to do with it since the first two activities work just fine but the last one is acting strange.\r\n\r\n<!-- Add any other context about the problem here. -->\r\n","closedAt":"2024-07-12T17:17:53Z","comments":[{"id":"IC_kwDOGusT1c6EpwfA","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"This is dependent upon how it is called in the workflow. The workflow `execute_activity` uses the activity's return type hint to know what to deserialize into, or if it doesn't have one, it just does default for JSON which is a `dict`. What does the signature of the activity look like and how are you calling it from a workflow?\r\n\r\n(also, feel free to come join us on [Slack](https://t.mp/slack) in the `#python-sdk` channel for questions/help)","createdAt":"2024-07-12T13:01:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/578#issuecomment-2225539008","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6ErW65","author":{"login":"MaazBinMusa"},"authorAssociation":"NONE","body":"@cretz thank you for the prompt attention.\r\n\r\nThis is how I call the activity in the workflow\r\n```\r\npost_process_dto = await workflow.execute_activity(\r\n      activity=activity_name,\r\n      arg=post_process_dto,\r\n      start_to_close_timeout=timedelta(seconds=10),\r\n  )\r\n```\r\n\r\nAnd this is the activity itself\r\n\r\n```\r\nasync def postprocess_find_confidence(self, dto: PostAbstractionDTO) -> PostAbstractionDTO:\r\n        return dto\r\n```\r\n\r\n\r\n","createdAt":"2024-07-12T16:51:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/578#issuecomment-2225958585","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6Era2F","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"If you call the activity via a string name, the code does not know the type to deserialize to, so it defaults to whatever JSON does (which is dict in this case). You should add `result_type=PostAbstractionDTO` or, even better, call it via `execute_activity_method(MyActivityClass.postprocess_find_confidence, ...` where the return type can be extracted from the signature.","createdAt":"2024-07-12T17:01:15Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-python/issues/578#issuecomment-2225974661","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6ErhB0","author":{"login":"MaazBinMusa"},"authorAssociation":"NONE","body":"specifying the return type fixed the issue üëç Thankyou!","createdAt":"2024-07-12T17:17:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/578#issuecomment-2225999988","viewerDidAuthor":false}],"createdAt":"2024-07-12T00:11:45Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":578,"reactionGroups":[],"state":"CLOSED","title":"activity returning dict object forcefully","updatedAt":"2024-07-12T18:16:57Z","url":"https://github.com/temporalio/sdk-python/issues/578"}
