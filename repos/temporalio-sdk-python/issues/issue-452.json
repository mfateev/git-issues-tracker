{"assignees":[],"author":{"id":"MDQ6VXNlcjIyNzg5ODUx","is_bot":false,"login":"ndtretyak","name":"Nikolay Tretyak"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\nAll my workflows accepts protobufs as arguments and it works fine if I start them using SDK's client since it adds `json/protobuf` as payload's encoding. But sometimes it is useful to start workflows using `tctl` that uses`json/plain` encoding.\r\n\r\nNow, `JSONPlainPayloadConverter`, which is used for the `json/plain` encoding, does not handle `proto.Message`s in type_hints and just fails.\r\n\r\n### Describe the solution you'd like\r\n\r\nI'd like `JSONPlainPayloadConverter` to handle json-encoded protobufs.\r\n\r\n","closedAt":"2024-02-20T21:34:28Z","comments":[{"id":"IC_kwDOGusT1c5vzEQz","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> sometimes it is useful to start workflows using tctl that usesjson/plain encoding.\r\n\r\nThis is a problem with `tctl` not the SDK. We need the ability to support saying the metadata encoding of inputs (https://github.com/temporalio/tctl/issues/185). I believe once the newer incarnation of the Temporal CLI is developed, it will support setting the encoding.\r\n\r\n> I'd like JSONPlainPayloadConverter to handle json-encoded protobufs.\r\n\r\nYou can do this with a custom converter, but I hesitate to do this by default. We only want the JSON proto converter to have special rules about proto.","createdAt":"2024-01-03T16:40:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/452#issuecomment-1875657779","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c50iT-k","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Closing (not adding proto support to general json/plain converter), but be advised that the new Temporal CLI before it reaches 1.0 GA will support supplying protos.","createdAt":"2024-02-20T21:34:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/452#issuecomment-1955151780","viewerDidAuthor":false}],"createdAt":"2023-12-25T20:08:09Z","labels":[{"id":"LA_kwDOGusT1c7gQgHN","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":452,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] Decode json/plain as json/protobuf if type_hint is a subclass of protobuf.Message","updatedAt":"2024-02-20T21:34:28Z","url":"https://github.com/temporalio/sdk-python/issues/452"}
