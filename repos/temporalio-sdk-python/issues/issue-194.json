{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"### Describe the solution you'd like\r\n\r\nTBD. Go puts `TemporalChangeVersion` key with a list of strings like `\"<changeid>-<version>\"` for every version seen. What do we want to do here? cc @bergundy ","closedAt":"2023-02-17T14:42:55Z","comments":[{"id":"IC_kwDOGusT1c5ODncr","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Reuse the same search attribute and use patch id for the value","createdAt":"2022-11-10T00:12:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/194#issuecomment-1309570859","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c5OEf9w","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"I'd want us to buffer all of the search attribute updates and emit a single upsert command at the end of the activation like we discussed in the TS search attributes proposal: https://github.com/temporalio/proposals/pull/67/files#diff-7d87e4d9af7e84955486e56bc4d577483f5fa34479dbe84b2ceeb50f4d64a81cR31\r\nWe should try and get this in for beta 3 to avoid another history incompatible change.","createdAt":"2022-11-10T05:37:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/194#issuecomment-1309802352","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c5OGCL5","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"@bergundy - This also kinda overlaps with #153. I see we even added a new type in https://github.com/temporalio/api/pull/248. Should I go ahead and, from a user POV, make it easy to update/get single search attributes?","createdAt":"2022-11-10T12:23:10Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/194#issuecomment-1310204665","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c5OHj_w","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> I'd want us to buffer all of the search attribute updates and emit a single upsert command at the end of the activation like we discussed in the TS search attributes proposal:\r\n\r\nAlso, can you clarify in that proposal when we shouldn't send the update? If an exception is caused that causes workflow task failure, does that mean my pending search attributes are not persisted yet? But an exception that would just cause workflow failure I do send the pending update. Do I have to order the command before the failure?\r\n\r\nAlso, what if I have an activity that uses the client to check search attributes of the calling workflow? Can I guarantee that an upsert search attribute command after a schedule activity command will always persist the values before an activity started? Can I even guarantee that today if upsert search attribute is in order? (I will ask server team)","createdAt":"2022-11-10T17:00:57Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/194#issuecomment-1310605296","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c5OHmTO","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"No commands are sent on WFT failure so I don't think there's an issue here.\r\nAll commands should be handled in atomically on the server, the ordering shouldn't matter for correctness here.","createdAt":"2022-11-10T17:08:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/194#issuecomment-1310614734","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c5OHqUD","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> the ordering shouldn't matter for correctness here.\r\n\r\nExcept workflow completion/failed/cancelled which I think we have to flush before that","createdAt":"2022-11-10T17:21:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/194#issuecomment-1310631171","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c5VhHIW","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"This is being done in core not lang.","createdAt":"2023-02-17T14:42:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/194#issuecomment-1434743318","viewerDidAuthor":false}],"createdAt":"2022-11-09T22:22:25Z","labels":[{"id":"LA_kwDOGusT1c7gQgHN","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":194,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] Support patch search attribute","updatedAt":"2023-02-17T14:42:56Z","url":"https://github.com/temporalio/sdk-python/issues/194"}
