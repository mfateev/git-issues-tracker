{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\nPeople need to customize `temporal.converters.value_to_type` for use with their types during JSON conversion\r\n\r\n### Describe the solution you'd like\r\n\r\nAdd a `JSONTypeConverter` ABC that converts to and from a user type to JSON-able type. Change `JSONPlainPayloadConverter` to accept a collection of these and make that easier to set in construction of default payload converter.","closedAt":"2023-02-08T20:14:44Z","comments":[{"id":"IC_kwDOGusT1c5Ua_75","author":{"login":"michael-cybrid"},"authorAssociation":"NONE","body":"Big ðŸ‘ from us on this.\r\n\r\nWe have conversion working  [OpenAPI generated models](https://github.com/OpenAPITools/openapi-generator) working by inheriting from `JSONPlainPayloadConverter` and doing something like the following but it has limitations (around optional and collections, etc.) and first party support would be awesome:\r\n\r\n```python\r\n def from_payload(\r\n        self,\r\n        payload: Payload,\r\n        type_hint: Type[Any] | None = None,\r\n    ) -> Any:\r\n        \"\"\"See base class.\"\"\"\r\n        try:\r\n            obj = json.loads(payload.data, cls=self._decoder)\r\n            if type_hint:\r\n                if service_one.is_openapi_model_subclass(type_hint):\r\n                    obj = service_one.dict_to_model(obj, type_hint)\r\n\r\n                elif service_two.is_openapi_model_subclass(type_hint):\r\n                    obj = service_two.dict_to_model(obj, type_hint)\r\n\r\n                else:\r\n                    obj = value_to_type(type_hint, obj)\r\n            return obj\r\n        except json.JSONDecodeError as err:  # pragma: no cover\r\n            raise RuntimeError(\"Failed parsing\") from err\r\n```\r\n","createdAt":"2023-02-03T20:24:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/264#issuecomment-1416363769","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c5Uz9Wa","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> it has limitations (around optional and collections, etc.) \r\n\r\n@michael-cybrid - I think for custom input/output types it can be clearer to use your own encoding payload converter with your own encoding (e.g. `json/open-api`) instead of reusing the existing encoding. This makes it more portable/obvious to other Temporal clients/users that custom logic is needed. Granted I understand this doesn't help with collections and such, but usually you know which types you need to support for your own conversion.\r\n\r\nRegardless, I have just opened a PR for JSON type converters and README updates that can help your use case if reusing existing JSON conversion logic.","createdAt":"2023-02-08T16:33:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/264#issuecomment-1422906778","viewerDidAuthor":false}],"createdAt":"2023-02-01T13:22:55Z","labels":[{"id":"LA_kwDOGusT1c7gQgHN","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":264,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] Support JSON Type Converters","updatedAt":"2023-02-08T20:14:44Z","url":"https://github.com/temporalio/sdk-python/issues/264"}
