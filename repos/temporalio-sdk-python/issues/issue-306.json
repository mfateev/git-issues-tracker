{"assignees":[],"author":{"id":"MDQ6VXNlcjI1ODY4NDEx","is_bot":false,"login":"arthosdevelops","name":""},"body":"### What are you really trying to do?\r\n\r\n<!-- \r\nWe're simply using the temporalio library to interact with the temporal server. \r\n-->\r\n\r\n### Describe the bug\r\n\r\nWhen importing the temporalio module, out code constantly fails with the following error\r\n\r\n```    from test.temporal.consts import TEST_TEMPORAL_NAMESPACE\r\ntest/temporal/consts.py:3: in <module>\r\n    from temporalio.common import RetryPolicy\r\n../../../../Library/Caches/pypoetry/virtualenvs/test-FDULRtEl-py3.11/lib/python3.11/site-packages/temporalio/__init__.py:11: in <module>\r\n    from .service import __version__ as __sdk_version\r\n../../../../Library/Caches/pypoetry/virtualenvs/test-FDULRtEl-py3.11/lib/python3.11/site-packages/temporalio/service.py:22: in <module>\r\n    import temporalio.bridge.client\r\n../../../../Library/Caches/pypoetry/virtualenvs/test-FDULRtEl-py3.11/lib/python3.11/site-packages/temporalio/bridge/client.py:14: in <module>\r\n    import temporalio.bridge.temporal_sdk_bridge\r\nE   ModuleNotFoundError: No module named 'temporalio.bridge.temporal_sdk_bridge'\r\n```\r\n\r\nThis module does not seem to exist in the site packages too. Do we need to run something in order for this to exist?\r\n\r\n### Environment/Versions\r\n\r\n<!-- Please complete the following information where relevant. -->\r\n\r\n- OS and processor: Intel Mac\r\n- Temporalio SDK Version: (0.1b2)\r\n- Python version: 3.11.0\r\n\r\n","closedAt":"2023-05-22T19:11:39Z","comments":[{"id":"IC_kwDOGusT1c5Y0omg","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> Temporalio SDK Version: (0.1b2)\r\n\r\nPlease use the latest version (that version is beta). If the problem still exists, please show exact steps from the beginning that you are running to replicate this error.","createdAt":"2023-03-30T12:08:55Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-python/issues/306#issuecomment-1490192800","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c5bkS8j","author":{"login":"ksbrar"},"authorAssociation":"NONE","body":"I also ran into this issue with `0.1a1`, which I am not able to upgrade from just yet for my purposes.\r\n\r\nInvestigating it further, for me it seems to be a rust build error - the `temporal_sdk_bridge` package is never compiled, and trying to do so manually results in a linker failure:\r\n```\r\nâ¯ cargo build\r\n   Compiling temporal-sdk-bridge v0.1.0 (/Users/ksbrar/.pcli/venv/lib/python3.9/site-packages/temporalio/bridge)\r\nerror: linking with `cc` failed: exit status: 1\r\n             ...\r\n            \"_PyUnicode_FromStringAndSize\", referenced from:\r\n                pyo3::types::string::PyString::new::hac218b81a1b9faed in libpyo3-4d7deb7ea960b60a.rlib(pyo3-4d7deb7ea960b60a.pyo3.c5bd815a-cgu.12.rcgu.o)\r\n            \"_Py_IsInitialized\", referenced from:\r\n                pyo3::gil::GILGuard::acquire::_$u7b$$u7b$closure$u7d$$u7d$::h691710afe03fc4c2 in libpyo3-4d7deb7ea960b60a.rlib(pyo3-4d7deb7ea960b60a.pyo3.c5bd815a-cgu.4.rcgu.o)\r\n            \"__Py_Dealloc\", referenced from:\r\n                pyo3::ffi::object::Py_DECREF::h14f28702b66fbc35 in temporal_sdk_bridge.2p9swp66al6j7n8f.rcgu.o\r\n                pyo3::ffi::object::Py_DECREF::ha8bd5992141a11c5 in libpyo3_asyncio-361bd96192777d66.rlib(pyo3_asyncio-361bd96192777d66.pyo3_asyncio.e183b368-cgu.9.rcgu.o)\r\n                pyo3::ffi::object::Py_DECREF::h544ebe01724e2b12 in libpyo3-4d7deb7ea960b60a.rlib(pyo3-4d7deb7ea960b60a.pyo3.c5bd815a-cgu.14.rcgu.o)\r\n            \"__Py_NoneStruct\", referenced from:\r\n                pyo3::ffi::object::Py_None::h958a038b7e388cfa in temporal_sdk_bridge.2p9swp66al6j7n8f.rcgu.o\r\n                pyo3::ffi::object::Py_None::ha7faed160e6e3af4 in libpyo3_asyncio-361bd96192777d66.rlib(pyo3_asyncio-361bd96192777d66.pyo3_asyncio.e183b368-cgu.9.rcgu.o)\r\n                pyo3::ffi::object::Py_None::h9fc6a76cbf9a9b3b in libpyo3-4d7deb7ea960b60a.rlib(pyo3-4d7deb7ea960b60a.pyo3.c5bd815a-cgu.14.rcgu.o)\r\n            \"__Py_TrueStruct\", referenced from:\r\n                pyo3::ffi::boolobject::Py_True::h65dc75eb72cb98a5 in libpyo3-4d7deb7ea960b60a.rlib(pyo3-4d7deb7ea960b60a.pyo3.c5bd815a-cgu.7.rcgu.o)\r\n          ld: symbol(s) not found for architecture arm64\r\n          clang: error: linker command failed with exit code 1 (use -v to see invocation)\r\n\r\n\r\nerror: could not compile `temporal-sdk-bridge` due to previous error\r\n```\r\n\r\nStrange, because I had been using `0.1a1` with no issue and suddenly this began occurring. The only thing I can think of atm is perhaps upgrading to macOS 13.3\r\n","createdAt":"2023-05-05T13:10:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/306#issuecomment-1536241443","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c5bkWel","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"We have many changes since alpha/beta and only support official releases. Does this happen on latest release?\r\n\r\nOthers reporting similar issues said some of the things at https://pyo3.rs/v0.18.3/building_and_distribution#macos helped them solve it. Can try that.\r\n\r\n(may close issue here soon if this is not occurring on latest release, but comments can still come in)","createdAt":"2023-05-05T13:22:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/306#issuecomment-1536255909","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c5c2eSe","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"(closing)","createdAt":"2023-05-22T19:11:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/306#issuecomment-1557783710","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6cu_zG","author":{"login":"spacether"},"authorAssociation":"NONE","body":"FYI I just ran into this issue on master branch when I tried to follow the build instructions to write a PR.\nI am also on MacOS\n`poetry install --no-root --all-extras -vv` succeeds with no error, but when temporal is imported python says:\n```\n    import temporalio.bridge.temporal_sdk_bridge\nModuleNotFoundError: No module named 'temporalio.bridge.temporal_sdk_bridge'\n```\nOS and processor: MacOS 15.1, Apple M4\nTemporalio SDK Version: Main branch, commit 51f4b66f4d01302426958b62940ee26ae413e181\nPython version: 3.11.11\n\nIf items are not linked or build correctly, why did install succeed?","createdAt":"2025-02-02T21:38:21Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/306#issuecomment-2629565638","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6c1spf","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> I tried to follow the build instructions to write a PR\n\nDid you run `poe build-develop` per https://github.com/temporalio/sdk-python?tab=readme-ov-file#local-sdk-development-environment?","createdAt":"2025-02-03T15:25:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/306#issuecomment-2631322207","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6c3WUk","author":{"login":"spacether"},"authorAssociation":"NONE","body":"Nope I did not, my mistake. I assume that going through the install preparation steps was enough because it had poetry install. Sorry about that, it was my user error. Why I try building that fails:\nBuild failed:\n```\njustin@Justins-MacBook-Pro temporal-sdk-python % poetry install --no-root --all-extras @ succeeds\njustin@Justins-MacBook-Pro temporal-sdk-python % poetry build\nThe \"poetry.dev-dependencies\" section is deprecated and will be removed in a future version. Use \"poetry.group.dev.dependencies\" instead.\nPreparing build environment with build-system requirements poetry-core>=1.0.0, setuptools, wheel, setuptools-rust\nBuilding temporalio (1.9.0)\n  - Building sdist\n  - Built temporalio-1.9.0.tar.gz\n  - Building wheel\nrunning build\nrunning build_ext\nrunning build_rust\n    Updating crates.io index\nerror: failed to get `temporal-client` as a dependency of package `temporal-sdk-bridge v0.1.0 (/Users/justin/code/temporal-sdk-python/temporalio/bridge)`\n\nCaused by:\n  failed to load source for dependency `temporal-client`\n\nCaused by:\n  Unable to update /Users/justin/code/temporal-sdk-python/temporalio/bridge/sdk-core/client\n\nCaused by:\n  failed to read `/Users/justin/code/temporal-sdk-python/temporalio/bridge/sdk-core/client/Cargo.toml`\n\nCaused by:\n  No such file or directory (os error 2)\nerror: `cargo metadata --manifest-path temporalio/bridge/Cargo.toml --format-version 1` failed with code 101\n-- Output captured from stdout:\n\n\nCommand '['/var/folders/_k/f3jx_pxs6n54136pgm7706rw0000gn/T/tmp9odzfxwq/.venv/bin/python', '/Users/justin/code/temporal-sdk-python/setup.py', 'build', '-b', '/Users/justin/code/temporal-sdk-python/build', '--build-purelib', '/Users/justin/code/temporal-sdk-python/build/lib', '--build-platlib', '/Users/justin/code/temporal-sdk-python/build/lib.macosx-15.1-arm64-cpython-311']' returned non-zero exit status 1.\n```\npoe build develop fails too:\n```\n(.venv) justin@Justins-MacBook-Pro temporal-sdk-python % poe build-develop        \nPoe => python scripts/setup_bridge.py develop\nThe \"poetry.dev-dependencies\" section is deprecated and will be removed in a future version. Use \"poetry.group.dev.dependencies\" instead.\nrunning develop\n/Users/justin/code/temporal-sdk-python/.venv/lib/python3.11/site-packages/setuptools/command/develop.py:40: EasyInstallDeprecationWarning: easy_install command is deprecated.\n!!\n\n        ********************************************************************************\n        Please avoid running ``setup.py`` and ``easy_install``.\n        Instead, use pypa/build, pypa/installer or other\n        standards-based tools.\n\n        See https://github.com/pypa/setuptools/issues/917 for details.\n        ********************************************************************************\n\n!!\n  easy_install.initialize_options(self)\n/Users/justin/code/temporal-sdk-python/.venv/lib/python3.11/site-packages/setuptools/_distutils/cmd.py:66: SetuptoolsDeprecationWarning: setup.py install is deprecated.\n!!\n\n        ********************************************************************************\n        Please avoid running ``setup.py`` directly.\n        Instead, use pypa/build, pypa/installer or other\n        standards-based tools.\n\n        See https://blog.ganssle.io/articles/2021/10/setup-py-deprecated.html for details.\n        ********************************************************************************\n\n!!\n  self.initialize_options()\nrunning egg_info\ncreating temporalio.egg-info\nwriting temporalio.egg-info/PKG-INFO\nwriting dependency_links to temporalio.egg-info/dependency_links.txt\nwriting top-level names to temporalio.egg-info/top_level.txt\nwriting manifest file 'temporalio.egg-info/SOURCES.txt'\nreading manifest file 'temporalio.egg-info/SOURCES.txt'\nadding license file 'LICENSE'\nwriting manifest file 'temporalio.egg-info/SOURCES.txt'\nrunning build_ext\nrunning build_rust\ncargo rustc --lib --message-format=json-render-diagnostics --manifest-path temporalio/bridge/Cargo.toml -v --features pyo3/abi3-py39 pyo3/extension-module -- --crate-type cdylib -C link-args=-undefined dynamic_lookup -Wl,-install_name,@rpath/temporal_sdk_bridge.abi3.so\n    Updating crates.io index\nerror: failed to get `temporal-client` as a dependency of package `temporal-sdk-bridge v0.1.0 (/Users/justin/code/temporal-sdk-python/temporalio/bridge)`\n\nCaused by:\n  failed to load source for dependency `temporal-client`\n\nCaused by:\n  Unable to update /Users/justin/code/temporal-sdk-python/temporalio/bridge/sdk-core/client\n\nCaused by:\n  failed to read `/Users/justin/code/temporal-sdk-python/temporalio/bridge/sdk-core/client/Cargo.toml`\n\nCaused by:\n  No such file or directory (os error 2)\nerror: `cargo rustc --lib --message-format=json-render-diagnostics --manifest-path temporalio/bridge/Cargo.toml -v --features 'pyo3/abi3-py39 pyo3/extension-module' -- --crate-type cdylib -C 'link-args=-undefined dynamic_lookup -Wl,-install_name,@rpath/temporal_sdk_bridge.abi3.so'` failed with code 101\n```\n","createdAt":"2025-02-03T18:28:43Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/306#issuecomment-2631755044","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6c3etJ","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Is the repo cloned recursively?","createdAt":"2025-02-03T18:46:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/306#issuecomment-2631789385","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6c3leD","author":{"login":"spacether"},"authorAssociation":"NONE","body":"No I was not; sorry. I just cloned it recursively and was able to `poe build-develop`, thank you for your help!","createdAt":"2025-02-03T19:00:04Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/306#issuecomment-2631817091","viewerDidAuthor":false}],"createdAt":"2023-03-30T02:08:05Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":306,"reactionGroups":[],"state":"CLOSED","title":"No module named 'temporalio.bridge.temporal_sdk_bridge'","updatedAt":"2025-02-04T02:06:44Z","url":"https://github.com/temporalio/sdk-python/issues/306"}
