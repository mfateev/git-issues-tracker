{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"### Describe the bug\r\n\r\nOnly tested so far on 1.2.0. Example worker:\r\n\r\n```python\r\nimport asyncio\r\nimport logging\r\nimport time\r\nfrom datetime import timedelta\r\n\r\nfrom temporalio import activity, workflow\r\nfrom temporalio.client import Client\r\nfrom temporalio.worker import Worker\r\n\r\n\r\n@activity.defn\r\nasync def get_time() -> float:\r\n    activity.logger.info(\"Called get_time\")\r\n    return time.time()\r\n\r\n\r\n@workflow.defn\r\nclass GreetingWorkflow:\r\n    @workflow.run\r\n    async def run(self) -> float:\r\n        workflow.logger.info(\"Calling local activity\")\r\n        result = await workflow.execute_local_activity(\r\n            get_time,\r\n            # schedule_to_close_timeout=timedelta(seconds=10),\r\n            start_to_close_timeout=timedelta(seconds=10),\r\n        )\r\n        workflow.logger.info(\"Local activity result: {result}\")\r\n        return result\r\n\r\n\r\nasync def main():\r\n    logging.basicConfig(level=logging.INFO)\r\n    # Start client\r\n    client = await Client.connect(\"localhost:7233\")\r\n\r\n    # Run a worker for the workflow\r\n    worker = Worker(\r\n        client,\r\n        task_queue=\"hello-local-activity-task-queue\",\r\n        workflows=[GreetingWorkflow],\r\n        activities=[get_time],\r\n    )\r\n    await worker.run()\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    asyncio.run(main())\r\n```\r\n\r\nThen when run via CLI like:\r\n\r\n```\r\ntemporal workflow execute -t hello-local-activity-task-queue --type GreetingWorkflow\r\n```\r\n\r\nResult:\r\n\r\n```\r\nRunning execution:\r\n  WorkflowId  bb7a7e16-f979-4d0f-9ec9-9d4ce6e40021\r\n  RunId       e7a9202b-d56c-4d6d-b473-e7555b306f0d\r\n  Type        GreetingWorkflow\r\n  Namespace   default\r\n  TaskQueue   hello-local-activity-task-queue\r\n  Args        []\r\n\r\nProgress:\r\n  ID          Time                    Type\r\n   1  2023-06-19T13:30:17Z  WorkflowExecutionStarted\r\n   2  2023-06-19T13:30:17Z  WorkflowTaskScheduled\r\n   3  2023-06-19T13:30:17Z  WorkflowTaskStarted\r\n   4  2023-06-19T13:30:17Z  WorkflowTaskCompleted\r\n   5  2023-06-19T13:30:17Z  MarkerRecorded\r\n   6  2023-06-19T13:30:17Z  WorkflowExecutionFailed\r\n\r\nResult:\r\n  Run Time: 1 seconds\r\n  Status: FAILED\r\n  Failure: &Failure{Message:Local Activity timed out,Source:,StackTrace:,Cause:&Failure{Message:Activity timed out,Source:,StackTrace:,Cause:nil,FailureType:Failure_TimeoutFailureInfo: ScheduleToClose,},FailureType:Failure_ActivityFailureInfo,}\r\n```\r\n\r\nBut if `schedule_to_close_timeout` is uncommented it works.","closedAt":"2023-07-05T20:57:23Z","comments":[{"id":"IC_kwDOGusT1c5fM7Vb","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"The issue is that the Go SDK client sets 0 seconds execution timeout instead of null which meant immediate timeout. This was solved by https://github.com/temporalio/sdk-core/pull/569. We need to upgrade core and put this in the next release.","createdAt":"2023-06-19T13:46:38Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/331#issuecomment-1597224283","viewerDidAuthor":false}],"createdAt":"2023-06-19T13:33:25Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":331,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Local activity without schedule_to_close_timeout is failing immediately","updatedAt":"2023-07-05T20:57:24Z","url":"https://github.com/temporalio/sdk-python/issues/331"}
