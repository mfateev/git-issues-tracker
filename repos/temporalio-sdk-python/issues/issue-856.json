{"assignees":[],"author":{"id":"MDQ6VXNlcjE4MjY4MzY=","is_bot":false,"login":"serious-den","name":""},"body":"I am using the Temporal Python SDK along with FastAPI and Prometheus FastAPI Instrumentator for metrics. However, I am facing difficulties in integrating the metrics from the Temporal Python SDK into the FastAPI app's metrics. Specifically, I would like to see all metrics available under a single endpoint.\n\nHere is my current setup:\n\nFastAPI for the web framework\nTemporal Python SDK for workflow orchestration\nPrometheus FastAPI Instrumentator for exposing metrics\nDespite following the standard setup for Prometheus FastAPI Instrumentator, the metrics from the Temporal Python SDK are appearing under the different port and endpoint.\n\nIs there a recommended solution or best practice for achieving this integration so that all metrics, including those from the Temporal Python SDK, are available under a single endpoint?","closedAt":"2025-05-07T12:46:47Z","comments":[{"id":"IC_kwDOGusT1c6qYJLp","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> Is there a recommended solution or best practice for achieving this integration so that all metrics, including those from the Temporal Python SDK, are available under a single endpoint?\n\nYes. Our metrics are emitted from our Rust-based Core. However, you can create a global `temporalio.runtime.Runtime` that you pass to every client (or even better, that you pass to `temporalio.runtime.Runtime.set_default` to be the proper default). Usually people create this with telemetry metrics configured for OpenTelemetry or Prometheus, but there is an advanced metric buffer option. When creating the runtime, you can pass `telemetry` config that has `metrics` as a `temporalio.runtime.MetricBuffer` you create. Then you can repeatedly call `retrieve_updates` to continually get new metrics updates as they happen and do what you need with those metrics.\n\nFeel free to ask general questions on our [Slack](https://t.mp/slack) instance in the `#python-sdk` channel, or our [forums](https://community.temporal.io/). Closing this issue as not an issue, but rather a question.","createdAt":"2025-05-07T12:46:21Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/856#issuecomment-2858455785","viewerDidAuthor":false}],"createdAt":"2025-05-07T11:36:48Z","labels":[],"milestone":null,"number":856,"reactionGroups":[],"state":"CLOSED","title":"Integration of Temporal Python SDK Metrics with FastAPI and Prometheus FastAPI Instrumentator","updatedAt":"2025-05-07T12:46:47Z","url":"https://github.com/temporalio/sdk-python/issues/856"}
