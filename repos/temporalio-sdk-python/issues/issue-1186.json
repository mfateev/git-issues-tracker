{"assignees":[],"author":{"id":"U_kgDODcYuMQ","is_bot":false,"login":"danielmillerp","name":"Daniel Miller"},"body":"### What are you really trying to do?\n\n  I'm trying to use the Temporal Python SDK's OpenAI agents integration plugin to build and run agents with Temporal workflows.\n\n### Describe the bug\n\nWhen using the Temporal OpenAI agents plugin, the _TemporalModelStub.get_response() method throws a TypeError because the optional parameters lack default\n  values:\n\n  TypeError: _TemporalModelStub.get_response() missing 1 required keyword-only argument: 'conversation_id'\n\n  This issue was previously reported in #1091 (https://github.com/temporalio/sdk-python/issues/1091) and supposedly fixed by PR #1092, but the fix didn't fully\n  resolve the problem. The PR added the parameters to the method signature but didn't give them default values, so they're still required at runtime despite\n  being marked as Optional.\n\n### Minimal Reproduction\n\n  1. Install temporalio 1.18.1 and openai-agents 0.2.7\n  2. Set up any basic Temporal workflow using the OpenAI agents plugin\n  3. Run the workflow\n  4. Observe TypeError when the plugin tries to call get_response()\n \n### Environment/Versions\n\n<!-- Please complete the following information where relevant. -->\n\n  - OS and processor: macOS Darwin 24.6.0 (M1)\n  - Temporal SDK Version: 1.18.1\n  - OpenAI Agents Version: 0.2.7\n  - Python Version: 3.13\n\n### Additional context\n\n Issue #1091 identified this problem and PR #1092 attempted to fix it by adding the conversation_id, previous_response_id, and prompt parameters. However, the\n  fix was incomplete - the parameters were added without default values.\n\n  Current implementation in temporalio/contrib/openai_agents/_temporal_model_stub.py:60-72:\n  async def get_response(\n      ...\n      *,\n      previous_response_id: Optional[str],\n      conversation_id: Optional[str],\n      prompt: Optional[ResponsePromptParam],\n  ) -> ModelResponse:\n\n  Required fix:\n  async def get_response(\n      ...\n      *,\n      previous_response_id: Optional[str] = None,\n      conversation_id: Optional[str] = None,\n      prompt: Optional[ResponsePromptParam] = None,\n  ) -> ModelResponse:\n\n  Adding = None makes these parameters truly optional, allowing the plugin to work without requiring callers to explicitly pass these arguments. Without this,\n  the TypeError persists despite the attempted fix.\n","closedAt":null,"comments":[{"id":"IC_kwDOGusT1c7NuiKc","author":{"login":"tconley1428"},"authorAssociation":"MEMBER","body":"We aren't intending to maintain backwards compatibility with any arbitrary version of `openai-agents` given that it is developing rapidly. Our current (in main) requirements for it are `\"openai-agents>=0.3,<0.5\",`. Do you have a compelling reason not to upgrade? Agents is currently on `0.4.2`","createdAt":"2025-10-27T14:18:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/1186#issuecomment-3451527836","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c7PUx1C","author":{"login":"danielmillerp"},"authorAssociation":"NONE","body":"> We aren't intending to maintain backwards compatibility with any arbitrary version of `openai-agents` given that it is developing rapidly. Our current (in main) requirements for it are `\"openai-agents>=0.3,<0.5\",`. Do you have a compelling reason not to upgrade? Agents is currently on `0.4.2`\n\nI see the same error in version 0.4.2","createdAt":"2025-11-02T20:57:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/1186#issuecomment-3478330690","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c7PiMbY","author":{"login":"tconley1428"},"authorAssociation":"MEMBER","body":"OpenAI Agents should be passing the conversation_id. https://github.com/openai/openai-agents-python/blob/a30c32e722a4cdb761fe8b250606757ec8581296/src/agents/run.py#L1672 Do you have a stacktrace for the failure, and can you confirm that the update to `0.4.2` took place?","createdAt":"2025-11-03T18:06:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/1186#issuecomment-3481847512","viewerDidAuthor":false}],"createdAt":"2025-10-24T20:54:57Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1186,"reactionGroups":[],"state":"OPEN","title":"[Bug] Incomplete fix for #1091 - conversation_id still required in _TemporalModelStub.get_response()","updatedAt":"2025-11-03T18:06:51Z","url":"https://github.com/temporalio/sdk-python/issues/1186"}
