{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"### Describe the bug\r\n\r\nWhen scheduling an activity (and presumably in many cases), we create the command _before_ we try to serialize the parameters. This can cause an issue where if it fails, the command is still in the activations commands list but incomplete. This is usually not a big deal since it's supposed to be a task failure which does not send commands and waits for code fix. But some users are not allowing these failures to be task failures and therefore you get a half-complete command going to Core.\r\n\r\nTo replicate, simply convert a serialization error for a parameter to an activity to an application error.\r\n\r\nThere are a couple of approaches to fix. We can take the more drastic approach of not creating the command until we have built it (changes a lot since we are doing a proto-lib-encouraged approach of creating the thing before populating it today). Or we can just make sure to just do things that can fail before creating the command.\r\n\r\nRelates to and closes https://github.com/temporalio/sdk-python/issues/540.","closedAt":"2024-08-09T18:19:45Z","comments":[],"createdAt":"2024-06-27T13:45:30Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":564,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"[Bug] Converting payloads and other exception-possible actions done after command creation","updatedAt":"2024-08-09T18:19:45Z","url":"https://github.com/temporalio/sdk-python/issues/564"}
