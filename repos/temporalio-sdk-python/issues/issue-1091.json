{"assignees":[],"author":{"id":"MDQ6VXNlcjMzOTcxMzQ=","is_bot":false,"login":"nikhil-pandey","name":"Nikhil Pandey"},"body":"### What are you really trying to do?\n\nUse the Temporal Python SDKâ€™s openai agents integration with the latest `openai-agents` python library to run agents.\n\n### Describe the bug\n\nWhen running a workflow `_TemporalModelStub.get_response`, raises a `TypeError` because the method signature does not accept the new `conversation_id` argument recently added upstream in `openai-agents-python`.\n\nError trace:\n\n```\nTypeError: _TemporalModelStub.get_response() got an unexpected keyword argument 'conversation_id'\n\n/.venv/lib/python3.13/site-packages/agents/run.py\", line 1398, in _get_new_response\n    new_response = await model.get_response(\n        system_instructions=filtered.instructions,\n        prompt=prompt_config,\n        conversation_id=conversation_id,\n    )\n    ^\n```\n\nUpstream change that introduced this parameter:\n\n* [https://github.com/openai/openai-agents-python/commit/164acb59d9512c1dc0db739b88bda1b75264ecfe](https://github.com/openai/openai-agents-python/commit/164acb59d9512c1dc0db739b88bda1b75264ecfe)\n* PR: [[Fix #1564 Add conversations API support (#1587)](https://github.com/openai/openai-agents-python/pull/1587)](https://github.com/openai/openai-agents-python/pull/1587)\n\n### Minimal Reproduction\n\n1. Install the latest `openai-agents` python (post conversations API support).\n2. Run a sample agents workflow.\n3. Observe `TypeError`.\n\nRelevant code in SDK:\n[`[_temporal_model_stub.py#L60](https://github.com/temporalio/sdk-python/blob/44f0c42fa8b0d48c2d13bb9b238023eb983dc07f/temporalio/contrib/openai_agents/_temporal_model_stub.py#L60)`](https://github.com/temporalio/sdk-python/blob/44f0c42fa8b0d48c2d13bb9b238023eb983dc07f/temporalio/contrib/openai_agents/_temporal_model_stub.py#L60)\n\n### Environment/Versions\n\n* **OS and processor:** e.g. macOS 14.5 (M1)\n* **Python version:** 3.13\n* **Temporal SDK version:** 1.4.1\n* **OpenAI Agents Python version: >0.2.10. (conversation_id was added in 0.2.10)\n\n### Additional context\n\nThis bug was introduced due to drift between the Temporal stub and the upstream `openai-agents` python model interface.\n\nPossible fixes:\n\n* Update `_TemporalModelStub.get_response` to accept `conversation_id: Optional[str] = None`.\n* Consider adding `**kwargs` passthrough to reduce future breakage.","closedAt":"2025-09-10T17:44:14Z","comments":[{"id":"IC_kwDOGusT1c7DD5yA","author":{"login":"tconley1428"},"authorAssociation":"MEMBER","body":"Internally we had to pin to versions before 0.2.10 because of https://github.com/openai/openai-agents-python/issues/1640, but that pin hasn't gone in release version, and that is now resolved. It may be worthwhile to pin our integration to a known compatible version of the agents SDK, though that has other costs. I'll update main for these changes, so the next release will work with the new agents version. In the meantime, you can use an agents version from before `0.2.10`.","createdAt":"2025-09-09T23:17:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-python/issues/1091#issuecomment-3272580224","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c7DD97r","author":{"login":"tconley1428"},"authorAssociation":"MEMBER","body":"We can't convert to `**kwargs` in the primary case, because we need to ferry those arguments through serialization. Blindly allowing additional parameters without confirming they are serializable would cause a different kind of instability which would be more difficult to diagnose.","createdAt":"2025-09-09T23:27:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/1091#issuecomment-3272597227","viewerDidAuthor":false}],"createdAt":"2025-09-09T22:37:50Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1091,"reactionGroups":[],"state":"CLOSED","title":"[Bug] `_TemporalModelStub.get_response` incompatible with latest `openai-agents-python` (`conversation_id` kwarg)","updatedAt":"2025-09-10T17:44:14Z","url":"https://github.com/temporalio/sdk-python/issues/1091"}
