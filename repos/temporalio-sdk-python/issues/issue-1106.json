{"assignees":[],"author":{"id":"MDQ6VXNlcjYwMTMwMA==","is_bot":false,"login":"spanktar","name":"Tom Kapanka"},"body":"### What are you really trying to do?\n\nI'm installing Temporal with the Helm chart. Our Python workers start fine and connect to the Temporal server, but I'm getting a TLS error from `poll_workflow_task_queue`. I'm trying to determine what this code is trying to resolve in order to try to eliminate this error.\n\n### Describe the bug\n\nDespite having TLS configured properly (I hope! â€” the clients connect fine), I'm getting a TLS error from the `poll_workflow_task_queue`. I have the long form of the K8S service name `temporal-frontend.main.svc.cluster.local` and the short name `temporal-frontend.main.svc` in the certificate SAN, and I am setting `TEMPORAL_HOSTNAME=temporal-frontend.main.svc`.  Despite this, I'm getting the error message below about the TLS cert not being valid for IP `10.244.3.67`. This is obviously the case because we're not gonna put ephemeral IPs into the SANs. This IP resolves to the Matching pod `temporal-matching-6c8ff5f74c-gcwgc`. So I'm trying to understand what the `poll_workflow_task_queue` is trying to resolve, and getting that IP address back, or how it's coming up with that IP address. It seems to me that it should be talking to `temporal-frontend.main.svc`, which would have the correct SAN, but it isn't?\n\n### Environment/Versions\n\n- OS and processor: Ubuntu host\n- Temporal Version: Python SDK\n- Are you using Docker or Kubernetes or building Temporal from source? Kubernetes Helm chart v0.65.0\n\n### Additional context\n\nError message:\n\n```\n2025-09-15T17:17:43.248391Z  WARN temporal_client::retry: gRPC call poll_workflow_task_queue retried 8 times error=Status { code: Unavailable, message: \"connection error: desc = \\\"transport: authentication handshake failed: tls: failed to verify certificate: x509: certificate is valid for 127.0.0.1, ::1, not 10.244.3.67\\\"\", metadata: MetadataMap { headers: {\"content-type\": \"application/grpc\"} }, source: None }\n```","closedAt":"2025-09-17T15:42:05Z","comments":[{"id":"IC_kwDOGusT1c7EqRhG","author":{"login":"tconley1428"},"authorAssociation":"MEMBER","body":"`TEMPORAL_HOSTNAME` is not a thing as far as we are aware. If that is being used by your code in some way, it doesn't give us full detail. I would recommend inquiring at the community slack https://t.mp/slack where customer success folks can help if you provide more detail on the scenario.","createdAt":"2025-09-16T15:59:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/1106#issuecomment-3299416134","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c7E6MU9","author":{"login":"spanktar"},"authorAssociation":"NONE","body":"https://temporalio.slack.com/archives/CTRCR8RBP/p1758123380477309?thread_ts=1758121148.745729&cid=CTRCR8RBP\n\nSummary:\nI was missing `server_name` under `server.config.tls.internode.client` in my Helm config.\nhttps://docs.temporal.io/references/configuration#tls\n","createdAt":"2025-09-17T15:42:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/1106#issuecomment-3303589181","viewerDidAuthor":false}],"createdAt":"2025-09-15T17:44:34Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1106,"reactionGroups":[],"state":"CLOSED","title":"[Bug] TLS error from `poll_workflow_task_queue`","updatedAt":"2025-09-17T15:42:05Z","url":"https://github.com/temporalio/sdk-python/issues/1106"}
