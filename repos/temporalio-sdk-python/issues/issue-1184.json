{"assignees":[],"author":{"id":"MDQ6VXNlcjQwMDYwMTA=","is_bot":false,"login":"maver1ck","name":"Maciek Bryński"},"body":"Problem\nIn the Python SDK, workflows must invoke activities explicitly via `workflow.execute_activity()` / `start_activity()`. This adds boilerplate at call sites (repeating options like timeouts/retries) and surprises users who expect decorator‑marked callables to be directly invocable inside workflows.\n\nWhy it matters\n- Readability/teachability: code is less declarative; `@activity.defn` looks like a function you can call, but you can’t.\n- Ergonomics: the same options are repeated in every call site even when they’re identical.\n- Consistency: other task/flow frameworks allow direct invocation of decorated tasks within flows, reducing ceremony.\n\nComparison with Prefect\nBelow are minimal examples showing how a similar pattern looks today.\n\nPrefect (2.x):\n```python\nfrom prefect import flow, task\n\n@task\ndef fetch_article(url: str) -> str:\n    ...\n\n@flow\ndef pipeline(url: str):\n    # Direct call (sync semantics) or .submit() for concurrency\n    html = fetch_article(url)\n    # html = fetch_article.submit(url)\n    return html\n```\n\nTemporal Python today:\n```python\nfrom datetime import timedelta\nfrom temporalio import workflow\nfrom temporalio import activity\n\n@activity.defn\nasync def fetch_article(url: str) -> str:\n    ...\n\n@workflow.defn\nclass Pipeline:\n    @workflow.run\n    async def run(self, url: str) -> str:\n        html = await workflow.execute_activity(\n            fetch_article,\n            url,\n            start_to_close_timeout=timedelta(seconds=30),\n            # plus any retry/heartbeat options at each call site\n        )\n        return html\n```\n\nThis issue is to track interest in more ergonomic, decorator‑style activity invocation in Python workflows—while preserving Temporal’s determinism and activity semantics. No specific API is proposed here; the goal is to document the pain point and contrast with common expectations from Prefect‑style flows.\n","closedAt":"2025-12-05T19:24:57Z","comments":[{"id":"IC_kwDOGusT1c7NOsis","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"This was a _very_ intentional decision during the design of the APIs. We did the looks-like-normal-function approach in Java and (kinda) TypeScript and have since backed off that approach.\n\nFirstly, we don't want activity invocation to look like regular function invocation. You need to understand that you are invoking an activity and not just calling a Python function.\n\nSecondly, you need to be able to provide options to an activity. Languages like Java and TypeScript that did the looks-like-normal-function-invocation have confusing away-from-call semantics for providing activity options.\n\nThirdly, there is `start_activity`, `execute_activity`, `start_local_activity`, and `execute_local_activity` (and sometime in the future maybe more for standalone activities). The activity implementation/decorator does not decide which of those to use, the caller does. And we don't want inconsistency between starting and executing or inconsistency between local and non-local.\n\nFourthly, we support activities as methods with calls like `start_activity_method` and `execute_activity_method`. It is very common. How would that work in this scenario?\n\nFifthly, we want consistency with how you start/execute workflows, which are classes not functions.\n\nFinally, for those that do want to give up this explicitness/clarity and know exactly how they may call an activity (local or not, what options, etc), they can make this decorator/utility themselves.\n\nFeel free to join us on `#python-sdk` on [Slack](https://t.mp/slack) for general discussion topics.","createdAt":"2025-10-24T13:31:43Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/1184#issuecomment-3443181740","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c7NPxVC","author":{"login":"maver1ck"},"authorAssociation":"NONE","body":"Hi @cretz,\nThank you for the great explanation.\n\n## start_activity vs execute_activity\nLet's start with `start_activity` vs `execute_activity`\nFrom my understanding this is simpler problem to solve.\n\nLet's assume that we have custom decorator:\n```\n@callable_activity.defn(start_to_close_timeout=timedelta(seconds=30))\nasync def fetch_article(url: str) -> str:\n    ...\n\n```\nParameters of start/execute may be defined in decorator\n\nThen we have two options how to use it:\n1. without await which equals to start_activity\n```\narticle_activity1 = fetch_article(url1)\narticle_activity2 = fetch_article(url2)\narticle1 = await article_activity1\narticle2 = await article_activity2\n```\n\n2. with await which equals to execute_activity\n```\narticle = await fetch_article(url)\n```\n\n## local vs non-local\nThis may be just solved using parameters in decorator\n```\n@callable_activity.defn(local=True)\nasync def fetch_article(url: str) -> str:\n    ...\n\n```\n\n> Finally, for those that do want to give up this explicitness/clarity and know exactly how they may call an activity (local or not, what options, etc), they can make this decorator/utility themselves.\n\nOf course this is something that may be easy implemented outside of SDK (probably also for workflows).\nThe question is - is it valuable addition to Python SDK.\n\n\n","createdAt":"2025-10-24T14:27:53Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/1184#issuecomment-3443463490","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c7NSSCR","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> Then we have two options how to use it:\n\nThere are more calls than just start/execute, and there are many other reasons listed. And we may want to add more things to workflow-specific https://python.temporal.io/temporalio.workflow.ActivityHandle.html (returned from start only if you call start inside of workflows) which we would never alter the decorator's type hint to return because we want standalone activities too (which will be these same activities called from non-worfklow contexts).\n\n> This may be just solved using parameters in decorator\n\nThis is a caller choice not an implementer choice\n\nAnd there are many other reasons listed for why we want activity invocation to be explicit and not hidden","createdAt":"2025-10-24T17:09:16Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/1184#issuecomment-3444121745","viewerDidAuthor":false}],"createdAt":"2025-10-24T12:42:07Z","labels":[],"milestone":null,"number":1184,"reactionGroups":[],"state":"CLOSED","title":"Feature request: Call activities as decorated functions inside workflows (sugar over execute_activity)","updatedAt":"2025-12-05T19:24:57Z","url":"https://github.com/temporalio/sdk-python/issues/1184"}
