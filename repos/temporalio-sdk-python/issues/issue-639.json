{"assignees":[],"author":{"id":"U_kgDOCF_n0Q","is_bot":false,"login":"duy-nguyen-ts","name":"duy-nguyen-ts"},"body":"### What are you really trying to do?\r\n- Hi team, I am having an issue when trying to `start_workflow` and `signal_workflow`\r\n<!-- \r\nTell us at a high level what you're doing, to avoid XY problem (https://en.wikipedia.org/wiki/XY_problem) \r\n-->\r\n\r\n### Describe the bug\r\n\r\n- It happens when I called method `start_workflow`. Maybe it cant connect to create workflow on temporal and return `temporal_sdk_bridge.RPCError: (1, 'operation was canceled', b'')`\r\n- I started 10 workflows but received 6 success and 4 error cancelled\r\n- I want to know why it happens, does it due to network or anything else ? How can I fix that ? E.x: Add retry policy when start_workflow,...\r\n\r\n<!-- \r\nModify our hello world templates to demonstrate:\r\n\r\n- TypeScript: https://github.com/temporalio/samples-typescript/tree/main/hello-world\r\n- Go: https://github.com/temporalio/money-transfer-project-template-go\r\n- Java: https://github.com/temporalio/money-transfer-project-template-java\r\n- PHP: https://github.com/temporalio/samples-php#samples\r\n-->\r\n\r\n### Environment/Versions\r\n\r\n<!-- Please complete the following information where relevant. -->\r\n\r\n- OS and processor: Mac M2\r\n- Temporal Version: ^1.6.0\r\n- Are you using Docker or Kubernetes or building Temporal from source: Using Docker\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->","closedAt":null,"comments":[{"id":"IC_kwDOGusT1c6LctNE","author":{"login":"duy-nguyen-ts"},"authorAssociation":"NONE","body":"I had check my logs again, this error also happens when I call signal to workflow.","createdAt":"2024-09-10T03:57:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/639#issuecomment-2339558212","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6LczXZ","author":{"login":"duy-nguyen-ts"},"authorAssociation":"NONE","body":"After tracing this issue, I saw it happened at this line, maybe error when it made a rpc call to temporal\r\n![Screenshot 2024-09-10 at 11 25 47](https://github.com/user-attachments/assets/459b144e-ff48-4409-9335-eeb792a656af)\r\n","createdAt":"2024-09-10T04:27:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/639#issuecomment-2339583449","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6LgYQl","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Can you replicate this reliably? If so, can you alter a sample to show how to replicate? And is it against Temporal cloud or self-hosted server? We are releasing a fix in the next couple of days for a similar error at https://github.com/temporalio/sdk-core/issues/807, but we believe that only affected 1.7.0.","createdAt":"2024-09-10T12:11:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-python/issues/639#issuecomment-2340520997","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6Ln77X","author":{"login":"duy-nguyen-ts"},"authorAssociation":"NONE","body":"Hi @cretz , thanks for your reply,  I am using Temporal as self-hosted server and I can't always replicate it, sometime it happened and not. I investigated and assumed that it caused at point in above image. Currently, I added retry when call start_workflow and this error still happen but less than before. About my code, it just sample like this: \r\n- Create a client with connect\r\n`temporal_client = await Client.connect(target_host=...,namespace=...)`\r\n- Call start_workflow (maybe many calls at the same time)\r\n`handler = await temporal_client.start_workflow(workflow, args=[arg], id=\"workflow_id\", task_queue=\"task_queue\")`","createdAt":"2024-09-11T02:43:03Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/639#issuecomment-2342502103","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6Ln8U5","author":{"login":"duy-nguyen-ts"},"authorAssociation":"NONE","body":"I am using version 1.6.0 so maybe it not similar to https://github.com/temporalio/sdk-core/issues/807","createdAt":"2024-09-11T02:45:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/639#issuecomment-2342503737","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6LsPpy","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> I am using Temporal as self-hosted server and I can't always replicate it, sometime it happened and not\r\n\r\nEven if it takes a minute to replicate, any replication would help us debug.\r\n\r\nI am afraid there's not much to go on here. We have many samples/users starting hundreds/thousands of workflows without any issues on self-hosted servers. Can you make sure you're not doing something like accidentally blocking the thread in an `async def` call thereby causing asyncio to stop working properly?","createdAt":"2024-09-11T13:10:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-python/issues/639#issuecomment-2343631474","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6L8qtZ","author":{"login":"duy-nguyen-ts"},"authorAssociation":"NONE","body":"Okk @cretz , thank you for your response. I will continue monitor it ðŸ˜„ ","createdAt":"2024-09-13T02:49:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/639#issuecomment-2347936601","viewerDidAuthor":false}],"createdAt":"2024-09-10T03:47:36Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":639,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"OPEN","title":"[Bug] Operation was canceled when start_workflow","updatedAt":"2024-09-13T02:49:54Z","url":"https://github.com/temporalio/sdk-python/issues/639"}
