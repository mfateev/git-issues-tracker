{"assignees":[],"author":{"id":"MDQ6VXNlcjY4Mjc5MjI=","is_bot":false,"login":"brandonchinn178","name":"Brandon Chinn"},"body":"### What are you really trying to do?\n\nUse a dataclass as activity input with a field of type `Literal[\"success\", \"failure\"]`\n\n### Describe the bug\n\n<!-- A clear and concise description of what the bug is. -->\n\n<!-- If applicable, add screenshots or code blocks to help explain your problem. You can also use [Loom](http://loom.com/) to do short, free video bug reports. -->\n\nWhen using the Literal type_hint, value_to_type shows an error\n\n```\nUnserializable type during conversion: typing.Literal['success', 'failure']\n```\n\nThis seems to happen because temporal checks referential equality with Literal from typing_extensions, but typing_extensions doesnt reuse the one from typing unless 3.10+\n\nWorkaroundable by using Literal from typing_extensions, but this isnt documented. It would be nice if temporal just used the normal Literal from typing (and perhaps replicate the deduplication logic in 3.10+)\n\n### Minimal Reproduction\n\n<!-- \nModify our hello world templates to demonstrate:\n\n- TypeScript: https://github.com/temporalio/samples-typescript/tree/main/hello-world\n- Go: https://github.com/temporalio/money-transfer-project-template-go\n- Java: https://github.com/temporalio/money-transfer-project-template-java\n- PHP: https://github.com/temporalio/samples-php#samples\n-->\n\n```\npython3.9 -m venv venv\nvenv/bin/pip install temporalio\nvenv/bin/python\n\nfrom temporalio.converter import value_to_type\nfrom typing import *\nvalue_to_type(Literal[\"a\", \"b\"], \"a\")\n```\n\n### Environment/Versions\n\n<!-- Please complete the following information where relevant. -->\n\n- OS and processor: [e.g. M1 Mac, x86 Windows, Linux]\n- Temporal Version: [e.g. 1.14.0?] and/or SDK version\n- Are you using Docker or Kubernetes or building Temporal from source?\n\n### Additional context\n\n<!-- Add any other context about the problem here. -->\n","closedAt":"2025-05-14T16:55:11Z","comments":[{"id":"IC_kwDOGusT1c6paYDG","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Yes, this is a bug as we need to also check the stdlib `Literal ` instead of just `typing_extensions`. Thanks for reporting, we will fix.\n\n> and perhaps replicate the deduplication logic in 3.10+\n\nFor our use at https://github.com/temporalio/sdk-python/blob/e3603989f081bb812d883189be5f5ac9aa127089/temporalio/converter.py#L1426-L1430 the dedupe isn't really needed I think since we just do a validation check on the collection (regardless of whether it's in there multiple times) before accepting the raw value.","createdAt":"2025-04-30T14:53:54Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/852#issuecomment-2842263750","viewerDidAuthor":false}],"createdAt":"2025-04-29T21:45:14Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":852,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Serializing Literal fails","updatedAt":"2025-05-14T16:55:11Z","url":"https://github.com/temporalio/sdk-python/issues/852"}
