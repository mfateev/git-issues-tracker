{"assignees":[],"author":{"id":"MDQ6VXNlcjIwNjM5Ng==","is_bot":false,"login":"cretz","name":"Chad Retz"},"body":"### Describe the bug\r\n\r\nToday, anyone in a `finally` or `except Exception` can catch exceptions occurring during eviction and do side-effecting things like logging. We need to set `is_replaying` to `True` during eviction (or maybe Core does) and we need to make a new `class WorkflowEvictingException(BaseException)` that we use when we see stuff happening during delete.","closedAt":"2024-05-15T14:50:33Z","comments":[{"id":"IC_kwDOGusT1c5-sMtr","author":{"login":"jpcarlino"},"authorAssociation":"NONE","body":"@cretz I recently upgraded our pipeline workers to use the Temporal SDK 1.6.0. Since then I see this error being printed in our logs: `Ignoring add while deleting`, which seems to come from [this line](https://github.com/temporalio/sdk-python/blob/1.6.0/temporalio/worker/_workflow_instance.py#L1517). I see you did change it to [this](https://github.com/temporalio/sdk-python/blob/main/temporalio/worker/_workflow_instance.py#L1520-L1521).\r\n\r\nMy question is: should I catch that exception and ignore it? If not, what should I do on my side to avoid that. Unfortunately it is flooding our logs right now. Thank you.","createdAt":"2024-05-22T18:42:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-python/issues/523#issuecomment-2125515627","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c5-xtCe","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Yes, this issue is meant to fix that problem because logging should not occur during is_replaying. In the meantime you can ignore these exceptions, they are only on cache eviction.","createdAt":"2024-05-23T12:13:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/temporalio/sdk-python/issues/523#issuecomment-2126958750","viewerDidAuthor":false}],"createdAt":"2024-05-09T18:49:49Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":523,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Make sure `is_replaying` is `True` upon eviction, and only throw certain exception types out on eviction","updatedAt":"2024-05-23T12:13:54Z","url":"https://github.com/temporalio/sdk-python/issues/523"}
