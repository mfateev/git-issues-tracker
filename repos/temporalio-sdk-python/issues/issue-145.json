{"assignees":[],"author":{"id":"MDQ6VXNlcjIzNTYxMTc0","is_bot":false,"login":"lambyqq","name":"Siyang Xie"},"body":"### What are you really trying to do?\r\n\r\nCancel a running workflow and check the status in `wf_handle.describe().status`\r\n\r\n### Describe the bug\r\n\r\nExpect the status to be `WorkflowExecutionStatus.CANCELED`, but got `WorkflowExecutionStatus.FAILED`\r\n\r\n### Minimal Reproduction\r\n\r\ncancel a workflow and get its status\r\n\r\n### Environment/Versions\r\n\r\n<!-- Please complete the following information where relevant. -->\r\n\r\n- Temporal Version: [e.g. 1.14.0?] and/or SDK version\r\npython-SDK: temporalio==0.1b1\r\n\r\n\r\n### Additional context\r\n\r\nI have to use a workaround to tell if workflow is cancelled:\r\n```\r\nwf_description.status == WorkflowExecutionStatus.FAILED\r\n            and isinstance(wf_error.cause, CancelledError)\r\n```\r\n","closedAt":"2022-11-07T14:52:22Z","comments":[{"id":"IC_kwDOGusT1c5LL2Lh","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Thanks, I have confirmed at https://github.com/temporalio/sdk-python/blob/49ccd563c1120425fc78b792c7c9e02bf3670f1c/temporalio/worker/workflow_instance.py#L1229-L1236 we are not doing the right thing. We will solve this shortly.\r\n\r\nNote to self/implementer:\r\n\r\n* Change to `cancel_workflow_execution` instead of `fail_workflow_execution` and confirm in tests\r\n* Confirm in tests what happens if a cancellation error is raised outside of a cancellation request","createdAt":"2022-09-28T19:51:49Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/145#issuecomment-1261396705","viewerDidAuthor":false}],"createdAt":"2022-09-28T19:30:21Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":145,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Cancelled workflow returns WorkflowExecutionStatus.FAILED status in workflow description","updatedAt":"2022-11-07T14:52:22Z","url":"https://github.com/temporalio/sdk-python/issues/145"}
