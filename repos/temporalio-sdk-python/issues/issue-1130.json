{"assignees":[],"author":{"id":"MDQ6VXNlcjYzODg3NDYy","is_bot":false,"login":"johnyang101","name":"John Yang"},"body":"I'd like to add a custom tracing provider for the OpenAI Agents SDK. Importantly, this tracing provider is supported by the OpenAI Agents SDK itself.\n\n### The solution I'd like\n\nI'd like to be able to pass the tracing provider to the OpenAI Agents Plugin when initializing the client e.g. \n\n```python\nfrom temporalio.client import Client\nfrom temporalio.contrib.openai_agents import OpenAIAgentsPlugin\nfrom custom_tracing_provider import CustomTraceProvider\n\nplugin = OpenAIAgentsPlugin(\n     trace_provider=CustomTraceProvider()\n)\n\n\nclient_config = {\n    \"namespace\": NAMESPACE,\n    \"plugins\": [plugin],\n    \"API_KEY\": os.environ.get(\"TEMPORAL_API_KEY\")\n}\n\n_client_instance = await Client.connect(ADDRESS, **client_config)\n\n```\n\nGiven the temporal tracing provider today is implemented on top of the `DefaultTracingProvider` class provided by OpenAI as shown below, perhaps it wouldn't be too hard to just create a factory that takes any supported tracing provider and returns a Temporal supported one.\n```python\n\nclass TemporalTraceProvider(DefaultTraceProvider):\n    \"\"\"A trace provider that integrates with Temporal workflows.\"\"\"\n\n    def __init__(self, auto_close_in_workflows: bool = False):\n        \"\"\"Initialize the TemporalTraceProvider.\"\"\"\n        super().__init__()\n        self._original_provider = cast(DefaultTraceProvider, get_trace_provider())\n        self._multi_processor = _TemporalTracingProcessor(\n            self._original_provider._multi_processor,\n            auto_close_in_workflows,\n        )\n\n    def time_iso(self) -> str:\n        \"\"\"Return the current deterministic time in ISO 8601 format.\"\"\"\n        if workflow.in_workflow():\n            return workflow.now().isoformat()\n        return super().time_iso()\n\n    def gen_trace_id(self) -> str:\n        \"\"\"Generate a new trace ID.\"\"\"\n        if workflow.in_workflow():\n            try:\n                \"\"\"Generate a new trace ID.\"\"\"\n                return f\"trace_{_workflow_uuid()}\"\n            except ReadOnlyContextError:\n                return f\"trace_{uuid.uuid4().hex}\"\n        return super().gen_trace_id()\n\n    def gen_span_id(self) -> str:\n        \"\"\"Generate a span ID.\"\"\"\n        if workflow.in_workflow():\n            try:\n                \"\"\"Generate a deterministic span ID.\"\"\"\n                return f\"span_{_workflow_uuid()}\"\n            except ReadOnlyContextError:\n                return f\"span_{uuid.uuid4().hex[:24]}\"\n        return super().gen_span_id()\n\n    def gen_group_id(self) -> str:\n        \"\"\"Generate a group ID.\"\"\"\n        if workflow.in_workflow():\n            try:\n                \"\"\"Generate a deterministic group ID.\"\"\"\n                return f\"group_{_workflow_uuid()}\"\n            except ReadOnlyContextError:\n                return f\"group_{uuid.uuid4().hex[:24]}\"\n        return super().gen_group_id()\n\n    def __enter__(self):\n        \"\"\"Enter the context of the Temporal trace provider.\"\"\"\n        return self\n\n    def __exit__(\n        self,\n        exc_type: type[BaseException],\n        exc_val: BaseException,\n        exc_tb: TracebackType,\n    ):\n        \"\"\"Exit the context of the Temporal trace provider.\"\"\"\n        self._multi_processor.shutdown()\n```","closedAt":null,"comments":[{"id":"IC_kwDOGusT1c7H07_q","author":{"login":"tconley1428"},"authorAssociation":"MEMBER","body":"Can you elaborate on the scenario? For what reason do you want to override the trace provider? Typically I've seen folks implement a `TracingProcessor`. ","createdAt":"2025-09-30T14:41:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/1130#issuecomment-3352543210","viewerDidAuthor":false}],"createdAt":"2025-09-29T20:26:23Z","labels":[{"id":"LA_kwDOGusT1c7gQgHN","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1130,"reactionGroups":[],"state":"OPEN","title":"[Feature Request] Support for custom tracing providers","updatedAt":"2025-09-30T14:41:55Z","url":"https://github.com/temporalio/sdk-python/issues/1130"}
