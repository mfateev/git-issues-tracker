{"assignees":[],"author":{"id":"MDQ6VXNlcjk0NDUwNg==","is_bot":false,"login":"pvcnt","name":"Vincent Primault"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\nI am connecting to a Temporal server with a client certificate, which is \"short\"-lived (a few days). When it expires, my client becomes unusable.\r\n\r\n### Describe the solution you'd like\r\n\r\nI need a way to refresh the certificate without restarting my entire client. For example, I would need to be able to specify a path to a certificate, or a function supplying a certificate in TLSConfig, instead of giving directly the certificate.\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context or screenshots about the feature request here. -->\r\n","closedAt":"2024-05-03T20:36:51Z","comments":[{"id":"IC_kwDOGusT1c57rT7a","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> I need a way to refresh the certificate without restarting my entire client\r\n\r\nIf you mean just change in the client, TLS establishment is done on connect, so you need to connect a new client. But if you mean replace the client in the worker without restarting the worker, yes, this is something we are adding soon (I just opened #513 since I didn't see an original public issue on this).","createdAt":"2024-04-24T13:27:47Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/512#issuecomment-2074951386","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c58y8Nw","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Closing this issue in favor of #513 where we allow client replacement on long-running workers (which means it can be reconnected with a new cert). To use a new TLS certificate on a client, you have to reconnect a client.","createdAt":"2024-05-03T20:36:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-python/issues/512#issuecomment-2093728624","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c580kbL","author":{"login":"pvcnt"},"authorAssociation":"CONTRIBUTOR","body":"Excellent, thank you!","createdAt":"2024-05-04T13:02:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/512#issuecomment-2094155467","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6zaKbL","author":{"login":"ankit-sultania"},"authorAssociation":"NONE","body":"Lets say my worker is running indefinitely with a client and after an hour the cert is rotated and I replace the worker client, but seems like that is not enough and I need to reconnect. Does it mean I need to kind of stop and start the worker? Like how do you reconnect the client without having to stop the worker that is already running? ","createdAt":"2025-06-26T20:50:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/512#issuecomment-3009980107","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6zbJ3u","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"You connect the client before replacing it on the worker. You set the `client` property on the worker (which has a [setter for `client` property](https://python.temporal.io/temporalio.worker.Worker.html#client)) to replace the client with a newly connected client. You do not have to stop the worker, the next time the worker issues requests it will start using the new client (but outstanding poll requests will still complete using the existing client).","createdAt":"2025-06-26T21:45:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/512#issuecomment-3010239982","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6zbVJ1","author":{"login":"ankit-sultania"},"authorAssociation":"NONE","body":"Thanks for the explanation. So, you are saying that workers would be still be able to pull from the task queue after 1) certs are rotated and 2) the client is replaced with the new client. Correct?","createdAt":"2025-06-26T22:04:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/512#issuecomment-3010286197","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6zcqTe","author":{"login":"ankit-sultania"},"authorAssociation":"NONE","body":"Ok, now i see what's going on here. 1) bridge service client is extracted [here](https://github.com/temporalio/sdk-python/blob/main/temporalio/worker/_worker.py#L320) which is used for polling tasks 2) upon replacing the worker.client we also replace the bridge client under the hood [here](https://github.com/temporalio/sdk-python/blob/main/temporalio/worker/_worker.py#L566) which means this new bridge client is used for polling","createdAt":"2025-06-26T23:36:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/512#issuecomment-3010634974","viewerDidAuthor":false}],"createdAt":"2024-04-24T11:23:27Z","labels":[{"id":"LA_kwDOGusT1c7gQgHN","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":512,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] Reload client certificate ","updatedAt":"2025-06-26T23:36:55Z","url":"https://github.com/temporalio/sdk-python/issues/512"}
