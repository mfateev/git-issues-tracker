{"assignees":[],"author":{"id":"U_kgDOBZKo7w","is_bot":false,"login":"hebrd","name":"hebrd"},"body":"There are many \"workflow task timed out\" error on my temporal (with python sdk) after 2 minutes.\n\nworkflow definition:\n```python\n@activity.defn\nasync def execute_action(action_input: dict[str, Any]):\n    try:\n        return await do_execute_action(action_input)\n    except Exception as e:\n        if action_input is not None and 'execution' in action_input:\n            from utils.log_helper import get_loguru_traceback\n            if action_input['execution']['execution_log'] is None:\n                action_input['execution']['execution_log'] = \"\"\n            from utils.log_helper import get_current_traceback\n            action_input['execution']['execution_log'] += \"\\r\\n\" + get_current_traceback()\n\n\nasync def do_execute_action(action_input: dict[str, Any]):\n    \"\"\"\n    执行Action\n    :param action_input:\n    :return:\n    \"\"\"\n    if action_input is None:\n        raise RuntimeError(\"action_input is None\")\n    action = action_input.get(\"action\", {})  # type: dict\n    task_handler = action.get(\"action_handler_name\", \"\")\n    if task_handler is None or len(task_handler) <= 0:\n        raise RuntimeError(\"action_handler_name is None or empty\")\n    func = get_worker_handler_function(task_handler)\n    action_output = await func(action_input)\n    return action_output\n\n\n@workflow.defn\nclass BotActionWorkflow:\n\n    @workflow.run\n    async def run(self, wf_input: dict[str, Any]) -> dict[str, Any]:\n        return await workflow.execute_activity(\n            execute_action,\n            wf_input,\n            start_to_close_timeout=timedelta(seconds=1800),\n            retry_policy=RetryPolicy(maximum_attempts=1),\n        )\n\n\n```\nI need helps:\n1. Why does this happen? My business code already done, why still so many workflow tasks taking so long to finish\n2. How to prevent this timeout problem so the workflow can be finished more quick\n\n![Image](https://github.com/user-attachments/assets/63a1faee-7b77-4c1e-89e1-def0a9700055)","closedAt":"2025-05-20T00:23:55Z","comments":[{"id":"IC_kwDOGusT1c6sTv-w","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"This may be more of a support question than a bug (can join us on Slack or forums). Usually this means your code is taking 10s to handle the workflow task which only takes milliseconds usually. This history looks like you may have tried to raise this timeout to the max of 120s, but regardless, something is blocking the event loop or workflow thread somehow.\n\nThere may be something missing from your sample letting me replicate. Can you provide a full runnable replication? Can take https://github.com/temporalio/samples-python/blob/main/hello/hello_activity.py or similar and alter to replicate your issue, or can take your issue while you can replicate and continually reduce it smaller and smaller while it still is breaking.\n\nThis is usually caused by blocking the asyncio event loop with accidental thread-blocking logic.","createdAt":"2025-05-19T12:38:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/873#issuecomment-2890858416","viewerDidAuthor":false}],"createdAt":"2025-05-18T11:23:58Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":873,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Workflow Task Timed out","updatedAt":"2025-05-20T00:23:55Z","url":"https://github.com/temporalio/sdk-python/issues/873"}
