{"assignees":[],"author":{"id":"U_kgDOB4KbQQ","is_bot":false,"login":"TheCodeWrangler","name":"Nathan Price"},"body":"### What are you really trying to do?\r\n\r\nI would like to have my logs include activity info on extra but not in the message\r\n```\r\nactivity.logger.activity_info_on_message = False\r\nactivity.logger.activity_info_on_extra = True\r\n```\r\n\r\nHowever in practice after enabling a debugger when\r\nhttps://github.com/temporalio/sdk-python/blob/main/temporalio/activity.py#L462\r\nis reached the value of `context._logger_details` is None/null\r\n\r\nRunning the same debug again with\r\n```\r\nactivity.logger.activity_info_on_message = True\r\nactivity.logger.activity_info_on_extra = True\r\n```\r\nresults in the debugger showing that `context._logger_details` is populated\r\n\r\n### Describe the bug\r\n\r\nIt should be possible to include extra context on activities without including them in the string of the message however in practice it does not seem to work.\r\n\r\n### Minimal Reproduction\r\n\r\nPrior to running hello world on running the workers \r\n```\r\nfrom temporal import activity\r\n\r\nactivity.logger.activity_info_on_message = False\r\nactivity.logger.activity_info_on_extra = True\r\n```\r\n\r\nRun an activity which inclues `activity.logger.info(\"some message\") ` and observe that the logger results in  \"temporal_activity\": null\r\n\r\n","closedAt":"2024-07-24T16:30:15Z","comments":[{"id":"IC_kwDOGusT1c6F_4T9","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Thanks for the report! This is a bug. We need to change https://github.com/temporalio/sdk-python/blob/c4b1a019ad2627edb20a954edfd57c9ba414f3d5/temporalio/activity.py#L462 to access `logger_details` instead of `_logger_details` since the former will lazily populate it (which was occurring when `activity_info_on_message` was `True` so the bug wasn't obvious before).","createdAt":"2024-07-24T14:20:42Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/592#issuecomment-2248115453","viewerDidAuthor":false},{"id":"IC_kwDOGusT1c6GAKW4","author":{"login":"TheCodeWrangler"},"authorAssociation":"CONTRIBUTOR","body":"Thank you for quickly (nearly immediately) identifying the fix!\r\n\r\nI posted a PR\r\nhttps://github.com/temporalio/sdk-python/pull/593","createdAt":"2024-07-24T14:39:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-python/issues/592#issuecomment-2248189368","viewerDidAuthor":false}],"createdAt":"2024-07-24T14:10:27Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":592,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Activity logger context not populated when `activity_info_on_message` False","updatedAt":"2024-07-24T16:30:15Z","url":"https://github.com/temporalio/sdk-python/issues/592"}
