{"assignees":[],"author":{"id":"MDQ6VXNlcjUzMzgwMzQz","is_bot":false,"login":"ankitpaudel20","name":"Ankit Paudel"},"body":"### What are you really trying to do?\n\nI am trying to replay a workflow from a history file.\n\n### Describe the bug\n\nI have a history json downloaded from temporal-ui and I want to debug it using replayer.\n\nthis is my code:\n```\nimport argparse\nimport asyncio\nimport json\nimport logging\nfrom typing import Any\n\nfrom temporalio.client import WorkflowHistory\nfrom temporalio.contrib.pydantic import pydantic_data_converter\nfrom temporalio.worker import Replayer, UnsandboxedWorkflowRunner\n\nfrom app.workflows.workflow import TestWorkflow\n\n\n\ndef get_workflow_id_from_history(history: dict[str, Any]) -> str | None:\n    \"\"\"Extract workflow ID from history events.\"\"\"\n    events = history.get(\"events\")\n    if not isinstance(events, list):\n        return None\n\n    for event in events:\n        if event.get(\"eventType\") == \"EVENT_TYPE_WORKFLOW_EXECUTION_STARTED\":\n            attributes = event.get(\"workflowExecutionStartedEventAttributes\")\n            if attributes and attributes.get(\"workflowId\"):\n                return attributes[\"workflowId\"]\n    return None\n\n\nasync def main():\n    logging.basicConfig(level=logging.INFO, format=\"%(asctime)s - %(levelname)s - %(message)s\")\n    logging.info(\"Starting workflow replay\")\n\n    parser = argparse.ArgumentParser(description=\"Replay a workflow from a history file.\")\n    parser.add_argument(\n        \"--history-file\",\n        help=\"Path to the workflow history JSON file.\",\n    )\n    args = parser.parse_args()\n\n    history_file_path = args.history_file or \"/home/user/Downloads/01986512-a694-7802-9ec5-7bfd91daac2f_events.json\"\n    if not history_file_path:\n        logging.info(\"History file not provided via CLI, asking for user input.\")\n        history_file_path = input(\"Enter the path to the history file: \")\n\n    logging.info(f\"Loading history from: {history_file_path}\")\n\n    replayer = Replayer(\n        workflows=[TestWorkflow],\n        data_converter=pydantic_data_converter,\n        debug_mode=True,\n        workflow_runner=UnsandboxedWorkflowRunner(),\n    )\n    with open(history_file_path) as f:\n        history = json.load(f)\n\n    logging.info(\"History loaded.\")\n\n    workflow_id = get_workflow_id_from_history(history)\n    if not workflow_id:\n        logging.warning(\"Could not find workflow ID in history. Please enter it manually.\")\n        workflow_id = input(\"Could not find workflow ID in history. Please enter it manually: \")\n\n    logging.info(f\"Replaying workflow with ID: {workflow_id}\")\n\n    await replayer.replay_workflow(\n        history=WorkflowHistory.from_json(\n            workflow_id,\n            history,\n        ),\n    )\n\n    logging.info(\"Workflow replay finished.\")\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n```\n\n\n### Environment/Versions\n\n<!-- Please complete the following information where relevant. -->\n\n- OS and processor: x86 Linux\n- Python SDK version: 1.14.1\n- Are you using Docker or Kubernetes or building Temporal from source?: NO\n\n### Additional context\n\nIt works in this specific runner though:\n```        workflow_runner=SandboxedWorkflowRunner(restrictions=SandboxRestrictions.default.with_passthrough_all_modules()),\n```","closedAt":"2025-08-04T15:58:21Z","comments":[{"id":"IC_kwDOGusT1c671jt-","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"I assume this was solved without needing anything from the SDK? If so, all good.","createdAt":"2025-08-04T16:06:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/1018#issuecomment-3151379326","viewerDidAuthor":false}],"createdAt":"2025-08-04T15:56:54Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1018,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Replayer not working when workflow_runner is set to UnsandboxedWorkflowRunner().","updatedAt":"2025-08-04T16:06:14Z","url":"https://github.com/temporalio/sdk-python/issues/1018"}
