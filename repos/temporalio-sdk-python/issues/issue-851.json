{"assignees":[],"author":{"id":"MDQ6VXNlcjM4ODI4NQ==","is_bot":false,"login":"yunmanger1","name":"German Ilin"},"body":"### What are you really trying to do?\n\nI want to leverage `userMetadata.summary` and show it in UI, and test the functionality.\n\n### Describe the bug\n\nMy tests fail when running tests with test server in time-skipping mode.\nI am passing `summary` attribute when executing workflow and activities. Then I query workflow history I can see `userMetadata.summary` populated on the `HistoryEvent` when running in dev mode, but it is missing in time-skipping mode. \n\n### Minimal Reproduction\n\n```\n@workflow.defn\nclass WorkflowSample:\n\n    @workflow.run\n    async def run(self, name: str) -> list[str]:\n        result = await workflow.execute_activity(ActivitySample.greeting, name, summary=f\"Calculating greeting for {name}\")\n        return [result]\n```\n\n```\n    async def get_payload_value(self, *args: Payload | None) -> str | None:\n        decoded_summary = await self.data_converter.decode(non_empty_payloads(*args))\n        if len(decoded_summary) == 0:\n            return None\n        return decoded_summary[0]\n\n    async def get_summary(self, history_event: HistoryEvent) -> str | None:\n        logger.debug(\"Getting summary for event %s\", MessageToJson(history_event))\n        return await self.get_payload_value(\n            history_event.user_metadata.summary)\n    \n    async def run(self):\n        async for event in workflow_handle.fetch_history_events(wait_new_event=wait_new_event):\n            summary = await self.get_summary(event)\n            print(summary)\n```\n\n### Environment/Versions\n\n- OS and processor: M1 Mac\n- Temporal Version:  1.10.0\n\n","closedAt":null,"comments":[{"id":"IC_kwDOGusT1c6o_X6W","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"Hrmm, this was added in https://github.com/temporalio/sdk-java/pull/2441. We will test and confirm. In the meantime, can you clear out any `temporal-` prefixed files in `$TMPDIR` and try again and confirm this is still failing?\n\n(transferring to SDK)","createdAt":"2025-04-28T13:05:26Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-python/issues/851#issuecomment-2835185302","viewerDidAuthor":false}],"createdAt":"2025-04-25T22:44:24Z","labels":[{"id":"LA_kwDOGusT1c7gQgHK","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":851,"reactionGroups":[],"state":"OPEN","title":"[Bug] Test server in time-skipping mode does return userMetadata.summary","updatedAt":"2025-04-28T13:07:19Z","url":"https://github.com/temporalio/sdk-python/issues/851"}
