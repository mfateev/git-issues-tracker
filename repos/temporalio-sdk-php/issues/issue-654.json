{"assignees":[],"author":{"id":"MDQ6VXNlcjEzNTA0ODk3","is_bot":false,"login":"Norbytus","name":"Alexsander"},"body":"### What are you really trying to do?\n\nTrying upsert search attribute inside workflow\n\n### Describe the bug\n\nCreate workflow with and call Workflow::upsertTypedSearchAttributes inside workflow\n\n### Minimal Reproduction\nFor example i take test from https://github.com/wolfy-j/temporal-simple-test-example\n```php\n<?php\n\ndeclare(strict_types=1);\n\nnamespace App\\Workflow;\n\nuse App\\Activity\\GreetingActivityInterface;\nuse App\\Activity\\VoidActivityInterface;\nuse Carbon\\CarbonInterval;\nuse Temporal\\Activity\\ActivityOptions;\nuse Temporal\\Common\\SearchAttributes\\SearchAttributeKey;\nuse Temporal\\Workflow;\n\nclass GreetingWorkflow implements GreetingWorkflowInterface\n{\n    private $greetingActivity;\n\n    public function __construct()\n    {\n        /**\n         * Activity stub implements activity interface and proxies calls to it to Temporal activity\n         * invocations. Because activities are reentrant, only a single stub can be used for multiple\n         * activity invocations.\n         */\n        $this->greetingActivity = Workflow::newActivityStub(\n            GreetingActivityInterface::class,\n            ActivityOptions::new()\n                ->withStartToCloseTimeout(CarbonInterval::seconds(2))\n                ->withTaskQueue('tests'),\n        );\n\n        $this->voidActivity = Workflow::newActivityStub(\n            VoidActivityInterface::class,\n            ActivityOptions::new()\n                ->withStartToCloseTimeout(CarbonInterval::seconds(2))\n                ->withTaskQueue('tests'),\n        );\n    }\n\n    public function greet(string $name): \\Generator\n    {\n        Workflow::upsertTypedSearchAttributes(\n            SearchAttributeKey::forKeyword('CustomKeyword')->valueSet('CustomValue'),\n        );\n\n        return yield $this->greetingActivity->composeGreeting('Hello', $name);\n    }\n}\n```\nAnd run phpunit and test will failed with timeout","closedAt":null,"comments":[{"id":"IC_kwDOEY5HBM7GM4ok","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"I'm not sure that search attributes are supported by the test server at all","createdAt":"2025-09-23T19:24:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/654#issuecomment-3325266468","viewerDidAuthor":false}],"createdAt":"2025-09-18T11:51:41Z","labels":[{"id":"LA_kwDOEY5HBM8AAAABMGprrQ","name":"Tests","description":"Update tests or testing tools","color":"0E8A16"}],"milestone":null,"number":654,"reactionGroups":[],"state":"OPEN","title":"[Bug] upsertTypedSearchAttributes in test server","updatedAt":"2025-09-23T19:24:58Z","url":"https://github.com/temporalio/sdk-php/issues/654"}
