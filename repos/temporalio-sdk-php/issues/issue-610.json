{"assignees":[{"id":"MDQ6VXNlcjQxNTI0ODE=","login":"roxblnfk","name":"Aleksei Gagarin","databaseId":0}],"author":{"id":"MDQ6VXNlcjE0MjIxNTMy","is_bot":false,"login":"rmikalkenas","name":"Rokas MikalkÄ—nas"},"body":"### Describe the bug\n\nAfter upgrade of sdk to 2.14.0 noticed that some workflows which have constructors with promoted properties started to fail.\nSeems that it only fails if workflow method has arguments. Somehow these arguments are pushed to workflow constructor ðŸ˜• \n\nSdk version 2.13.4 works fine, without issues.\n\n![Image](https://github.com/user-attachments/assets/d7d33036-142e-4715-8904-6812a510af39)\n\n### Minimal Reproduction\n\nWorkflow:\n\n```php\n#[WorkflowInterface]\nclass AsyncGreetingWorkflow\n{\n    private GreetingActivity|Proxy $greetingActivity;\n\n    /**\n     * @param string[] $names\n     */\n    public function __construct(\n        private bool $executing = false,\n        private array $names = [],\n    ) {\n        $this->greetingActivity = Workflow::newActivityStub(\n            GreetingActivity::class,\n        );\n    }\n\n    #[WorkflowMethod(name: 'AsyncGreeting.greet')]\n    public function greet(array $names = []): \\Generator\n    {\n        yield Workflow::awaitWithTimeout(\n            CarbonInterval::minutes(1),\n            function (): bool {\n                return $this->names !== [];\n            },\n        );\n\n        yield Workflow::timer(2);\n\n        $this->executing = true;\n\n        $data = [];\n\n        foreach ($this->names as $name) {\n            [$hello, $bye] = yield from $this->doGreet($name);\n\n            $data[] = $hello . \"\\n\" . $bye;\n        }\n\n        try {\n            return \\implode(\\PHP_EOL, $data);\n        } finally {\n            $this->executing = false;\n        }\n    }\n\n    #[SignalMethod]\n    public function add(string $name): void\n    {\n        $this->names[] = $name;\n    }\n\n    private function doGreet(string $name): \\Generator\n    {\n        $hello = yield $this->greetingActivity->composeGreeting('Hello', $name);\n        $bye = yield $this->greetingActivity->composeGreeting('Bye', $name);\n\n        return [$hello, $bye];\n    }\n}\n```\n\nTrigger:\n\n```php\n$workflow = $this->workflowManager->newWorkflowStub(\n    AsyncGreetingWorkflow::class,\n);\n$run = $this->workflowManager->start($workflow, args: ['A', 'B']);\n$workflow->add('Antony');\n$workflow->add('John');\n```\n\n### Environment/Versions\n\n- php 8.4.6\n- roadrunner 2024.3.5\n- sdk version: 2.14.0\n- using temporal cloud\n","closedAt":"2025-05-07T11:48:40Z","comments":[{"id":"IC_kwDOEY5HBM6qXf0m","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"Thanks for the report. The fix is now available in 2.14.1","createdAt":"2025-05-07T11:50:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HOORAY","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-php/issues/610#issuecomment-2858286374","viewerDidAuthor":false}],"createdAt":"2025-05-07T11:02:03Z","labels":[{"id":"MDU6TGFiZWwyMzM5NDMzMTc0","name":"Bug","description":"Something isn't working","color":"d73a4a"}],"milestone":{"number":36,"title":"2.14.1","description":"","dueOn":null},"number":610,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"[Bug] Workflows with promoted properties fails on 2.14.0 sdk version","updatedAt":"2025-05-07T11:50:29Z","url":"https://github.com/temporalio/sdk-php/issues/610"}
