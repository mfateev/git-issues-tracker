{"assignees":[{"id":"MDQ6VXNlcjQxNTI0ODE=","login":"roxblnfk","name":"Aleksei Gagarin","databaseId":0}],"author":{"id":"MDQ6VXNlcjIyMjQwMjk=","is_bot":false,"login":"windbridges","name":"alexey.d"},"body":"I'm trying to return a DTO object containing an array of other DTO objects from an activity. Activity returns a DTO:\r\n\r\n```\r\nclass ActivityResult {\r\n   public int $count;\r\n   /** @var ProductInfo[] */\r\n   public array $items;\r\n}\r\n```\r\n\r\n```\r\n// inside workflow:\r\n$result = yield $activity->getResult();\r\n```\r\n\r\nFurther inside the workflow, it turns out that $result->items is not an array of ProductInfo, but an array of arrays. Each ProductInfo has been converted into an array with keys corresponding to the names of the object's properties.\r\n\r\nIs this a bug or expected behavior?\r\n","closedAt":"2024-01-25T12:49:19Z","comments":[{"id":"IC_kwDOEY5HBM5xdJyT","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"Hello @windbridges\r\n\r\nThe SDK uses its own Marshaller which does not yet support type annotations.\r\nTry to use `MarshalArray` attribute:\r\n\r\n```php\r\nclass ActivityResult {\r\n    public int $count;\r\n\r\n    /** @var ProductInfo[] */\r\n    #[MarshalArray(of: ProductInfo::class)]\r\n    public array $items;\r\n}\r\n```\r\n","createdAt":"2024-01-22T08:18:35Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-php/issues/393#issuecomment-1903467667","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM5x2l1t","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"I believe your issue has been resolved. For this reason, I am closing the Issue.","createdAt":"2024-01-25T12:49:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/393#issuecomment-1910136173","viewerDidAuthor":false}],"createdAt":"2024-01-22T02:35:37Z","labels":[{"id":"MDU6TGFiZWwyMzM5NDMzMTkx","name":"Question","description":"Further information is requested","color":"0173a0"}],"milestone":null,"number":393,"reactionGroups":[],"state":"CLOSED","title":"Changing data type during deserialization","updatedAt":"2024-01-25T12:49:20Z","url":"https://github.com/temporalio/sdk-php/issues/393"}
