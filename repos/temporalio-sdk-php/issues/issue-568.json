{"assignees":[],"author":{"id":"MDQ6VXNlcjI3NzUwODk=","is_bot":false,"login":"ArFeRR","name":""},"body":"We're receiving the activity startToClose timeout for our activity, written on PHP with the retry policy below:\n\n```\nTimeout 3m\nRetry Policy Initial Interval 1s\nRetry Policy Backoff Coefficient 3\nRetry Policy Maximum Interval 10s\nRetry Policy Maximum Attempts 30\n\n```\n\nThe task, which timeouts, does nothing but going to database for selecting some data by indexed field and it actually does it, but after executing the activity code it hangs for no reason until 3 minutes timeout appears. Then retry policy comes to an action and retry task starts execution, it ends with timeout too and so on, and so on. Once it all the task attempts end with timeout is throws an activity exception permanently.\n\nCould you please look through the JSON log from temporal workflow admin for such activity and advice what to do with it?\n(We've already checked the deadline exceeded debugging cookbook https://docs.temporal.io/troubleshooting/deadline-exceeded-error ,but everything is alright from our side)\n\n[TaskFailed.json](https://github.com/user-attachments/files/18772215/TaskFailed.json)\n[WorkflowFailed.json](https://github.com/user-attachments/files/18772214/WorkflowFailed.json)\n","closedAt":null,"comments":[{"id":"IC_kwDOEY5HBM6eObq2","author":{"login":"wolfy-j"},"authorAssociation":"COLLABORATOR","body":"1) Check activity status in Temporal UI, was it started?\n2) Check logs on worker that runs it, is there a chance that worker is dead?\n3) Are you using Temporal cloud or local?\n4) Are you using latest versions of RR and SDK?\n\nit feels like your activity worker is crashing, can you try to use mock activity or something that def works first?","createdAt":"2025-02-12T18:54:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-php/issues/568#issuecomment-2654583478","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM6eVom5","author":{"login":"ArFeRR"},"authorAssociation":"NONE","body":"1. Yes, the activity task was started. The json file 'TaskFailed.json', i've provided above, is the log of failed activity, actually. Additionally check the screenshot of the most recent events of the failed workflow.\n2. I'm not sure how to check worker logs from temporal UI (google says it's not possible), but regarding our Grafana, the worker is not dead. It processes the Activity code and then hangs until timeout. After this it starts to process another activity task.\n3. I'm using temporal local.\n4. Temporal php sdk is v2.12.3, roadrunner is latest.\n\nI do not see the worker is crashing, it hangs according to the application logs. No errors or something.\n\n![Image](https://github.com/user-attachments/assets/06e6482e-dde2-4eba-962c-93384d121023)","createdAt":"2025-02-13T12:36:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/568#issuecomment-2656471481","viewerDidAuthor":false}],"createdAt":"2025-02-12T18:07:49Z","labels":[{"id":"MDU6TGFiZWwyMzM5NDMzMTkx","name":"Question","description":"Further information is requested","color":"0173a0"}],"milestone":null,"number":568,"reactionGroups":[],"state":"OPEN","title":"[Question] How to debug the activity task startToClose timeout error?","updatedAt":"2025-02-13T12:36:15Z","url":"https://github.com/temporalio/sdk-php/issues/568"}
