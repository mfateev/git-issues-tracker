{"assignees":[],"author":{"id":"MDQ6VXNlcjUxNDkzMg==","is_bot":false,"login":"antmendoza","name":"Antonio Mendoza PÃ©rez"},"body":"### What are you really trying to do?\r\n\r\n<!-- \r\nTell us at a high level what you're doing, to avoid XY problem (https://en.wikipedia.org/wiki/XY_problem) \r\n-->\r\n\r\n### Describe the bug\r\nIn presence of the attached error, the user shows a spike in CPU utilization\r\n\r\nopening an issue as @wolfy-j requested \r\n\r\n[worker-logs.txt](https://github.com/temporalio/sdk-php/files/11487743/worker-logs.txt)\r\n\r\nAdding metrics on CPU and memory utilization for the worker \r\n<img width=\"417\" alt=\"Screenshot 2023-05-22 at 17 06 44\" src=\"https://github.com/temporalio/sdk-php/assets/514932/e8f052ae-7cbd-44e7-84a7-fad937fd7e43\">\r\n<img width=\"224\" alt=\"Screenshot 2023-05-22 at 17 05 20\" src=\"https://github.com/temporalio/sdk-php/assets/514932/f56f4628-4c8c-4e52-a181-9be72fb0ed9f\">\r\n\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n<!-- If applicable, add screenshots or code blocks to help explain your problem. You can also use [Loom](http://loom.com/) to do short, free video bug reports. -->\r\n\r\n### Minimal Reproduction\r\n\r\n<!-- \r\nModify our hello world templates to demonstrate:\r\n\r\n- TypeScript: https://github.com/temporalio/samples-typescript/tree/main/hello-world\r\n- Go: https://github.com/temporalio/money-transfer-project-template-go\r\n- Java: https://github.com/temporalio/money-transfer-project-template-java\r\n- PHP: https://github.com/temporalio/samples-php#samples\r\n-->\r\n\r\n### Environment/Versions\r\n\r\n<!-- Please complete the following information where relevant. -->\r\n\r\n- OS and processor: [e.g. M1 Mac, x86 Windows, Linux]\r\n- Temporal Version: [e.g. 1.14.0?] and/or SDK version\r\n- Are you using Docker or Kubernetes or building Temporal from source?\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n","closedAt":"2023-09-01T11:16:54Z","comments":[{"id":"IC_kwDOEY5HBM5cY_YH","author":{"login":"rustatian"},"authorAssociation":"COLLABORATOR","body":"Hey @antmendoza ðŸ‘‹ðŸ» \r\nAs far as I can see from the logs, you're using the rather outdated version of the rr-temporal plugin. Could you please show me your RR version?","createdAt":"2023-05-16T17:07:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/304#issuecomment-1550054919","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM5c8b7h","author":{"login":"manishrocksag"},"authorAssociation":"NONE","body":"Hello\r\nPreviously we were using roadrunner version 2.12.1 and we upgraded to roadrunner version 2023.1.1 on Tue May 9 12:53:35 2023 (CEST).  We saw this spike on 2023-05-09T11:17:32 or 2023-05-09T13:17:32 (CEST) We are using temporal/sdk version of 2.5.0. Is this due to upgrade?\r\n\r\nAfter the upgrade, we have not received this error again. ","createdAt":"2023-05-23T13:24:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/304#issuecomment-1559346913","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM5c95b-","author":{"login":"rustatian"},"authorAssociation":"COLLABORATOR","body":"We have updated some internal error handling mechanisms (on the temporal workers panics). These spikes are most likely due to worker restarts (it would be better if you send us a log).","createdAt":"2023-05-23T15:59:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/304#issuecomment-1559729918","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM5g3xRG","author":{"login":"antmendoza"},"authorAssociation":"MEMBER","body":"> After the upgrade, we have not received this error again.\r\n\r\n@manishrocksag do you think we can close this issue? ","createdAt":"2023-07-07T10:52:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/304#issuecomment-1625232454","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM5le2zB","author":{"login":"rustatian"},"authorAssociation":"COLLABORATOR","body":"@manishrocksag Closing the issue, feel free to reopen it if the issue is still exists.","createdAt":"2023-09-01T11:16:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/304#issuecomment-1702587585","viewerDidAuthor":false}],"createdAt":"2023-05-16T12:25:17Z","labels":[],"milestone":null,"number":304,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Seeing a spike in CPU utilization in presence of the following error","updatedAt":"2023-09-01T11:16:54Z","url":"https://github.com/temporalio/sdk-php/issues/304"}
