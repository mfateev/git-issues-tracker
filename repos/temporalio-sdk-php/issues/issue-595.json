{"assignees":[],"author":{"id":"MDQ6VXNlcjEzMzE1NTk=","is_bot":false,"login":"KorDum","name":"KorDum"},"body":"### What are you really trying to do?\n\nThere is no correct way to use generic for your marshall-types.\n\n### Describe the bug\n\n`RuleFactoryInterface` is not a generic interface and does not give you the ability to specify your own type:\n\n```php\n/**\n * @extends TypeInterface<mixed>\n */\ninterface RuleFactoryInterface extends TypeInterface {}\n```\n\nTherefore, when using this interface together with an abstract Type (like `UuidType`) we get this error from phpstan\n\n>   Class Temporal\\Internal\\Marshaller\\Type\\Type specifies template type TMarshalType of interface Temporal\\Internal\\Marshaller\\Type\\TypeInterface as int<0, max> but it's already specified as mixed.  \n> ðŸªª  generics.interfaceConflict\n\n### Minimal Reproduction\n\n```php\n/**\n * @extends Type<non-negative-int>\n */\nfinal class SomeType extends Type implements DetectableTypeInterface, RuleFactoryInterface\n{\n    #[Override]\n    public function parse(mixed $value, mixed $current): Some\n    {\n        return Some::fromInt($value);\n    }\n\n    #[Override]\n    public function serialize(mixed $value): int\n    {\n        return $value->toInt();\n    }\n\n    #[Override]\n    public static function match(ReflectionNamedType $type): bool\n    {\n        return !$type->isBuiltin() && $type->getName() === Some::class;\n    }\n\n    #[Override]\n    public static function makeRule(ReflectionProperty $property): ?MarshallingRule\n    {\n        $type = $property->getType();\n\n        if (!$type instanceof ReflectionNamedType || !self::match($type)) {\n            return null;\n        }\n\n        if ($type->allowsNull()) {\n            return new MarshallingRule(\n                name: $property->getName(),\n                type: NullableType::class,\n                of: new MarshallingRule(\n                    type: self::class,\n                    of: $type->getName(),\n                ),\n            );\n        }\n\n        return new MarshallingRule(\n            name: $property->getName(),\n            type: self::class,\n            of: $type->getName(),\n        );\n    }\n}\n```\n\n### Environment/Versions\n\n- Temporal SDK Version: 2.13.4\n","closedAt":null,"comments":[],"createdAt":"2025-04-14T06:26:31Z","labels":[{"id":"MDU6TGFiZWwyMzM5NDMzMTc0","name":"Bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":595,"reactionGroups":[],"state":"OPEN","title":"[Bug] Incorrect generic extends of RuleFactoryInterface","updatedAt":"2025-04-14T06:26:31Z","url":"https://github.com/temporalio/sdk-php/issues/595"}
