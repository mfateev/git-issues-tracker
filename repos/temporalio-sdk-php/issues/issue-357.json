{"assignees":[],"author":{"id":"MDQ6VXNlcjQxNTI0ODE=","is_bot":false,"login":"roxblnfk","name":"Aleksei Gagarin"},"body":"In order to ensure asynchronous operation of user workflows, coroutines are implemented in the SDK, which use promises. It is a standard situation when we reject them with internal exceptions, which in some branches may not be handled.\nHowever, in the paradigm of react/promise v3, this is considered undesirable practice. Therefore, when a rejected promise is completed, in which there is no exception handler, the [`error_log()`](https://www.php.net/manual/function.error-log) function is called with the error text.\n\nThe side effects of such behavior are unpredictable, and it is currently impossible to disable it. \n\nThe issue about unhandled exceptions may be fixed once react/promise has the ability to [set a permanent handler](https://github.com/reactphp/promise/pull/249#discussion_r1345436865), not a one-time one.\n\n---\n\nThanks to the tests in roadrunner-temporal, other deviations from the normal operation of the SDK were detected. These tests have been partially transferred to the SDK (see #359).\n\nTherefore, I suggest temporarily abandoning react/promise v3 since version 2.6.1 until a solution is found.","closedAt":"2025-09-12T12:25:06Z","comments":[{"id":"IC_kwDOEY5HBM6sNAbk","author":{"login":"ruudk"},"authorAssociation":"NONE","body":"Is there an update on this? I noticed that I had to downgrade react/promise on my project in order to install this SDK. And now I see all kind of `Implicitly marking parameter $x as nullable is deprecated` errors on PHP 8.4 that are fixed in v3 with https://github.com/reactphp/promise/pull/260. ","createdAt":"2025-05-18T16:41:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/357#issuecomment-2889090788","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM6sNiNz","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"React v3 still has several problems that prevent us from using it.","createdAt":"2025-05-18T21:47:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/357#issuecomment-2889229171","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM6sPhv_","author":{"login":"ruudk"},"authorAssociation":"NONE","body":"I read the issue https://github.com/temporalio/sdk-php/pull/359 but saw some follow up PR's, one that introduced a global rejection handler: https://github.com/reactphp/promise?tab=readme-ov-file#set_rejection_handler\n\nIsn't this what was missing? ","createdAt":"2025-05-19T06:18:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/357#issuecomment-2889751551","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM6sQgB9","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"It's still [one-time](https://github.com/reactphp/promise/blob/5f80055cc21ba7bcd3989e4902061fc12e2bcc1d/src/Internal/RejectedPromise.php#L38) handler","createdAt":"2025-05-19T07:57:44Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/357#issuecomment-2890006653","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM6sSrQm","author":{"login":"ruudk"},"authorAssociation":"NONE","body":"Should there be a new issue to track this? I'm a bit surprised that the Temporal SDK has deprecations on PHP 8.4, which was released 6 months ago. ","createdAt":"2025-05-19T10:56:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/357#issuecomment-2890576934","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM6sT9rj","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"Regarding deprecations in the SDK, definitely create an issue üëç . However, deprecations in dependencies should be tracked by the dependencies themselves.","createdAt":"2025-05-19T12:56:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/357#issuecomment-2890914531","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM6sUNmd","author":{"login":"ruudk"},"authorAssociation":"NONE","body":"Sure, but in this case, this SDK prevents installation of the latest major, so I think it would have been good if this project created that issue upstream. How else is it going to be fixed?","createdAt":"2025-05-19T13:09:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/temporalio/sdk-php/issues/357#issuecomment-2890979741","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM6sUr5B","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"Yes, it would be great to push the development of React/Promise. However, we still won't achieve the set goals, including those related to the [`@yield` annotation](https://github.com/orgs/reactphp/discussions/536).\n\nTherefore, the most promising direction is to create a fork and maintain our own version of promises compatible with React. However, this is not a priority right now.","createdAt":"2025-05-19T13:47:52Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"CONFUSED","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-php/issues/357#issuecomment-2891103809","viewerDidAuthor":false}],"createdAt":"2023-10-03T20:56:37Z","labels":[{"id":"MDU6TGFiZWwyMzM5NDMzMTc0","name":"Bug","description":"Something isn't working","color":"d73a4a"}],"milestone":{"number":37,"title":"2.16.0","description":"","dueOn":null},"number":357,"reactionGroups":[],"state":"CLOSED","title":"react/promise v3 doesn't work fine","updatedAt":"2025-09-12T12:25:06Z","url":"https://github.com/temporalio/sdk-php/issues/357"}
