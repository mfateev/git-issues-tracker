{"assignees":[{"id":"MDQ6VXNlcjQxNTI0ODE=","login":"roxblnfk","name":"Aleksei Gagarin","databaseId":0}],"author":{"id":"MDQ6VXNlcjk0MDQ5NjI=","is_bot":false,"login":"cv65kr","name":"Kajetan"},"body":"### What are you really trying to do?\n\nUse versioning of workflows\n\n### Describe the bug\n\nUsing\n```\n$version = Workflow::getVersion('test', -1, 1);\n```\n\nend up with\n```\n[TMPRL1100] No cached result found for side effectID=1. KnownSideEffects=[]\n```\n\n### Minimal Reproduction\n\nhttps://github.com/cv65kr/samples-php/tree/test-version\nphp ./app/app.php replay-activity-retry\n\n### Environment/Versions\n\nrr version 2025.1.1 (build time: 2025-05-01T14:16:50+0000, go1.24.2), OS: darwin, arch: arm64\ntemporal/sdk  2.14.1 \n\n### Additional context\n\n--\n","closedAt":"2025-06-05T13:45:59Z","comments":[{"id":"IC_kwDOEY5HBM6q_W9l","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"```php\n    public function greet(string $name): \\Generator\n    {\n        $version = Workflow::getVersion('test', -1, 1);\n        if ((int) $version === -1) {\n            return yield $this->greetingActivity->composeGreeting('Hello', $name);\n        } else {\n            yield Workflow::sideEffect(fn() => 'test');\n            return '1';\n        }\n    }\n```\n\n`Workflow::getVersion()` returns a promise\nYou should use `yield` with it.","createdAt":"2025-05-10T10:46:06Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/613#issuecomment-2868735845","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM6sMoIM","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"Can we close the issue?","createdAt":"2025-05-18T13:29:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/613#issuecomment-2888991244","viewerDidAuthor":false}],"createdAt":"2025-05-09T20:42:46Z","labels":[{"id":"MDU6TGFiZWwyMzM5NDMzMTkx","name":"Question","description":"Further information is requested","color":"0173a0"}],"milestone":null,"number":613,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Using `getVersion` break determinism","updatedAt":"2025-06-05T13:45:59Z","url":"https://github.com/temporalio/sdk-php/issues/613"}
