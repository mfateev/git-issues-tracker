{"assignees":[],"author":{"id":"MDQ6VXNlcjQxNTI0ODE=","is_bot":false,"login":"roxblnfk","name":"Aleksei Gagarin"},"body":"### Describe the bug\n\nSee https://github.com/temporalio/features/issues/580\n\n<details>\n\n```\nRunning check Harness\\Feature\\Schedule\\Basic\\FeatureChecker::check FAILED\nTemporal\\Exception\\MarshallerException {#1282\n  #message: \"Unable to unmarshal field `info` of class Temporal\\Client\\Schedule\\Info\\ScheduleListEntry\"\n  #code: 0\n  #file: \"./vendor/temporal/sdk/src/Internal/Marshaller/Marshaller.php\"\n  #line: 90\n  -previous: Temporal\\Exception\\MarshallerException {#1111\n    #message: \"Unable to unmarshal field `spec` of class Temporal\\Client\\Schedule\\Info\\ScheduleListInfo\"\n    #code: 0\n    #file: \"./vendor/temporal/sdk/src/Internal/Marshaller/Marshaller.php\"\n    #line: 90\n    -previous: Temporal\\Exception\\MarshallerException {#1154\n      #message: \"Unable to unmarshal field `jitter` of class Temporal\\Client\\Schedule\\Spec\\ScheduleSpec\"\n      #code: 0\n      #file: \"./vendor/temporal/sdk/src/Internal/Marshaller/Marshaller.php\"\n      #line: 90\n      -previous: InvalidArgumentException {#1283\n        #message: \"Unrecognized date time interval format\"\n        #code: 0\n        #file: \"./vendor/temporal/sdk/src/Internal/Support/DateInterval.php\"\n        #line: 109\n        trace: {\n          ./vendor/temporal/sdk/src/Internal/Support/DateInterval.php:109 { …}\n          ./vendor/temporal/sdk/src/Internal/Marshaller/Type/DateIntervalType.php:78 { …}\n          ./vendor/temporal/sdk/src/Internal/Marshaller/Mapper/AttributeMapper.php:156 { …}\n          Temporal\\Client\\Schedule\\Spec\\ScheduleSpec->Temporal\\Internal\\Marshaller\\Mapper\\{closure}() {}\n          ./vendor/temporal/sdk/src/Internal/Marshaller/Marshaller.php:88 { …}\n          ./vendor/temporal/sdk/src/Internal/Marshaller/Type/ObjectType.php:79 { …}\n          ./vendor/temporal/sdk/src/Internal/Marshaller/Mapper/AttributeMapper.php:156 { …}\n          Temporal\\Client\\Schedule\\Info\\ScheduleListInfo->Temporal\\Internal\\Marshaller\\Mapper\\{closure}() {}\n          ./vendor/temporal/sdk/src/Internal/Marshaller/Marshaller.php:88 { …}\n          ./vendor/temporal/sdk/src/Internal/Marshaller/Type/ObjectType.php:79 { …}\n          ./vendor/temporal/sdk/src/Internal/Marshaller/Mapper/AttributeMapper.php:156 { …}\n          Temporal\\Client\\Schedule\\Info\\ScheduleListEntry->Temporal\\Internal\\Marshaller\\Mapper\\{closure}() {}\n          ./vendor/temporal/sdk/src/Internal/Marshaller/Marshaller.php:88 { …}\n          ./vendor/temporal/sdk/src/Client/ScheduleClient.php:[166](https://github.com/temporalio/features/actions/runs/12834770491/job/35792794659?pr=577#step:10:167) { …}\n          Temporal\\Client\\ScheduleClient->Temporal\\Client\\{closure}() {}\n          ./vendor/temporal/sdk/src/Client/Common/Paginator.php:35 { …}\n          ./vendor/temporal/sdk/src/Client/Common/Paginator.php:50 { …}\n          ./vendor/temporal/sdk/src/Client/ScheduleClient.php:173 { …}\n          /app/features/schedule/basic/feature.php:81 {\n            Harness\\Feature\\Schedule\\Basic\\FeatureChecker::check(ScheduleClientInterface $client, WorkflowClientInterface $wfClient, Feature $feature, State $runtime): void\n            › find:\n            › foreach ($client->listSchedules() as $schedule) {\n            ›     if ($schedule->scheduleId === $scheduleId) {\n          }\n          Harness\\Feature\\Schedule\\Basic\\FeatureChecker::check() {}\n          ./vendor/spiral/core/src/Internal/Invoker.php:59 { …}\n          ./vendor/spiral/core/src/Container.php:292 { …}\n          /app/harness/php/runner.php:108 { …}\n          {closure}() {}\n          ./vendor/spiral/core/src/Internal/Invoker.php:77 { …}\n          ./vendor/spiral/core/src/Container.php:292 { …}\n          ./vendor/spiral/core/src/Container.php:404 { …}\n          ./vendor/spiral/core/src/ContainerScope.php:46 { …}\n          ./vendor/spiral/core/src/Container.php:399 { …}\n          ./vendor/spiral/core/src/Container.php:181 { …}\n          /app/harness/php/runner.php:99 { …}\n        }\n      }\n      trace: {\n        ./vendor/temporal/sdk/src/Internal/Marshaller/Marshaller.php:90 { …}\n        ./vendor/temporal/sdk/src/Internal/Marshaller/Type/ObjectType.php:79 { …}\n        ./vendor/temporal/sdk/src/Internal/Marshaller/Mapper/AttributeMapper.php:156 { …}\n        Temporal\\Client\\Schedule\\Info\\ScheduleListInfo->Temporal\\Internal\\Marshaller\\Mapper\\{closure}() {}\n        ./vendor/temporal/sdk/src/Internal/Marshaller/Marshaller.php:88 { …}\n        ./vendor/temporal/sdk/src/Internal/Marshaller/Type/ObjectType.php:79 { …}\n        ./vendor/temporal/sdk/src/Internal/Marshaller/Mapper/AttributeMapper.php:156 { …}\n        Temporal\\Client\\Schedule\\Info\\ScheduleListEntry->Temporal\\Internal\\Marshaller\\Mapper\\{closure}() {}\n        ./vendor/temporal/sdk/src/Internal/Marshaller/Marshaller.php:88 { …}\n        ./vendor/temporal/sdk/src/Client/ScheduleClient.php:166 { …}\n        Temporal\\Client\\ScheduleClient->Temporal\\Client\\{closure}() {}\n        ./vendor/temporal/sdk/src/Client/Common/Paginator.php:35 { …}\n        ./vendor/temporal/sdk/src/Client/Common/Paginator.php:50 { …}\n        ./vendor/temporal/sdk/src/Client/ScheduleClient.php:[173](https://github.com/temporalio/features/actions/runs/12834770491/job/35792794659?pr=577#step:10:174) { …}\n        /app/features/schedule/basic/feature.php:81 {\n          Harness\\Feature\\Schedule\\Basic\\FeatureChecker::check(ScheduleClientInterface $client, WorkflowClientInterface $wfClient, Feature $feature, State $runtime): void\n          › find:\n          › foreach ($client->listSchedules() as $schedule) {\n          ›     if ($schedule->scheduleId === $scheduleId) {\n        }\n        Harness\\Feature\\Schedule\\Basic\\FeatureChecker::check() {}\n        ./vendor/spiral/core/src/Internal/Invoker.php:59 { …}\n        ./vendor/spiral/core/src/Container.php:292 { …}\n        /app/harness/php/runner.php:108 { …}\n        {closure}() {}\n        ./vendor/spiral/core/src/Internal/Invoker.php:77 { …}\n        ./vendor/spiral/core/src/Container.php:292 { …}\n        ./vendor/spiral/core/src/Container.php:404 { …}\n        ./vendor/spiral/core/src/ContainerScope.php:46 { …}\n        ./vendor/spiral/core/src/Container.php:399 { …}\n        ./vendor/spiral/core/src/Container.php:[181](https://github.com/temporalio/features/actions/runs/12834770491/job/35792794659?pr=577#step:10:182) { …}\n        /app/harness/php/runner.php:99 { …}\n      }\n    }\n    trace: {\n      ./vendor/temporal/sdk/src/Internal/Marshaller/Marshaller.php:90 { …}\n      ./vendor/temporal/sdk/src/Internal/Marshaller/Type/ObjectType.php:79 { …}\n      ./vendor/temporal/sdk/src/Internal/Marshaller/Mapper/AttributeMapper.php:156 { …}\n      Temporal\\Client\\Schedule\\Info\\ScheduleListEntry->Temporal\\Internal\\Marshaller\\Mapper\\{closure}() {}\n      ./vendor/temporal/sdk/src/Internal/Marshaller/Marshaller.php:88 { …}\n      ./vendor/temporal/sdk/src/Client/ScheduleClient.php:166 { …}\n      Temporal\\Client\\ScheduleClient->Temporal\\Client\\{closure}() {}\n      ./vendor/temporal/sdk/src/Client/Common/Paginator.php:35 { …}\n      ./vendor/temporal/sdk/src/Client/Common/Paginator.php:50 { …}\n      ./vendor/temporal/sdk/src/Client/ScheduleClient.php:173 { …}\n      /app/features/schedule/basic/feature.php:81 {\n        Harness\\Feature\\Schedule\\Basic\\FeatureChecker::check(ScheduleClientInterface $client, WorkflowClientInterface $wfClient, Feature $feature, State $runtime): void\n        › find:\n        › foreach ($client->listSchedules() as $schedule) {\n        ›     if ($schedule->scheduleId === $scheduleId) {\n      }\n      Harness\\Feature\\Schedule\\Basic\\FeatureChecker::check() {}\n      ./vendor/spiral/core/src/Internal/Invoker.php:59 { …}\n      ./vendor/spiral/core/src/Container.php:292 { …}\n      /app/harness/php/runner.php:108 { …}\n      {closure}() {}\n      ./vendor/spiral/core/src/Internal/Invoker.php:77 { …}\n      ./vendor/spiral/core/src/Container.php:292 { …}\n      ./vendor/spiral/core/src/Container.php:404 { …}\n      ./vendor/spiral/core/src/ContainerScope.php:46 { …}\n      ./vendor/spiral/core/src/Container.php:399 { …}\n      ./vendor/spiral/core/src/Container.php:181 { …}\n      /app/harness/php/runner.php:99 { …}\n    }\n  }\n  trace: {\n    ./vendor/temporal/sdk/src/Internal/Marshaller/Marshaller.php:90 { …}\n    ./vendor/temporal/sdk/src/Client/ScheduleClient.php:166 { …}\n    Temporal\\Client\\ScheduleClient->Temporal\\Client\\{closure}() {}\n    ./vendor/temporal/sdk/src/Client/Common/Paginator.php:35 { …}\n    ./vendor/temporal/sdk/src/Client/Common/Paginator.php:50 { …}\n    ./vendor/temporal/sdk/src/Client/ScheduleClient.php:173 { …}\n    /app/features/schedule/basic/feature.php:81 {\n      Harness\\Feature\\Schedule\\Basic\\FeatureChecker::check(ScheduleClientInterface $client, WorkflowClientInterface $wfClient, Feature $feature, State $runtime): void\n      › find:\n      › foreach ($client->listSchedules() as $schedule) {\n      ›     if ($schedule->scheduleId === $scheduleId) {\n    }\n    Harness\\Feature\\Schedule\\Basic\\FeatureChecker::check() {}\n    ./vendor/spiral/core/src/Internal/Invoker.php:59 { …}\n    ./vendor/spiral/core/src/Container.php:292 { …}\n    /app/harness/php/runner.php:108 { …}\n    {closure}() {}\n    ./vendor/spiral/core/src/Internal/Invoker.php:77 { …}\n    ./vendor/spiral/core/src/Container.php:292 { …}\n    ./vendor/spiral/core/src/Container.php:404 { …}\n    ./vendor/spiral/core/src/ContainerScope.php:46 { …}\n    ./vendor/spiral/core/src/Container.php:399 { …}\n    ./vendor/spiral/core/src/Container.php:181 { …}\n    /app/harness/php/runner.php:99 { …}\n  }\n}\n-> /app/features/schedule/basic/feature.php:81\nMarshallerException\nUnable to unmarshal field `info` of class Temporal\\Client\\Schedule\\Info\\ScheduleListEntry\nMarshallerException\nUnable to unmarshal field `spec` of class Temporal\\Client\\Schedule\\Info\\ScheduleListInfo\nMarshallerException\nUnable to unmarshal field `jitter` of class Temporal\\Client\\Schedule\\Spec\\ScheduleSpec\nInvalidArgumentException\nUnrecognized date time interval format\n```\n\n</details>\n\nYet another:\nhttps://github.com/temporalio/features/issues/582\n\n<details>\n\n```\nRunning check Harness\\Feature\\ContinueAsNew\\ContinueAsSame\\FeatureChecker::check FAILED\nTemporal\\Exception\\Client\\TimeoutException {#325\n  #message: \"Deadline Exceeded (code: 4)\"\n  #code: 4\n  #file: \"./vendor/temporal/sdk/src/Client/GRPC/BaseClient.php\"\n  #line: 291\n  -previous: Temporal\\Exception\\Client\\ServiceClientException {#307\n    #message: \"Deadline Exceeded (code: 4)\"\n    #code: 4\n    #file: \"./vendor/temporal/sdk/src/Client/GRPC/BaseClient.php\"\n    #line: [28](https://github.com/temporalio/features/actions/runs/12835436433/job/35794872814?pr=577#step:9:29)4\n    -status: Google\\Rpc\\Status {#314\n      message: \"google.rpc.Status\"\n      values: []\n    }\n    trace: {\n      ./vendor/temporal/sdk/src/Client/GRPC/BaseClient.php:284 { …}\n      ./vendor/temporal/sdk/src/Client/GRPC/BaseClient.php:252 { …}\n      ./vendor/temporal/sdk/src/Client/GRPC/ServiceClient.php:137 { …}\n      ./vendor/temporal/sdk/src/Internal/Client/WorkflowStub.php:576 { …}\n      ./vendor/temporal/sdk/src/Internal/Client/WorkflowStub.php:491 { …}\n      ./vendor/temporal/sdk/src/Internal/Client/WorkflowStub.php:423 { …}\n      ./vendor/temporal/sdk/src/Internal/Interceptor/Pipeline.php:92 { …}\n      ./vendor/temporal/sdk/src/Internal/Client/WorkflowStub.php:432 { …}\n      /app/features/continue_as_new/continue_as_same/feature.php:62 {\n        Harness\\Feature\\ContinueAsNew\\ContinueAsSame\\FeatureChecker::check(WorkflowStubInterface $stub): void\n        › ): void {\n        ›     Assert::same($stub->getResult(), INPUT_DATA);\n        ›     # Workflow ID does not change after continue as new\n      }\n      Harness\\Feature\\ContinueAsNew\\ContinueAsSame\\FeatureChecker::check() {}\n      ./vendor/spiral/core/src/Internal/Invoker.php:59 { …}\n      ./vendor/spiral/core/src/Container.php:[29](https://github.com/temporalio/features/actions/runs/12835436433/job/35794872814?pr=577#step:9:30)2 { …}\n      /app/harness/php/runner.php:108 { …}\n      {closure}() {}\n      ./vendor/spiral/core/src/Internal/Invoker.php:77 { …}\n      ./vendor/spiral/core/src/Container.php:292 { …}\n      ./vendor/spiral/core/src/Container.php:404 { …}\n      ./vendor/spiral/core/src/ContainerScope.php:46 { …}\n      ./vendor/spiral/core/src/Container.php:399 { …}\n      ./vendor/spiral/core/src/Container.php:181 { …}\n      /app/harness/php/runner.php:99 { …}\n    }\n  }\n  trace: {\n    ./vendor/temporal/sdk/src/Client/GRPC/BaseClient.php:291 { …}\n    ./vendor/temporal/sdk/src/Client/GRPC/BaseClient.php:252 { …}\n    ./vendor/temporal/sdk/src/Client/GRPC/ServiceClient.php:137 { …}\n    ./vendor/temporal/sdk/src/Internal/Client/WorkflowStub.php:576 { …}\n    ./vendor/temporal/sdk/src/Internal/Client/WorkflowStub.php:491 { …}\n    ./vendor/temporal/sdk/src/Internal/Client/WorkflowStub.php:423 { …}\n    ./vendor/temporal/sdk/src/Internal/Interceptor/Pipeline.php:92 { …}\n    ./vendor/temporal/sdk/src/Internal/Client/WorkflowStub.php:4[32](https://github.com/temporalio/features/actions/runs/12835436433/job/35794872814?pr=577#step:9:33) { …}\n    /app/features/continue_as_new/continue_as_same/feature.php:62 {\n      Harness\\Feature\\ContinueAsNew\\ContinueAsSame\\FeatureChecker::check(WorkflowStubInterface $stub): void\n      › ): void {\n      ›     Assert::same($stub->getResult(), INPUT_DATA);\n      ›     # Workflow ID does not change after continue as new\n    }\n    Harness\\Feature\\ContinueAsNew\\ContinueAsSame\\FeatureChecker::check() {}\n    ./vendor/spiral/core/src/Internal/Invoker.php:59 { …}\n    ./vendor/spiral/core/src/Container.php:292 { …}\n    /app/harness/php/runner.php:108 { …}\n    {closure}() {}\n    ./vendor/spiral/core/src/Internal/Invoker.php:77 { …}\n    ./vendor/spiral/core/src/Container.php:292 { …}\n    ./vendor/spiral/core/src/Container.php:404 { …}\n    ./vendor/spiral/core/src/ContainerScope.php:46 { …}\n    ./vendor/spiral/core/src/Container.php:[39](https://github.com/temporalio/features/actions/runs/12835436433/job/35794872814?pr=577#step:9:40)9 { …}\n    ./vendor/spiral/core/src/Container.php:181 { …}\n    /app/harness/php/runner.php:99 { …}\n  }\n}\n-> /app/features/continue_as_new/continue_as_same/feature.php:62\nTimeoutException\nDeadline Exceeded (code: 4)\nServiceClientException\nDeadline Exceeded (code: 4)\n```\n\n</details>","closedAt":"2025-02-10T17:01:58Z","comments":[],"createdAt":"2025-01-18T11:46:20Z","labels":[{"id":"MDU6TGFiZWwyMzM5NDMzMTc0","name":"Bug","description":"Something isn't working","color":"d73a4a"}],"milestone":{"number":27,"title":"2.13.0","description":"","dueOn":null},"number":555,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Unrecognized date time interval format on unmarshalling","updatedAt":"2025-02-10T17:35:39Z","url":"https://github.com/temporalio/sdk-php/issues/555"}
