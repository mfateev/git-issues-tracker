{"assignees":[],"author":{"id":"U_kgDOBtsjVQ","is_bot":false,"login":"AleksandrKosovS","name":"Aleksandr Kosov"},"body":"### What are you really trying to do?\r\n\r\nI want to create a schedule in a specific Temporal namespace by specifying the namespace in the ScheduleClient constructor.\r\n\r\n### Describe the bug\r\n\r\nWhen I create a schedule without explicitly passing ScheduleOptions, the schedule is created in the default namespace instead of the namespace provided in ClientOptions during the ScheduleClient initialization.\r\n\r\nThis happens because of this two lines in the source code: [1](https://github.com/temporalio/sdk-php/blob/master/src/Client/ScheduleClient.php#L77), [2](https://github.com/temporalio/sdk-php/blob/master/src/Client/ScheduleClient.php#L84), where the namespace defaults to 'default'. I expect the namespace provided in the `ScheduleClient` constructor to be used as the default, similar to the behavior in [this line](https://github.com/temporalio/sdk-php/blob/master/src/Client/ScheduleClient.php#L139).\r\n\r\n### Minimal Reproduction\r\n\r\n```php\r\nuse Temporal\\Client\\ScheduleClient;\r\nuse Temporal\\Client\\GRPC\\ServiceClient;\r\nuse Temporal\\Client\\ClientOptions;\r\nuse Temporal\\Client\\Schedule;\r\n\r\n$serviceClient = new ServiceClient(new WorkflowServiceClient('localhost:7233', [\r\n     'credentials' => ChannelCredentials::createInsecure(),\r\n]));\r\n\r\n$scheduleClient = new ScheduleClient(\r\n    $serviceClient,\r\n    (new ClientOptions())->withNamespace('my-namespace'),\r\n);\r\n$handle1 = $handle = $client->createSchedule(\r\n    Schedule\\Schedule::new(),\r\n);\r\n// $handle1->namespace contains 'default' \r\n\r\n$client->getHandle($handle1->getID())->trigger(); // throws an exception\r\n$client->getHandle($handle1->getID(), 'default')->trigger(); // works fine\r\n\r\n// just in case, this works as expected\r\n$handle2 = $handle = $client->createSchedule(\r\n    Schedule\\Schedule::new(),\r\n    options: (Schedule\\ScheduleOptions::new())->withNamespace('my-namespace'),\r\n);\r\n// $handle2->namespace contains 'my-namespace'\r\n$client->getHandle($handle2->getID())->trigger(); // works fine\r\n``` \r\n\r\n### Expected Behavior\r\nWhen `ScheduleClient` is initialized with `ClientOptions` specifying a namespace, that namespace should be used as the default for creating schedules.\r\n\r\n### Environment/Versions\r\n\r\n- OS and processor: **M2 Mac**\r\n- Temporal Version: **Temporal 1.26.2, SDK 2.12.0**\r\n- Are you using Docker or Kubernetes or building Temporal from source? **Docker**","closedAt":"2025-01-09T16:49:37Z","comments":[],"createdAt":"2025-01-08T17:48:35Z","labels":[{"id":"MDU6TGFiZWwyMzM5NDMzMTc0","name":"Bug","description":"Something isn't working","color":"d73a4a"}],"milestone":{"number":29,"title":"2.12.2","description":"","dueOn":null},"number":548,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Namespace from ClientOptions in ScheduleClient constructor not respected in createSchedule","updatedAt":"2025-01-09T16:49:38Z","url":"https://github.com/temporalio/sdk-php/issues/548"}
