{"assignees":[],"author":{"id":"MDQ6VXNlcjQ0MjU2NTI=","is_bot":false,"login":"jackprice","name":"Jack Price"},"body":"This is the intended behaviour, but I definitely think this needs calling out in the external docs. I have read the documentation pretty well, and this surprised me.\n\nWhen strings are passed to methods that expect a `DateIntervalValue`, strings are parsed using `CarbonInterval::fromString` (vs `DateInterval::__construct`). This can result in very surprising behaviour, especially because `CarbonInterval::fromString` is very loose with its parsing, and will silently drop some parts rather than erroring.\n\nFor example\n\n```php\nyield Workflow::timer('P2M')\n```\n\nwill result in a timer of 2 minutes, rather than the 2 months as you might expect as in PHP's DateInterval. You can use DateInterval-style strings, and it will work *most of the time*\n\n```php\n/** Identical results: */\n\nyield Workflow::timer('PT2M') // 2 minutes\nyield Workflow::timer(new \\DateInterval('PT2M')) // 2 minutes\n\nyield Workflow::timer('P1Y') // 1 year\nyield Workflow::timer(new \\DateInterval('P1Y')) // 1 year\n\n/** Different results with no errors: */\n\nyield Workflow::timer('P2M') // 2 minutes\nyield Workflow::timer(new \\DateInterval('P2M')) // 2 months\n\nyield Workflow::timer('PT1H5M') // 1 hour\nyield Workflow::timer(new \\DateInterval('PT1H5M')) // 1 hour 5 minutes\n```\n\nIs there any scope to change the type to be more explicit or restrictive? (though this would be a breaking change)","closedAt":"2025-10-31T11:16:49Z","comments":[{"id":"IC_kwDOEY5HBM6hhw_h","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"> his needs calling out in the external docs\n\nMakes sense. \n\n> Is there any scope to change the type to be more explicit or restrictive? (though this would be a breaking change)\n\nThis does indeed look like a breaking change. However, I would consider it more of a bug fix.\nI think we should explore an alternative option: issuing a warning when a string interval can be interpreted in different ways.\n","createdAt":"2025-03-10T09:45:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/579#issuecomment-2709983201","viewerDidAuthor":false}],"createdAt":"2025-03-07T18:41:26Z","labels":[{"id":"MDU6TGFiZWwyMzM5NDMzMTkx","name":"Question","description":"Further information is requested","color":"0173a0"}],"milestone":{"number":39,"title":"2.17.0","description":"","dueOn":null},"number":579,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"[DX] Unexpected behaviour with lax DateInterval string parsing","updatedAt":"2025-10-31T11:16:49Z","url":"https://github.com/temporalio/sdk-php/issues/579"}
