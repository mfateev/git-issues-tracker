{"assignees":[],"author":{"id":"U_kgDOCeuzXQ","is_bot":false,"login":"drewhoskins-temporal","name":"Drew Hoskins"},"body":"We should have a method that's guaranteed to initialize before signals and updates come in so handlers can use initialized values.","closedAt":"2025-02-04T14:26:19Z","comments":[{"id":"IC_kwDOEY5HBM6JuiRY","author":{"login":"josh-berry"},"authorAssociation":"NONE","body":"see the parent feature issue for how other languages have handled it: https://github.com/temporalio/features/issues/400","createdAt":"2024-08-26T17:11:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/480#issuecomment-2310677592","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM6L1Vdx","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"I'm developing the concept of **Workflow Init** in the constructor: the user can call the `Workflow::getInput()` method to obtain input arguments.\r\n\r\n```php\r\n    public function __construct() {\r\n        $input = Workflow::getInput()->getValues();\r\n        // ... init code\r\n    }\r\n```\r\n\r\nHowever, `getInput()` returns a `ValuesInterface`, which does not contain type information.\r\n\r\nManually specifying the type for required arguments like `Workflow::getInput()->getValue(0, DateTimeInterface::class);` is inconvenient.\r\nAdditionally, new objects will be created instead of reusing existing ones.\r\n\r\n**My proposal** is to add a new method `Workflow::getTypedInput()`, which will return the same arguments that will be sent to the **Workflow Handler** after initialization.\r\nThis way, we can provide a convenient **Workflow Init** using language mechanisms. At the same time, we still have the flexibility to add a separate `InitHandler` if needed.","createdAt":"2024-09-12T11:17:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/480#issuecomment-2346014577","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM6NXm5D","author":{"login":"Sushisource"},"authorAssociation":"MEMBER","body":"@roxblnfk That works for me. If it's possible to allow them to specify the args in their constructor, and pass them in there I would say let's do that (possibly in addition to `getTypedInput`), possibly by using an annotation on the constructor like we've done for Python. If that's not feasible I think this approach will work just fine too.","createdAt":"2024-09-24T16:30:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/480#issuecomment-2371776067","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM6OIbT5","author":{"login":"drewhoskins-temporal"},"authorAssociation":"MEMBER","body":"+1 to @Sushisource's comment, if it's doable.  It seems somewhat more discoverable and idiomatic.","createdAt":"2024-10-01T00:57:27Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/480#issuecomment-2384573689","viewerDidAuthor":false}],"createdAt":"2024-08-02T04:06:03Z","labels":[],"milestone":{"number":27,"title":"2.13.0","description":"","dueOn":null},"number":480,"reactionGroups":[],"state":"CLOSED","title":"Workflow-init support","updatedAt":"2025-02-05T19:29:06Z","url":"https://github.com/temporalio/sdk-php/issues/480"}
