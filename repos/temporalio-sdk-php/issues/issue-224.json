{"assignees":[{"id":"MDQ6VXNlcjQxNTI0ODE=","login":"roxblnfk","name":"Aleksei Gagarin","databaseId":0}],"author":{"id":"MDQ6VXNlcjUyMzA0","is_bot":false,"login":"bergundy","name":"Roey Berman"},"body":"SDK should have a lazy and eager way to create a client and expose a healthcheck method\r\n\r\nref: https://github.com/temporalio/sdk-php/issues/223","closedAt":"2024-04-08T19:48:19Z","comments":[{"id":"IC_kwDOEY5HBM5MbjQ7","author":{"login":"wolfy-j"},"authorAssociation":"COLLABORATOR","body":"The SDK healthcheck goes though the already open client on RR side. A.k.a. it should aready work as expected and not create any excessive connections.","createdAt":"2022-10-18T12:15:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/224#issuecomment-1282290747","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM5Ojhl4","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Does PHP client support lazy and eager creation?\r\nDoes it call `getSystemInfo` on connection?\r\nIs the gRPC health service exposed via the client?\r\n\r\nWe have all of that in the other SDKs.","createdAt":"2022-11-17T01:42:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/224#issuecomment-1317935480","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM5O4ocI","author":{"login":"wolfy-j"},"authorAssociation":"COLLABORATOR","body":"Not at the moment. We also don't have `dial()` routine in PHP, it happens inside underlyling C library.\r\n\r\n@roxblnfk We will work on RFC based on https://github.com/temporalio/sdk-features/issues/45","createdAt":"2022-11-22T10:42:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/224#issuecomment-1323468552","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM5uep-b","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"With the release of 2.7.0, interceptor functionality will be introduced. Along with this, the [`SystemInfoInterceptor`](https://github.com/temporalio/sdk-php/blob/master/src/Client/Interceptor/SystemInfoInterceptor.php) is [added](https://github.com/temporalio/sdk-php/pull/320), which calls `getSystemInfo()` and `getCapabilities()` on the first client request.\r\n\r\nThis interceptor is not added by default, but we can do this - add `SystemInfoInterceptor` if the user has not specified their list of interceptors for client calls. If the user wants to disable the interceptor, they can simply pass an empty list.\r\n@wolfy-j @Sushisource what do you think about this?\r\n","createdAt":"2023-12-13T09:11:35Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/224#issuecomment-1853530011","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM5ue6DZ","author":{"login":"roxblnfk"},"authorAssociation":"COLLABORATOR","body":"Regarding gRPC HealthCheck - it's not supported by the PHP gRPC extension.\r\nhttps://grpc.io/docs/guides/health-checking/#language-support","createdAt":"2023-12-13T09:52:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/224#issuecomment-1853595865","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM5uh4VH","author":{"login":"wolfy-j"},"authorAssociation":"COLLABORATOR","body":"@bergundy do we expect HealthCheck mostly in Activity and WF pollers or client code as well? We do have health checks for all the pollers, but PHP does not have a BG check mechanism for clients.","createdAt":"2023-12-13T17:05:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/224#issuecomment-1854375239","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM5uikM0","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"In other languages we have a lazy method to create a connection (client) that doesn't make any calls to the server, and an eager connection method that fails if `getSystemInfo` fails.\r\nWe also expose the gRPC heath service in the client for users that want to call that.\r\n\r\nThat's all I requested in this issue.","createdAt":"2023-12-13T19:09:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/224#issuecomment-1854554932","viewerDidAuthor":false},{"id":"IC_kwDOEY5HBM5uioPO","author":{"login":"wolfy-j"},"authorAssociation":"COLLABORATOR","body":"Eager connect on demand (lazy) - done (in fact in PHP this is the default way how GRPC works)\r\ngetSystemInfo - done with 2.7\r\n\r\nI think we are good there.","createdAt":"2023-12-13T19:22:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-php/issues/224#issuecomment-1854571470","viewerDidAuthor":false}],"createdAt":"2022-08-03T17:05:52Z","labels":[{"id":"MDU6TGFiZWw0MDMxNTY5NTYw","name":"enhancement","description":"","color":"a2eeef"}],"milestone":{"number":11,"title":"2.9.0","description":"","dueOn":null},"number":224,"reactionGroups":[],"state":"CLOSED","title":"Lazy connectivity for Temporal client and healthCheck","updatedAt":"2024-04-08T19:48:20Z","url":"https://github.com/temporalio/sdk-php/issues/224"}
