{"assignees":[{"id":"MDQ6VXNlcjk5NTk3NjE=","login":"seregazhuk","name":"Sergey Zhuk","databaseId":0}],"author":{"id":"MDQ6VXNlcjEyMzc4NjEw","is_bot":false,"login":"xtix","name":"Stanislav Shultchov"},"body":"### What are you really trying to do?\r\n\r\nUse versioning as specified in the documentation https://docs.temporal.io/docs/php/versioning\r\n\r\n### Describe the bug\r\n\r\nMethod call `yield  Workflow::getVersion(...)` don't return integer type.\r\n\r\n### Minimal Reproduction\r\n\r\n```php\r\n#[WorkflowInterface]\r\nclass TestWorkflow\r\n{\r\n    #[WorkflowMethod]\r\n    #[ReturnType(Type::TYPE_STRING)]\r\n    public function start()\r\n    {\r\n        $version = yield Workflow::getVersion(\r\n            'test',\r\n            Workflow::DEFAULT_VERSION,\r\n            Workflow::DEFAULT_VERSION,\r\n        );\r\n\r\n        if ($version === Workflow::DEFAULT_VERSION) {\r\n            return 'OK';\r\n        }\r\n\r\n        return 'ERROR';\r\n    }\r\n}\r\n```\r\nWorkflow will end with `ERROR` result, because `$version` will have `Temporal\\DataConverter\\EncodedValues` type.\r\n\r\n### Environment/Versions\r\n\r\nTemporal Version: 1.13.3, SDK version 1.3.0\r\n\r\n### Additional context\r\n\r\nWorkaround:\r\n```php\r\n$version = yield EncodedValues::decodePromise(\r\n    Workflow::getVersion(\r\n        'test',\r\n        Workflow::DEFAULT_VERSION,\r\n        Workflow::DEFAULT_VERSION,\r\n    ),\r\n);\r\n```\r\n","closedAt":"2022-05-21T16:13:05Z","comments":[],"createdAt":"2022-05-18T18:19:14Z","labels":[{"id":"MDU6TGFiZWwyMzM5NDMzMTc0","name":"Bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":171,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Workflow getVersion method return wrong type","updatedAt":"2022-05-21T16:13:05Z","url":"https://github.com/temporalio/sdk-php/issues/171"}
