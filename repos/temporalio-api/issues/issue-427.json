{"assignees":[],"author":{"id":"MDQ6VXNlcjI1MTAwMA==","is_bot":false,"login":"stevekinney","name":"Steve Kinney"},"body":"The change made in #410 causes a few potential problems for integrating with the UI.\r\n\r\nFirst, some users host UI Server at a subpath and set both the client-side and API routes.\r\n\r\n```go\r\nroute.SetAPIRoutes(e, cfgProvider, serverOpts.APIMiddleware)\r\nroute.SetUIRoutes(e, cfg.PublicPath, assets)\r\n```\r\n\r\nSecondly, _not_ having a sub-path for the API routes means that they will likely conflict with client-side UI routes. The current implementation of the UI passes through all routes with `/api/v1` to UI Server. If both the pages and the API routes have the same path, it will be trickier to correctly implement the passthrough functionality.\r\n\r\nSuggested resolutions:\r\n\r\n- The path for the API routes should be configurable.\r\n- They should default to _something_ (e.g. `/api`) and _not_ be set at the root by default since—selfishly—we'd need this set for CLI, Docker, and Temporal Cloud implementations anyway.","closedAt":null,"comments":[{"id":"IC_kwDODQCAms6DL0Yh","author":{"login":"cretz"},"authorAssociation":"MEMBER","body":"> The path for the API routes should be configurable.\r\n\r\nI have opened https://github.com/temporalio/temporal/issues/6212 (this is not done in this repo, it's part of the server that sets up the API)\r\n\r\n> The change made in https://github.com/temporalio/api/pull/410 causes a few potential problems for integrating with the UI. [...] They should default to something (e.g. /api) and not be set at the root by default since\r\n\r\nWe do have stable roots of `/namespaces`, `/cluster`, and `/system-info` (opened https://github.com/temporalio/api/issues/428 to handle one we missed). We should never add more than those three. We do not serve anything from the literal `/`, we just removed some unnecessary API path parts, not the whole thing.","createdAt":"2024-07-01T19:53:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/api/issues/427#issuecomment-2200913441","viewerDidAuthor":false}],"createdAt":"2024-07-01T15:43:40Z","labels":[{"id":"MDU6TGFiZWwxNjQzNjQ3OTQ1","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":427,"reactionGroups":[],"state":"OPEN","title":"Add configurable subpath for HTTP API","updatedAt":"2024-07-01T19:53:06Z","url":"https://github.com/temporalio/api/issues/427"}
