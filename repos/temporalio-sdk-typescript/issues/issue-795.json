{"assignees":[{"id":"MDQ6VXNlcjY0MTIxNjk=","login":"mjameswh","name":"James Watkins-Harvey","databaseId":0}],"author":{"id":"MDQ6VXNlcjUyMzA0","is_bot":false,"login":"bergundy","name":"Roey Berman"},"body":"Due to bundling of workflow code, it's impossible to set breakpoints on code that runs in workflow context.\r\n\r\nThere used to be a workaround for this before stack trace query was implemented by setting a `debugger` statement at the top of a workflow function but since that change we no longer inline the source-maps making it impossible to locate the source of the bundled code.\r\n\r\n@mjameswh discovered that by setting a file name on the vm script we use to compile the code and having the file and source map available (on disk and possibly HTTP URL) the debugger can map back to the source and breakpoint work again.\r\n\r\nOur proposed solution is to start an HTTP server in the worker when running in debug mode to serve the source map.\r\nWe'd debated whether to use http URLs or save the source map to a temporary directory and decided to go with HTTP since that will enable access when debugging remotely (for example when running a worker in a docker container).\r\nThe security implications of running an HTTP server in debug mode are minimal since a server has to be started regardless for the debugger to connect to the process.\r\nThe port to listen on should be configurable to enable remote access, if it is not provided, the server will listen on a random port.","closedAt":"2022-08-19T22:48:27Z","comments":[],"createdAt":"2022-07-29T23:55:43Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":795,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Breakpoints do not work for workflow code","updatedAt":"2022-08-19T22:48:27Z","url":"https://github.com/temporalio/sdk-typescript/issues/795"}
