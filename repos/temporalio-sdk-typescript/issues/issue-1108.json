{"assignees":[],"author":{"id":"MDQ6VXNlcjk5NzE1","is_bot":false,"login":"silasdavis","name":"Silas Davis"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\nIt would be useful to permit uses of the builtin `buffer` on the import tree for workflows. \r\n\r\nIn my particular case I have parsing logic to convert workflow input types into richer domain types that relies on `buffer`.\r\n\r\n### Describe the solution you'd like\r\n\r\nI note that all `builtinModules` are included in `disallowedModules`, I'm not sure if this is because you would need to shim them in the v8 isolate explicitly or if it is down to non-determinism issues with `Buffer`. `unsafeAlloc` and friends perhaps?\r\n\r\nI would assume otherwise that buffer would be safe to us (I have `BigNumber` implementations depending on it).\r\n\r\nThe solution I would like is for an exemption to be made similar to that which exists for `assert`.\r\n\r\n### Additional context\r\n\r\nIncidentally it would be really handy to emit some additional context when reporting problematic modules. The error message lists the modules but not their source, however `data.context` in the callback here:\r\n\r\nhttps://github.com/temporalio/sdk-typescript/blob/2073c5385f92b0927cf745a1fec2845f19a70b10/packages/worker/src/workflow/bundler.ts#L193\r\n\r\nDoes have access to the module which actually made the call which helps a lot in narrowing down the source of the bad module import.\r\n","closedAt":"2023-07-18T20:04:19Z","comments":[{"id":"IC_kwDOEujx185hznuY","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"After discussion, our team has determined that it's preferable not to provide out-of-the-box support for Node's `Buffer` API, since that goes against some of our mid-term and long-term objectives, notably regarding the possibly of supporting other JavaScript runtimes (eg. Deno, browser, etc).\r\n\r\nInstead, we encourage users to load appropriate polyfills from their Webpack bundler. [A sample](https://github.com/temporalio/samples-typescript/issues/280) will soon be added demonstrating how to do so.","createdAt":"2023-07-18T20:04:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1108#issuecomment-1640922008","viewerDidAuthor":false}],"createdAt":"2023-04-25T14:46:19Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1108,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"[Feature Request] Permit imports of Node `buffer` module in workflows ","updatedAt":"2023-07-18T20:04:19Z","url":"https://github.com/temporalio/sdk-typescript/issues/1108"}
