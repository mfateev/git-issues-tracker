{"assignees":[],"author":{"id":"MDQ6VXNlcjI1MTI4OA==","is_bot":false,"login":"lorensr","name":"Loren ☺️"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\nProblem: in the below issue, I didn't know from the error messages what was wrong\r\n\r\nhttps://github.com/temporalio/samples-typescript/issues/56\r\n\r\n### Describe the solution you'd like\r\n\r\nWhile this issue should help with this type of bug: https://github.com/temporalio/sdk-typescript/issues/305\r\n\r\nI think it would still be helpful to improve the errors:\r\n\r\n1. Error from the Worker that had the correct code (`Task not found when completing: status: NotFound, message: \"Workflow executionsRow not found.`): Say what's going wrong in the Worker at a higher level and suggest possible reasons.\r\n2. Client error (`Error: 4 DEADLINE_EXCEEDED: context deadline exceeded`: In lieu of logging it, we can log what we say here: \r\n\r\nhttps://docs.temporal.io/docs/typescript/troubleshooting/#grpc-call-timeouts-context-deadline-exceeded\r\n\r\nSomething like:\r\n\r\n```\r\nError: gRPC timeout. \r\n\r\nThis happens for a number of reasons: Network hiccups, timeouts that are too short, server overloaded.\r\n\r\nThis is not your fault and is likely indicative of an SDK bug. Please try to produce a minimal repro and we'll be glad to help:\r\n\r\nhttps://github.com/temporalio/sdk-typescript/issues/new?assignees=&labels=bug&template=bug_report.md\r\n```\r\n\r\n3. Result message error from the Worker that didn't have the right code (`'progress' is not a function`): Instead say something like \r\n\r\n```\r\nThe Worker process that picked up this task doesn't have a Workflow function named 'progress' in its bundle. \r\nThe issue might be:\r\n\r\n- There's a typo in the Workflow function name.\r\n- The Workflow function isn't exported.\r\n- The entry point (`workflowsPath`) is incorrect.\r\n- You have more Worker processes than you realize polling on the 'tutorial' queue. For instance, a process in another shell or in the background that has an old version of the Workflow code bundle or that's from a different Temporal project. You can check with `ps` or `tctl tq desc --tq tutorial`.\r\n```\r\n\r\nIf we think the list of reasons might change in the future, we could alternatively do:\r\n\r\n```\r\nThe Worker process that picked up this task doesn't have a Workflow function named 'progress' in its bundle. For more information and possible causes, see: \r\n\r\n[sdk-typescript wiki page URL]\r\n```\r\n\r\nso that in the future we can easily update the wiki page, and users of old versions of the SDK will see the updated page.","closedAt":"2021-11-11T01:27:52Z","comments":[{"id":"IC_kwDOEujx1845bVOO","author":{"login":"Sushisource"},"authorAssociation":"MEMBER","body":"We might want to break up this issue into more actionable sub-pieces.\r\n\r\n> `'progress' is not a function`\r\n\r\nThis error is totally improvable in the way you suggest.\r\n\r\n-----\r\n\r\n\r\n> `Error: 4 DEADLINE_EXCEEDED: context deadline exceeded`\r\n\r\nThis one can be better, the first sentence of the suggestion is at least a few of the reasons. However (and we should probably update the docs page on this too, I'll go make a PR) this piece:\r\n\r\n> This is not your fault and is likely indicative of an SDK bug.\r\n\r\nIs definitely not correct most of the time. Too short timeouts are not an SDK bug, they're a configuration issue. Your network being down is not an SDK bug, etc. You might see a timeout when making a query where the worker handling the query crashes, which can be b/c of a mistake in the user's query handler. \r\n\r\nAll that to say producing a minimal repro is definitely a great way to go but \"likely an SDK bug\" is typically not the case, and we should probably give some other basic troubleshooting advice first.\r\n\r\n----\r\n\r\nI think making most of these sorts of things be links to docs pages is a good idea. No sense repeating ourselves.","createdAt":"2021-11-08T18:47:46Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/359#issuecomment-963466126","viewerDidAuthor":false},{"id":"IC_kwDOEujx1845kp5C","author":{"login":"lorensr"},"authorAssociation":"CONTRIBUTOR","body":"> We might want to break up this issue into more actionable sub-pieces.\r\n\r\nGood idea, thanks! Done.","createdAt":"2021-11-11T01:27:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/359#issuecomment-965910082","viewerDidAuthor":false}],"createdAt":"2021-11-07T20:34:38Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":359,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] Improve error messages when the wrong worker is polling the queue","updatedAt":"2021-11-11T01:27:52Z","url":"https://github.com/temporalio/sdk-typescript/issues/359"}
