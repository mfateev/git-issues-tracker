{"assignees":[],"author":{"id":"MDQ6VXNlcjI1MTI4OA==","is_bot":false,"login":"lorensr","name":"Loren ☺️"},"body":"In Java, we have:\r\n\r\n```java\r\n   /**\r\n     * Optional: Sets how workflow worker deals with exceptions thrown from the workflow code which\r\n     * include non-deterministic history events (presumably arising from non-deterministic workflow\r\n     * definitions or non-backward compatible workflow definition changes).\r\n     *\r\n     * <p>The default behavior is to fail workflow on {@link io.temporal.failure.TemporalFailure} or\r\n     * any of its subclasses. Any other exceptions thrown from the workflow code are treated as bugs\r\n     * that can be fixed by a new deployment. So workflow is not failed, but it stuck in a retry\r\n     * loop trying to execute the code that led to the unexpected exception.\r\n     *\r\n     * <p>This option allows to specify specific exception types which should lead to workflow\r\n     * failure instead of blockage. Any exception that extends the configured type considered\r\n     * matched. For example to fail workflow on any exception pass {@link Throwable} class to this\r\n     * method.\r\n     */\r\n    @SafeVarargs\r\n    public final Builder setFailWorkflowExceptionTypes(\r\n```\r\n\r\nhttps://github.com/temporalio/sdk-java/blob/657a392333e6d623fda91b1d7a0ea1f152f2eb9b/temporal-sdk/src/main/java/io/temporal/worker/WorkflowImplementationOptions.java#L68\r\n\r\nFor a TS equivalent, we could add `WorkerOptions.failWorkflowErrorTypes: Function[]`? So this would fail WE whenever `err instanceof Error`:\r\n\r\n```ts\r\nWorker.create({\r\n  failWorkflowErrorTypes: [Error]\r\n})\r\n```\r\n\r\nor any instances of `ExpectedErrorA` and `ExpectedErrorB` or their descendants:\r\n\r\n```ts\r\nWorker.create({\r\n  failWorkflowErrorTypes: [ExpectedErrorA, ExpectedErrorB]\r\n})\r\n```\r\n\r\nThe one issue with `[Error]` is: If a user in Java wants to fail on anything thrown, they can pass `[Throwable]`. That can't be done with `[Error]`, because they might throw a non-Error (they might not even know they might throw a non-Error—eg they're using a library that throws a string). We could cover that case with something like:\r\n\r\n```ts\r\n// failWorkflowErrorTypes: Function[] | 'ALWAYS_FAIL'\r\nWorker.create({ failWorkflowErrorTypes: 'ALWAYS_FAIL' })\r\n```","closedAt":"2022-02-14T22:57:02Z","comments":[{"id":"IC_kwDOEujx18499CyC","author":{"login":"lorensr"},"authorAssociation":"CONTRIBUTOR","body":"Ah, we have it in retry policy: `nonRetryableErrorTypes: ['Error']`\r\n\r\nhttps://typescript.temporal.io/api/classes/proto.temporal.api.common.v1.RetryPolicy#nonretryableerrortypes\r\n\r\nwhich we can set when proxying an Activity or starting a Workflow. Wondering whether we'd like something more global, like per Worker (the easiest / most global, and perhaps best satisfying [this user's request](https://temporaltechnologies.slack.com/archives/C02KYBDUCQZ/p1644784493007749)) or per Workflow implementation. Java's `setFailWorkflowExceptionTypes` looks like per Workflow Implementation. ","createdAt":"2022-02-14T18:25:41Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/478#issuecomment-1039412354","viewerDidAuthor":false},{"id":"IC_kwDOEujx18499-Go","author":{"login":"lorensr"},"authorAssociation":"CONTRIBUTOR","body":"Update: talked with Roey—decided against an equivalent, instead providing interceptors as the more powerful/flexible (albeit more LoC) alternative: https://docs.temporal.io/docs/typescript/handling-failure#pattern-wrapping-errors-with-interceptors","createdAt":"2022-02-14T22:57:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/478#issuecomment-1039655336","viewerDidAuthor":false}],"createdAt":"2022-02-14T18:21:21Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":478,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] Add equivalent to setFailWorkflowExceptionTypes","updatedAt":"2022-02-14T22:57:03Z","url":"https://github.com/temporalio/sdk-typescript/issues/478"}
