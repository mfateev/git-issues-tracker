{"assignees":[],"author":{"id":"MDQ6VXNlcjQ4MjYxNDk3","is_bot":false,"login":"GauBen","name":"Gautier Ben AÃ¯m"},"body":"`Worker.create` does not support bundling ESM written in TypeScript (imports of `.ts` files with `.js`):\r\n\r\n**workflows.ts**\r\n```ts\r\nimport * from './users/workflows.js'; // This file does not exist\r\n```\r\n\r\n**users/workflows.ts**\r\n```ts\r\nexport async function workflow() {\r\n  // ...\r\n}\r\n```\r\n\r\n```\r\nModule not found: Error: Can't resolve './users/workflows.js' in '<app>'\r\n\r\nresolve './users/workflows.js' in '<app>/src'\r\n  using description file: <app>/package.json (relative path:\r\n\r\n    Field 'browser' doesn't contain a valid alias configuration\r\n    using description file: <app>/package.json (relative pat\r\n\r\n      no extension\r\n        Field 'browser' doesn't contain a valid alias configuration\r\n        <app>/src/users/workflows.js doesn't exist\r\n      .ts\r\n        Field 'browser' doesn't contain a valid alias configuration\r\n        <app>/src/users/workflows.js.ts doesn't exist\r\n      .js\r\n        Field 'browser' doesn't contain a valid alias configuration\r\n        <app>/src/users/workflows.js.js doesn't exist\r\n      as directory\r\n        <app>/src/users/workflows.js doesn't exist\r\n @ ./src/workflows-autogenerated-entrypoint.cjs 9:9-113\r\n\r\nwebpack 5.88.2 compiled with 1 error in 1005 ms\r\n```\r\n\r\nCurrent workaround:\r\n\r\n```ts\r\nconst worker = await Worker.create({\r\n  workflowsPath: require.resolve(\"./workflows.js\"),\r\n  bundlerOptions: {\r\n    webpackConfigHook(config) {\r\n      config.resolve.extensionAlias = { \".js\": [\".ts\", \".js\"] }; // Workaround\r\n      return config;\r\n    },\r\n  },\r\n  taskQueue: \"app\",\r\n  activities,\r\n});\r\n```\r\n\r\nSource https://www.npmjs.com/package/resolve-typescript-plugin\r\n\r\n","closedAt":"2023-08-01T15:55:11Z","comments":[],"createdAt":"2023-07-31T16:17:33Z","labels":[],"milestone":null,"number":1185,"reactionGroups":[],"state":"CLOSED","title":"Bundling raw typescript fails","updatedAt":"2023-08-01T15:55:11Z","url":"https://github.com/temporalio/sdk-typescript/issues/1185"}
