{"assignees":[],"author":{"id":"MDQ6VXNlcjgzMzU3Ng==","is_bot":false,"login":"thegedge","name":"Jason Gedge"},"body":"We're seeing a lot of these messages in our logs:\r\n\r\n```\r\nCan not execute the operation on ended Span {traceId: ‚Ä¶, spanId: ‚Ä¶}\r\nYou can only call end() on a span once.\r\n```\r\n\r\nIgnoring the double error message for a single error source (that's an issue in the otel SDK), this is the source of the error message:\r\n\r\nhttps://github.com/temporalio/sdk-typescript/blob/ea100209b1f62561d69ab230258dbc4f07565c34/packages/worker/src/tracing.ts#L54\r\n\r\nIt's clear it can be double ended in the worker:\r\n\r\nhttps://github.com/temporalio/sdk-typescript/blob/ea100209b1f62561d69ab230258dbc4f07565c34/packages/worker/src/worker.ts#L1129\r\n\r\nEasy fix, should just require dropping the `.end()` on ‚òùÔ∏è since `instrument` takes care of it üôå \r\n\r\n### Environment/Versions\r\n\r\n- OS and processor: macOS (intel)\r\n- Temporal Version: TypeScript SDK 1.0.0 (and 0.22.0).","closedAt":"2022-07-28T21:18:58Z","comments":[{"id":"IC_kwDOEujx185HSA8W","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Thanks for reporting, would you mind submitting a pr with the fix?","createdAt":"2022-07-26T19:42:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/781#issuecomment-1195904790","viewerDidAuthor":false},{"id":"IC_kwDOEujx185HSBl0","author":{"login":"thegedge"},"authorAssociation":"CONTRIBUTOR","body":"Yep, not a problem. I'll try to get to it later today or tomorrow. Was busy and wanted to make sure it got logged :)","createdAt":"2022-07-26T19:45:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/781#issuecomment-1195907444","viewerDidAuthor":false}],"createdAt":"2022-07-26T19:23:39Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":781,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Span ended twice in TypeScript SDK","updatedAt":"2022-07-28T21:18:58Z","url":"https://github.com/temporalio/sdk-typescript/issues/781"}
