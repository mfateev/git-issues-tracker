{"assignees":[],"author":{"id":"MDQ6VXNlcjgzMzM4MzU=","is_bot":false,"login":"JaredRohe","name":"Jared Rohe"},"body":"### What are you really trying to do?\r\n\r\nI want to use an activity function that does NOT return a promise.   Currently, if I pass the type of a function that is NOT `async` as a type parameter into `proxyActivities` i.e `const {mySyncFunc} =  proxyActivities<typeof mySyncFunc>`, the resulting type of `mySyncFunc` is type `symbol` instead of it's actual function signature type. \r\n\r\nI would like to use `mySyncFunc` as the output of `proxyActivities` without having to type cast, despite the function being synchronous. \r\n\r\n<!-- \r\nTell us at a high level what you're doing, to avoid XY problem (https://en.wikipedia.org/wiki/XY_problem) \r\n-->\r\n\r\n### Describe the bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\nWhen attempting to wrap an activity function with `proxyActivities` the resulting function has type `symbol` if the input function to `proxyActivities` does NOT return a Promise. Typescript warns that `mySyncFunc` is of type `symbol` and therefore may not be callable.  `mySyncFunc` must be type casted before it can be used. \r\n\r\n<!-- If applicable, add screenshots or code blocks to help explain your problem. You can also use [Loom](http://loom.com/) to do short, free video bug reports. -->\r\n\r\n### Minimal Reproduction\r\nSimply modify the hello world `greet` function to be synchronous i.e: \r\n![Screenshot 2023-08-13 at 8 59 39 AM](https://github.com/temporalio/sdk-typescript/assets/8333835/b7dc0088-1d3b-4a17-9550-09005407a8b1)\r\n\r\nWith this change, you will see the Typescript errors when trying to use the `greet` function after passing it into `proxyActivities`.\r\n\r\n![Screenshot 2023-08-13 at 8 59 25 AM](https://github.com/temporalio/sdk-typescript/assets/8333835/abd508a6-9268-4412-b448-6e88befdf10c)\r\n\r\n\r\n<!-- \r\nModify our hello world templates to demonstrate:\r\n\r\n- TypeScript: https://github.com/temporalio/samples-typescript/tree/main/hello-world\r\n- Go: https://github.com/temporalio/money-transfer-project-template-go\r\n- Java: https://github.com/temporalio/money-transfer-project-template-java\r\n- PHP: https://github.com/temporalio/samples-php#samples\r\n-->\r\n\r\n### Environment/Versions\r\n\r\n<!-- Please complete the following information where relevant. -->\r\n- OS and processor: M2 Macbook Pro\r\n- Temporal Version: 1.7.0\r\n- Are you using Docker or Kubernetes or building Temporal from source?: Building from source\r\n\r\n### Additional context\r\n\r\nIt is entirely possible that this is not a bug and it is actually desired that all activity functions be asynchronous.  If that is the case, we can happily close this issue! \r\n\r\nHowever, if it is indeed the case that activity functions can be both asynchronous and synchronous then this change solves the issue:\r\n![Screenshot 2023-08-13 at 8 57 30 AM](https://github.com/temporalio/sdk-typescript/assets/8333835/89c30671-386e-47b0-9fde-f3620f4c8ede)\r\n\r\nThe change there is just adding `| R` on line 69 of this file:   https://github.com/temporalio/sdk-typescript/blob/main/packages/common/src/interfaces.ts#L69\r\n\r\n","closedAt":"2023-08-18T15:43:43Z","comments":[{"id":"IC_kwDOEujx185kMrcQ","author":{"login":"JaredRohe"},"authorAssociation":"NONE","body":"@mjameswh I think this issue will be very quick to address.  Would you mind taking a look?","createdAt":"2023-08-16T17:54:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1202#issuecomment-1681045264","viewerDidAuthor":false},{"id":"IC_kwDOEujx185kN5Pq","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"Thanks @JaredRohe!\r\n\r\nThis is actually by design, thought that's something that we could reconsider if there's a strong use case for explicitly non-async activities.\r\n\r\nMay I ask why you are bringing this up?","createdAt":"2023-08-16T22:46:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1202#issuecomment-1681363946","viewerDidAuthor":false},{"id":"IC_kwDOEujx185kYV7C","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"Closing this ticket since this is not planned.\r\n\r\n@JaredRohe I'm still interested to know about your use case for this. We may certainly reconsider if there is a reasonable justification.","createdAt":"2023-08-18T15:43:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1202#issuecomment-1684102850","viewerDidAuthor":false},{"id":"IC_kwDOEujx185kvHCy","author":{"login":"JaredRohe"},"authorAssociation":"NONE","body":"@mjameswh Sorry for the late response!  I do not have a legit use case here. I ran into this in the process of exploring Temporal and building some toy examples.   I think the design as it is is what we want! =) Thanks for looking into this.","createdAt":"2023-08-23T14:29:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/1202#issuecomment-1690071218","viewerDidAuthor":false}],"createdAt":"2023-08-13T16:06:09Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1202,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Type Definition Improvement for `ActivityFunction` Interface","updatedAt":"2023-08-23T14:29:31Z","url":"https://github.com/temporalio/sdk-typescript/issues/1202"}
