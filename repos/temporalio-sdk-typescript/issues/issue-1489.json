{"assignees":[],"author":{"id":"MDQ6VXNlcjg3NTk0NA==","is_bot":false,"login":"shadiramadan","name":"Shadi Ramadan"},"body":"### What are you really trying to do?\r\n\r\nI'm trying to build / run a Next.js application without any warnings or errors.  I am only using the @temporalio/client to be able to Signal workflows.\r\n\r\n### Describe the bug\r\n\r\nI have a `server-only` file that imports the client:\r\n```typescript\r\nimport { Client, Connection } from \"@temporalio/client\";\r\n```\r\n\r\nThe client is used in some server side logic. When running next as a build or in dev mode (and loading a page that references the import).  I get the following error:\r\n```\r\n./node_modules/.pnpm/@temporalio+common@1.10.3/node_modules/@temporalio/common/lib/internal-non-workflow/data-converter-helpers.js\r\nCritical dependency: the request of a dependency is an expression\r\n\r\nImport trace for requested module:\r\n./node_modules/.pnpm/@temporalio+common@1.10.3/node_modules/@temporalio/common/lib/internal-non-workflow/data-converter-helpers.js\r\n./node_modules/.pnpm/@temporalio+common@1.10.3/node_modules/@temporalio/common/lib/internal-non-workflow/index.js\r\n./node_modules/.pnpm/@temporalio+client@1.10.3/node_modules/@temporalio/client/lib/async-completion-client.js\r\n./node_modules/.pnpm/@temporalio+client@1.10.3/node_modules/@temporalio/client/lib/index.js\r\n./src/lib/temporal.ts\r\n./src/lib/auth/index.ts\r\n./src/app/[locale]/layout.tsx\r\n```\r\n\r\n### Minimal Reproduction\r\n\r\nLoad the temporal client on the server side.\r\n\r\n### Environment/Versions\r\n\r\n```\r\nOS: MacOS Sonoma 14.5 (23F79)\r\nPackage: \"@temporalio/client\": \"^1.10.3\",\r\nNode: v20.16.0\r\n```\r\n\r\n### Additional context\r\n\r\nMy signal workflow logic works fine.  The error also occurs in a linux based docker image.","closedAt":null,"comments":[{"id":"IC_kwDOEujx186HlpO_","author":{"login":"shadiramadan"},"authorAssociation":"NONE","body":"Possibly related #1292","createdAt":"2024-08-08T01:57:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1489#issuecomment-2274792383","viewerDidAuthor":false},{"id":"IC_kwDOEujx186LkQYS","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"> Possibly related 1292\r\n\r\nThat touches the same part of the code, but the use case is very different.\r\n\r\nImplementing #1458 is certainly part of the solution, but I'm afraid that will not be enough to avoid the build error people are seeing when bundling the client.","createdAt":"2024-09-10T17:19:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1489#issuecomment-2341537298","viewerDidAuthor":false},{"id":"IC_kwDOEujx186MCEp4","author":{"login":"shadiramadan"},"authorAssociation":"NONE","body":"@mjameswh Do you know how to work around this error in the temporal client or is it unavoidable at this time?","createdAt":"2024-09-13T16:33:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1489#issuecomment-2349353592","viewerDidAuthor":false}],"createdAt":"2024-08-07T23:43:36Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1489,"reactionGroups":[],"state":"OPEN","title":"[Bug] Critical dependency: the request of a dependency is an expression","updatedAt":"2024-09-13T16:33:28Z","url":"https://github.com/temporalio/sdk-typescript/issues/1489"}
