{"assignees":[],"author":{"id":"MDQ6VXNlcjQzODIxMDA=","is_bot":false,"login":"jmoseley","name":"Jeremy Moseley"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\nWe use OpenTracing in our existing worker (written in Go), but have been using the Node client to trigger workflows. Because the client does not yet have Golang support, we do not have full traces for the workflow.\r\n\r\n### Describe the solution you'd like\r\n\r\nI should be able to leverage my existing opentracing infrastructure to create spans when a workflow is triggered, and have this span encapsulate the entire workflow, including all activities.\r\n","closedAt":"2021-10-28T17:06:52Z","comments":[{"id":"IC_kwDOEujx1842l0t_","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"This is supported by the SDK but you'll need to implement an opentracing interceptor on your own.\r\nFor reference, check out the opentelemetry interceptors package: https://github.com/temporalio/sdk-node/tree/main/packages/interceptors-opentelemetry","createdAt":"2021-09-09T08:41:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/219#issuecomment-915884927","viewerDidAuthor":false},{"id":"IC_kwDOEujx1842qKIj","author":{"login":"jmoseley"},"authorAssociation":"NONE","body":"Does the opentelemetry instrumentation integrate well will the existing opentracing instrumentation in the Go SDK? Does the trace IDs cross the boundary? I want to be able to trace between client calls (eg `ExecuteWorkflow`) and see spans in the Workflow with the same trace ID.\r\n\r\nI think that Temporal uses headers to transfer this context, but its very challenging to trace exactly how that works.","createdAt":"2021-09-10T16:04:37Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/219#issuecomment-917021219","viewerDidAuthor":false},{"id":"IC_kwDOEujx1842safV","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Is there an official temporal opentracing library for golang?\r\nThe node version uses this header: https://github.com/temporalio/sdk-node/blob/main/packages/interceptors-opentelemetry/src/workflow/index.ts#L19 and expects the value to be an otel `SpanContext`, it's decoded from payload (JSON) using data converter.\r\nhttps://github.com/open-telemetry/opentelemetry-js-api/blob/a752e7f814e7b335e50705d281cb2c6e1bd38a35/src/trace/span_context.ts#L23","createdAt":"2021-09-12T10:58:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/219#issuecomment-917612501","viewerDidAuthor":false},{"id":"IC_kwDOEujx1842vty_","author":{"login":"jmoseley"},"authorAssociation":"NONE","body":"> Is there an official temporal opentracing library for golang?\r\n\r\nYes, you can pass an Opentracing tracer to the golang SDK client. This gives you traces around activity execution.\r\n\r\nhttps://github.com/temporalio/sdk-go/blob/e8455cbe8014d2587a2b72ce153ae490160d9b11/internal/client.go#L390","createdAt":"2021-09-13T18:48:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/219#issuecomment-918478015","viewerDidAuthor":false},{"id":"IC_kwDOEujx1842xeSM","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"I wasn't aware of this, thanks!\r\n\r\nIMO the interceptors will probably not be compatible.\r\nWe'll have to prioritize adding this, contributions are welcome.","createdAt":"2021-09-14T08:38:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/219#issuecomment-918938764","viewerDidAuthor":false},{"id":"IC_kwDOEujx18426pG_","author":{"login":"Sushisource"},"authorAssociation":"MEMBER","body":"@jmoseley Where does your opentracing data end up? Opentelemetry exporters most likely exist for wherever that's going to.\r\n\r\nAs for having the spans connect, even if everything was going through opentracing I'm not sure they'd be attached properly as it stands, that might only work when everything is in Go. That's something I'm going to be looking into pretty soon, at least in the context of getting Opentelemetry spans shared between Node and the underlying rust Core connected.  Getting them connected with server is also on the menu but might take a bit.","createdAt":"2021-09-17T00:00:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/219#issuecomment-921342399","viewerDidAuthor":false},{"id":"IC_kwDOEujx18426p7O","author":{"login":"jmoseley"},"authorAssociation":"NONE","body":"It's flowing to Datadog. They have an opentelemetry solution, but it requires some extra infrastructure that I'd prefer to avoid if possible.\r\n\r\nWe have spans connecting across languages with API calls originating from Go activities, and I just want to close the loop with API calls that kick off workflows.","createdAt":"2021-09-17T00:07:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/219#issuecomment-921345742","viewerDidAuthor":false},{"id":"IC_kwDOEujx18428oLl","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"The spans connect with opentelemetry if the workflow starter is in **node**.\r\nActivities started from the workflow are also connected to the same parent span.","createdAt":"2021-09-17T14:54:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/219#issuecomment-921862885","viewerDidAuthor":false}],"createdAt":"2021-09-01T00:18:34Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":219,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] Opentracing Support","updatedAt":"2021-10-28T17:06:52Z","url":"https://github.com/temporalio/sdk-typescript/issues/219"}
