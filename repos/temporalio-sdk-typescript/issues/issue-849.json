{"assignees":[],"author":{"id":"MDQ6VXNlcjY3MTM0Mjk=","is_bot":false,"login":"klesniewski","name":"Kris"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\nWe have a codec that makes calls to an external service. As such, for various reasons encoding/decoding could fail. This will be retried and hopefully eventually works. However, we would like to see that failure in workflow/activity execution logs. This means we would like to attach for example `workflowId` to our logs, so that when we search for logs of particular workflow, we get to see these log messages.\r\n\r\nUnfortunately, I didn't find a way to get this information in codecs. I could only make it work when decoding (but not encoding) for an activity, as then (and only then) `Context.current()` works.\r\n\r\nWe have this working in Go SDK through context-aware data converters, but I didn't find a way to make it work in TypeScript SDK.\r\n\r\n### Describe the solution you'd like\r\n\r\nA way to access the activity/workflow execution metadata, so it can be added to logs. Information like:\r\n- workflowType\r\n- workflowId\r\n- runId\r\n- activityType\r\n- activityId\r\n- attempt\r\n\r\n### Additional context\r\n\r\nTS SDK version: 1.0.1\r\n","closedAt":"2025-05-30T07:38:00Z","comments":[{"id":"IC_kwDOEujx185JD8wp","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"As a temporary solution, you can pass that context in the payload metadata from a PayloadConverter and read it (and delete it) in your PayloadCodec.\r\n\r\nI hope we can get to this issue soon.","createdAt":"2022-08-24T14:03:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/849#issuecomment-1225772073","viewerDidAuthor":false},{"id":"IC_kwDOEujx185ilVxg","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"There's somewhat of a chicken-or-egg problem here. `WorkflowInfo` and `ActivityContext` both contains some fields that needs decoding/encoding. It would not makes sense therefore to make these objects directly accessible to the PayloadCodec.\r\n\r\nProviding trimmed down context object, specific to PayloadCodec would however be reasonable. It may also be useful to include request headers there. And a logger.","createdAt":"2023-07-27T16:26:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/849#issuecomment-1653955680","viewerDidAuthor":false},{"id":"IC_kwDOEujx18588w8a","author":{"login":"pzerelles"},"authorAssociation":"NONE","body":"> As a temporary solution, you can pass that context in the payload metadata from a PayloadConverter and read it (and delete it) in your PayloadCodec.\r\n> \r\n> I hope we can get to this issue soon.\r\n\r\nHow exactly is this possible with the Typescript SDK?","createdAt":"2024-05-06T15:29:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/849#issuecomment-2096303898","viewerDidAuthor":false},{"id":"IC_kwDOEujx18588xbS","author":{"login":"pzerelles"},"authorAssociation":"NONE","body":"> There's somewhat of a chicken-or-egg problem here. `WorkflowInfo` and `ActivityContext` both contains some fields that needs decoding/encoding. It would not makes sense therefore to make these objects directly accessible to the PayloadCodec.\r\n> \r\n> Providing trimmed down context object, specific to PayloadCodec would however be reasonable. It may also be useful to include request headers there. And a logger.\r\n\r\nIs there a plan when this will be available? I need to pass tenant specific context from a workflow to a PayloadCodec.","createdAt":"2024-05-06T15:30:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/849#issuecomment-2096305874","viewerDidAuthor":false},{"id":"IC_kwDOEujx186Hru_2","author":{"login":"jroof88"},"authorAssociation":"NONE","body":"ðŸ‘‹ Hi just checking in here...is this something that is being considered? I'd love to have this in the Go SDK and be able to use `workflow.Context` in my `PayloadCodec`","createdAt":"2024-08-08T18:08:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/849#issuecomment-2276388854","viewerDidAuthor":false},{"id":"IC_kwDOEujx186rXg6v","author":{"login":"raymondregrello"},"authorAssociation":"NONE","body":"Possibly a dupe of https://github.com/temporalio/sdk-typescript/issues/1661?\n\n","createdAt":"2025-05-13T05:11:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/849#issuecomment-2875068079","viewerDidAuthor":false},{"id":"IC_kwDOEujx186uImpP","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"Indeed, @raymondregrello. Thanks for pointing this out!\n\nClosing in favor of the recently opened, cross SDK ticket.","createdAt":"2025-05-30T07:38:00Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/849#issuecomment-2921491023","viewerDidAuthor":false}],"createdAt":"2022-08-24T13:49:46Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":849,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"[Feature Request] Get workflow info / activity context in PayloadCodec","updatedAt":"2025-05-30T07:38:14Z","url":"https://github.com/temporalio/sdk-typescript/issues/849"}
