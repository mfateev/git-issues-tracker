{"assignees":[],"author":{"id":"MDQ6VXNlcjI2ODc0MjY5","is_bot":false,"login":"Yihao-G","name":"Yihao Gao"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\nOne of my workflows upserts a custom search attribute which if I run it with `TestWorkflowEnvironment`, will get an error because the search attribute isn't registered.\r\n\r\nThe Java SDK has [the `registerSearchAttribute` method](https://www.javadoc.io/doc/io.temporal/temporal-testing/latest/io/temporal/testing/TestWorkflowEnvironment.html#registerSearchAttribute(java.lang.String,io.temporal.api.enums.v1.IndexedValueType)) on `TestWorkflowEnvironment`. \r\n\r\nI looked into the TS SDK's type declaration and documentation, it seems there is nowhere I can register a search attribute.\r\n\r\nI also tried `temporal operator search-attribute create --name MyCustomAttr --type Int --address 127.0.0.1:7233`, but it gives me `Error: unable to get existing search attributes: Method temporal.api.operatorservice.v1.OperatorService/ListSearchAttributes is unimplemented`.\r\n\r\n### Describe the solution you'd like\r\n\r\nAdd `registerSearchAttribute` method to `TestWorkflowEnvironment` interface\r\n\r\n### Additional context\r\n\r\nMay need to update https://github.com/temporalio/sdk-java/tree/master/temporal-test-server so the test server can handle custom search attributes.","closedAt":"2023-08-30T06:14:09Z","comments":[{"id":"IC_kwDOEujx185lPd25","author":{"login":"Yihao-G"},"authorAssociation":"NONE","body":"Nevermind ðŸ¤¦ \r\n\r\n```typescript\r\n  await temporalTestEnv.connection.operatorService\r\n    .addSearchAttributes({\r\n      searchAttributes: {\r\n        MyCustomAttr1: IndexedValueType.INDEXED_VALUE_TYPE_INT,\r\n        MyCustomAttr2: IndexedValueType.INDEXED_VALUE_TYPE_INT,\r\n      },\r\n    })\r\n```\r\n\r\nRef: https://github.com/temporalio/sdk-typescript/pull/657#issuecomment-1563470532\r\n\r\nIt's quite hidden though. Would be good if it could be documented somewhere.","createdAt":"2023-08-30T06:14:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1230#issuecomment-1698553273","viewerDidAuthor":false}],"createdAt":"2023-08-30T05:42:13Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1230,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] register custom search attribute on `TestWorkflowEnvironment`","updatedAt":"2023-08-30T06:14:09Z","url":"https://github.com/temporalio/sdk-typescript/issues/1230"}
