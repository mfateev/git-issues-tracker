{"assignees":[],"author":{"id":"U_kgDOBfhOdg","is_bot":false,"login":"justinadkins","name":"Justin Adkins"},"body":"### What are you really trying to do?\n\nWe bumped our Temporal dependencies to `1.14.0` today from `1.13.1` and upon deploying started seeing workflows fail due to the following error:\n```ts\nCancelledFailure: Workflow cancelled\n    at RootCancellationScope.cancel (/tmp/build_d69c691a/node_modules/.pnpm/@temporalio+workflow@1.14.0/node_modules/@temporalio/workflow/src/cancellation-scope.ts:264:16)\n    at /tmp/build_d69c691a/node_modules/.pnpm/@temporalio+workflow@1.14.0/node_modules/@temporalio/workflow/src/workflow.ts:1171:36\n```\n\nRolling back to `1.13.1` resolves the issue. We've reset the effected workflows to the signal event and they now run correctly. A race condition seems to have been introduced since we do observe some of our workflows succeeding with a signal and `condition`.\n\n### Describe the bug\nWe started seeing phantom `CancelledFailure` errors surface in our workflows after updating to `1.14.0` that seem to be coming from `condition`. Nothing else about our code has changed. An example of the code where this appears to be failing:\n\n<img width=\"1382\" height=\"652\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a07f3f62-9b47-4438-825e-b81cec6d9930\" />\n\n<!-- If applicable, add screenshots or code blocks to help explain your problem. You can also use [Loom](http://loom.com/) to do short, free video bug reports. -->\n\n### Minimal Reproduction\n\nUnable to reproduce locally so far. We have over 30 workflows in production that have experienced this.\n\n<!-- \nModify our hello world templates to demonstrate:\n\n- TypeScript: https://github.com/temporalio/samples-typescript/tree/main/hello-world\n- Go: https://github.com/temporalio/money-transfer-project-template-go\n- Java: https://github.com/temporalio/money-transfer-project-template-java\n- PHP: https://github.com/temporalio/samples-php#samples\n-->\n\n### Environment/Versions\n\n<!-- Please complete the following information where relevant. -->\n\n- OS and processor: Linux\n- Temporal Version: 1.14.0\n- Are you using Docker or Kubernetes or building Temporal from source? From source\n","closedAt":null,"comments":[{"id":"IC_kwDOEujx187cCCi6","author":{"login":"yosefrev"},"authorAssociation":"NONE","body":"We’re experiencing this as well ➕ ","createdAt":"2025-12-25T15:03:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/1866#issuecomment-3691522234","viewerDidAuthor":false},{"id":"IC_kwDOEujx187cVQZD","author":{"login":"yardenli"},"authorAssociation":"NONE","body":"We also started experiencing it as well with updates. \nWe have an update with timeout, and experienced it in some workflows right after the update was accepted, and in some after the update reached it's timeout. \nIt is important to mention that it happened in some workflows while other succeeded, and we couldn't find a clear pattern.","createdAt":"2025-12-29T13:37:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1866#issuecomment-3696559683","viewerDidAuthor":false},{"id":"IC_kwDOEujx187cWprw","author":{"login":"chris-olszewski"},"authorAssociation":"MEMBER","body":"For those affected by this:\n - Have you observed this with `1.13.2` or exclusively with `1.14.0`?\n - Do you have interceptors setup such as `@temporalio/interceptors-opentelemetry`?","createdAt":"2025-12-29T16:08:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1866#issuecomment-3696925424","viewerDidAuthor":false},{"id":"IC_kwDOEujx187cdRSI","author":{"login":"yardenli"},"authorAssociation":"NONE","body":"@chris-olszewski we observed it exclusively with `1.14.0`. After going back to `1.13.2` we observed no issues.\nWe do have interceptor set up using `@temporalio/interceptors-opentelemetry` (we are using `OpenTelemetryWorkflowClientInterceptor`).","createdAt":"2025-12-30T08:38:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1866#issuecomment-3698660488","viewerDidAuthor":false},{"id":"IC_kwDOEujx187cg5R1","author":{"login":"justinadkins"},"authorAssociation":"NONE","body":"@chris-olszewski We only observe this on `1.14.0`. We are not using an interceptor. However, for activities we have this custom wrapper used for creating spans with Datadog.\n\n<img width=\"1338\" height=\"1336\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/71ef9bc9-4199-4fe8-8f85-d5470aae90b9\" />","createdAt":"2025-12-30T14:59:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1866#issuecomment-3699610741","viewerDidAuthor":false},{"id":"IC_kwDOEujx187c1YGu","author":{"login":"Stereobit"},"authorAssociation":"NONE","body":"Same issue here, no `interceptors`","createdAt":"2026-01-02T10:15:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1866#issuecomment-3704979886","viewerDidAuthor":false},{"id":"IC_kwDOEujx187dqC0g","author":{"login":"obrunodelgado"},"authorAssociation":"NONE","body":"Hello guys,\n\nI had the same problem and as others said, after downgrading to version `1.13.2` the application stopped receiving CancellationFailures.","createdAt":"2026-01-07T13:07:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1866#issuecomment-3718786336","viewerDidAuthor":false}],"createdAt":"2025-12-23T14:18:56Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1866,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"state":"OPEN","title":"[Bug] Signal caused `condition` to fail with `CancelledFailure` on `1.14.0`","updatedAt":"2026-01-07T13:07:50Z","url":"https://github.com/temporalio/sdk-typescript/issues/1866"}
