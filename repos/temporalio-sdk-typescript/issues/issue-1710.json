{"assignees":[],"author":{"id":"MDQ6VXNlcjkzNDg0NA==","is_bot":false,"login":"TastyPi","name":"Graham Rogers"},"body":"### Is your feature request related to a problem? Please describe.\n\n<!-- A clear and concise description of what the problem is. Ex. I'm always frustrated when [...] -->\n\nThis code:\n\n```typescript\nasync function foo(): Promise<string> {\n  return \"foo\";\n}\nconst result = await new MockActivityEnvironment().run(foo);\nresult.startsWith(\"foo\");\n```\n\nDoes not compile with strict types because `result` is inferred to be `unknown` instead of `string`.\n\n### Describe the solution you'd like\n\n<!-- A clear and concise description of what you want to happen. SCREENSHOTS OR CODE SAMPLES ARE VERY HELPFUL -->\n\nChange the signature of `MockActivityEnvironment.run` from:\n\n```typescript\nrun<P extends any[], R, F extends ActivityFunction<P, R>>(fn: F, ...args: P): Promise<R>;\n```\n\nto\n\n```typescript\nrun<F extends ActivityFunction>(fn: F, ...args: Parameters<F>): ReturnType<F>\n```\n\nI've checked this locally and it makes my example infer the type of `result` correctly.\n","closedAt":null,"comments":[],"createdAt":"2025-05-08T16:58:48Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1710,"reactionGroups":[],"state":"OPEN","title":"[Feature Request] Better type inference for `MockActivityEnvironment.run`","updatedAt":"2025-05-08T16:58:48Z","url":"https://github.com/temporalio/sdk-typescript/issues/1710"}
