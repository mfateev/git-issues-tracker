{"assignees":[{"id":"MDQ6VXNlcjUyMzA0","login":"bergundy","name":"Roey Berman","databaseId":0}],"author":{"id":"MDQ6VXNlcjUyMzA0","is_bot":false,"login":"bergundy","name":"Roey Berman"},"body":"Right now client errors are thrown by grpc-js asynchronously and the stack trace is meaningless.\r\nWe should catch errors from WorkflowClient methods and rethrow to provide better context.","closedAt":"2022-02-09T20:25:18Z","comments":[{"id":"IC_kwDOEujx1846PZCs","author":{"login":"lorensr"},"authorAssociation":"CONTRIBUTOR","body":"A couple of examples:\r\n\r\n- `DEADLINE_EXCEEDED` in #376\r\n- `NOT_FOUND`: calling methods on a nonexistent-workflowID handle:\r\n\r\n```js\r\n  const handle = client.getHandle('nonexistent');\r\n  await handle.result();\r\n```\r\n\r\n```\r\nError: 5 NOT_FOUND: sql: no rows in result set\r\n    at Object.callErrorFromStatus (/Users/me/gh/samples-typescript/hello-world/node_modules/@grpc/grpc-js/src/call.ts:81:24)\r\n    at Object.onReceiveStatus (/Users/me/gh/samples-typescript/hello-world/node_modules/@grpc/grpc-js/src/client.ts:343:36)\r\n    at /Users/me/gh/samples-typescript/hello-world/node_modules/@grpc/grpc-js/src/call-stream.ts:182:27\r\n    at Object.onReceiveStatus (/Users/me/gh/samples-typescript/hello-world/node_modules/@temporalio/client/src/grpc-retry.ts:106:15)\r\n    at InterceptingListenerImpl.onReceiveStatus (/Users/me/gh/samples-typescript/hello-world/node_modules/@grpc/grpc-js/src/call-stream.ts:178:19)\r\n    at Object.onReceiveStatus (/Users/me/gh/samples-typescript/hello-world/node_modules/@grpc/grpc-js/src/client-interceptors.ts:430:34)\r\n    at Object.onReceiveStatus (/Users/me/gh/samples-typescript/hello-world/node_modules/@grpc/grpc-js/src/client-interceptors.ts:392:48)\r\n    at /Users/me/gh/samples-typescript/hello-world/node_modules/@grpc/grpc-js/src/call-stream.ts:299:24\r\n    at processTicksAndRejections (node:internal/process/task_queues:78:11) {\r\n  code: 5,\r\n  details: 'sql: no rows in result set',\r\n  metadata: Metadata {\r\n    internalRepr: Map(2) {\r\n      'content-type' => [Array],\r\n      'grpc-status-details-bin' => [Array]\r\n    },\r\n    options: {}\r\n  }\r\n}\r\n```","createdAt":"2021-11-23T20:06:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/365#issuecomment-977113260","viewerDidAuthor":false},{"id":"IC_kwDOEujx1846Pj_I","author":{"login":"Sushisource"},"authorAssociation":"MEMBER","body":"The not found one needs to be fixed server side - but both calls should have a more meaningful callstack.","createdAt":"2021-11-23T20:49:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/365#issuecomment-977158088","viewerDidAuthor":false},{"id":"IC_kwDOEujx18591eTa","author":{"login":"iamnafets"},"authorAssociation":"NONE","body":"I'm still getting \"sql: no rows in result set\" in error messages. Unfortunately it gives me no leads to debug.","createdAt":"2024-05-14T21:27:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/365#issuecomment-2111169754","viewerDidAuthor":false}],"createdAt":"2021-11-09T17:31:29Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":365,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] Better context for grpc errors in client","updatedAt":"2024-05-14T21:27:46Z","url":"https://github.com/temporalio/sdk-typescript/issues/365"}
