{"assignees":[],"author":{"id":"MDQ6VXNlcjEzODk1MDU3","is_bot":false,"login":"shawnjones253","name":"Shawn Jones"},"body":"### What are you really trying to do?\r\n\r\nI want to use the '@temporalio/workflow' `log.error(message: string, attrs?: Record<string, unknown>): void` method within an interceptor to log `Error` objects.\r\n\r\n### Describe the bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\nCreate a `WorkflowStatusInterceptor`. Run a workflow that uses `continueAsNew` to generate an error for the interceptor:\r\n\r\n```\r\nimport { log, Next, WorkflowExecuteInput, WorkflowInboundCallsInterceptor } from '@temporalio/workflow'\r\n\r\nexport class WorkflowStatusInterceptor\r\n  implements WorkflowInboundCallsInterceptor\r\n{\r\n  constructor() {}\r\n\r\n  public async execute(\r\n    input: WorkflowExecuteInput,\r\n    next: Next<WorkflowInboundCallsInterceptor, 'execute'>\r\n  ): Promise<unknown> {\r\n    try {\r\n        const ret = await next(input)\r\n        return ret\r\n    } catch (e) { // upon catching ContinueAsNew error\r\n            log.error('shouldLogContinueAsNewError', e) // all properties of `e` are missing from this log!\r\n            log.error(e.name) // prints ContinueAsNew\r\n            log.error((e instanceof Error).toString()) // prints true\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n```\r\n// note this first log is missing all properties of the actual error!\r\n2024-08-06T20:43:23.561Z [ERROR] shouldLogContinueAsNewError {\r\n  sdkComponent: 'workflow',\r\n  taskQueue: 'my-queue',\r\n  namespace: 'default',\r\n  workflowId: my-wf-id',\r\n  runId: '1b4076e7-a5a7-4ac0-9e8c-1acedb9401a3',\r\n  workflowType: 'my-wf-type',\r\n  command: {\r\n    workflowType: 'my-wf-type',\r\n    arguments: [ [Object] ],\r\n    headers: {},\r\n    taskQueue: 'my-queue',\r\n    memo: undefined,\r\n    searchAttributes: undefined,\r\n    workflowRunTimeout: undefined,\r\n    workflowTaskTimeout: undefined,\r\n    versioningIntent: 0\r\n  }\r\n}\r\n\r\n2024-08-06T20:43:23.561Z [ERROR] ContinueAsNew {\r\n  sdkComponent: 'workflow',\r\n  taskQueue: 'my-queue',\r\n  namespace: 'default',\r\n  workflowId: my-wf-id',\r\n  runId: '1b4076e7-a5a7-4ac0-9e8c-1acedb9401a3',\r\n  workflowType: 'my-wf-type'\r\n}\r\n\r\n2024-08-06T20:43:23.561Z [ERROR] true {\r\n  sdkComponent: 'workflow',\r\n  taskQueue: 'my-queue',\r\n  namespace: 'default',\r\n  workflowId: my-wf-id',\r\n  runId: '1b4076e7-a5a7-4ac0-9e8c-1acedb9401a3',\r\n  workflowType: 'my-wf-type'\r\n}\r\n```\r\n\r\n### Minimal Reproduction\r\n\r\n<!-- \r\nModify our hello world templates to demonstrate:\r\n\r\n- TypeScript: https://github.com/temporalio/samples-typescript/tree/main/hello-world\r\n- Go: https://github.com/temporalio/money-transfer-project-template-go\r\n- Java: https://github.com/temporalio/money-transfer-project-template-java\r\n- PHP: https://github.com/temporalio/samples-php#samples\r\n-->\r\n\r\n### Environment/Versions\r\n\r\n<!-- Please complete the following information where relevant. -->\r\n\r\n- OS and processor: M1 mac\r\n- Temporal Version: 1.10.1 (sdk)\r\n- Are you using Docker or Kubernetes or building Temporal from source? `temporalio/auto-setup:1.23.1` via docker\r\n\r\n### Additional context\r\n\r\nWhy it matters, this makes it hard to figure out what errors I need to catch in my interceptor without creating support threads:\r\nhttps://community.temporal.io/t/any-way-to-get-notified-or-execute-callback-for-change-in-workflowexecutionstatus/12297/11?u=shawn_jones","closedAt":"2024-09-09T15:16:12Z","comments":[{"id":"IC_kwDOEujx186LYTLe","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"Duplicate of #1274.","createdAt":"2024-09-09T15:16:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1491#issuecomment-2338403038","viewerDidAuthor":false}],"createdAt":"2024-08-13T17:56:14Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1491,"reactionGroups":[],"state":"CLOSED","title":"[Bug] log.error doesn't log the error","updatedAt":"2024-09-09T15:16:12Z","url":"https://github.com/temporalio/sdk-typescript/issues/1491"}
