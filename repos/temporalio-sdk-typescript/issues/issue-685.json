{"assignees":[],"author":{"id":"MDQ6VXNlcjYyODQzMQ==","is_bot":false,"login":"davidtheclark","name":"David Clark"},"body":"### What are you really trying to do?\r\n\r\nDebug workflow failures.\r\n\r\n### Describe the bug\r\n\r\nWhen workflow code imports built-in Node modules, worker logs the problem instead of loudly failing.\r\n\r\nIn these logs from worker startup, you'll see that the problem is detected but then just logged:\r\n\r\n```\r\n2022-06-06T19:26:13.471Z [INFO]   modules by path ../config/environments/*.ts 13.1 KiB 5 modules\r\n2022-06-06T19:26:13.471Z [INFO]   modules by path ../config/*.ts 5.6 KiB 3 modules\r\n2022-06-06T19:26:13.471Z [INFO] modules by path ../shared-universal/ 130 KiB\r\n2022-06-06T19:26:13.472Z [INFO]   modules by path ../shared-universal/report/ 62.2 KiB 6 modules\r\n2022-06-06T19:26:13.472Z [INFO]   modules by path ../shared-universal/utils/*.ts 20.6 KiB 5 modules\r\n2022-06-06T19:26:13.472Z [INFO]   ../shared-universal/generated/graphql.ts 46.7 KiB [built] [code generated]\r\n2022-06-06T19:26:13.472Z [INFO] __temporal_custom_payload_converter (ignored) 15 bytes [built] [code generated]\r\n2022-06-06T19:26:13.472Z [INFO] child_process (ignored) 15 bytes [built] [code generated]\r\n2022-06-06T19:26:13.474Z [INFO] path (ignored) 15 bytes [built] [code generated]\r\n2022-06-06T19:26:13.474Z [INFO] webpack 5.65.0 compiled successfully in 644 ms\r\n2022-06-06T19:26:13.474Z [WARN] Your Workflow code (or a library used by your Workflow code) is importing the following built-in Node modules:\r\n  - 'child_process'\r\n  - 'path'\r\nWorkflow code doesn't have access to built-in Node modules (in order to help enforce determinism). If you are certain these modules will not be used at runtime, then you may add their names to 'WorkerOptions.bundlerOptions.ignoreModules' in order to dismiss this warning. However, if your code execution actually depends on these modules, then you must change the codeor remove the library.\r\nSee https://typescript.temporal.io/api/interfaces/worker.workeroptions/#bundleroptions for details.\r\n2022-06-06T19:26:13.480Z [INFO] Workflow bundle created { size: '3.29MB' }\r\n2022-06-06T19:26:13.684Z [INFO] Worker state changed { state: 'RUNNING' }\r\n```\r\n\r\n### Minimal Reproduction\r\n\r\nImport `path` into workflow code and start the worker.\r\n\r\n### Environment/Versions\r\n\r\n<!-- Please complete the following information where relevant. -->\r\n\r\n- OS and processor: Mac\r\n- Temporal Version: 0.21.0\r\n- Are you using Docker or Kubernetes or building Temporal from source? Docker\r\n","closedAt":"2022-06-10T19:52:48Z","comments":[],"createdAt":"2022-06-06T19:55:16Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":685,"reactionGroups":[],"state":"CLOSED","title":"[Bug] TypeScript: When workflow code imports built-in Node modules, worker logs the problem instead of loudly failing","updatedAt":"2022-06-10T19:52:48Z","url":"https://github.com/temporalio/sdk-typescript/issues/685"}
