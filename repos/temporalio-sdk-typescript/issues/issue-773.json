{"assignees":[],"author":{"id":"MDQ6VXNlcjUyMzA0","is_bot":false,"login":"bergundy","name":"Roey Berman"},"body":"Metadata fields are not turned into base64 encoded strings","closedAt":null,"comments":[{"id":"IC_kwDOEujx185JkRSf","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Note to self, this works:\r\n\r\n```ts\r\nfunction payloadToJSON({ metadata, data }: Payload): JSONPayload {\r\n  return {\r\n    metadata:\r\n      metadata &&\r\n      Object.fromEntries(\r\n        Object.entries(metadata).map(([k, v]): [string, string] => [k, Buffer.from(v).toString('base64')])\r\n      ),\r\n    data: data ? Buffer.from(data).toString('base64') : undefined,\r\n  };\r\n}\r\n```","createdAt":"2022-09-01T12:58:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/773#issuecomment-1234244767","viewerDidAuthor":false},{"id":"IC_kwDOEujx186N1uun","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"The problem is that proto3-json-serializer does not properly handle maps of bytes (and probably array of bytes too).\r\n\r\nI opened an issue on their side: https://github.com/googleapis/google-cloud-node-core/issues/108","createdAt":"2024-09-27T16:39:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/773#issuecomment-2379672487","viewerDidAuthor":false}],"createdAt":"2022-07-23T00:54:13Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":773,"reactionGroups":[],"state":"OPEN","title":"[Bug] payloadToJSON from from @temporalio/common/lib/proto-utils does not generate vaild proto JSON","updatedAt":"2024-09-27T16:39:46Z","url":"https://github.com/temporalio/sdk-typescript/issues/773"}
