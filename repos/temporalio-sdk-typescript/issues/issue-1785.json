{"assignees":[],"author":{"id":"MDQ6VXNlcjkzNDg0NA==","is_bot":false,"login":"TastyPi","name":"Graham Rogers"},"body":"### What are you really trying to do?\n\n<!-- \nTell us at a high level what you're doing, to avoid XY problem (https://en.wikipedia.org/wiki/XY_problem) \n-->\n\nDepend on `@temporalio/interceptors-opentelemetry` in my app that uses `@temporalio/client`.\n\n\n### Describe the bug\n\n<!-- A clear and concise description of what the bug is. -->\n\n<!-- If applicable, add screenshots or code blocks to help explain your problem. You can also use [Loom](http://loom.com/) to do short, free video bug reports. -->\n\nWhen I run `yarn install` I get the following messages:\n\n```\n➤ YN0002: │ my-package doesn't provide @temporalio/activity (p98051a), requested by @temporalio/interceptors-opentelemetry.\n➤ YN0002: │ my-package doesn't provide @temporalio/common (pd7eebd), requested by @temporalio/interceptors-opentelemetry.\n➤ YN0002: │ my-package doesn't provide @temporalio/worker (p41c8fb), requested by @temporalio/interceptors-opentelemetry.\n➤ YN0002: │ my-package doesn't provide @temporalio/workflow (pd62775), requested by @temporalio/interceptors-opentelemetry.\n```\n\n[`YN0002` is caused by missing peer dependencies](https://yarnpkg.com/advanced/error-codes#yn0002---missing_peer_dependency). To clear these messages, I would have to add dependencies on those other libraries. Except it does not make sense for my app that only uses `@temporalio/client` to depend on those other libraries (except maybe `@temporalio/common`).\n\nThe proper fix would be to not have these peer dependencies, or split `@temporalio/interceptors-opentelemetry` into separate packages for clients/workflows/activities.\n\n### Minimal Reproduction\n\n<!-- \nModify our hello world templates to demonstrate:\n\n- TypeScript: https://github.com/temporalio/samples-typescript/tree/main/hello-world\n- Go: https://github.com/temporalio/money-transfer-project-template-go\n- Java: https://github.com/temporalio/money-transfer-project-template-java\n- PHP: https://github.com/temporalio/samples-php#samples\n-->\n\nCreate an app that depends on `@temporalio/interceptors-opentelemetry` with Yarn.\n\n### Environment/Versions\n\n<!-- Please complete the following information where relevant. -->\n\n- OS and processor: Linux\n- Temporal SDK Version: 1.13.0\n- Yarn version: 4.9.4\n\n### Additional context\n\n<!-- Add any other context about the problem here. -->\n","closedAt":"2025-10-29T17:15:28Z","comments":[{"id":"IC_kwDOEujx187Hn_tV","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"No, those dependencies should not get removed, or users would get other kind of errors. And splitting each of these to different packages would make proper configuration of this much more difficult on users.\n\nThe correct thing to do would be to add a `peerDependenciesMeta.*.optional: true` entry for all `@temporalio/*` dependencies. That should be pretty easy. The tricky thing, however, is that we'll need to make sure that the code is prepared to detect missing packages at run time, and handle these gracefully.","createdAt":"2025-09-29T21:40:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1785#issuecomment-3349150549","viewerDidAuthor":false}],"createdAt":"2025-09-17T14:34:50Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1785,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Remove peer dependencies from @temporalio/interceptors-opentelemetry","updatedAt":"2025-10-29T17:15:28Z","url":"https://github.com/temporalio/sdk-typescript/issues/1785"}
