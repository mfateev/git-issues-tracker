{"assignees":[],"author":{"id":"MDQ6VXNlcjc3MzAxNjcw","is_bot":false,"login":"alex-statsig","name":"Alex Coleman"},"body":"### Is your feature request related to a problem? Please describe.\n\nCurrently if you create a run and want to observe the result, the most straightforward approach is to call `await handle.result()` which uses `await client.result(...)`. Sometimes you may want to attempt to get the result but not wait forever for the run to finish (the run may have a large timeout, and you just want to attempt to wait for it briefly). However, the current implementation of `handle.result()` / `client.result()` provides no mechanism to cancel the awaiting. The function seems to trigger an infinite loop [here](https://github.com/temporalio/sdk-typescript/blob/0097ccf14fb754ba5e1197d5dbc4ff48d80c1cba/packages/client/src/workflow-client.ts#L785), which will continue polling until the job is completed. This is a leak that can't be cleaned up by the caller (and likely the caller's scope will leak in any promise handlers, even with use of something like `Promise.race`).\n\n### Describe the solution you'd like\n\nThe `result()` functions should accept an `AbortSignal` (or a timeout, but `AbortSignal` is maybe a better generalization) to allow for cancellation of the polling. Then the caller may do something like `await handle.result({signal: AbortSignal.timeout(10000)})` to wait up to 10s for the job completion (even if the job has a much longer timeout like 1 hour)\n\n### Additional context\nI believe a manual polling of the run status could work around this, but the `.result()` function provides much more convenience around following dependent runs. I think it would be valuable and fairly straightforward to just build this support in natively.","closedAt":"2025-05-15T05:40:31Z","comments":[{"id":"IC_kwDOEujx186r0FrF","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"This is already possible!\n\nYou can apply a timeout or an abort signal over _any_ client request (including raw gRPC requests) by using the `client.withTimeout(...)` and `client.withAbortSignal(...)` methods.","createdAt":"2025-05-15T05:40:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1682#issuecomment-2882558661","viewerDidAuthor":false},{"id":"IC_kwDOEujx186r-Jex","author":{"login":"alex-statsig"},"authorAssociation":"NONE","body":"Thanks so much for sharing this @mjameswh, this is exactly what I was looking for! I was on an old version and failed to find this in my issues search","createdAt":"2025-05-15T22:32:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/1682#issuecomment-2885195697","viewerDidAuthor":false}],"createdAt":"2025-04-18T19:05:14Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1682,"reactionGroups":[],"state":"CLOSED","title":"[Feature Request] Allow cancel polling of `client.result()` (via timeout / AbortSignal) to stop leak","updatedAt":"2025-05-15T22:32:23Z","url":"https://github.com/temporalio/sdk-typescript/issues/1682"}
