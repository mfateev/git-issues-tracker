{"assignees":[],"author":{"id":"MDQ6VXNlcjUxNzY4Mw==","is_bot":false,"login":"Sushisource","name":"Spencer Judge"},"body":"### Describe the bug\r\n\r\nWhile writing a new integ test I tried to load the fake progress activity directly from `activities/fake-progress.ts` like so:\r\n\r\n```ts\r\nimport * as fakeProgAct from '../activities/fake-progress';\r\n\r\nconst { fakeProgress } = createActivityHandle<typeof fakeProgAct>({\r\n  startToCloseTimeout: '5s',\r\n  scheduleToCloseTimeout: '10s',\r\n  heartbeatTimeout: '3s',\r\n  cancellationType: ActivityCancellationType.WAIT_CANCELLATION_COMPLETED,\r\n});\r\n```\r\n\r\nBut, the workflow would then run the `fakeProgress` wrapper defined in `activities/index.js` even though a user would expect that not to happen.\r\n\r\n### To Reproduce\r\n:point_up: \r\n\r\n### Expected behavior\r\n\r\nThe imported activity should be the activity that gets run, or if that's not reasonable to fix, we should at least throw some kind of error about having conflicting names at registration time.\r\n\r\n### Screenshots/Terminal output\r\n\r\n<!-- If applicable, add screenshots or code blocks to help explain your problem. You can also use [Loom](http://loom.com/) to do short, free video bug reports. -->\r\n\r\n### Versions\r\nmaster\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n","closedAt":"2021-10-14T21:14:06Z","comments":[{"id":"IC_kwDOEujx18433mSB","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Workflows can't import activity implementations, only type definitions, these types are lost at runtime.\r\nDue to this limitation it isn't possible to \"fix\" the issue.\r\nThe best we can do is document how to properly use activities which is to use the same activities that are registered in the worker.\r\n`createActivityHandle` returns a `Proxy` object with the same type of the activity types passed in the template parameter, it gives us inference for both the activity names and signatures.\r\nAs a side note, this might happen when calling activities cross languages and services.","createdAt":"2021-10-06T23:27:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/283#issuecomment-937321601","viewerDidAuthor":false},{"id":"IC_kwDOEujx18433nhW","author":{"login":"Sushisource"},"authorAssociation":"MEMBER","body":"@bergundy What about the other option? Can we just barf at registration time if you define multiple same-named exports?","createdAt":"2021-10-06T23:40:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/283#issuecomment-937326678","viewerDidAuthor":false},{"id":"IC_kwDOEujx18433qDo","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Typescript already protects from that but only for a single file: `Cannot redeclare exported variable 'X'`.\r\nThere's nothing stopping a developer from defining activities in multiple files and exporting them all in an index file, I'd say it's good practice.","createdAt":"2021-10-07T00:08:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/283#issuecomment-937337064","viewerDidAuthor":false},{"id":"IC_kwDOEujx1844Gu4V","author":{"login":"Sushisource"},"authorAssociation":"MEMBER","body":"Reviving this to track giving users help in the event they run into weird webpack errors because of this.\r\n\r\nIt's super easy to have the IDE import your activity function for you and not realize what's going on and then webpack barfs all over your worker.\r\n\r\nWe should at least link to a FAQ \"Why am I getting webpack errors\" page when this happens","createdAt":"2021-10-12T18:48:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/283#issuecomment-941288981","viewerDidAuthor":false},{"id":"IC_kwDOEujx1844I8WP","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"@Sushisource this isn't the same error you got today AFAICT, you tried to run the activity directly, right?","createdAt":"2021-10-13T02:56:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/283#issuecomment-941868431","viewerDidAuthor":false}],"createdAt":"2021-10-06T22:44:26Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA3","name":"documentation","description":"Improvements or additions to documentation","color":"0075ca"},{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":283,"reactionGroups":[],"state":"CLOSED","title":"[Bug] It's too easy to get confused by importing an activity directly","updatedAt":"2021-10-14T21:14:06Z","url":"https://github.com/temporalio/sdk-typescript/issues/283"}
