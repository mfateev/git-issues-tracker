{"assignees":[],"author":{"id":"MDQ6VXNlcjI1MTI4OA==","is_bot":false,"login":"lorensr","name":"Loren ☺️"},"body":"Currently:\r\n\r\n- When there's a broken java test server release, it breaks users' automated testing.\r\n- When the latest released version doesn't have the test server asset at all, it breaks our user's `npm install`.\r\n\r\n![image](https://user-images.githubusercontent.com/251288/183937593-a3d725e5-95e6-4874-9e96-b27bef0b55ba.png)\r\n\r\nSolution:\r\n\r\nEither:\r\n- We depend on latest test server to work (will be added to CI https://github.com/temporalio/sdk-java/issues/1358) and latest release to have the test server, or\r\n- We add logic to the download script that tries previous versions if latest assets aren't present (helps with 2nd issue but not first)\r\n- We decouple, and put the latest known working version on a CDN (helps with both issues, but feels like duplicate effort if sdk-java has CI). Related: #782 ","closedAt":"2022-09-09T00:54:12Z","comments":[{"id":"IC_kwDOEujx185ILOM0","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Suggested fix after discussing with @Spikhalskiy is to point the `@temporalio/testing` package to a fixed test server version, that way there are no surprises.\r\nAnother option discussed was bundling the test server into the npm package but that'd increase the download size to 45 MB instead of 15 (and 60 or 75 MB when we have aarach64 releases).\r\n\r\n#782 will help avoid rate limit exceeded errors.","createdAt":"2022-08-10T15:51:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/811#issuecomment-1210901300","viewerDidAuthor":false},{"id":"IC_kwDOEujx185J_fJl","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"We can now rely on temporal.download to cache requests to GH so users don't get rate limited and we can control which version is served in the handler for that URL.","createdAt":"2022-09-09T00:54:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/811#issuecomment-1241379429","viewerDidAuthor":false}],"createdAt":"2022-08-10T15:03:23Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":811,"reactionGroups":[],"state":"CLOSED","title":"Improve test server download resilience","updatedAt":"2022-09-09T00:54:12Z","url":"https://github.com/temporalio/sdk-typescript/issues/811"}
