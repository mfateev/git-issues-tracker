{"assignees":[{"id":"MDQ6VXNlcjI1MTI4OA==","login":"lorensr","name":"Loren ‚ò∫Ô∏è","databaseId":0}],"author":{"id":"MDQ6VXNlcjI1MTI4OA==","is_bot":false,"login":"lorensr","name":"Loren ‚ò∫Ô∏è"},"body":"### Is your feature request related to a problem? Please describe.\r\n\r\n<!-- A clear and concise description of what the problem is. Ex. I'm always frustrated when [...] -->\r\nUsers needing or wanting to configure webpack in various ways.\r\n### Describe the solution you'd like\r\n\r\n<!-- A clear and concise description of what you want to happen. SCREENSHOTS OR CODE SAMPLES ARE VERY HELPFUL -->\r\n@mjameswh listed a couple ideas in https://github.com/temporalio/sdk-typescript/issues/516#issue-1162103439\r\n\r\n> Allow users to apply more generic overrides to the Webpack config. For example, an optional property webpackConfigOverrides could be added to BundleOptions. If it is there, that property would be merged with the default/calculated Webpack configuration. Alternatively, it could be an override function, which receive the default/calculated Webpack configuration, and returns the modified configuration (this is much more flexible, and easier from our point of view, more harder to work with for developers). This is for example [how Gatsby works](https://www.gatsbyjs.com/docs/how-to/custom-configuration/add-custom-webpack-config/). This approach would not only solve the current issue, but also provide a way to deal with many other very custom needs that developers may have (think of.. Hey guys! We would like to use [define](https://webpack.js.org/plugins/define-plugin/) for our workflows üòÑ ) However, this would be more complex for developers to use, and arguably, there are not that many things that can be customized in Temporal's Webpack build process without risking breaking things.\r\n","closedAt":"2022-08-16T00:07:54Z","comments":[{"id":"IC_kwDOEujx184_medx","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Related: https://github.com/temporalio/sdk-typescript/issues/483","createdAt":"2022-03-14T16:46:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/537#issuecomment-1067050865","viewerDidAuthor":false},{"id":"IC_kwDOEujx184_raw5","author":{"login":"clarkdave"},"authorAssociation":"NONE","body":"It'd be great if we could adjust the webpack config!\r\n\r\nIn particular, my team would like to turn off type checking (i.e. pass the `transpileOnly` option to the `ts-loader`), because:\r\n\r\n- it's not needed for us because we do all our typechecking in a separate process already\r\n- it causes workers to crash for things like unused vars (annoying in development)\r\n- it can slow down the workflow bundle dramatically (typechecking on a large project can take tens of seconds)\r\n\r\nIt seems like it is just about possible to shim the (private) `WorkflowCodeBundler.prototype.compile` method, but it'd be a _lot_ easier if we could, say, have a method that allows to manipulate the webpack config before the compile takes place.\r\n\r\n---\r\n\r\nAs a test, I shimmed the `WorkflowCodeBundler.prototype.compile` method so it runs ts-loader using the `transpileOnly` option and it dropped our workflow bundle duration from **12 seconds** to **300ms**, which is a huge difference.","createdAt":"2022-03-15T18:55:39Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/temporalio/sdk-typescript/issues/537#issuecomment-1068346425","viewerDidAuthor":false},{"id":"IC_kwDOEujx184_vPFm","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"The time it takes to bundle workflows is definitely an issue, but I think that this should not be a use case for customization of the bundler's Webpack config... People would expect fast bundling to be the default, not an advanced scenario.\r\n\r\nBut now that it has been mentioned... Is there any reason for `transpileOnly` not being enabled by default? My understanding is that `ts-loader + transpileOnly` has essentially the same \"behaviour\" as using `swc-loader` (#525), which would now be the current loader had it not be for the `regenerator-runtime` bug (#534). Would there still be any _significant_ advantage to using `swc-loader` instead of `ts-loader+transpileOnly`?","createdAt":"2022-03-16T16:50:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/537#issuecomment-1069347174","viewerDidAuthor":false},{"id":"IC_kwDOEujx184_wzfr","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"> Is there any reason for transpileOnly not being enabled by default?\r\n\r\nIf there's a way to do that without losing the benefits you get from static type checking, I'd be totally on board.\r\nIn our samples we aim for ease of use, which is why we run with `ts-node`, I'd need to double check but if by using `ts-node` we get type checking, I think that'd be good enough.\r\nI also checked on the `ts-loader` README and they recommend using `transpileOnly` with the [fork-ts-checker-webpack-plugin](https://github.com/Realytics/fork-ts-checker-webpack-plugin), we should look into that too.\r\n\r\nHaving said that, I'm pretty sure we'd still get requests to customize our bundler so we will probably end up making it more extensible for those (presumably) rare cases.","createdAt":"2022-03-17T00:00:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/537#issuecomment-1069758443","viewerDidAuthor":false},{"id":"IC_kwDOEujx184_1eEZ","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"> If there's a way to do that without losing the benefits you get from static type checking, I'd be totally on board.\r\n\r\nIndeed. I'm also a big fan of static type checking in TS. I didn't knew that SWC actually performed type checking. That's definitely a big advantage over `ts-loader+transpileOnly`.\r\n\r\n>In our samples we aim for ease of use, which is why we run with ts-node, I'd need to double check but if by using ts-node we get type checking, I think that'd be good enough.\r\n\r\nI doubt this would work. `ts-node` will only typecheck TS files it gets to load at runtime. The Worker never loads workflow code inside its own execution context. The only time `ts-node` actually loads the workflow code is after it has been bundled, at which point the code is plain JS.","createdAt":"2022-03-17T15:14:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/537#issuecomment-1070981401","viewerDidAuthor":false},{"id":"IC_kwDOEujx185DxSIT","author":{"login":"Irvenae"},"authorAssociation":"NONE","body":"I see this issue got stale.\r\nMaybe there is already a way to do this, but I would like to use absolute paths in my application instead of relative ones.\r\nHowever, I can't get webpack configured to include my src directory as search path.\r\n\r\nIs this possible in a way?","createdAt":"2022-05-25T09:09:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/537#issuecomment-1136992787","viewerDidAuthor":false},{"id":"IC_kwDOEujx185EW8pI","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Looks like this isn't possible today, we'll prioritize this and hopefully get to it soon.","createdAt":"2022-06-05T19:01:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/537#issuecomment-1146866248","viewerDidAuthor":false}],"createdAt":"2022-03-14T16:40:22Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":537,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":10}}],"state":"CLOSED","title":"[Feature Request] Allow webpack configuration","updatedAt":"2022-08-17T18:37:50Z","url":"https://github.com/temporalio/sdk-typescript/issues/537"}
