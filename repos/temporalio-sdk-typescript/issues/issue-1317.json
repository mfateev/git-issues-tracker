{"assignees":[],"author":{"id":"MDQ6VXNlcjY0MTIxNjk=","is_bot":false,"login":"mjameswh","name":"James Watkins-Harvey"},"body":"### Describe the solution you'd like\r\n\r\nA Workflow Update carries an `updateId` field used to dedup updates. However, server side dedup is per-workflow-execution. Workflow implementers may have legitimate reasons to extend that guarantee across continue-as-new boundary.\r\n\r\nDoing that effectively require access to the `updateId`, which is not exposed to the update handler at the moment.\r\n\r\nWe should make this information accessible through an `updateInfo()` function.\r\n\r\n### Extra thoughts\r\n\r\n`updateInfo()` would rely on an `asyncLocalStorage` set just before invoking interceptors. It might be interesting to make that `asyncLocalStorage` more general, so that it also get set while handling queries and signals, thus providing more general execution context tracking, with only marginal extra difficulty. This could possibly allow providing similar `signalInfo()` and `queryInfo()` APIs (though there seems to be very limited use cases for that ATM), but also allow detecting stuff like workflow commands started from a query handler.","closedAt":"2024-06-28T16:36:55Z","comments":[{"id":"IC_kwDOEujx185uTTBQ","author":{"login":"Quinn-With-Two-Ns"},"authorAssociation":"MEMBER","body":"This feature also exists in the Go SDK","createdAt":"2023-12-11T17:36:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1317#issuecomment-1850552400","viewerDidAuthor":false},{"id":"IC_kwDOEujx185uTTNd","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"Note that, even though the update handler donâ€™t receive the `updateId`, workflow interceptors do. Therefore, in the mean time, one can capture the `updateId` form an interceptor, and make it accessible to your actual update handler code using an async local storage...","createdAt":"2023-12-11T17:37:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1317#issuecomment-1850553181","viewerDidAuthor":false}],"createdAt":"2023-12-11T17:35:45Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1317,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"state":"CLOSED","title":"[Feature Request] Expose `updateId` to Update handlers","updatedAt":"2024-06-28T16:36:55Z","url":"https://github.com/temporalio/sdk-typescript/issues/1317"}
