{"assignees":[],"author":{"id":"MDQ6VXNlcjI4Njc5","is_bot":false,"login":"joebowbeer","name":"Joe Bowbeer"},"body":"### What are you really trying to do?\r\n\r\nObserve code coverage of workflow unit tests.\r\n\r\n### Describe the bug\r\n\r\nAll of the workflow lines are reported as being Uncovered even though many are covered by tests.\r\n\r\n### Minimal Reproduction\r\n\r\n```bash\r\ngit checkout https://github.com/temporalio/temporal-pendulum\r\ncd position-node\r\nnvm use\r\nnpm i\r\nnpm t\r\n```\r\n\r\nNote: Because of #728 you may need to run tests twice.\r\n\r\nObserve that all of the workflow lines (29-56) are reported as Uncovered even though two signals and a query are tested.\r\n\r\n![pass](https://user-images.githubusercontent.com/28679/176032829-d7e1d7be-1f56-4547-9aca-d7cc6312db32.png)\r\n\r\n### Environment/Versions\r\n\r\nM1 Mac\r\n@temporal/testing 1.0.0-rc.0\r\nNode 16.15.1","closedAt":"2022-09-16T21:56:29Z","comments":[{"id":"IC_kwDOEujx185Fn8_7","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Thanks for reporting.\r\nThis is probably going to be tricky with the way workflow code executes in the sandbox","createdAt":"2022-06-28T01:17:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/729#issuecomment-1168101371","viewerDidAuthor":false},{"id":"IC_kwDOEujx185Kf3oi","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Closing since we now have the `@temporalio/nyc-test-coverage` package.","createdAt":"2022-09-16T21:56:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/729#issuecomment-1249868322","viewerDidAuthor":false}],"createdAt":"2022-06-27T20:52:08Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":729,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}},{"content":"EYES","users":{"totalCount":1}}],"state":"CLOSED","title":"[Bug] Missing code coverage in TestWorkflowEnvironment","updatedAt":"2022-09-16T21:56:30Z","url":"https://github.com/temporalio/sdk-typescript/issues/729"}
