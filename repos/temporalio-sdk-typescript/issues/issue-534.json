{"assignees":[],"author":{"id":"MDQ6VXNlcjI1MTI4OA==","is_bot":false,"login":"lorensr","name":"Loren ‚ò∫Ô∏è"},"body":"Version: `0.19.0`\r\n\r\nRunning a worker with `ts-node` sometimes* results in `swc-loader` including code with `require('regenerator-runtime')` in the bundle, which Webpack tries to resolve, and fails.\r\n\r\nRelated issue in `swc`: https://github.com/swc-project/swc/issues/1461\r\n\r\n*sometimes: works in `samples-typescript` repo, but not when using `@temporalio/create`\r\n\r\n### works\r\n\r\n```\r\ngit clone https://github.com/temporalio/samples-typescript.git\r\ncd samples-typescript/hello-world\r\nnpm i temporalio@0.19.0\r\nnpm start\r\n```\r\n\r\n### errors\r\n\r\n```\r\nnpx @temporalio/create@latest ./example\r\ncd example\r\nnpm i temporalio@0.19.0 @temporalio/worker@0.19.0\r\nnpm start\r\n\r\n...\r\n2022-03-12T23:27:08.424Z [ERROR] ERROR in ./src/workflows.ts 30:0-53\r\n2022-03-12T23:27:08.424Z [ERROR] Module not found: Error: Can't resolve 'regenerator-runtime' in '/Users/me/test/example/src'\r\n```\r\n\r\nIn both locations, `tsc && node lib/worker` works.","closedAt":"2022-04-18T23:58:48Z","comments":[{"id":"IC_kwDOEujx184_icvj","author":{"login":"julianocomg"},"authorAssociation":"CONTRIBUTOR","body":"@lorensr  Did you try installing regenerator-runtime as a dependency?","createdAt":"2022-03-13T00:58:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/534#issuecomment-1065995235","viewerDidAuthor":false},{"id":"IC_kwDOEujx184_idgt","author":{"login":"lorensr"},"authorAssociation":"CONTRIBUTOR","body":"Yes, adding it as a devDep is a workaround, but we'd like to figure out when/why it's included in the webpack bundle in the first place (we'd like to keep bundle size down, and it shouldn't be needed for our build target, Node 14+).","createdAt":"2022-03-13T01:18:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/534#issuecomment-1065998381","viewerDidAuthor":false},{"id":"IC_kwDOEujx184_oRE3","author":{"login":"lorensr"},"authorAssociation":"CONTRIBUTOR","body":"> We'll definitely want to support swc-loader we will consider making it the default, I just want to verify it works as expected and doesn't transform generators and async functions.\r\n‚ÄîRoey","createdAt":"2022-03-15T03:19:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/534#issuecomment-1067520311","viewerDidAuthor":false},{"id":"IC_kwDOEujx184_oRSo","author":{"login":"julianocomg"},"authorAssociation":"CONTRIBUTOR","body":"@lorensr can‚Äôt wait for that. thank you üôè","createdAt":"2022-03-15T03:21:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/534#issuecomment-1067521192","viewerDidAuthor":false},{"id":"IC_kwDOEujx184_py2d","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"If I paste the following code on https://swc.rs/playground, it seems that `regenerator-runtime` and `_asyncToGenerator` completely disappear once `target` is set at least to ES2017... Could be worth trying setting this option through `swc-loader`'s options...\r\n\r\n```\r\nimport { y } from 'abc';\r\n\r\nasync function asyncFunc() {\r\n    await y();\r\n}\r\n\r\nfunction *genFunc() {\r\n    yield 'a';\r\n    yield 'b';\r\n    yield 'c';\r\n}\r\n```","createdAt":"2022-03-15T12:18:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/534#issuecomment-1067920797","viewerDidAuthor":false},{"id":"IC_kwDOEujx185BrSFu","author":{"login":"lorensr"},"authorAssociation":"CONTRIBUTOR","body":"`swc-loader` included in `0.20.2`","createdAt":"2022-04-18T23:58:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/534#issuecomment-1101865326","viewerDidAuthor":false}],"createdAt":"2022-03-13T00:14:59Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":534,"reactionGroups":[],"state":"CLOSED","title":"[Bug] regenerator-runtime not found","updatedAt":"2022-04-18T23:58:48Z","url":"https://github.com/temporalio/sdk-typescript/issues/534"}
