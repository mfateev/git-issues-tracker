{"assignees":[],"author":{"id":"MDQ6VXNlcjE1OTkxMDIw","is_bot":false,"login":"solastley","name":"Solomon Astley"},"body":"### What are you really trying to do?\r\nTrying to add unit tests for my Temporal code by installing `@temporalio/testing`, writing unit tests which depend on it, and building/running the tests.\r\n\r\n### Describe the bug\r\nWhen I install both packages and attempt to run the tests (or run a worker locally), I get a namespace error:\r\n\r\n```\r\n/<redacted>/node_modules/protobufjs/src/namespace.js:239\r\n                throw Error(\"duplicate name '\" + object.name + \"' in \" + this);\r\n                      ^\r\nError: duplicate name 'ActivityHeartbeat' in Namespace coresdk\r\n    at Namespace.add (/<redacted>/node_modules/protobufjs/src/namespace.js:239:23)\r\n    at Root.add (/<redacted>/node_modules/protobufjs/src/namespace.js:232:28)\r\n    at Root.addJSON (/<redacted>/node_modules/protobufjs/src/namespace.js:172:16)\r\n    at Object.<anonymous> (/<redacted>/node_modules/@temporalio/worker/node_modules/@temporalio/proto/protos/json-module.js:7:2)\r\n    at Module._compile (node:internal/modules/cjs/loader:1126:14)\r\n    at Module._extensions..js (node:internal/modules/cjs/loader:1180:10)\r\n    at Object.require.extensions.<computed> [as .js] (/<redacted>/node_modules/ts-node/src/index.ts:1608:43)\r\n    at Module.load (node:internal/modules/cjs/loader:1004:32)\r\n    at Function.Module._load (node:internal/modules/cjs/loader:839:12)\r\n    at Module.require (node:internal/modules/cjs/loader:1028:19)\r\n```\r\n\r\n### Minimal Reproduction\r\nInstall `@temporalio/worker` and `@temporalio/testing`, try to run tests with jest.\r\n\r\n### Environment/Versions\r\nDevelopment environment\r\n\r\ndeps:\r\n```\r\n\"@temporalio/activity\": \"^1.7.0\",\r\n\"@temporalio/client\": \"^1.7.0\",\r\n\"@temporalio/worker\": \"^1.7.0\",\r\n\"@temporalio/workflow\": \"^1.7.0\",\r\n```\r\n\r\ndev deps:\r\n```\r\n\"@temporalio/testing\": \"^1.7.2\",\r\n```\r\n","closedAt":"2023-04-17T16:09:13Z","comments":[{"id":"IC_kwDOEujx185aGdeJ","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Please use the same version of of the `@temporalio/*` packages, it should prevent this from happening.","createdAt":"2023-04-17T15:56:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HOORAY","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/1100#issuecomment-1511643017","viewerDidAuthor":false},{"id":"IC_kwDOEujx185aGk6a","author":{"login":"solastley"},"authorAssociation":"NONE","body":"That fixed it, thanks for the quick reply! <3","createdAt":"2023-04-17T16:09:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1100#issuecomment-1511673498","viewerDidAuthor":false}],"createdAt":"2023-04-17T04:50:56Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1100,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Duplicate name error when @temporalio/worker and @temporalio/testing both installed","updatedAt":"2023-04-17T16:09:14Z","url":"https://github.com/temporalio/sdk-typescript/issues/1100"}
