{"assignees":[],"author":{"id":"MDQ6VXNlcjQzMzYyNjA=","is_bot":false,"login":"stellarhoof","name":"Alejandro Hernandez"},"body":"### What are you really trying to do?\r\n\r\nCancel an activity\r\n\r\n### Describe the bug\r\n\r\nThe first activity heartbeat is throttled, so the activity only gets cancelled after the first heartbeat is sent, which depends on the `heartbeatTimeout`\r\n\r\n### Minimal Reproduction\r\n\r\nChange the `heartbeatTimeout` in the [activities-cancellation-heartbeating](https://github.com/temporalio/samples-typescript/blob/main/activities-cancellation-heartbeating/src/workflows.ts#L6)] sample code to `10s` and verify that the activity is cancelled only right before the full `10s`\r\n\r\n### Environment/Versions\r\n\r\n<!-- Please complete the following information where relevant. -->\r\n\r\n- OS and processor: M1 Mac\r\n- Temporal Version: SDK version 1.6.0\r\n- Docker temporal server\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n","closedAt":"2023-02-16T01:24:30Z","comments":[{"id":"IC_kwDOEujx185VX5mu","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"The first heartbeat _is_ sent right away, the activity in the sample sleeps and then heartbeats though.\r\nEven if it did heartbeat first, you still might not get the cancellation delivered since that is timing sensitive and depends on when the cancellation is requested by the workflow.\r\n\r\nhttps://github.com/temporalio/samples-typescript/blob/ba6208155bc7b547c76931b7e14e92ce4594af28/activities-cancellation-heartbeating/src/activities.ts#L13","createdAt":"2023-02-16T01:24:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1053#issuecomment-1432328622","viewerDidAuthor":false}],"createdAt":"2023-02-11T15:58:38Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1053,"reactionGroups":[],"state":"CLOSED","title":"[Bug] First activity heartbeat not sent right away","updatedAt":"2023-02-16T01:24:30Z","url":"https://github.com/temporalio/sdk-typescript/issues/1053"}
