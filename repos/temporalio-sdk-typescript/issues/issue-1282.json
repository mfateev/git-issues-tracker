{"assignees":[],"author":{"id":"MDQ6VXNlcjEzODk1MDU3","is_bot":false,"login":"shawnjones253","name":"Shawn Jones"},"body":"### What are you really trying to do?\r\n\r\nFrom an activity:\r\n```\r\nContext.current().log.error('Kablamo!', new Error('THIS IS AN ERROR!!!'))\r\n```\r\n\r\n### Describe the bug\r\n\r\n```\r\nContext.current().log.error('Kablamo!', new Error('THIS IS AN ERROR!!!'))\r\n```\r\nproduces:\r\n```\r\n2023-11-08T02:17:00.169Z [ERROR] Kablamo! {\r\n  isLocal: false,\r\n  attempt: 10,\r\n  namespace: 'default',\r\n  taskToken: '...',\r\n  workflowId: 'do-stuff',\r\n  workflowRunId: '...,\r\n  workflowType: 'doStuffWorkflow',\r\n  activityId: '1',\r\n  activityType: 'doStuffActivity',\r\n  taskQueue: 'my-queue'\r\n}\r\n```\r\n\r\nThe log should contain an error object with at least the stack trace. This works for uncaught errors like:\r\n```\r\nthrow new Error('THIS IS AN ERROR!!!')\r\n```\r\n\r\nproduces:\r\n```\r\n2023-11-08T02:17:00.170Z [WARN] Activity failed {\r\n  isLocal: false,\r\n  attempt: 10,\r\n  namespace: 'default',\r\n  taskToken: '...',\r\n  workflowId: 'do-stuff',\r\n  workflowRunId: '...',\r\n  workflowType: 'doStuffWorkflow',\r\n  activityId: '1',\r\n  activityType: 'doStuffActivity',\r\n  taskQueue: 'my-queue',\r\n  error: Error: THIS IS AN ERROR!!!\r\n      at ...stackTrace...,\r\n  durationMs: 2\r\n}\r\n```\r\n\r\n### Environment/Versions\r\n\r\n- OS and processor: M1 Mac\r\n- Temporal Version: \"1.8.1\"\r\n- Are you using Docker or Kubernetes or building Temporal from source? Docker temporalio/auto-setup\r\n\r\n","closedAt":"2023-11-10T15:35:32Z","comments":[{"id":"IC_kwDOEujx185rpKmA","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"The second argument of `log.error` is a metadata object, not an error.\r\n\r\nThis works correctly:\r\n```\r\nContext.current().log.error('Kablamo!', { error: new Error('THIS IS AN ERROR!!!') })\r\n```","createdAt":"2023-11-10T15:35:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/1282#issuecomment-1805953408","viewerDidAuthor":false},{"id":"IC_kwDOEujx185rpNzE","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"> **Environment/Versions**\r\n> - Temporal Version: \"1.8.1\"\r\n\r\nBy the way, some significant bugs were fixed since TS SDK 1.8.1. You should really upgrade to 1.8.6.","createdAt":"2023-11-10T15:44:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/1282#issuecomment-1805966532","viewerDidAuthor":false}],"createdAt":"2023-11-08T02:28:20Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1282,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Activity logger does not serialize Error objects","updatedAt":"2023-11-10T15:44:34Z","url":"https://github.com/temporalio/sdk-typescript/issues/1282"}
