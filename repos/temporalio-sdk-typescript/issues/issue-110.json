{"assignees":[],"author":{"id":"MDQ6VXNlcjE2MjAyNjU=","is_bot":false,"login":"vkarpov15","name":"Valeri Karpov"},"body":"**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to https://docs.temporal.io/docs/node/getting-started/\r\n2. Follow steps\r\n3. Get below error when running `node lib/worker/schedule-workflow.js`:\r\n\r\n```\r\n2021-05-25T22:02:48.562Z [INFO] webpack 5.37.1 compiled successfully in 744 ms\r\n2021-05-25T22:02:48.696Z [INFO] Worker state changed { state: 'RUNNING' }\r\n2021-05-25T22:02:51.942Z [ERROR] Worker failed {\r\n  error: ValueError: Unknown encoding: ^P�)^F0�\r\n      at CompositeDataConverter.fromPayload (/home/val/Workspace/temporalio/example/node_modules/@temporalio/workflow/lib/converter/data-converter.js:29:19)\r\n      at /home/val/Workspace/temporalio/example/node_modules/@temporalio/workflow/lib/converter/data-converter.js:54:47\r\n      at Array.map (<anonymous>)\r\n      at Object.arrayFromPayloads (/home/val/Workspace/temporalio/example/node_modules/@temporalio/workflow/lib/converter/data-converter.js:54:20)\r\n      at /home/val/Workspace/temporalio/example/node_modules/@temporalio/worker/lib/worker.js:303:55\r\n      at rxjs_1.pipe.operators_1.mergeScan.state (/home/val/Workspace/temporalio/example/node_modules/@temporalio/worker/lib/rxutils.js:15:68)\r\n      at MergeScanSubscriber._next (/home/val/Workspace/temporalio/example/node_modules/rxjs/internal/operators/mergeScan.js:55:23)\r\n      at MergeScanSubscriber.Subscriber.next (/home/val/Workspace/temporalio/example/node_modules/rxjs/internal/Subscriber.js:66:18)\r\n      at Subject.next (/home/val/Workspace/temporalio/example/node_modules/rxjs/internal/Subject.js:60:25)\r\n      at GroupBySubscriber._group (/home/val/Workspace/temporalio/example/node_modules/rxjs/internal/operators/groupBy.js:98:19)\r\n}\r\n2021-05-25T22:02:51.943Z [INFO] Worker state changed { state: 'FAILED' }\r\n  May 25 18:02:51.943  WARNtemporal_sdk_core::workflow::concurrency_manager: Sending side of workflow machine creator was dropped. Likely the WorkflowConcurrencyManager was dropped. This indicates a failure to call shutdown.\r\n\r\n```\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\nNo error\r\n\r\n**Screenshots/Terminal ouput**\r\nIf applicable, add screenshots or code blocks to help explain your problem. You can also use [Loom](http://loom.com/) to do short, free video bug reports.\r\n\r\n![image](https://user-images.githubusercontent.com/1620265/119574933-3952ea00-bd84-11eb-8a9a-eda734016a2b.png)\r\n\r\n\r\n**Versions (please complete the following information where relevant):**\r\n - OS: [e.g. Mac, Windows, Linux]\r\n - Temporal Version [e.g. 1.7.0?]\r\n - are you using Docker or Kubernetes or building Temporal from source?\r\n\r\nXubuntu 18.04, Node v14.4.0, [@temporalio/create](https://www.npmjs.com/package/@temporalio/create) v0.3.0\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n","closedAt":"2021-06-30T20:56:49Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg0ODMxMTkzOA==","author":{"login":"vkarpov15"},"authorAssociation":"CONTRIBUTOR","body":"This problem goes away when I change task queue names, so I think it may be due to an old entry in the task queue causing issues.","createdAt":"2021-05-25T22:31:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/110#issuecomment-848311938","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0ODU4NDIyNQ==","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Sounds like you figured out the issue.\r\nYou can verify by listing open Workflows on you Temporal server and finding one that uses the default namespace and the tutorial task queue.\r\nIf you change the Worker [log level](https://docs.temporal.io/docs/node/logging/) to `DEBUG` you might find out some more information too.\r\nWe can definitely improve the error message and probably should prevent this sort of error from killing the Worker. ","createdAt":"2021-05-26T08:40:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/110#issuecomment-848584225","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0ODU4NjQxNQ==","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"TBH, I don't think we can improve the error message much, looks like the Payload metadata contains non-unicode characters https://github.com/temporalio/sdk-node/blob/a25c0feca791a195eb5e50cf8c0fd9e0b5a1db83/packages/workflow/src/converter/data-converter.ts#L65","createdAt":"2021-05-26T08:43:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/110#issuecomment-848586415","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0ODczNDUyMA==","author":{"login":"swyxio"},"authorAssociation":"CONTRIBUTOR","body":"use temporal, unleash cthulu!","createdAt":"2021-05-26T12:38:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/110#issuecomment-848734520","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg3MDExNTc5NQ==","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"@vkarpov15 can we close this?","createdAt":"2021-06-28T23:31:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/110#issuecomment-870115795","viewerDidAuthor":false}],"createdAt":"2021-05-25T22:08:47Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":110,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Getting a \"ValueError: Unknown Encoding: ^P�)^F0�\" error when running hello world sample app","updatedAt":"2021-06-30T20:56:49Z","url":"https://github.com/temporalio/sdk-typescript/issues/110"}
