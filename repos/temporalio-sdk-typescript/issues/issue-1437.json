{"assignees":[],"author":{"id":"MDQ6VXNlcjQyOTk2Nzkx","is_bot":false,"login":"tiberiu89","name":"Tiberiu Popa"},"body":"I'm using nestjs-temporal package, but I assume it would be the same with the nestjs typescript samples provided(if using nest start worker --watch). Everything is good at first run, but after code changes and nestjs reloading, the worker cannot restart, saying address port is already in use(3000). \r\nDoes anyone experienced this? Any ideas of a workaround would be appreciated. Manually restarting app is quite annoying.\r\n","closedAt":"2025-07-23T15:36:02Z","comments":[{"id":"IC_kwDOEujx186ArEL7","author":{"login":"tiberiu89"},"authorAssociation":"NONE","body":"Maybe to answer my question, I found one possible alternative\r\nWe can split a nestjs app, by creating a separate entry point and main module that would create standalone app(no http server).\r\nThen, edit the nest-cli.json to register this as a separate app. Code and modules can still be shared.\r\n\r\n```ts\r\nimport { NestFactory } from '@nestjs/core';\r\nimport { MainRuntimeModule } from './runtime.module';\r\n\r\nasync function bootstrap() {\r\n  await NestFactory.createApplicationContext(MainRuntimeModule);\r\n}\r\n\r\nbootstrap();\r\n```\r\nWe load the module that registers workers only here + everything you need from the main codebase.","createdAt":"2024-06-10T16:07:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1437#issuecomment-2158772987","viewerDidAuthor":false},{"id":"IC_kwDOEujx18644wkl","author":{"login":"jtomaszewski"},"authorAssociation":"NONE","body":"Does the tip mentioned in https://github.com/KurtzL/nestjs-temporal/issues/54#issuecomment-2179000500 fixes this problem for you? (Adding `app.enableShutdownHooks()`) It does to me.","createdAt":"2025-07-22T09:36:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1437#issuecomment-3101886757","viewerDidAuthor":false},{"id":"IC_kwDOEujx18649M-W","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"Is the Temporal SDK itself playing any role in this?\n\nI'd be inclined to close this ticket as non-actionable from our side.","createdAt":"2025-07-22T14:35:42Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/1437#issuecomment-3103051670","viewerDidAuthor":false},{"id":"IC_kwDOEujx18649tw7","author":{"login":"n3vrax"},"authorAssociation":"NONE","body":"It's been a while since I looked into this. It might have been fixed. From what I recall, I got to a satisfactory solution, maybe by using the tips mentioned here. And anyways, it was something happening in development. I would say this can be closed from my side.","createdAt":"2025-07-22T14:53:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/1437#issuecomment-3103185979","viewerDidAuthor":false}],"createdAt":"2024-06-10T15:20:38Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1437,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}},{"content":"CONFUSED","users":{"totalCount":1}},{"content":"EYES","users":{"totalCount":1}}],"state":"CLOSED","title":"[Bug] NestJS integration, app/worker hot reloading error","updatedAt":"2025-07-23T15:36:02Z","url":"https://github.com/temporalio/sdk-typescript/issues/1437"}
