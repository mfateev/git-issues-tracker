{"assignees":[],"author":{"id":"MDQ6VXNlcjQ1MDMxNjkw","is_bot":false,"login":"marcoboucas","name":"Marco Boucas"},"body":"### What are you really trying to do?\r\n\r\nWe were deploying a new version of our API and our CI worker failed with an error that seems to be linked to temporalio last version 1.3.0\r\n\r\n### Describe the bug\r\n\r\nIt seems like the version 1.3.0 of @temporalio/protos has a duplicated const declaration on top of the file\r\n\r\nOur package.json contains the following packages:\r\n```\r\n\"@temporalio/client\": \"^1.1.0\"\r\n```\r\n\r\nComplete version of the dependencies of our app\r\n```\r\n    \"@google-cloud/speech\": \"^4.4.0\",\r\n    \"@google-cloud/storage\": \"^6.1.0\",\r\n    \"@google-cloud/text-to-speech\": \"^3.4.0\",\r\n    \"@nestjs/axios\": \"^0.0.7\",\r\n    \"@nestjs/common\": \"^8.4.2\",\r\n    \"@nestjs/config\": \"^2.0.0\",\r\n    \"@nestjs/core\": \"^8.4.2\",\r\n    \"@nestjs/platform-express\": \"^8.4.2\",\r\n    \"@nestjs/platform-socket.io\": \"^8.4.3\",\r\n    \"@nestjs/schedule\": \"^1.0.2\",\r\n    \"@nestjs/swagger\": \"^5.2.0\",\r\n    \"@nestjs/terminus\": \"^8.0.6\",\r\n    \"@nestjs/typeorm\": \"^8.0.3\",\r\n    \"@nestjs/websockets\": \"^8.4.2\",\r\n    \"@temporalio/client\": \"1.1.0\",\r\n    \"@types/lodash\": \"^4.14.170\",\r\n    \"@types/uuid\": \"^8.3.0\",\r\n    \"class-transformer\": \"^0.4.0\",\r\n    \"class-validator\": \"^0.13.2\",\r\n    \"dotenv\": \"^8.2.0\",\r\n    \"joi\": \"^17.4.0\",\r\n    \"joi-to-swagger\": \"^6.0.1\",\r\n    \"js-yaml\": \"^4.1.0\",\r\n    \"lodash\": \"^4.17.21\",\r\n    \"pg\": \"^8.5.1\",\r\n    \"pumpify\": \"^2.0.1\",\r\n    \"reflect-metadata\": \"^0.1.13\",\r\n    \"rimraf\": \"^3.0.2\",\r\n    \"rxjs\": \"^7.5.5\",\r\n    \"socket.io\": \"^4.4.1\",\r\n    \"swagger-ui-express\": \"^4.1.6\",\r\n    \"tmp\": \"^0.2.1\",\r\n    \"typeorm\": \"^0.2.31\",\r\n    \"uuid\": \"^8.3.2\"\r\n```\r\n\r\nWe started having problems after the release of the 1.3.0 version of @temporalio/proto, and a switch back to the 1.1.0 version fixed the problem\r\n\r\n![Capture d’écran 2022-09-21 à 11 09 13](https://user-images.githubusercontent.com/45031690/191925740-025d20da-4b46-458c-87bf-d987e8387f50.png)\r\n\r\n\r\n### Minimal Reproduction\r\n\r\nBuild an app with nest, and in your package.json use the latest version of the temporalio/client seems to trigger an error for us\r\n\r\n### Environment/Versions\r\n\r\n\r\n- OS and processor: M1 Mac, Gitlab CI runner (node:16)\r\n- Temporal Version: 1.3.0\r\n- Are you using Docker or Kubernetes or building Temporal from source? no need to launch the temporal stack to trigger the error\r\n\r\n### Additional context\r\n\r\nWe have fixed this problem temporary by overriding all the versions of @temporalio libraries to 1.1.0\r\n","closedAt":"2022-10-03T07:39:17Z","comments":[{"id":"IC_kwDOEujx185K4xJv","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"I see it, we'll issue a fix soon.\r\nThanks for reporting.","createdAt":"2022-09-23T16:03:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/885#issuecomment-1256395375","viewerDidAuthor":false},{"id":"IC_kwDOEujx185K4yXW","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Found the issue.\r\nWe were compensating for the fact that `pbts` didn't add the `long` import in our proto generation script and just recently this was fixed: https://github.com/protobufjs/protobuf.js/blame/d0268490cb08d2f88e0aafd1d0eb673bd2d3c714/cli/pbts.js#L173.","createdAt":"2022-09-23T16:07:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HOORAY","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/885#issuecomment-1256400342","viewerDidAuthor":false},{"id":"IC_kwDOEujx185LZy5h","author":{"login":"marcoboucas"},"authorAssociation":"NONE","body":"This has been fixed in `1.4.0`, thanks a lot !","createdAt":"2022-10-03T07:39:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/885#issuecomment-1265053281","viewerDidAuthor":false}],"createdAt":"2022-09-23T09:09:41Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":885,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Duplicate identifier 'Long'","updatedAt":"2022-10-03T07:39:17Z","url":"https://github.com/temporalio/sdk-typescript/issues/885"}
