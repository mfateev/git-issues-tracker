{"assignees":[],"author":{"id":"MDQ6VXNlcjE3NDg2NA==","is_bot":false,"login":"knpwrs","name":"Ken Powers"},"body":"### What are you really trying to do?\r\n\r\nI am trying to pass `Context.current().cancellationSignal` to [`execa`](https://github.com/sindresorhus/execa) so child processes can be automatically killed when a workflow is cancelled.\r\n\r\n### Describe the bug\r\n\r\nTypeScript is not happy:\r\n\r\n```\r\nArgument of type 'import(\"/.../node_modules/abort-controller/dist/abort-controller\").AbortSignal' is not assignable to parameter of type 'AbortSignal'.\r\nType 'AbortSignal' is missing the following properties from type 'AbortSignal': reason, throwIfAborted\r\n```\r\n\r\nExeca expects a standard library `AbortSignal` and Temporal is using a third-party `AbortSignal`.\r\n\r\n### Additional context\r\n\r\nI saw that ceab74d9d608a0f808cd2a9f63012064800f5044 introduced the `abort-controller` dependency for compatibility with Node 14 as `AbortController` was introduced in Node 15. Does the SDK have any official support policy? There have been two LTS releases since Node 14 (Node 16 and Node 18), both of which support AbortController. Can we just drop the `abort-controller` dependency and use the standard library?\r\n","closedAt":"2023-03-07T20:22:34Z","comments":[{"id":"IC_kwDOEujx185V2njY","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Thanks for reporting, I wasn't aware of the type incompatibility.\r\n\r\nI'd have to think about this a bit more and test it out, but my current inclination is to keep the dependency as a polyfill for Node 14 and rely on the Node 16 types when exporting. We may have to manually add the `throwIfAborted` method to the objects we create.","createdAt":"2023-02-22T16:34:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1063#issuecomment-1440381144","viewerDidAuthor":false},{"id":"IC_kwDOEujx185V2pUQ","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"It seems like we can import `abort-controller/polyfill` instead, which will return the native implementation if there is one. I'll do some experiment with this.","createdAt":"2023-02-22T16:38:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1063#issuecomment-1440388368","viewerDidAuthor":false}],"createdAt":"2023-02-22T15:41:51Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1063,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Temporal does not use standard AbortController/AbortSignal typings","updatedAt":"2023-03-07T20:22:34Z","url":"https://github.com/temporalio/sdk-typescript/issues/1063"}
