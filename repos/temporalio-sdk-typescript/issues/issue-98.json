{"assignees":[],"author":{"id":"MDQ6VXNlcjUyMzA0","is_bot":false,"login":"bergundy","name":"Roey Berman"},"body":"**Describe the bug**\r\nWhen trying to connect the Worker to a server using the `tls-full` [sample](https://github.com/temporalio/customization-samples/tree/master/tls/tls-full), connection fails with `[TransportError: transport error: error trying to connect: invalid certificate: UnknownIssuer]`\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Follow the [mTLS tutorial](https://docs.temporal.io/docs/node/tls/#mtls-tutorial) but use `tls-full` instead of simple\r\n1. Run the Worker\r\n```shell\r\nTEMPORAL_ADDRESS=localhost \\\r\nTEMPORAL_NAMESPACE=accounting \\\r\nTEMPORAL_CLIENT_CERT_PATH=certs/client/accounting/client-accounting-namespace-chain.pem \\\r\nTEMPORAL_CLIENT_KEY_PATH=certs/client/accounting/client-accounting-namespace.key \\\r\nTEMPORAL_SERVER_NAME_OVERRIDE=accounting.cluster-x.contoso.com \\\r\nTEMPORAL_SERVER_ROOT_CA_CERT_PATH=certs/cluster/ca/server-intermediate-ca.pem \\\r\nnpm start\r\n```\r\n\r\n**Expected behavior**\r\nWorker should connect to server\r\n\r\n**Versions (please complete the following information where relevant):**\r\n - OS: Mac\r\n - Temporal Version: `temporalio/auto-setup@sha256:004f4440664f13c3b049eaad5c019c9f780082d8752655d01ef91e322b482097`\r\n\r\n**Additional context**\r\nTried using different certificates without success, seems like this is a MacOS issue, @Sushisource got it working on Linux.","closedAt":"2023-01-10T17:11:59Z","comments":[{"id":"IC_kwDOEujx1847c-DA","author":{"login":"liammurray"},"authorAssociation":"NONE","body":"I believe I am running into this, although I only see \"[TransportError: transport error]\". I can connect with tctl but not from my typescript SDK worker using the same certificates and client key. I also get the same error when I run the worker in a docker container (local and on a Linux node). ","createdAt":"2021-12-19T19:44:46Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/98#issuecomment-997449920","viewerDidAuthor":false},{"id":"IC_kwDOEujx1847fzz6","author":{"login":"liammurray"},"authorAssociation":"NONE","body":"I got it to work with just a root CA (no intermediate) by adding `-sha256` to the openssl commands generating the certs (it was defaulting to sha1, possibly due to something else I had going on). Once that was fixed I switched back to an end entity cert signed with an intermediate CA and I started getting \"Failed to connect before the deadline\" (due to \"unable to get issuer certificate\" as observed in grpc-js logs). I believe that is this issue: https://github.com/grpc/grpc-node/issues/1784.","createdAt":"2021-12-20T19:06:22Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/98#issuecomment-998194426","viewerDidAuthor":false}],"createdAt":"2021-05-18T11:06:50Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"},{"id":"MDU6TGFiZWwyNTQ1Mzg0MDE2","name":"good first issue","description":"Good for newcomers","color":"7057ff"}],"milestone":null,"number":98,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"[Bug] Intermediate certificates sample does not work on MacOS","updatedAt":"2023-01-10T17:11:59Z","url":"https://github.com/temporalio/sdk-typescript/issues/98"}
