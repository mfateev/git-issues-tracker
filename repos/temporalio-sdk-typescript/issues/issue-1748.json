{"assignees":[],"author":{"id":"MDQ6VXNlcjE4NjI1ODA=","is_bot":false,"login":"jtomaszewski","name":"Jacek Tomaszewski"},"body":"## Issue Description\n\nWhen running Temporal workers in test environments, the SDK outputs verbose worker state logs that cannot be suppressed, cluttering test output:\n\n```\n2025-07-22T11:47:49.603Z [INFO] Workflow bundle created { sdkComponent: 'worker', taskQueue: 'default', size: '1.15MB' }\n2025-07-22T11:47:50.708Z [INFO] Worker state changed { sdkComponent: 'worker', taskQueue: 'default', state: 'RUNNING' }\n2025-07-22T11:47:52.180Z [INFO] Worker state changed { sdkComponent: 'worker', taskQueue: 'default', state: 'STOPPING' }\n2025-07-22T11:47:52.181Z [INFO] Worker state changed { sdkComponent: 'worker', taskQueue: 'default', state: 'DRAINING' }\n2025-07-22T11:47:52.185Z [INFO] Worker state changed { sdkComponent: 'worker', taskQueue: 'default', state: 'DRAINED' }\n2025-07-22T11:47:52.185Z [INFO] Worker state changed { sdkComponent: 'worker', taskQueue: 'default', state: 'STOPPED' }\n```\n\n## Current Behavior\n- Setting `TEMPORAL_LOG_LEVEL=FATAL` doesn't suppress these logs\n- Worker `runtimeOptions.logger` configuration doesn't affect these logs\n- These logs appear to use an internal logging system that bypasses user configuration\n\n## Expected Behavior\nIn test environments, there should be a way to suppress worker lifecycle logs while preserving error logs for debugging.\n\n## Use Case\nRunning unit tests with workflows executing synchronously in-process. The verbose logs make it difficult to see actual test results and assertions.\n\n## Attempted Solutions\n```typescript\n// None of these suppress the worker state logs:\nworkerOptions: {\n  runtimeOptions: {\n    logger: {\n      info: () => {}, // Doesn't work\n      log: () => {},  // Doesn't work\n    },\n  },\n}\n\n// Environment variables also don't work:\nprocess.env.TEMPORAL_LOG_LEVEL = 'FATAL';\n```\n","closedAt":"2025-07-23T15:33:09Z","comments":[{"id":"IC_kwDOEujx1864-J6m","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"This is what you are looking for:\n\n```\nimport { DefaultLogger, Runtime } from '@temporalio/worker';\n\nRuntime.install({\n  logger: new DefaultLogger('WARN')\n})\n```\n\nSee [this doc page](https://docs.temporal.io/develop/typescript/observability#what-is-the-runtimes-logger) or [this sample](https://github.com/temporalio/samples-typescript/tree/ffdd555728fe7baf341553b8b99daa2a46408e25/custom-logger) for more advanced use cases, including controlling or capturing log messages emitted by the native Core SDK library, emitting log messages from Workflows and Activities, or piping log messages into a different logging system.\n\n> # Current Behavior\n> - Setting `TEMPORAL_LOG_LEVEL=FATAL` doesn't suppress these logs\n> - Worker `runtimeOptions.logger` configuration doesn't affect these logs\n> - These logs appear to use an internal logging system that bypasses user configuration\n\nTo clarify, are you saying you found those suggestions somewhere, e.g. our documentation? If so, can you please provide links to those? Those are definitely wrong and need to be fixed.\n\nAlso, which user configuration is being bypassed?","createdAt":"2025-07-22T15:14:47Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1748#issuecomment-3103301286","viewerDidAuthor":false},{"id":"IC_kwDOEujx1865I4Gx","author":{"login":"jtomaszewski"},"authorAssociation":"NONE","body":"1. The `Runtime.install({  logger: new DefaultLogger('WARN') })` does the thing for me. Thank you a lot.\n\n2. I've read the doc page, but it is very extensive. I was somehow missing simple information on what is the quickest way to increase/decrease the amount of logs. Perhaps we could add that small tip in here?\n\nhttps://docs.temporal.io/develop/typescript/observability#logging\n\nFor example, just under the _\"The Temporal SDK core normally uses WARN as its default logging level.\"_ .\n\n<img width=\"1119\" height=\"783\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/76e0d2ed-64f9-4a8b-ba32-4dbb571e7577\" />\n\n3. Furthermore, as I've just quoted, the docs say that WARN is the default logging level.\n\nIs it?\n\nI'm using `1.12.1` version of temporal libs (I've just installed them yesterday). Yet, I get info-level logs.\n\nI have to explicitly specify `runtimeOptions: { logger: new DefaultLogger(\"WARN\") }` to hide the info logs.\n\nSo perhaps the docs are not up-to-date?\n\nFYI, I'm registering the temporal workers through https://github.com/KurtzL/nestjs-temporal , but I've just browsed through its' source code, I don't think that library is changing the default logger anyhow.\n\n4. > To clarify, are you saying you found those suggestions somewhere, e.g. our documentation? If so, can you please provide links to those? Those are definitely wrong and need to be fixed.\n\nThat actually was Claude vibe-coding, so it might have come from nowhere - sorry.","createdAt":"2025-07-23T07:00:19Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1748#issuecomment-3106111921","viewerDidAuthor":false},{"id":"IC_kwDOEujx1865UcYV","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"> The Runtime.install({  logger: new DefaultLogger('WARN') }) does the thing for me.\n\nGreat!\n\n> The docs say that WARN is the default logging level. Is it?\n\nNo, the doc is wrong; that line was probably copied over from another language at some point, and not properly updated. The TS SDK prints out at `INFO` by default.\n\nThat level was set as the default in the early days of the SDK because that ensures logs would contain some of the key information we would need most of the time to diagnose basic issues that users would face in production. I have to admit that, these days, we almost never need to look at those log entries, so we could maybe consider upping the default to `WARN`, but that would be a breaking change for some users that might expect to see `INFO` level messages (e.g. from their Workflows and Activities) to appear in their logs. I'll discuss that with the rest of the team. Alternatively, we may reduce the log level on those specific messages.\n\n> Perhaps we could add that small tip in here?\n\nDefinitely. We have tons of samples that reconfigure the logger, yet looking for a reference in docs, I found nothing \"simple\" and \"direct\" on this.\n\nI'll definitely push that suggestion to our docs team.\n\n> That actually was Claude vibe-coding, so it might have come from nowhere.\n\nNo problem. Yeah, that's one thing we're seeing quite a lot these days.","createdAt":"2025-07-23T15:33:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1748#issuecomment-3109144085","viewerDidAuthor":false}],"createdAt":"2025-07-22T11:49:46Z","labels":[],"milestone":null,"number":1748,"reactionGroups":[],"state":"CLOSED","title":"Cannot suppress worker state logs in test environment","updatedAt":"2025-07-23T15:33:09Z","url":"https://github.com/temporalio/sdk-typescript/issues/1748"}
