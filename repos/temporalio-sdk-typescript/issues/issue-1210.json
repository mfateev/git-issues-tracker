{"assignees":[],"author":{"id":"MDQ6VXNlcjIxOTY1NTIx","is_bot":false,"login":"scott-rc","name":"Scott Côté"},"body":"### Is your feature request related to a problem? Please describe.\n<!-- A clear and concise description of what the problem is. Ex. I'm always frustrated when [...] -->\n\nMy team and I are using the following interceptor to capture exceptions from our activities and send them to our monitoring service.\n\n```ts\nexport class ActivityInboundExceptionInterceptor implements ActivityInboundCallsInterceptor {\n  public readonly info: Info;\n\n  constructor(ctx: Context) {\n    this.info = ctx.info;\n  }\n\n  async execute(input: ActivityExecuteInput, next: Next<ActivityInboundCallsInterceptor, \"execute\">): Promise<unknown> {\n    try {\n      return await next(input);\n    } catch (err: any) {\n      reportErrorForInvestigation(err, {\n        message: \"activity threw an uncaught exception\",\n        temporalInfo: this.info,\n      });\n      throw err;\n    }\n  }\n}\n```\n\nWhen one of our activities throws an unexpected exception, it works great! However, some of our workflows call activities that are likely to fail at first, but succeed eventually, so we configure them with a higher `retry.maximumAttempts`.\n\nWe'd like to only report exceptions that are thrown on the final attempt, but `ActivityInboundExceptionInterceptor` only knows which attempt the activity threw the exception on, it doesn't know how many attempts the activity has left. This causes us to send more exceptions to our monitoring service than we'd like.\n\n### Describe the solution you'd like\n<!-- A clear and concise description of what you want to happen. SCREENSHOTS OR CODE SAMPLES ARE VERY HELPFUL -->\n\nIdeally, [`info`](https://typescript.temporal.io/api/interfaces/activity.Info) would contain the `retry` options the activity was configured with or how many attempts the activity has left.\n\n","closedAt":"2025-04-30T14:37:30Z","comments":[{"id":"IC_kwDOEujx185k8byE","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"We should be able to expose this as it's available on the `PollActivityTaskQueueResponse` message: https://github.com/temporalio/api/blob/8f89bdc358642e1358876f164c7f4e663e225117/temporal/api/workflowservice/v1/request_response.proto#L419.\r\n\r\nI think sdk-core does not expose this field at the moment, so we'll have to start there.","createdAt":"2023-08-25T15:44:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HOORAY","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/1210#issuecomment-1693564036","viewerDidAuthor":false},{"id":"IC_kwDOEujx186LcneE","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"Even though [the protobuf definition](https://github.com/temporalio/api/blob/master/temporal/api/workflowservice/v1/request_response.proto#L446-L449) indeed contains a retry policy field, it looks like [the matching server](https://github.com/temporalio/temporal/blob/5bb4d5f5c56694921fe0023859e8ca2c51e5974c/service/matching/matching_engine.go#L2195-L2212) is actually not populating it, so the field is empty.\r\n\r\nI opened [a ticket](https://github.com/temporalio/temporal/issues/6502) on the server side.","createdAt":"2024-09-10T03:27:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1210#issuecomment-2339534724","viewerDidAuthor":false},{"id":"IC_kwDOEujx186paJdx","author":{"login":"maciejdudko"},"authorAssociation":"MEMBER","body":"Closing as duplicate in favor of the cross-SDK issue.","createdAt":"2025-04-30T14:37:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1210#issuecomment-2842204017","viewerDidAuthor":false}],"createdAt":"2023-08-21T19:31:49Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDEz","name":"enhancement","description":"New feature or request","color":"a2eeef"}],"milestone":null,"number":1210,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"[Feature Request] Add retry configuration to activity info","updatedAt":"2025-04-30T14:37:31Z","url":"https://github.com/temporalio/sdk-typescript/issues/1210"}
