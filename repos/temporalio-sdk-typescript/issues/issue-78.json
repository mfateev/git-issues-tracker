{"assignees":[],"author":{"id":"MDQ6VXNlcjI4Njc5","is_bot":false,"login":"joebowbeer","name":"Joe Bowbeer"},"body":"**Describe the bug**\r\nThe use of `@` aliases in the auto-generated packages is unnecessarily confusing and may increase the chance of unintended aliasing with 3rd party packages:\r\n\r\n```\r\n      paths: {\r\n        '@workflows': ['../workflows'],\r\n        '@workflows/*': ['../workflows/*'],\r\n        '@activities': ['../activities'],\r\n        '@activities/*': ['../activities/*'],\r\n        '@interfaces': ['../interfaces'],\r\n        '@interfaces/*': ['../interfaces/*'],\r\n      },\r\n```\r\n\r\nSource: https://github.com/temporalio/sdk-node/blob/main/packages/create-project/src/index.ts#L128\r\n\r\nFor many developers and code reviewers, the `@` prefix indicates a package scope, such as `@temporalio` and not an alias prefix.\r\n\r\nAt the least, I suggest changing to a different prefix that won't be confused with similarly-spelled package scopes. \r\n\r\nHowever, because of the many problems and surprises with path aliases (see below), my advice is to _not_ add them to auto-generated code. Rather, let the devs add them at their discretion.\r\n\r\n**Additional context**\r\nIn my experience, Typescript's path aliases have been a continual source of problems. I do use them on large projects, but I've made certain compromises in doing so, and always with the fear that there is yet another issue to be uncovered.\r\n\r\nFor example:\r\n\r\nhttps://mitchellsimoens.com/2019/08/07/why-typescript-paths-failed-me/\r\n","closedAt":"2021-05-20T13:58:11Z","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDgzMTY5ODQ0NQ==","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Hi,\r\n\r\nI'm totally fine with changing the prefix from `@`, do you have a suggestion for a better one?\r\nI've only seen `@` used for aliases before and FWIU that's what is commonly used.\r\n\r\nThe article has some really good points but they don't apply to us since we only use the aliases for type information meaning that the aliases are omitted from the generated code.\r\nThere's one thing I would change in the in package initializer and that's not to add aliases to the worker package.\r\nThe only aliases we should have is `@activities` and `@interfaces` in the workflow project and `@interfaces` in the activities package.\r\nWDYT?","createdAt":"2021-05-04T05:51:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/78#issuecomment-831698445","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzMTcyOTg5OA==","author":{"login":"joebowbeer"},"authorAssociation":"CONTRIBUTOR","body":"`~` is another common alias character. I'd prefer it to `@`.\r\n\r\nThe problems I have path aliases stem from the fact that they are designed for loaders that allow remapping, not for rewriting paths:\r\n\r\nhttps://github.com/microsoft/TypeScript/issues/10866#issuecomment-246789510","createdAt":"2021-05-04T07:11:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/78#issuecomment-831729898","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzMTc0OTA0MQ==","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"I'm fine with changing to `~` (even though it's also an alias to a user's home directory).\r\n\r\nWe have a custom module loader for the isolate runtime so that qualifies as a valid use case for path aliases.\r\nSee the worker code for loading activities [here](https://github.com/temporalio/sdk-node/blob/8ccedd2d4f186a5bc50019caea0bba7480dbc106/packages/worker/src/worker.ts#L387).\r\nAs for the `@interfaces` alias, it's supposed to only hold type definitions so it should be OK.\r\n\r\nDoes that make sense to you?","createdAt":"2021-05-04T07:49:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/78#issuecomment-831749041","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzMTc2MTM0MA==","author":{"login":"joebowbeer"},"authorAssociation":"CONTRIBUTOR","body":"Thanks for pointing me to the loader code.\r\n\r\nA potential issue with an `interfaces` path alias might be if they are published and later imported. I think the path aliases would need to be rewritten before publication, both in the published code and in the published ts types.","createdAt":"2021-05-04T08:12:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/78#issuecomment-831761340","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzMTc2MzQyMg==","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"That's a fair point.\r\nCan you try and reproduce this behavior?","createdAt":"2021-05-04T08:16:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/78#issuecomment-831763422","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzMTc3MjA0NQ==","author":{"login":"joebowbeer"},"authorAssociation":"CONTRIBUTOR","body":"> Can you try and reproduce this behavior?\r\n\r\nI think that's the first issue described here:\r\n\r\nhttps://mitchellsimoens.com/2019/08/07/why-typescript-paths-failed-me/\r\n\r\nTo repro, look at the generated code and `types.d.ts` output from `npm pack`\r\n\r\nI've used `ttsc` to translate the path aliases before publication.\r\n","createdAt":"2021-05-04T08:31:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/78#issuecomment-831772045","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzMTg0OTgyMw==","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Just reproduced it, thanks!\r\nThe aliases are definitely broken after `npm pack`.\r\nWe can get rid of the interfaces alias but we need the activities alias for the module loader.\r\nI suggest we either change the behavior of the module loader (not sure how yet) or live with the restriction that the project cannot be published.\r\n","createdAt":"2021-05-04T10:48:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/78#issuecomment-831849823","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzMTg3NDIzMQ==","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Or use ttsc as you've pointed out to keep the current behavior and support publishing.","createdAt":"2021-05-04T11:35:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/78#issuecomment-831874231","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0NTA1NzYwMQ==","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Once #106 is merged I think we can close this issue.\r\nThe only alias left is the special `@activities` alias which is required for our custom webpack resolver (https://github.com/temporalio/sdk-node/blob/d59051c732e961100ba75fdc431b742a489cfebb/packages/worker/src/isolate-builder.ts#L93).\r\nI'm OK with the `@` prefix and I believe it's not that confusing and is more commonly used than the alternative proposed here (`~`), we can easily make this configurable BTW.\r\n\r\nIf you feel strongly against this decision feel free to reopen the issue and continue the discussion.","createdAt":"2021-05-20T12:26:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/78#issuecomment-845057601","viewerDidAuthor":false}],"createdAt":"2021-04-30T00:21:25Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":78,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Path aliases easily confused with package scopes","updatedAt":"2021-05-20T13:58:11Z","url":"https://github.com/temporalio/sdk-typescript/issues/78"}
