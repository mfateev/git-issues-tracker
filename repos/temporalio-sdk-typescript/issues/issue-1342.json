{"assignees":[],"author":{"id":"MDQ6VXNlcjE5NzE4ODg0","is_bot":false,"login":"ksapchuk","name":"Kirill"},"body":"### What are you really trying to do?\r\nI updated to the latest typescript SDK 1.9.0 and the worker is failing to start with the `OtelCollectorExporter` settings enabled. \r\n\r\n### Describe the bug\r\nWhen calling `Runtime.install` the worker crashes with the following error. Passing in an empty `headers` map seems to work but the parameter is labeled optional and was not required in the previous SDK version. \r\n```\r\nFailed to build otlp exporter options: UninitializedField(\"headers\")\r\nTypeError: Failed to build otlp exporter options: UninitializedField(\"headers\")\r\n     at /Users/kirill/src/sparta/node_modules/@temporalio/core-bridge/index.js:16:14\r\n     at Function.create (/Users/kirill/src/sparta/node_modules/@temporalio/worker/src/runtime.ts:206:31)\r\n     at Function.install (/Users/kirill/src/sparta/node_modules/@temporalio/worker/src/runtime.ts:179:17)\r\n     at runWorker (/Users/kirill/src/sparta/packages/api/src/entrypoints/TemporalWorker.ts:305:11)\r\n     at start (/Users/kirill/src/sparta/packages/api/src/entrypoints/TemporalWorker.ts:517:9)\r\n     at processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n```\r\n\r\n### Minimal Reproduction\r\nThis fails\r\n```\r\n  Runtime.install({\r\n    telemetryOptions: {\r\n      metrics: {\r\n        otel: {\r\n          metricsExportInterval: '60s',\r\n          url: 'grpc://0.0.0.0:4316',\r\n        },\r\n      },\r\n    },\r\n  });\r\n```\r\nThis works\r\n```\r\n  Runtime.install({\r\n    telemetryOptions: {\r\n      metrics: {\r\n        otel: {\r\n          metricsExportInterval: '60s',\r\n          url: 'grpc://0.0.0.0:4316',\r\n          headers: {}\r\n        },\r\n      },\r\n    },\r\n  });\r\n```\r\n\r\n### Environment/Versions\r\n- OS and processor: M1 Mac\r\n- Temporal Version: typescript 1.9.0\r\n","closedAt":"2024-01-25T14:49:31Z","comments":[{"id":"IC_kwDOEujx185xNgDJ","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Thanks for reporting, this is an easy fix. We should take this on soon @mjameswh.","createdAt":"2024-01-18T23:12:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1342#issuecomment-1899364553","viewerDidAuthor":false}],"createdAt":"2024-01-17T21:13:14Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1342,"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"CLOSED","title":"[Bug] Runtime fails to start with OtelCollectorExporter configured","updatedAt":"2024-01-25T14:49:32Z","url":"https://github.com/temporalio/sdk-typescript/issues/1342"}
