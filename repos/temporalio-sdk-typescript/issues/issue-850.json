{"assignees":[],"author":{"id":"MDQ6VXNlcjM0NzIyNDYz","is_bot":false,"login":"noxasaxon","name":"Saxon"},"body":"### What are you really trying to do?\r\n\r\nbuild & run a Docker container that runs `Worker.create()` using the Temporal Typescript SDK.\r\n\r\n### Describe the bug\r\n\r\nFailure when running javascript that uses the Temporal SDK from a linux based docker container without `gcc` installed.\r\n\r\nI looked at other rust-based node libraries such as SWC and it looks like their node_modules package in my container includes both `linux-gnu` & `linux-musl` binaries while the temporal core-bridge only shows a `-gnu` binary, if that helps at all.\r\n\r\nError output :\r\n```\r\n/app/node_modules/@temporalio/core-bridge/index.js:10\r\n    throw err;\r\n    ^\r\n\r\nError: Error loading shared library ld-linux-x86-64.so.2: No such file or directory (needed by /app/node_modules/@temporalio/core-bridge/releases/x86_64-unknown-linux-gnu/index.node)\r\n    at Module._extensions..node (node:internal/modules/cjs/loader:1196:18)\r\n    at Module.load (node:internal/modules/cjs/loader:988:32)\r\n    at Module._load (node:internal/modules/cjs/loader:834:12)\r\n    at Module.require (node:internal/modules/cjs/loader:1012:19)\r\n    at require (node:internal/modules/cjs/helpers:102:18)\r\n    at Object.<anonymous> (/app/node_modules/@temporalio/core-bridge/index.js:5:20)\r\n    at Module._compile (node:internal/modules/cjs/loader:1112:14)\r\n    at Module._extensions..js (node:internal/modules/cjs/loader:1166:10)\r\n    at Module.load (node:internal/modules/cjs/loader:988:32)\r\n    at Module._load (node:internal/modules/cjs/loader:834:12) {\r\n  code: 'ERR_DLOPEN_FAILED'\r\n}\r\n\r\nNode.js v18.5.0\r\n```\r\n\r\n### Environment/Versions\r\n\r\n<!-- Please complete the following information where relevant. -->\r\n\r\n- intel mac pro 16 2020\r\n- SDK version 1.1.0 (issue also appears in previous version)\r\n- MacOS compiling linux docker container (container does not have gcc installed)\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n","closedAt":"2022-08-30T04:39:37Z","comments":[{"id":"IC_kwDOEujx185JJXEX","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"Using `musl` based images (such as Alpine) [is not supported](https://docs.temporal.io/typescript/production-deploy#do-not-use-alpine).\r\n\r\nCan you try with a glibc based image, such as `node`? In any case, you _don't_ need to have gcc installed.\r\n\r\nIf you want a lightweight image, you can consider using the `node-slim` base image, with the `ca-certificates` package added.","createdAt":"2022-08-25T12:27:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/850#issuecomment-1227190551","viewerDidAuthor":false},{"id":"IC_kwDOEujx185JYZTe","author":{"login":"bergundy"},"authorAssociation":"MEMBER","body":"Closing this, itâ€™s a documented limitation https://docs.temporal.io/typescript/production-deploy#do-not-use-alpine.\r\nWe might support this in the future though.","createdAt":"2022-08-30T04:39:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/temporalio/sdk-typescript/issues/850#issuecomment-1231131870","viewerDidAuthor":false},{"id":"IC_kwDOEujx185JZV41","author":{"login":"noxasaxon"},"authorAssociation":"NONE","body":"Hey sorry for the delayed response, I had read those docs before and completely forgot about them while debugging other docker issues ðŸ¤¦ .\r\n\r\nSorry for the pings, musl support would be cool but its not a huge blocker for me.","createdAt":"2022-08-30T09:04:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/850#issuecomment-1231380021","viewerDidAuthor":false}],"createdAt":"2022-08-25T08:20:39Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":850,"reactionGroups":[],"state":"CLOSED","title":"[Bug] Error running Temporal SDK inside linux docker container (might need musl target?)","updatedAt":"2022-08-30T09:04:20Z","url":"https://github.com/temporalio/sdk-typescript/issues/850"}
