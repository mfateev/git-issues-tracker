{"assignees":[],"author":{"id":"MDQ6VXNlcjc0NzQ0MDY=","is_bot":false,"login":"kakopappa","name":"Aruna Tennakoon"},"body":"### What are you really trying to do?\r\n\r\nList workflows\r\n\r\n```\r\nconst response = await connection.workflowService.listWorkflowExecutions({\r\n        query: `WorkflowId = \"${history.workflowId}\"`, \r\n});\r\n\r\n```\r\n### Describe the bug\r\n\r\nList workflows without namespace throw an exception. It needs to be marked as mandatory\r\n\r\n```\r\nError: 3 INVALID_ARGUMENT: Namespace is empty.\r\n    at Object.callErrorFromStatus (\\@temporalio\\client\\node_modules\\@grpc\\grpc-js\\build\\src\\call.js:31:19)\r\n    at Object.onReceiveStatus (\\@temporalio\\client\\node_modules\\@grpc\\grpc-js\\build\\src\\client.js:195:52)\r\n    at \\@temporalio\\client\\node_modules\\@grpc\\grpc-js\\build\\src\\call-stream.js:111:35\r\n    at onReceiveStatus (\\@temporalio\\client\\lib\\grpc-retry.js:134:25)\r\n    at Object.onReceiveStatus (\\@temporalio\\client\\lib\\grpc-retry.js:137:17)\r\n    at InterceptingListenerImpl.onReceiveStatus (\\@temporalio\\client\\node_modules\\@grpc\\grpc-js\\build\\src\\call-stream.js:106:23)\r\n    at Object.onReceiveStatus (\\@temporalio\\client\\node_modules\\@grpc\\grpc-js\\build\\src\\client-interceptors.js:365:141)\r\n    at Object.onReceiveStatus (\\@temporalio\\client\\node_modules\\@grpc\\grpc-js\\build\\src\\client-interceptors.js:328:181)\r\n    at \\@temporalio\\client\\node_modules\\@grpc\\grpc-js\\build\\src\\call-stream.js:188:78\r\n    at processTicksAndRejections (node:internal/process/task_queues:78:11)\r\nfor call at\r\n    at ServiceClientImpl.makeUnaryRequest (\\@temporalio\\client\\node_modules\\@grpc\\grpc-js\\build\\src\\client.js:163:34)\r\n    at Service.rpcImpl (\\@temporalio\\client\\lib\\connection.js:216:33)\r\n    at Service.rpcCall (\\@temporalio\\proto\\node_modules\\protobufjs\\src\\rpc\\service.js:94:21)\r\n    at executor (\\@protobufjs\\aspromise\\index.js:44:16)\r\n    at new Promise (<anonymous>)\r\n    at Object.asPromise (\\@protobufjs\\aspromise\\index.js:28:12)\r\n    at Service.rpcCall (\\@temporalio\\proto\\node_modules\\protobufjs\\src\\rpc\\service.js:86:21)\r\n    at Service.listWorkflowExecutions (eval at Codegen (\\@protobufjs\\codegen\\index.js:50:33), <anonymous>:4:15)\r\n    at deleteTemporal (D:\\MyProjects\\sinric_pro\\server\\server\\services\\automation.service.js:99:57)\r\n    at processTicksAndRejections (node:internal/process/task_queues:96:5) {\r\n  code: 3,\r\n  details: 'Namespace is empty.',\r\n  metadata: Metadata {\r\n    internalRepr: Map(1) { 'content-type' => [Array] },\r\n    options: {}\r\n  }\r\n}\r\n```\r\n\r\n![image](https://github.com/temporalio/sdk-typescript/assets/7474406/5503f629-e0b9-4c6d-80e5-3d6e4307b74f)\r\n\r\nmus be\r\n\r\n```\r\n const response = await connection.workflowService.listWorkflowExecutions({\r\n        namespace: 'default',\r\n        query: `WorkflowId = \"${history.workflowId}\"`, \r\n});\r\n```\r\n\r\nUsing\r\n\r\n \"@temporalio/activity\": \"^1.9.0\",\r\n \"@temporalio/client\": \"^1.9.0\",\r\n \"@temporalio/worker\": \"^1.9.0\",\r\n \"@temporalio/workflow\": \"^1.9.0\",\r\n \r\n","closedAt":"2024-01-29T15:10:20Z","comments":[{"id":"IC_kwDOEujx185yIvJX","author":{"login":"mjameswh"},"authorAssociation":"MEMBER","body":"`connection.workflowService.*` is the low level gRPC API. Files there gets automatically generated from our [protobuf definitions](https://github.com/temporalio/api). Unfortunately, there is no way to have that generator mark required properties as non-optional (actually, the notion of a \"required\" property, as in \"it must be defined by the caller\", doesn't even exist in protobuf 3).\r\n\r\nI strongly recommend you use [client.workflow.list](https://typescript.temporal.io/api/classes/client.WorkflowClient#list) instead, which is the high level API to list workflows. It provides a more intuitive API, and handle pagination internally.","createdAt":"2024-01-29T15:10:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/temporalio/sdk-typescript/issues/1347#issuecomment-1914892887","viewerDidAuthor":false}],"createdAt":"2024-01-25T01:57:15Z","labels":[{"id":"MDU6TGFiZWwyNTQ1Mzg0MDA2","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":1347,"reactionGroups":[],"state":"CLOSED","title":"[Bug] listWorkflowExecutions without namespace throws an exception.","updatedAt":"2024-01-29T15:10:21Z","url":"https://github.com/temporalio/sdk-typescript/issues/1347"}
